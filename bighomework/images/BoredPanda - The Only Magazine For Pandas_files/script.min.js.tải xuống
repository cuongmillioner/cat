var mejs=mejs||{};if(mejs.version="2.18.1",mejs.meIndex=0,mejs.plugins={silverlight:[{version:[3,0],types:["video/mp4","video/m4v","video/mov","video/wmv","audio/wma","audio/m4a","audio/mp3","audio/wav","audio/mpeg"]}],flash:[{version:[9,0,124],types:["video/mp4","video/m4v","video/mov","video/flv","video/rtmp","video/x-flv","audio/flv","audio/x-flv","audio/mp3","audio/m4a","audio/mpeg","video/youtube","video/x-youtube","video/dailymotion","video/x-dailymotion","application/x-mpegURL"]}],youtube:[{version:null,types:["video/youtube","video/x-youtube","audio/youtube","audio/x-youtube"]}],vimeo:[{version:null,types:["video/vimeo","video/x-vimeo"]}]},mejs.Utility={encodeUrl:function(a){return encodeURIComponent(a)},escapeHTML:function(a){return a.toString().split("&").join("&amp;").split("<").join("&lt;").split('"').join("&quot;")},absolutizeUrl:function(a){var b=document.createElement("div");return b.innerHTML='<a href="'+this.escapeHTML(a)+'">x</a>',b.firstChild.href},getScriptPath:function(a){for(var b,c,d,e,f,g,h=0,i="",j="",k=document.getElementsByTagName("script"),l=k.length,m=a.length;l>h;h++){for(e=k[h].src,c=e.lastIndexOf("/"),c>-1?(g=e.substring(c+1),f=e.substring(0,c+1)):(g=e,f=""),b=0;m>b;b++)if(j=a[b],d=g.indexOf(j),d>-1){i=f;break}if(""!==i)break}return i},calculateTimeFormat:function(a,b,c){0>a&&(a=0),"undefined"==typeof c&&(c=25);var d=b.timeFormat,e=d[0],f=d[1]==d[0],g=f?2:1,h=":",i=Math.floor(a/3600)%24,j=Math.floor(a/60)%60,k=Math.floor(a%60),l=Math.floor((a%1*c).toFixed(3)),m=[[l,"f"],[k,"s"],[j,"m"],[i,"h"]];d.length<g&&(h=d[g]);for(var n=!1,o=0,p=m.length;p>o;o++)if(-1!==d.indexOf(m[o][1]))n=!0;else if(n){for(var q=!1,r=o;p>r;r++)if(m[r][0]>0){q=!0;break}if(!q)break;f||(d=e+d),d=m[o][1]+h+d,f&&(d=m[o][1]+d),e=m[o][1]}b.currentTimeFormat=d},twoDigitsString:function(a){return 10>a?"0"+a:String(a)},secondsToTimeCode:function(a,b){if(0>a&&(a=0),"object"!=typeof b){var c="m:ss";c=arguments[1]?"hh:mm:ss":c,c=arguments[2]?c+":ff":c,b={currentTimeFormat:c,framesPerSecond:arguments[3]||25}}var d=b.framesPerSecond;"undefined"==typeof d&&(d=25);var c=b.currentTimeFormat,e=Math.floor(a/3600)%24,f=Math.floor(a/60)%60,g=Math.floor(a%60),h=Math.floor((a%1*d).toFixed(3));lis=[[h,"f"],[g,"s"],[f,"m"],[e,"h"]];var j=c;for(i=0,len=lis.length;len>i;i++)j=j.replace(lis[i][1]+lis[i][1],this.twoDigitsString(lis[i][0])),j=j.replace(lis[i][1],lis[i][0]);return j},timeCodeToSeconds:function(a,b,c,d){"undefined"==typeof c?c=!1:"undefined"==typeof d&&(d=25);var e=a.split(":"),f=parseInt(e[0],10),g=parseInt(e[1],10),h=parseInt(e[2],10),i=0,j=0;return c&&(i=parseInt(e[3])/d),j=3600*f+60*g+h+i},convertSMPTEtoSeconds:function(a){if("string"!=typeof a)return!1;a=a.replace(",",".");var b=0,c=-1!=a.indexOf(".")?a.split(".")[1].length:0,d=1;a=a.split(":").reverse();for(var e=0;e<a.length;e++)d=1,e>0&&(d=Math.pow(60,e)),b+=Number(a[e])*d;return Number(b.toFixed(c))},removeSwf:function(a){var b=document.getElementById(a);b&&/object|embed/i.test(b.nodeName)&&(mejs.MediaFeatures.isIE?(b.style.display="none",function(){4==b.readyState?mejs.Utility.removeObjectInIE(a):setTimeout(arguments.callee,10)}()):b.parentNode.removeChild(b))},removeObjectInIE:function(a){var b=document.getElementById(a);if(b){for(var c in b)"function"==typeof b[c]&&(b[c]=null);b.parentNode.removeChild(b)}}},mejs.PluginDetector={hasPluginVersion:function(a,b){var c=this.plugins[a];return b[1]=b[1]||0,b[2]=b[2]||0,c[0]>b[0]||c[0]==b[0]&&c[1]>b[1]||c[0]==b[0]&&c[1]==b[1]&&c[2]>=b[2]?!0:!1},nav:window.navigator,ua:window.navigator.userAgent.toLowerCase(),plugins:[],addPlugin:function(a,b,c,d,e){this.plugins[a]=this.detectPlugin(b,c,d,e)},detectPlugin:function(a,b,c,d){var e,f,g,h=[0,0,0];if("undefined"!=typeof this.nav.plugins&&"object"==typeof this.nav.plugins[a]){if(e=this.nav.plugins[a].description,e&&("undefined"==typeof this.nav.mimeTypes||!this.nav.mimeTypes[b]||this.nav.mimeTypes[b].enabledPlugin))for(h=e.replace(a,"").replace(/^\s+/,"").replace(/\sr/gi,".").split("."),f=0;f<h.length;f++)h[f]=parseInt(h[f].match(/\d+/),10)}else if("undefined"!=typeof window.ActiveXObject)try{g=new ActiveXObject(c),g&&(h=d(g))}catch(i){}return h}},mejs.PluginDetector.addPlugin("flash","Shockwave Flash","application/x-shockwave-flash","ShockwaveFlash.ShockwaveFlash",function(a){var b=[],c=a.GetVariable("$version");return c&&(c=c.split(" ")[1].split(","),b=[parseInt(c[0],10),parseInt(c[1],10),parseInt(c[2],10)]),b}),mejs.PluginDetector.addPlugin("silverlight","Silverlight Plug-In","application/x-silverlight-2","AgControl.AgControl",function(a){var b=[0,0,0,0],c=function(a,b,c,d){for(;a.isVersionSupported(b[0]+"."+b[1]+"."+b[2]+"."+b[3]);)b[c]+=d;b[c]-=d};return c(a,b,0,1),c(a,b,1,1),c(a,b,2,1e4),c(a,b,2,1e3),c(a,b,2,100),c(a,b,2,10),c(a,b,2,1),c(a,b,3,1),b}),mejs.MediaFeatures={init:function(){var a,b,c=this,d=document,e=mejs.PluginDetector.nav,f=mejs.PluginDetector.ua.toLowerCase(),g=["source","track","audio","video"];c.isiPad=null!==f.match(/ipad/i),c.isiPhone=null!==f.match(/iphone/i),c.isiOS=c.isiPhone||c.isiPad,c.isAndroid=null!==f.match(/android/i),c.isBustedAndroid=null!==f.match(/android 2\.[12]/),c.isBustedNativeHTTPS="https:"===location.protocol&&(null!==f.match(/android [12]\./)||null!==f.match(/macintosh.* version.* safari/)),c.isIE=-1!=e.appName.toLowerCase().indexOf("microsoft")||null!==e.appName.toLowerCase().match(/trident/gi),c.isChrome=null!==f.match(/chrome/gi),c.isChromium=null!==f.match(/chromium/gi),c.isFirefox=null!==f.match(/firefox/gi),c.isWebkit=null!==f.match(/webkit/gi),c.isGecko=null!==f.match(/gecko/gi)&&!c.isWebkit&&!c.isIE,c.isOpera=null!==f.match(/opera/gi),c.hasTouch="ontouchstart"in window,c.svg=!!document.createElementNS&&!!document.createElementNS("http://www.w3.org/2000/svg","svg").createSVGRect;for(a=0;a<g.length;a++)b=document.createElement(g[a]);c.supportsMediaTag="undefined"!=typeof b.canPlayType||c.isBustedAndroid;try{b.canPlayType("video/mp4")}catch(h){c.supportsMediaTag=!1}c.hasSemiNativeFullScreen="undefined"!=typeof b.webkitEnterFullscreen,c.hasNativeFullscreen="undefined"!=typeof b.requestFullscreen,c.hasWebkitNativeFullScreen="undefined"!=typeof b.webkitRequestFullScreen,c.hasMozNativeFullScreen="undefined"!=typeof b.mozRequestFullScreen,c.hasMsNativeFullScreen="undefined"!=typeof b.msRequestFullscreen,c.hasTrueNativeFullScreen=c.hasWebkitNativeFullScreen||c.hasMozNativeFullScreen||c.hasMsNativeFullScreen,c.nativeFullScreenEnabled=c.hasTrueNativeFullScreen,c.hasMozNativeFullScreen?c.nativeFullScreenEnabled=document.mozFullScreenEnabled:c.hasMsNativeFullScreen&&(c.nativeFullScreenEnabled=document.msFullscreenEnabled),c.isChrome&&(c.hasSemiNativeFullScreen=!1),c.hasTrueNativeFullScreen&&(c.fullScreenEventName="",c.hasWebkitNativeFullScreen?c.fullScreenEventName="webkitfullscreenchange":c.hasMozNativeFullScreen?c.fullScreenEventName="mozfullscreenchange":c.hasMsNativeFullScreen&&(c.fullScreenEventName="MSFullscreenChange"),c.isFullScreen=function(){return c.hasMozNativeFullScreen?d.mozFullScreen:c.hasWebkitNativeFullScreen?d.webkitIsFullScreen:c.hasMsNativeFullScreen?null!==d.msFullscreenElement:void 0},c.requestFullScreen=function(a){c.hasWebkitNativeFullScreen?a.webkitRequestFullScreen():c.hasMozNativeFullScreen?a.mozRequestFullScreen():c.hasMsNativeFullScreen&&a.msRequestFullscreen()},c.cancelFullScreen=function(){c.hasWebkitNativeFullScreen?document.webkitCancelFullScreen():c.hasMozNativeFullScreen?document.mozCancelFullScreen():c.hasMsNativeFullScreen&&document.msExitFullscreen()}),c.hasSemiNativeFullScreen&&f.match(/mac os x 10_5/i)&&(c.hasNativeFullScreen=!1,c.hasSemiNativeFullScreen=!1)}},mejs.MediaFeatures.init(),mejs.HtmlMediaElement={pluginType:"native",isFullScreen:!1,setCurrentTime:function(a){this.currentTime=a},setMuted:function(a){this.muted=a},setVolume:function(a){this.volume=a},stop:function(){this.pause()},setSrc:function(a){for(var b=this.getElementsByTagName("source");b.length>0;)this.removeChild(b[0]);if("string"==typeof a)this.src=a;else{var c,d;for(c=0;c<a.length;c++)if(d=a[c],this.canPlayType(d.type)){this.src=d.src;break}}},setVideoSize:function(a,b){this.width=a,this.height=b}},mejs.PluginMediaElement=function(a,b,c){this.id=a,this.pluginType=b,this.src=c,this.events={},this.attributes={}},mejs.PluginMediaElement.prototype={pluginElement:null,pluginType:"",isFullScreen:!1,playbackRate:-1,defaultPlaybackRate:-1,seekable:[],played:[],paused:!0,ended:!1,seeking:!1,duration:0,error:null,tagName:"",muted:!1,volume:1,currentTime:0,play:function(){null!=this.pluginApi&&("youtube"==this.pluginType||"vimeo"==this.pluginType?this.pluginApi.playVideo():this.pluginApi.playMedia(),this.paused=!1)},load:function(){null!=this.pluginApi&&("youtube"==this.pluginType||"vimeo"==this.pluginType||this.pluginApi.loadMedia(),this.paused=!1)},pause:function(){null!=this.pluginApi&&("youtube"==this.pluginType||"vimeo"==this.pluginType?this.pluginApi.pauseVideo():this.pluginApi.pauseMedia(),this.paused=!0)},stop:function(){null!=this.pluginApi&&("youtube"==this.pluginType||"vimeo"==this.pluginType?this.pluginApi.stopVideo():this.pluginApi.stopMedia(),this.paused=!0)},canPlayType:function(a){var b,c,d,e=mejs.plugins[this.pluginType];for(b=0;b<e.length;b++)if(d=e[b],mejs.PluginDetector.hasPluginVersion(this.pluginType,d.version))for(c=0;c<d.types.length;c++)if(a==d.types[c])return"probably";return""},positionFullscreenButton:function(a,b,c){null!=this.pluginApi&&this.pluginApi.positionFullscreenButton&&this.pluginApi.positionFullscreenButton(Math.floor(a),Math.floor(b),c)},hideFullscreenButton:function(){null!=this.pluginApi&&this.pluginApi.hideFullscreenButton&&this.pluginApi.hideFullscreenButton()},setSrc:function(a){if("string"==typeof a)this.pluginApi.setSrc(mejs.Utility.absolutizeUrl(a)),this.src=mejs.Utility.absolutizeUrl(a);else{var b,c;for(b=0;b<a.length;b++)if(c=a[b],this.canPlayType(c.type)){this.pluginApi.setSrc(mejs.Utility.absolutizeUrl(c.src)),this.src=mejs.Utility.absolutizeUrl(c.src);break}}},setCurrentTime:function(a){null!=this.pluginApi&&("youtube"==this.pluginType||"vimeo"==this.pluginType?this.pluginApi.seekTo(a):this.pluginApi.setCurrentTime(a),this.currentTime=a)},setVolume:function(a){null!=this.pluginApi&&(this.pluginApi.setVolume("youtube"==this.pluginType?100*a:a),this.volume=a)},setMuted:function(a){null!=this.pluginApi&&("youtube"==this.pluginType?(a?this.pluginApi.mute():this.pluginApi.unMute(),this.muted=a,this.dispatchEvent({type:"volumechange"})):this.pluginApi.setMuted(a),this.muted=a)},setVideoSize:function(a,b){this.pluginElement&&this.pluginElement.style&&(this.pluginElement.style.width=a+"px",this.pluginElement.style.height=b+"px"),null!=this.pluginApi&&this.pluginApi.setVideoSize&&this.pluginApi.setVideoSize(a,b)},setFullscreen:function(a){null!=this.pluginApi&&this.pluginApi.setFullscreen&&this.pluginApi.setFullscreen(a)},enterFullScreen:function(){null!=this.pluginApi&&this.pluginApi.setFullscreen&&this.setFullscreen(!0)},exitFullScreen:function(){null!=this.pluginApi&&this.pluginApi.setFullscreen&&this.setFullscreen(!1)},addEventListener:function(a,b){this.events[a]=this.events[a]||[],this.events[a].push(b)},removeEventListener:function(a,b){if(!a)return this.events={},!0;var c=this.events[a];if(!c)return!0;if(!b)return this.events[a]=[],!0;for(var d=0;d<c.length;d++)if(c[d]===b)return this.events[a].splice(d,1),!0;return!1},dispatchEvent:function(a){var b,c=this.events[a.type];if(c)for(b=0;b<c.length;b++)c[b].apply(this,[a])},hasAttribute:function(a){return a in this.attributes},removeAttribute:function(a){delete this.attributes[a]},getAttribute:function(a){return this.hasAttribute(a)?this.attributes[a]:""},setAttribute:function(a,b){this.attributes[a]=b},remove:function(){mejs.Utility.removeSwf(this.pluginElement.id),mejs.MediaPluginBridge.unregisterPluginElement(this.pluginElement.id)}},mejs.MediaPluginBridge={pluginMediaElements:{},htmlMediaElements:{},registerPluginElement:function(a,b,c){this.pluginMediaElements[a]=b,this.htmlMediaElements[a]=c},unregisterPluginElement:function(a){delete this.pluginMediaElements[a],delete this.htmlMediaElements[a]},initPlugin:function(a){var b=this.pluginMediaElements[a],c=this.htmlMediaElements[a];if(b){switch(b.pluginType){case"flash":b.pluginElement=b.pluginApi=document.getElementById(a);break;case"silverlight":b.pluginElement=document.getElementById(b.id),b.pluginApi=b.pluginElement.Content.MediaElementJS}null!=b.pluginApi&&b.success&&b.success(b,c)}},fireEvent:function(a,b,c){var d,e,f,g=this.pluginMediaElements[a];if(g){d={type:b,target:g};for(e in c)g[e]=c[e],d[e]=c[e];f=c.bufferedTime||0,d.target.buffered=d.buffered={start:function(){return 0},end:function(){return f},length:1},g.dispatchEvent(d)}}},mejs.MediaElementDefaults={mode:"auto",plugins:["flash","silverlight","youtube","vimeo"],enablePluginDebug:!1,httpsBasicAuthSite:!1,type:"",pluginPath:mejs.Utility.getScriptPath(["mediaelement.js","mediaelement.min.js","mediaelement-and-player.js","mediaelement-and-player.min.js"]),flashName:"flashmediaelement.swf",flashStreamer:"",flashScriptAccess:"sameDomain",enablePluginSmoothing:!1,enablePseudoStreaming:!1,pseudoStreamingStartQueryParam:"start",silverlightName:"silverlightmediaelement.xap",defaultVideoWidth:480,defaultVideoHeight:270,pluginWidth:-1,pluginHeight:-1,pluginVars:[],timerRate:250,startVolume:.8,success:function(){},error:function(){}},mejs.MediaElement=function(a,b){return mejs.HtmlMediaElementShim.create(a,b)},mejs.HtmlMediaElementShim={create:function(a,b){var c,d,e={},f="string"==typeof a?document.getElementById(a):a,g=f.tagName.toLowerCase(),h="audio"===g||"video"===g,i=f.getAttribute(h?"src":"href"),j=f.getAttribute("poster"),k=f.getAttribute("autoplay"),l=f.getAttribute("preload"),m=f.getAttribute("controls");for(d in mejs.MediaElementDefaults)e[d]=mejs.MediaElementDefaults[d];for(d in b)e[d]=b[d];return i="undefined"==typeof i||null===i||""==i?null:i,j="undefined"==typeof j||null===j?"":j,l="undefined"==typeof l||null===l||"false"===l?"none":l,k=!("undefined"==typeof k||null===k||"false"===k),m=!("undefined"==typeof m||null===m||"false"===m),c=this.determinePlayback(f,e,mejs.MediaFeatures.supportsMediaTag,h,i),c.url=null!==c.url?mejs.Utility.absolutizeUrl(c.url):"","native"==c.method?(mejs.MediaFeatures.isBustedAndroid&&(f.src=c.url,f.addEventListener("click",function(){f.play()},!1)),this.updateNative(c,e,k,l)):""!==c.method?this.createPlugin(c,e,j,k,l,m):(this.createErrorMessage(c,e,j),this)},determinePlayback:function(a,b,c,d,e){var f,g,h,i,j,k,l,m,n,o,p,q=[],r={method:"",url:"",htmlMediaElement:a,isVideo:"audio"!=a.tagName.toLowerCase()};if("undefined"!=typeof b.type&&""!==b.type)if("string"==typeof b.type)q.push({type:b.type,url:e});else for(f=0;f<b.type.length;f++)q.push({type:b.type[f],url:e});else if(null!==e)k=this.formatType(e,a.getAttribute("type")),q.push({type:k,url:e});else for(f=0;f<a.childNodes.length;f++)j=a.childNodes[f],1==j.nodeType&&"source"==j.tagName.toLowerCase()&&(e=j.getAttribute("src"),k=this.formatType(e,j.getAttribute("type")),p=j.getAttribute("media"),(!p||!window.matchMedia||window.matchMedia&&window.matchMedia(p).matches)&&q.push({type:k,url:e}));if(!d&&q.length>0&&null!==q[0].url&&this.getTypeFromFile(q[0].url).indexOf("audio")>-1&&(r.isVideo=!1),mejs.MediaFeatures.isBustedAndroid&&(a.canPlayType=function(a){return null!==a.match(/video\/(mp4|m4v)/gi)?"maybe":""}),!(!c||"auto"!==b.mode&&"auto_plugin"!==b.mode&&"native"!==b.mode||mejs.MediaFeatures.isBustedNativeHTTPS&&b.httpsBasicAuthSite===!0)){for(d||(o=document.createElement(r.isVideo?"video":"audio"),a.parentNode.insertBefore(o,a),a.style.display="none",r.htmlMediaElement=a=o),f=0;f<q.length;f++)if("video/m3u8"==q[f].type||""!==a.canPlayType(q[f].type).replace(/no/,"")||""!==a.canPlayType(q[f].type.replace(/mp3/,"mpeg")).replace(/no/,"")||""!==a.canPlayType(q[f].type.replace(/m4a/,"mp4")).replace(/no/,"")){r.method="native",r.url=q[f].url;break}if("native"===r.method&&(null!==r.url&&(a.src=r.url),"auto_plugin"!==b.mode))return r}if("auto"===b.mode||"auto_plugin"===b.mode||"shim"===b.mode)for(f=0;f<q.length;f++)for(k=q[f].type,g=0;g<b.plugins.length;g++)for(l=b.plugins[g],m=mejs.plugins[l],h=0;h<m.length;h++)if(n=m[h],null==n.version||mejs.PluginDetector.hasPluginVersion(l,n.version))for(i=0;i<n.types.length;i++)if(k.toLowerCase()==n.types[i].toLowerCase())return r.method=l,r.url=q[f].url,r;return"auto_plugin"===b.mode&&"native"===r.method?r:(""===r.method&&q.length>0&&(r.url=q[0].url),r)},formatType:function(a,b){return a&&!b?this.getTypeFromFile(a):b&&~b.indexOf(";")?b.substr(0,b.indexOf(";")):b},getTypeFromFile:function(a){a=a.split("?")[0];var b=a.substring(a.lastIndexOf(".")+1).toLowerCase(),c=/(mp4|m4v|ogg|ogv|m3u8|webm|webmv|flv|wmv|mpeg|mov)/gi.test(b)?"video/":"audio/";return this.getTypeFromExtension(b,c)},getTypeFromExtension:function(a,b){switch(b=b||"",a){case"mp4":case"m4v":case"m4a":case"f4v":case"f4a":return b+"mp4";case"flv":return b+"x-flv";case"webm":case"webma":case"webmv":return b+"webm";case"ogg":case"oga":case"ogv":return b+"ogg";case"m3u8":return"application/x-mpegurl";case"ts":return b+"mp2t";default:return b+a}},createErrorMessage:function(a,b,c){var d=a.htmlMediaElement,e=document.createElement("div"),f=b.customError;e.className="me-cannotplay";try{e.style.width=d.width+"px",e.style.height=d.height+"px"}catch(g){}f||(f='<a href="'+a.url+'">',""!==c&&(f+='<img src="'+c+'" width="100%" height="100%" alt="" />'),f+="<span>"+mejs.i18n.t("Download File")+"</span></a>"),e.innerHTML=f,d.parentNode.insertBefore(e,d),d.style.display="none",b.error(d)},createPlugin:function(a,b,c,d,e,f){var g,h,i,j=a.htmlMediaElement,k=1,l=1,m="me_"+a.method+"_"+mejs.meIndex++,n=new mejs.PluginMediaElement(m,a.method,a.url),o=document.createElement("div");n.tagName=j.tagName;for(var p=0;p<j.attributes.length;p++){var q=j.attributes[p];q.specified&&n.setAttribute(q.name,q.value)}for(h=j.parentNode;null!==h&&null!=h.tagName&&"body"!==h.tagName.toLowerCase()&&null!=h.parentNode&&null!=h.parentNode.tagName&&null!=h.parentNode.constructor&&"ShadowRoot"===h.parentNode.constructor.name;){if("p"===h.parentNode.tagName.toLowerCase()){h.parentNode.parentNode.insertBefore(h,h.parentNode);break}h=h.parentNode}switch(a.isVideo?(k=b.pluginWidth>0?b.pluginWidth:b.videoWidth>0?b.videoWidth:null!==j.getAttribute("width")?j.getAttribute("width"):b.defaultVideoWidth,l=b.pluginHeight>0?b.pluginHeight:b.videoHeight>0?b.videoHeight:null!==j.getAttribute("height")?j.getAttribute("height"):b.defaultVideoHeight,k=mejs.Utility.encodeUrl(k),l=mejs.Utility.encodeUrl(l)):b.enablePluginDebug&&(k=320,l=240),n.success=b.success,mejs.MediaPluginBridge.registerPluginElement(m,n,j),o.className="me-plugin",o.id=m+"_container",a.isVideo?j.parentNode.insertBefore(o,j):document.body.insertBefore(o,document.body.childNodes[0]),i=["id="+m,"jsinitfunction=mejs.MediaPluginBridge.initPlugin","jscallbackfunction=mejs.MediaPluginBridge.fireEvent","isvideo="+(a.isVideo?"true":"false"),"autoplay="+(d?"true":"false"),"preload="+e,"width="+k,"startvolume="+b.startVolume,"timerrate="+b.timerRate,"flashstreamer="+b.flashStreamer,"height="+l,"pseudostreamstart="+b.pseudoStreamingStartQueryParam],null!==a.url&&i.push("flash"==a.method?"file="+mejs.Utility.encodeUrl(a.url):"file="+a.url),b.enablePluginDebug&&i.push("debug=true"),b.enablePluginSmoothing&&i.push("smoothing=true"),b.enablePseudoStreaming&&i.push("pseudostreaming=true"),f&&i.push("controls=true"),b.pluginVars&&(i=i.concat(b.pluginVars)),a.method){case"silverlight":o.innerHTML='<object data="data:application/x-silverlight-2," type="application/x-silverlight-2" id="'+m+'" name="'+m+'" width="'+k+'" height="'+l+'" class="mejs-shim"><param name="initParams" value="'+i.join(",")+'" /><param name="windowless" value="true" /><param name="background" value="black" /><param name="minRuntimeVersion" value="3.0.0.0" /><param name="autoUpgrade" value="true" /><param name="source" value="'+b.pluginPath+b.silverlightName+'" /></object>';break;case"flash":mejs.MediaFeatures.isIE?(g=document.createElement("div"),o.appendChild(g),g.outerHTML='<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" codebase="//download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab" id="'+m+'" width="'+k+'" height="'+l+'" class="mejs-shim"><param name="movie" value="'+b.pluginPath+b.flashName+"?"+(new Date).getTime()+'" /><param name="flashvars" value="'+i.join("&amp;")+'" /><param name="quality" value="high" /><param name="bgcolor" value="#000000" /><param name="wmode" value="transparent" /><param name="allowScriptAccess" value="'+b.flashScriptAccess+'" /><param name="allowFullScreen" value="true" /><param name="scale" value="default" /></object>'):o.innerHTML='<embed id="'+m+'" name="'+m+'" play="true" loop="false" quality="high" bgcolor="#000000" wmode="transparent" allowScriptAccess="'+b.flashScriptAccess+'" allowFullScreen="true" type="application/x-shockwave-flash" pluginspage="//www.macromedia.com/go/getflashplayer" src="'+b.pluginPath+b.flashName+'" flashvars="'+i.join("&")+'" width="'+k+'" height="'+l+'" scale="default"class="mejs-shim"></embed>';break;case"youtube":var r;-1!=a.url.lastIndexOf("youtu.be")?(r=a.url.substr(a.url.lastIndexOf("/")+1),-1!=r.indexOf("?")&&(r=r.substr(0,r.indexOf("?")))):r=a.url.substr(a.url.lastIndexOf("=")+1),youtubeSettings={container:o,containerId:o.id,pluginMediaElement:n,pluginId:m,videoId:r,height:l,width:k},mejs.PluginDetector.hasPluginVersion("flash",[10,0,0])?mejs.YouTubeApi.createFlash(youtubeSettings,b):mejs.YouTubeApi.enqueueIframe(youtubeSettings);break;case"vimeo":var s=m+"_player";if(n.vimeoid=a.url.substr(a.url.lastIndexOf("/")+1),o.innerHTML='<iframe src="//player.vimeo.com/video/'+n.vimeoid+"?api=1&portrait=0&byline=0&title=0&player_id="+s+'" width="'+k+'" height="'+l+'" frameborder="0" class="mejs-shim" id="'+s+'" webkitallowfullscreen mozallowfullscreen allowfullscreen></iframe>',"function"==typeof $f){var t=$f(o.childNodes[0]);t.addEvent("ready",function(){function a(a,b,c,d){var e={type:c,target:b};"timeupdate"==c&&(b.currentTime=e.currentTime=d.seconds,b.duration=e.duration=d.duration),b.dispatchEvent(e)}t.playVideo=function(){t.api("play")},t.stopVideo=function(){t.api("unload")},t.pauseVideo=function(){t.api("pause")},t.seekTo=function(a){t.api("seekTo",a)},t.setVolume=function(a){t.api("setVolume",a)},t.setMuted=function(a){a?(t.lastVolume=t.api("getVolume"),t.api("setVolume",0)):(t.api("setVolume",t.lastVolume),delete t.lastVolume)},t.addEvent("play",function(){a(t,n,"play"),a(t,n,"playing")}),t.addEvent("pause",function(){a(t,n,"pause")}),t.addEvent("finish",function(){a(t,n,"ended")}),t.addEvent("playProgress",function(b){a(t,n,"timeupdate",b)}),n.pluginElement=o,n.pluginApi=t,mejs.MediaPluginBridge.initPlugin(m)})}else console.warn("You need to include froogaloop for vimeo to work")}return j.style.display="none",j.removeAttribute("autoplay"),n},updateNative:function(a,b){var c,d=a.htmlMediaElement;for(c in mejs.HtmlMediaElement)d[c]=mejs.HtmlMediaElement[c];return b.success(d,d),d}},mejs.YouTubeApi={isIframeStarted:!1,isIframeLoaded:!1,loadIframeApi:function(){if(!this.isIframeStarted){var a=document.createElement("script");a.src="//www.youtube.com/player_api";var b=document.getElementsByTagName("script")[0];b.parentNode.insertBefore(a,b),this.isIframeStarted=!0}},iframeQueue:[],enqueueIframe:function(a){this.isLoaded?this.createIframe(a):(this.loadIframeApi(),this.iframeQueue.push(a))},createIframe:function(a){var b=a.pluginMediaElement,c=new YT.Player(a.containerId,{height:a.height,width:a.width,videoId:a.videoId,playerVars:{controls:0},events:{onReady:function(){a.pluginMediaElement.pluginApi=c,mejs.MediaPluginBridge.initPlugin(a.pluginId),setInterval(function(){mejs.YouTubeApi.createEvent(c,b,"timeupdate")},250)},onStateChange:function(a){mejs.YouTubeApi.handleStateChange(a.data,c,b)}}})},createEvent:function(a,b,c){var d={type:c,target:b};if(a&&a.getDuration){b.currentTime=d.currentTime=a.getCurrentTime(),b.duration=d.duration=a.getDuration(),d.paused=b.paused,d.ended=b.ended,d.muted=a.isMuted(),d.volume=a.getVolume()/100,d.bytesTotal=a.getVideoBytesTotal(),d.bufferedBytes=a.getVideoBytesLoaded();var e=d.bufferedBytes/d.bytesTotal*d.duration;d.target.buffered=d.buffered={start:function(){return 0},end:function(){return e},length:1}}b.dispatchEvent(d)},iFrameReady:function(){for(this.isLoaded=!0,this.isIframeLoaded=!0;this.iframeQueue.length>0;){var a=this.iframeQueue.pop();this.createIframe(a)}},flashPlayers:{},createFlash:function(a){this.flashPlayers[a.pluginId]=a;var b,c="//www.youtube.com/apiplayer?enablejsapi=1&amp;playerapiid="+a.pluginId+"&amp;version=3&amp;autoplay=0&amp;controls=0&amp;modestbranding=1&loop=0";mejs.MediaFeatures.isIE?(b=document.createElement("div"),a.container.appendChild(b),b.outerHTML='<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" codebase="//download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab" id="'+a.pluginId+'" width="'+a.width+'" height="'+a.height+'" class="mejs-shim"><param name="movie" value="'+c+'" /><param name="wmode" value="transparent" /><param name="allowScriptAccess" value="'+options.flashScriptAccess+'" /><param name="allowFullScreen" value="true" /></object>'):a.container.innerHTML='<object type="application/x-shockwave-flash" id="'+a.pluginId+'" data="'+c+'" width="'+a.width+'" height="'+a.height+'" style="visibility: visible; " class="mejs-shim"><param name="allowScriptAccess" value="'+options.flashScriptAccess+'"><param name="wmode" value="transparent"></object>'},flashReady:function(a){var b=this.flashPlayers[a],c=document.getElementById(a),d=b.pluginMediaElement;d.pluginApi=d.pluginElement=c,mejs.MediaPluginBridge.initPlugin(a),c.cueVideoById(b.videoId);var e=b.containerId+"_callback";window[e]=function(a){mejs.YouTubeApi.handleStateChange(a,c,d)},c.addEventListener("onStateChange",e),setInterval(function(){mejs.YouTubeApi.createEvent(c,d,"timeupdate")},250),mejs.YouTubeApi.createEvent(c,d,"canplay")},handleStateChange:function(a,b,c){switch(a){case-1:c.paused=!0,c.ended=!0,mejs.YouTubeApi.createEvent(b,c,"loadedmetadata");break;case 0:c.paused=!1,c.ended=!0,mejs.YouTubeApi.createEvent(b,c,"ended");break;case 1:c.paused=!1,c.ended=!1,mejs.YouTubeApi.createEvent(b,c,"play"),mejs.YouTubeApi.createEvent(b,c,"playing");break;case 2:c.paused=!0,c.ended=!1,mejs.YouTubeApi.createEvent(b,c,"pause");break;case 3:mejs.YouTubeApi.createEvent(b,c,"progress");break;case 5:}}},window.onYouTubePlayerAPIReady=function(){mejs.YouTubeApi.iFrameReady()},window.onYouTubePlayerReady=function(a){mejs.YouTubeApi.flashReady(a)},window.mejs=mejs,window.MediaElement=mejs.MediaElement,function(a,b){"use strict";var c={locale:{language:b.i18n&&b.i18n.locale.language||"",strings:b.i18n&&b.i18n.locale.strings||{}},ietf_lang_regex:/^(x\-)?[a-z]{2,}(\-\w{2,})?(\-\w{2,})?$/,methods:{}};c.getLanguage=function(){var a=c.locale.language||window.navigator.userLanguage||window.navigator.language;return c.ietf_lang_regex.exec(a)?a:null},"undefined"!=typeof mejsL10n&&(c.locale.language=mejsL10n.language),c.methods.checkPlain=function(a){var b,c,d={"&":"&amp;",'"':"&quot;","<":"&lt;",">":"&gt;"};a=String(a);for(b in d)d.hasOwnProperty(b)&&(c=new RegExp(b,"g"),a=a.replace(c,d[b]));return a},c.methods.t=function(a,b){return c.locale.strings&&c.locale.strings[b.context]&&c.locale.strings[b.context][a]&&(a=c.locale.strings[b.context][a]),c.methods.checkPlain(a)},c.t=function(a,b){if("string"==typeof a&&a.length>0){var d=c.getLanguage();return b=b||{context:d},c.methods.t(a,b)}throw{name:"InvalidArgumentException",message:"First argument is either not a string or empty."}},b.i18n=c}(document,mejs),function(a){"use strict";"undefined"!=typeof mejsL10n&&(a[mejsL10n.language]=mejsL10n.strings)}(mejs.i18n.locale.strings),"undefined"!=typeof jQuery?mejs.$=jQuery:"undefined"!=typeof Zepto?(mejs.$=Zepto,Zepto.fn.outerWidth=function(a){var b=$(this).width();return a&&(b+=parseInt($(this).css("margin-right"),10),b+=parseInt($(this).css("margin-left"),10)),b}):"undefined"!=typeof ender&&(mejs.$=ender),function(a){mejs.MepDefaults={poster:"",showPosterWhenEnded:!1,defaultVideoWidth:480,defaultVideoHeight:270,videoWidth:-1,videoHeight:-1,defaultAudioWidth:400,defaultAudioHeight:30,defaultSeekBackwardInterval:function(a){return.05*a.duration},defaultSeekForwardInterval:function(a){return.05*a.duration},setDimensions:!0,audioWidth:-1,audioHeight:-1,startVolume:.8,loop:!1,autoRewind:!0,enableAutosize:!0,timeFormat:"",alwaysShowHours:!1,showTimecodeFrameCount:!1,framesPerSecond:25,autosizeProgress:!0,alwaysShowControls:!1,hideVideoControlsOnLoad:!1,clickToPlayPause:!0,iPadUseNativeControls:!1,iPhoneUseNativeControls:!1,AndroidUseNativeControls:!1,features:["playpause","current","progress","duration","tracks","volume","fullscreen"],isVideo:!0,enableKeyboard:!0,pauseOtherPlayers:!0,keyActions:[{keys:[32,179],action:function(a,b){b.paused||b.ended?b.play():b.pause()}},{keys:[38],action:function(a,b){a.container.find(".mejs-volume-slider").css("display","block"),a.isVideo&&(a.showControls(),a.startControlsTimer());var c=Math.min(b.volume+.1,1);b.setVolume(c)}},{keys:[40],action:function(a,b){a.container.find(".mejs-volume-slider").css("display","block"),a.isVideo&&(a.showControls(),a.startControlsTimer());var c=Math.max(b.volume-.1,0);b.setVolume(c)}},{keys:[37,227],action:function(a,b){if(!isNaN(b.duration)&&b.duration>0){a.isVideo&&(a.showControls(),a.startControlsTimer());var c=Math.max(b.currentTime-a.options.defaultSeekBackwardInterval(b),0);b.setCurrentTime(c)}}},{keys:[39,228],action:function(a,b){if(!isNaN(b.duration)&&b.duration>0){a.isVideo&&(a.showControls(),a.startControlsTimer());var c=Math.min(b.currentTime+a.options.defaultSeekForwardInterval(b),b.duration);b.setCurrentTime(c)}}},{keys:[70],action:function(a){"undefined"!=typeof a.enterFullScreen&&(a.isFullScreen?a.exitFullScreen():a.enterFullScreen())}},{keys:[77],action:function(a){a.container.find(".mejs-volume-slider").css("display","block"),a.isVideo&&(a.showControls(),a.startControlsTimer()),a.setMuted(a.media.muted?!1:!0)}}]},mejs.mepIndex=0,mejs.players={},mejs.MediaElementPlayer=function(b,c){if(!(this instanceof mejs.MediaElementPlayer))return new mejs.MediaElementPlayer(b,c);var d=this;return d.$media=d.$node=a(b),d.node=d.media=d.$media[0],d.node?"undefined"!=typeof d.node.player?d.node.player:("undefined"==typeof c&&(c=d.$node.data("mejsoptions")),d.options=a.extend({},mejs.MepDefaults,c),d.options.timeFormat||(d.options.timeFormat="mm:ss",d.options.alwaysShowHours&&(d.options.timeFormat="hh:mm:ss"),d.options.showTimecodeFrameCount&&(d.options.timeFormat+=":ff")),mejs.Utility.calculateTimeFormat(0,d.options,d.options.framesPerSecond||25),d.id="mep_"+mejs.mepIndex++,mejs.players[d.id]=d,d.init(),d):void 0},mejs.MediaElementPlayer.prototype={hasFocus:!1,controlsAreVisible:!0,init:function(){var b=this,c=mejs.MediaFeatures,d=a.extend(!0,{},b.options,{success:function(a,c){b.meReady(a,c)},error:function(a){b.handleError(a)}}),e=b.media.tagName.toLowerCase();if(b.isDynamic="audio"!==e&&"video"!==e,b.isVideo=b.isDynamic?b.options.isVideo:"audio"!==e&&b.options.isVideo,c.isiPad&&b.options.iPadUseNativeControls||c.isiPhone&&b.options.iPhoneUseNativeControls)b.$media.attr("controls","controls"),c.isiPad&&null!==b.media.getAttribute("autoplay")&&b.play();else if(c.isAndroid&&b.options.AndroidUseNativeControls);else{b.$media.removeAttr("controls");var f=mejs.i18n.t(b.isVideo?"Video Player":"Audio Player");if(a('<span class="mejs-offscreen">'+f+"</span>").insertBefore(b.$media),b.container=a('<div id="'+b.id+'" class="mejs-container '+(mejs.MediaFeatures.svg?"svg":"no-svg")+'" tabindex="0" role="application" aria-label="'+f+'"><div class="mejs-inner"><div class="mejs-mediaelement"></div><div class="mejs-layers"></div><div class="mejs-controls"></div><div class="mejs-clear"></div></div></div>').addClass(b.$media[0].className).insertBefore(b.$media).focus(function(){if(!b.controlsAreVisible){
b.showControls(!0);var a=b.container.find(".mejs-playpause-button > button");a.focus()}}),b.container.addClass((c.isAndroid?"mejs-android ":"")+(c.isiOS?"mejs-ios ":"")+(c.isiPad?"mejs-ipad ":"")+(c.isiPhone?"mejs-iphone ":"")+(b.isVideo?"mejs-video ":"mejs-audio ")),c.isiOS){var g=b.$media.clone();b.container.find(".mejs-mediaelement").append(g),b.$media.remove(),b.$node=b.$media=g,b.node=b.media=g[0]}else b.container.find(".mejs-mediaelement").append(b.$media);b.node.player=b,b.controls=b.container.find(".mejs-controls"),b.layers=b.container.find(".mejs-layers");var h=b.isVideo?"video":"audio",i=h.substring(0,1).toUpperCase()+h.substring(1);b.width=b.options[h+"Width"]>0||b.options[h+"Width"].toString().indexOf("%")>-1?b.options[h+"Width"]:""!==b.media.style.width&&null!==b.media.style.width?b.media.style.width:null!==b.media.getAttribute("width")?b.$media.attr("width"):b.options["default"+i+"Width"],b.height=b.options[h+"Height"]>0||b.options[h+"Height"].toString().indexOf("%")>-1?b.options[h+"Height"]:""!==b.media.style.height&&null!==b.media.style.height?b.media.style.height:null!==b.$media[0].getAttribute("height")?b.$media.attr("height"):b.options["default"+i+"Height"],b.setPlayerSize(b.width,b.height),d.pluginWidth=b.width,d.pluginHeight=b.height}mejs.MediaElement(b.$media[0],d),"undefined"!=typeof b.container&&b.controlsAreVisible&&b.container.trigger("controlsshown")},showControls:function(a){var b=this;a="undefined"==typeof a||a,b.controlsAreVisible||(a?(b.controls.css("visibility","visible").stop(!0,!0).fadeIn(200,function(){b.controlsAreVisible=!0,b.container.trigger("controlsshown")}),b.container.find(".mejs-control").css("visibility","visible").stop(!0,!0).fadeIn(200,function(){b.controlsAreVisible=!0})):(b.controls.css("visibility","visible").css("display","block"),b.container.find(".mejs-control").css("visibility","visible").css("display","block"),b.controlsAreVisible=!0,b.container.trigger("controlsshown")),b.setControlsSize())},hideControls:function(b){var c=this;b="undefined"==typeof b||b,!c.controlsAreVisible||c.options.alwaysShowControls||c.keyboardAction||(b?(c.controls.stop(!0,!0).fadeOut(200,function(){a(this).css("visibility","hidden").css("display","block"),c.controlsAreVisible=!1,c.container.trigger("controlshidden")}),c.container.find(".mejs-control").stop(!0,!0).fadeOut(200,function(){a(this).css("visibility","hidden").css("display","block")})):(c.controls.css("visibility","hidden").css("display","block"),c.container.find(".mejs-control").css("visibility","hidden").css("display","block"),c.controlsAreVisible=!1,c.container.trigger("controlshidden")))},controlsTimer:null,startControlsTimer:function(a){var b=this;a="undefined"!=typeof a?a:1500,b.killControlsTimer("start"),b.controlsTimer=setTimeout(function(){b.hideControls(),b.killControlsTimer("hide")},a)},killControlsTimer:function(){var a=this;null!==a.controlsTimer&&(clearTimeout(a.controlsTimer),delete a.controlsTimer,a.controlsTimer=null)},controlsEnabled:!0,disableControls:function(){var a=this;a.killControlsTimer(),a.hideControls(!1),this.controlsEnabled=!1},enableControls:function(){var a=this;a.showControls(!1),a.controlsEnabled=!0},meReady:function(b,c){var d,e,f=this,g=mejs.MediaFeatures,h=c.getAttribute("autoplay"),i=!("undefined"==typeof h||null===h||"false"===h);if(!f.created){if(f.created=!0,f.media=b,f.domNode=c,!(g.isAndroid&&f.options.AndroidUseNativeControls||g.isiPad&&f.options.iPadUseNativeControls||g.isiPhone&&f.options.iPhoneUseNativeControls)){f.buildposter(f,f.controls,f.layers,f.media),f.buildkeyboard(f,f.controls,f.layers,f.media),f.buildoverlays(f,f.controls,f.layers,f.media),f.findTracks();for(d in f.options.features)if(e=f.options.features[d],f["build"+e])try{f["build"+e](f,f.controls,f.layers,f.media)}catch(j){}f.container.trigger("controlsready"),f.setPlayerSize(f.width,f.height),f.setControlsSize(),f.isVideo&&(mejs.MediaFeatures.hasTouch?f.$media.bind("touchstart",function(){f.controlsAreVisible?f.hideControls(!1):f.controlsEnabled&&f.showControls(!1)}):(f.clickToPlayPauseCallback=function(){f.options.clickToPlayPause&&(f.media.paused?f.play():f.pause())},f.media.addEventListener("click",f.clickToPlayPauseCallback,!1),f.container.bind("mouseenter",function(){f.controlsEnabled&&(f.options.alwaysShowControls||(f.killControlsTimer("enter"),f.showControls(),f.startControlsTimer(2500)))}).bind("mousemove",function(){f.controlsEnabled&&(f.controlsAreVisible||f.showControls(),f.options.alwaysShowControls||f.startControlsTimer(2500))}).bind("mouseleave",function(){f.controlsEnabled&&(f.media.paused||f.options.alwaysShowControls||f.startControlsTimer(1e3))})),f.options.hideVideoControlsOnLoad&&f.hideControls(!1),i&&!f.options.alwaysShowControls&&f.hideControls(),f.options.enableAutosize&&f.media.addEventListener("loadedmetadata",function(a){f.options.videoHeight<=0&&null===f.domNode.getAttribute("height")&&!isNaN(a.target.videoHeight)&&(f.setPlayerSize(a.target.videoWidth,a.target.videoHeight),f.setControlsSize(),f.media.setVideoSize(a.target.videoWidth,a.target.videoHeight))},!1)),b.addEventListener("play",function(){var a;for(a in mejs.players){var b=mejs.players[a];b.id==f.id||!f.options.pauseOtherPlayers||b.paused||b.ended||b.pause(),b.hasFocus=!1}f.hasFocus=!0},!1),f.media.addEventListener("ended",function(){if(f.options.autoRewind)try{f.media.setCurrentTime(0),window.setTimeout(function(){a(f.container).find(".mejs-overlay-loading").parent().hide()},20)}catch(b){}f.media.pause(),f.setProgressRail&&f.setProgressRail(),f.setCurrentRail&&f.setCurrentRail(),f.options.loop?f.play():!f.options.alwaysShowControls&&f.controlsEnabled&&f.showControls()},!1),f.media.addEventListener("loadedmetadata",function(){f.updateDuration&&f.updateDuration(),f.updateCurrent&&f.updateCurrent(),f.isFullScreen||(f.setPlayerSize(f.width,f.height),f.setControlsSize())},!1);var k=null;f.media.addEventListener("timeupdate",function(){k!==this.duration&&(k=this.duration,mejs.Utility.calculateTimeFormat(k,f.options,f.options.framesPerSecond||25))},!1),f.container.focusout(function(b){if(b.relatedTarget){var c=a(b.relatedTarget);f.keyboardAction&&0===c.parents(".mejs-container").length&&(f.keyboardAction=!1,f.hideControls(!0))}}),setTimeout(function(){f.setPlayerSize(f.width,f.height),f.setControlsSize()},50),f.globalBind("resize",function(){f.isFullScreen||mejs.MediaFeatures.hasTrueNativeFullScreen&&document.webkitIsFullScreen||f.setPlayerSize(f.width,f.height),f.setControlsSize()}),"youtube"==f.media.pluginType&&(g.isiOS||g.isAndroid)&&f.container.find(".mejs-overlay-play").hide()}i&&"native"==b.pluginType&&f.play(),f.options.success&&("string"==typeof f.options.success?window[f.options.success](f.media,f.domNode,f):f.options.success(f.media,f.domNode,f))}},handleError:function(a){var b=this;b.controls.hide(),b.options.error&&b.options.error(a)},setPlayerSize:function(b,c){var d=this;if(!d.options.setDimensions)return!1;if("undefined"!=typeof b&&(d.width=b),"undefined"!=typeof c&&(d.height=c),d.height.toString().indexOf("%")>0||"none"!==d.$node.css("max-width")&&"t.width"!==d.$node.css("max-width")||d.$node[0].currentStyle&&"100%"===d.$node[0].currentStyle.maxWidth){var e=function(){return d.isVideo?d.media.videoWidth&&d.media.videoWidth>0?d.media.videoWidth:null!==d.media.getAttribute("width")?d.media.getAttribute("width"):d.options.defaultVideoWidth:d.options.defaultAudioWidth}(),f=function(){return d.isVideo?d.media.videoHeight&&d.media.videoHeight>0?d.media.videoHeight:null!==d.media.getAttribute("height")?d.media.getAttribute("height"):d.options.defaultVideoHeight:d.options.defaultAudioHeight}(),g=d.container.parent().closest(":visible").width(),h=d.container.parent().closest(":visible").height(),i=d.isVideo||!d.options.autosizeProgress?parseInt(g*f/e,10):f;isNaN(i)&&(i=h),d.container.parent().length>0&&"body"===d.container.parent()[0].tagName.toLowerCase()&&(g=a(window).width(),i=a(window).height()),i&&g&&(d.container.width(g).height(i),d.$media.add(d.container.find(".mejs-shim")).width("100%").height("100%"),d.isVideo&&d.media.setVideoSize&&d.media.setVideoSize(g,i),d.layers.children(".mejs-layer").width("100%").height("100%"))}else d.container.width(d.width).height(d.height),d.layers.children(".mejs-layer").width(d.width).height(d.height)},setControlsSize:function(){var b=this,c=0,d=0,e=b.controls.find(".mejs-time-rail"),f=b.controls.find(".mejs-time-total"),g=e.siblings(),h=g.last(),i=null;if(b.container.is(":visible")&&e.length&&e.is(":visible")){b.options&&!b.options.autosizeProgress&&(d=parseInt(e.css("width"),10)),0!==d&&d||(g.each(function(){var b=a(this);"absolute"!=b.css("position")&&b.is(":visible")&&(c+=a(this).outerWidth(!0))}),d=b.controls.width()-c-(e.outerWidth(!0)-e.width()));do e.width(d),f.width(d-(f.outerWidth(!0)-f.width())),"absolute"!=h.css("position")&&(i=h.length?h.position():null,d--);while(null!==i&&i.top>0&&d>0);b.container.trigger("controlsresize")}},buildposter:function(b,c,d,e){var f=this,g=a('<div class="mejs-poster mejs-layer"></div>').appendTo(d),h=b.$media.attr("poster");""!==b.options.poster&&(h=b.options.poster),h?f.setPoster(h):g.hide(),e.addEventListener("play",function(){g.hide()},!1),b.options.showPosterWhenEnded&&b.options.autoRewind&&e.addEventListener("ended",function(){g.show()},!1)},setPoster:function(b){var c=this,d=c.container.find(".mejs-poster"),e=d.find("img");0===e.length&&(e=a('<img width="100%" height="100%" alt="" />').appendTo(d)),e.attr("src",b),d.css({"background-image":"url("+b+")"})},buildoverlays:function(b,c,d,e){var f=this;if(b.isVideo){var g=a('<div class="mejs-overlay mejs-layer"><div class="mejs-overlay-loading"><span></span></div></div>').hide().appendTo(d),h=a('<div class="mejs-overlay mejs-layer"><div class="mejs-overlay-error"></div></div>').hide().appendTo(d),i=a('<div class="mejs-overlay mejs-layer mejs-overlay-play"><div class="mejs-overlay-button"></div></div>').appendTo(d).bind("click",function(){f.options.clickToPlayPause&&e.paused&&e.play()});e.addEventListener("play",function(){i.hide(),g.hide(),c.find(".mejs-time-buffering").hide(),h.hide()},!1),e.addEventListener("playing",function(){i.hide(),g.hide(),c.find(".mejs-time-buffering").hide(),h.hide()},!1),e.addEventListener("seeking",function(){g.show(),c.find(".mejs-time-buffering").show()},!1),e.addEventListener("seeked",function(){g.hide(),c.find(".mejs-time-buffering").hide()},!1),e.addEventListener("pause",function(){mejs.MediaFeatures.isiPhone||i.show()},!1),e.addEventListener("waiting",function(){g.show(),c.find(".mejs-time-buffering").show()},!1),e.addEventListener("loadeddata",function(){g.show(),c.find(".mejs-time-buffering").show(),mejs.MediaFeatures.isAndroid&&(e.canplayTimeout=window.setTimeout(function(){if(document.createEvent){var a=document.createEvent("HTMLEvents");return a.initEvent("canplay",!0,!0),e.dispatchEvent(a)}},300))},!1),e.addEventListener("canplay",function(){g.hide(),c.find(".mejs-time-buffering").hide(),clearTimeout(e.canplayTimeout)},!1),e.addEventListener("error",function(a){f.handleError(a),g.hide(),i.hide(),h.show(),h.find(".mejs-overlay-error").html("Error loading this resource")},!1),e.addEventListener("keydown",function(a){f.onkeydown(b,e,a)},!1)}},buildkeyboard:function(b,c,d,e){var f=this;f.container.keydown(function(){f.keyboardAction=!0}),f.globalBind("keydown",function(c){return b.hasFocus=0!==a(c.target).closest(".mejs-container").length,f.onkeydown(b,e,c)}),f.globalBind("click",function(c){b.hasFocus=0!==a(c.target).closest(".mejs-container").length})},onkeydown:function(a,b,c){if(a.hasFocus&&a.options.enableKeyboard)for(var d=0,e=a.options.keyActions.length;e>d;d++)for(var f=a.options.keyActions[d],g=0,h=f.keys.length;h>g;g++)if(c.keyCode==f.keys[g])return"function"==typeof c.preventDefault&&c.preventDefault(),f.action(a,b,c.keyCode),!1;return!0},findTracks:function(){var b=this,c=b.$media.find("track");b.tracks=[],c.each(function(c,d){d=a(d),b.tracks.push({srclang:d.attr("srclang")?d.attr("srclang").toLowerCase():"",src:d.attr("src"),kind:d.attr("kind"),label:d.attr("label")||"",entries:[],isLoaded:!1})})},changeSkin:function(a){this.container[0].className="mejs-container "+a,this.setPlayerSize(this.width,this.height),this.setControlsSize()},play:function(){this.load(),this.media.play()},pause:function(){try{this.media.pause()}catch(a){}},load:function(){this.isLoaded||this.media.load(),this.isLoaded=!0},setMuted:function(a){this.media.setMuted(a)},setCurrentTime:function(a){this.media.setCurrentTime(a)},getCurrentTime:function(){return this.media.currentTime},setVolume:function(a){this.media.setVolume(a)},getVolume:function(){return this.media.volume},setSrc:function(a){this.media.setSrc(a)},remove:function(){var a,b,c=this;c.container.prev(".mejs-offscreen").remove();for(a in c.options.features)if(b=c.options.features[a],c["clean"+b])try{c["clean"+b](c)}catch(d){}c.isDynamic?c.$node.insertBefore(c.container):(c.$media.prop("controls",!0),c.$node.clone().insertBefore(c.container).show(),c.$node.remove()),"native"!==c.media.pluginType&&c.media.remove(),delete mejs.players[c.id],"object"==typeof c.container&&c.container.remove(),c.globalUnbind(),delete c.node.player},rebuildtracks:function(){var a=this;a.findTracks(),a.buildtracks(a,a.controls,a.layers,a.media)},resetSize:function(){var a=this;setTimeout(function(){a.setPlayerSize(a.width,a.height),a.setControlsSize()},50)}},function(){function b(b,d){var e={d:[],w:[]};return a.each((b||"").split(" "),function(a,b){var f=b+"."+d;0===f.indexOf(".")?(e.d.push(f),e.w.push(f)):e[c.test(b)?"w":"d"].push(f)}),e.d=e.d.join(" "),e.w=e.w.join(" "),e}var c=/^((after|before)print|(before)?unload|hashchange|message|o(ff|n)line|page(hide|show)|popstate|resize|storage)\b/;mejs.MediaElementPlayer.prototype.globalBind=function(c,d,e){var f=this;c=b(c,f.id),c.d&&a(document).bind(c.d,d,e),c.w&&a(window).bind(c.w,d,e)},mejs.MediaElementPlayer.prototype.globalUnbind=function(c,d){var e=this;c=b(c,e.id),c.d&&a(document).unbind(c.d,d),c.w&&a(window).unbind(c.w,d)}}(),"undefined"!=typeof a&&(a.fn.mediaelementplayer=function(b){return this.each(b===!1?function(){var b=a(this).data("mediaelementplayer");b&&b.remove(),a(this).removeData("mediaelementplayer")}:function(){a(this).data("mediaelementplayer",new mejs.MediaElementPlayer(this,b))}),this},a(document).ready(function(){a(".mejs-player").mediaelementplayer()})),window.MediaElementPlayer=mejs.MediaElementPlayer}(mejs.$),function(a){a.extend(mejs.MepDefaults,{playText:mejs.i18n.t("Play"),pauseText:mejs.i18n.t("Pause")}),a.extend(MediaElementPlayer.prototype,{buildplaypause:function(b,c,d,e){function f(a){"play"===a?(i.removeClass("mejs-play").addClass("mejs-pause"),j.attr({title:h.pauseText,"aria-label":h.pauseText})):(i.removeClass("mejs-pause").addClass("mejs-play"),j.attr({title:h.playText,"aria-label":h.playText}))}var g=this,h=g.options,i=a('<div class="mejs-button mejs-playpause-button mejs-play" ><button type="button" aria-controls="'+g.id+'" title="'+h.playText+'" aria-label="'+h.playText+'"></button></div>').appendTo(c).click(function(a){return a.preventDefault(),e.paused?e.play():e.pause(),!1}),j=i.find("button");f("pse"),e.addEventListener("play",function(){f("play")},!1),e.addEventListener("playing",function(){f("play")},!1),e.addEventListener("pause",function(){f("pse")},!1),e.addEventListener("paused",function(){f("pse")},!1)}})}(mejs.$),function(a){a.extend(mejs.MepDefaults,{stopText:"Stop"}),a.extend(MediaElementPlayer.prototype,{buildstop:function(b,c,d,e){var f=this;a('<div class="mejs-button mejs-stop-button mejs-stop"><button type="button" aria-controls="'+f.id+'" title="'+f.options.stopText+'" aria-label="'+f.options.stopText+'"></button></div>').appendTo(c).click(function(){e.paused||e.pause(),e.currentTime>0&&(e.setCurrentTime(0),e.pause(),c.find(".mejs-time-current").width("0px"),c.find(".mejs-time-handle").css("left","0px"),c.find(".mejs-time-float-current").html(mejs.Utility.secondsToTimeCode(0,b.options)),c.find(".mejs-currenttime").html(mejs.Utility.secondsToTimeCode(0,b.options)),d.find(".mejs-poster").show())})}})}(mejs.$),function(a){a.extend(mejs.MepDefaults,{progessHelpText:mejs.i18n.t("Use Left/Right Arrow keys to advance one second, Up/Down arrows to advance ten seconds.")}),a.extend(MediaElementPlayer.prototype,{buildprogress:function(b,c,d,e){a('<div class="mejs-time-rail"><span  class="mejs-time-total mejs-time-slider"><span class="mejs-time-buffering"></span><span class="mejs-time-loaded"></span><span class="mejs-time-current"></span><span class="mejs-time-handle"></span><span class="mejs-time-float"><span class="mejs-time-float-current">00:00</span><span class="mejs-time-float-corner"></span></span></span></div>').appendTo(c),c.find(".mejs-time-buffering").hide();var f=this,g=c.find(".mejs-time-total"),h=c.find(".mejs-time-loaded"),i=c.find(".mejs-time-current"),j=c.find(".mejs-time-handle"),k=c.find(".mejs-time-float"),l=c.find(".mejs-time-float-current"),m=c.find(".mejs-time-slider"),n=function(a){var c,d=g.offset(),f=g.width(),h=0,i=0,j=0;c=a.originalEvent&&a.originalEvent.changedTouches?a.originalEvent.changedTouches[0].pageX:a.changedTouches?a.changedTouches[0].pageX:a.pageX,e.duration&&(c<d.left?c=d.left:c>f+d.left&&(c=f+d.left),j=c-d.left,h=j/f,i=.02>=h?0:h*e.duration,o&&i!==e.currentTime&&e.setCurrentTime(i),mejs.MediaFeatures.hasTouch||(k.css("left",j),l.html(mejs.Utility.secondsToTimeCode(i,b.options)),k.show()))},o=!1,p=!1,q=0,r=!1,s=b.options.autoRewind,t=function(){var a=e.currentTime,c=mejs.i18n.t("Time Slider"),d=mejs.Utility.secondsToTimeCode(a,b.options),f=e.duration;m.attr({"aria-label":c,"aria-valuemin":0,"aria-valuemax":f,"aria-valuenow":a,"aria-valuetext":d,role:"slider",tabindex:0})},u=function(){var a=new Date;a-q>=1e3&&e.play()};m.bind("focus",function(){b.options.autoRewind=!1}),m.bind("blur",function(){b.options.autoRewind=s}),m.bind("keydown",function(a){new Date-q>=1e3&&(r=e.paused);var b=a.keyCode,c=e.duration,d=e.currentTime;switch(b){case 37:d-=1;break;case 39:d+=1;break;case 38:d+=Math.floor(.1*c);break;case 40:d-=Math.floor(.1*c);break;case 36:d=0;break;case 35:d=c;break;case 10:return void(e.paused?e.play():e.pause());case 13:return void(e.paused?e.play():e.pause());default:return}return d=0>d?0:d>=c?c:Math.floor(d),q=new Date,r||e.pause(),d<e.duration&&!r&&setTimeout(u,1100),e.setCurrentTime(d),a.preventDefault(),a.stopPropagation(),!1}),g.bind("mousedown touchstart",function(a){(1===a.which||0===a.which)&&(o=!0,n(a),f.globalBind("mousemove.dur touchmove.dur",function(a){n(a)}),f.globalBind("mouseup.dur touchend.dur",function(){o=!1,k.hide(),f.globalUnbind(".dur")}))}).bind("mouseenter",function(){p=!0,f.globalBind("mousemove.dur",function(a){n(a)}),mejs.MediaFeatures.hasTouch||k.show()}).bind("mouseleave",function(){p=!1,o||(f.globalUnbind(".dur"),k.hide())}),e.addEventListener("progress",function(a){b.setProgressRail(a),b.setCurrentRail(a)},!1),e.addEventListener("timeupdate",function(a){b.setProgressRail(a),b.setCurrentRail(a),t(a)},!1),f.container.on("controlsresize",function(){b.setProgressRail(),b.setCurrentRail()}),f.loaded=h,f.total=g,f.current=i,f.handle=j},setProgressRail:function(a){var b=this,c=void 0!==a?a.target:b.media,d=null;c&&c.buffered&&c.buffered.length>0&&c.buffered.end&&c.duration?d=c.buffered.end(c.buffered.length-1)/c.duration:c&&void 0!==c.bytesTotal&&c.bytesTotal>0&&void 0!==c.bufferedBytes?d=c.bufferedBytes/c.bytesTotal:a&&a.lengthComputable&&0!==a.total&&(d=a.loaded/a.total),null!==d&&(d=Math.min(1,Math.max(0,d)),b.loaded&&b.total&&b.loaded.width(b.total.width()*d))},setCurrentRail:function(){var a=this;if(void 0!==a.media.currentTime&&a.media.duration&&a.total&&a.handle){var b=Math.round(a.total.width()*a.media.currentTime/a.media.duration),c=b-Math.round(a.handle.outerWidth(!0)/2);a.current.width(b),a.handle.css("left",c)}}})}(mejs.$),function(a){a.extend(mejs.MepDefaults,{duration:-1,timeAndDurationSeparator:"<span> | </span>"}),a.extend(MediaElementPlayer.prototype,{buildcurrent:function(b,c,d,e){var f=this;a('<div class="mejs-time" role="timer" aria-live="off"><span class="mejs-currenttime">'+mejs.Utility.secondsToTimeCode(0,b.options)+"</span></div>").appendTo(c),f.currenttime=f.controls.find(".mejs-currenttime"),e.addEventListener("timeupdate",function(){b.updateCurrent()},!1)},buildduration:function(b,c,d,e){var f=this;c.children().last().find(".mejs-currenttime").length>0?a(f.options.timeAndDurationSeparator+'<span class="mejs-duration">'+mejs.Utility.secondsToTimeCode(f.options.duration,f.options)+"</span>").appendTo(c.find(".mejs-time")):(c.find(".mejs-currenttime").parent().addClass("mejs-currenttime-container"),a('<div class="mejs-time mejs-duration-container"><span class="mejs-duration">'+mejs.Utility.secondsToTimeCode(f.options.duration,f.options)+"</span></div>").appendTo(c)),f.durationD=f.controls.find(".mejs-duration"),e.addEventListener("timeupdate",function(){b.updateDuration()},!1)},updateCurrent:function(){var a=this;a.currenttime&&a.currenttime.html(mejs.Utility.secondsToTimeCode(a.media.currentTime,a.options))},updateDuration:function(){var a=this;a.container.toggleClass("mejs-long-video",a.media.duration>3600),a.durationD&&(a.options.duration>0||a.media.duration)&&a.durationD.html(mejs.Utility.secondsToTimeCode(a.options.duration>0?a.options.duration:a.media.duration,a.options))}})}(mejs.$),function(a){a.extend(mejs.MepDefaults,{muteText:mejs.i18n.t("Mute Toggle"),allyVolumeControlText:mejs.i18n.t("Use Up/Down Arrow keys to increase or decrease volume."),hideVolumeOnTouchDevices:!0,audioVolume:"horizontal",videoVolume:"vertical"}),a.extend(MediaElementPlayer.prototype,{buildvolume:function(b,c,d,e){if(!mejs.MediaFeatures.isAndroid&&!mejs.MediaFeatures.isiOS||!this.options.hideVolumeOnTouchDevices){var f=this,g=f.isVideo?f.options.videoVolume:f.options.audioVolume,h="horizontal"==g?a('<div class="mejs-button mejs-volume-button mejs-mute"><button type="button" aria-controls="'+f.id+'" title="'+f.options.muteText+'" aria-label="'+f.options.muteText+'"></button></div><a href="javascript:void(0);" class="mejs-horizontal-volume-slider"><span class="mejs-offscreen">'+f.options.allyVolumeControlText+'</span><div class="mejs-horizontal-volume-total"></div><div class="mejs-horizontal-volume-current"></div><div class="mejs-horizontal-volume-handle"></div></a>').appendTo(c):a('<div class="mejs-button mejs-volume-button mejs-mute"><button type="button" aria-controls="'+f.id+'" title="'+f.options.muteText+'" aria-label="'+f.options.muteText+'"></button><a href="javascript:void(0);" class="mejs-volume-slider"><span class="mejs-offscreen">'+f.options.allyVolumeControlText+'</span><div class="mejs-volume-total"></div><div class="mejs-volume-current"></div><div class="mejs-volume-handle"></div></a></div>').appendTo(c),i=f.container.find(".mejs-volume-slider, .mejs-horizontal-volume-slider"),j=f.container.find(".mejs-volume-total, .mejs-horizontal-volume-total"),k=f.container.find(".mejs-volume-current, .mejs-horizontal-volume-current"),l=f.container.find(".mejs-volume-handle, .mejs-horizontal-volume-handle"),m=function(a,b){if(!i.is(":visible")&&"undefined"==typeof b)return i.show(),m(a,!0),void i.hide();a=Math.max(0,a),a=Math.min(a,1),0===a?(h.removeClass("mejs-mute").addClass("mejs-unmute"),h.children("button").attr("title",mejs.i18n.t("Unmute")).attr("aria-label",mejs.i18n.t("Unmute"))):(h.removeClass("mejs-unmute").addClass("mejs-mute"),h.children("button").attr("title",mejs.i18n.t("Mute")).attr("aria-label",mejs.i18n.t("Mute")));var c=j.position();if("vertical"==g){var d=j.height(),e=d-d*a;l.css("top",Math.round(c.top+e-l.height()/2)),k.height(d-e),k.css("top",c.top+e)}else{var f=j.width(),n=f*a;l.css("left",Math.round(c.left+n-l.width()/2)),k.width(Math.round(n))}},n=function(a){var b=null,c=j.offset();if("vertical"===g){var d=j.height(),f=a.pageY-c.top;if(b=(d-f)/d,0===c.top||0===c.left)return}else{var h=j.width(),i=a.pageX-c.left;b=i/h}b=Math.max(0,b),b=Math.min(b,1),m(b),e.setMuted(0===b?!0:!1),e.setVolume(b)},o=!1,p=!1;h.hover(function(){i.show(),p=!0},function(){p=!1,o||"vertical"!=g||i.hide()});var q=function(){var a=Math.floor(100*e.volume);i.attr({"aria-label":mejs.i18n.t("volumeSlider"),"aria-valuemin":0,"aria-valuemax":100,"aria-valuenow":a,"aria-valuetext":a+"%",role:"slider",tabindex:0})};i.bind("mouseover",function(){p=!0}).bind("mousedown",function(a){return n(a),f.globalBind("mousemove.vol",function(a){n(a)}),f.globalBind("mouseup.vol",function(){o=!1,f.globalUnbind(".vol"),p||"vertical"!=g||i.hide()}),o=!0,!1}).bind("keydown",function(a){var b=a.keyCode,c=e.volume;switch(b){case 38:c+=.1;break;case 40:c-=.1;break;default:return!0}return o=!1,m(c),e.setVolume(c),!1}),h.find("button").click(function(){e.setMuted(!e.muted)}),h.find("button").bind("focus",function(){i.show()}),e.addEventListener("volumechange",function(a){o||(e.muted?(m(0),h.removeClass("mejs-mute").addClass("mejs-unmute")):(m(e.volume),h.removeClass("mejs-unmute").addClass("mejs-mute"))),q(a)},!1),0===b.options.startVolume&&e.setMuted(!0),"native"===e.pluginType&&e.setVolume(b.options.startVolume),f.container.on("controlsresize",function(){m(e.volume)})}}})}(mejs.$),function(a){a.extend(mejs.MepDefaults,{usePluginFullScreen:!0,newWindowCallback:function(){return""},fullscreenText:mejs.i18n.t("Fullscreen")}),a.extend(MediaElementPlayer.prototype,{isFullScreen:!1,isNativeFullScreen:!1,isInIframe:!1,buildfullscreen:function(b,c,d,e){if(b.isVideo){if(b.isInIframe=window.location!=window.parent.location,mejs.MediaFeatures.hasTrueNativeFullScreen){var f=function(){b.isFullScreen&&(mejs.MediaFeatures.isFullScreen()?(b.isNativeFullScreen=!0,b.setControlsSize()):(b.isNativeFullScreen=!1,b.exitFullScreen()))};b.globalBind(mejs.MediaFeatures.fullScreenEventName,f)}var g=this,h=a('<div class="mejs-button mejs-fullscreen-button"><button type="button" aria-controls="'+g.id+'" title="'+g.options.fullscreenText+'" aria-label="'+g.options.fullscreenText+'"></button></div>').appendTo(c);if("native"===g.media.pluginType||!g.options.usePluginFullScreen&&!mejs.MediaFeatures.isFirefox)h.click(function(){var a=mejs.MediaFeatures.hasTrueNativeFullScreen&&mejs.MediaFeatures.isFullScreen()||b.isFullScreen;a?b.exitFullScreen():b.enterFullScreen()});else{var i=null,j=function(){var a,b=document.createElement("x"),c=document.documentElement,d=window.getComputedStyle;return"pointerEvents"in b.style?(b.style.pointerEvents="auto",b.style.pointerEvents="x",c.appendChild(b),a=d&&"auto"===d(b,"").pointerEvents,c.removeChild(b),!!a):!1}();if(j&&!mejs.MediaFeatures.isOpera){var k,l,m=!1,n=function(){if(m){for(var a in o)o[a].hide();h.css("pointer-events",""),g.controls.css("pointer-events",""),g.media.removeEventListener("click",g.clickToPlayPauseCallback),m=!1}},o={},p=["top","left","right","bottom"],q=function(){var a=h.offset().left-g.container.offset().left,b=h.offset().top-g.container.offset().top,c=h.outerWidth(!0),d=h.outerHeight(!0),e=g.container.width(),f=g.container.height();for(k in o)o[k].css({position:"absolute",top:0,left:0});o.top.width(e).height(b),o.left.width(a).height(d).css({top:b}),o.right.width(e-a-c).height(d).css({top:b,left:a+c}),o.bottom.width(e).height(f-d-b).css({top:b+d})};for(g.globalBind("resize",function(){q()}),k=0,l=p.length;l>k;k++)o[p[k]]=a('<div class="mejs-fullscreen-hover" />').appendTo(g.container).mouseover(n).hide();h.on("mouseover",function(){if(!g.isFullScreen){var a=h.offset(),c=b.container.offset();e.positionFullscreenButton(a.left-c.left,a.top-c.top,!1),h.css("pointer-events","none"),g.controls.css("pointer-events","none"),g.media.addEventListener("click",g.clickToPlayPauseCallback);for(k in o)o[k].show();q(),m=!0}}),e.addEventListener("fullscreenchange",function(){g.isFullScreen=!g.isFullScreen,g.isFullScreen?g.media.removeEventListener("click",g.clickToPlayPauseCallback):g.media.addEventListener("click",g.clickToPlayPauseCallback),n()}),g.globalBind("mousemove",function(a){if(m){var b=h.offset();(a.pageY<b.top||a.pageY>b.top+h.outerHeight(!0)||a.pageX<b.left||a.pageX>b.left+h.outerWidth(!0))&&(h.css("pointer-events",""),g.controls.css("pointer-events",""),m=!1)}})}else h.on("mouseover",function(){null!==i&&(clearTimeout(i),delete i);var a=h.offset(),c=b.container.offset();e.positionFullscreenButton(a.left-c.left,a.top-c.top,!0)}).on("mouseout",function(){null!==i&&(clearTimeout(i),delete i),i=setTimeout(function(){e.hideFullscreenButton()},1500)})}b.fullscreenBtn=h,g.globalBind("keydown",function(a){(mejs.MediaFeatures.hasTrueNativeFullScreen&&mejs.MediaFeatures.isFullScreen()||g.isFullScreen)&&27==a.keyCode&&b.exitFullScreen()}),g.normalHeight=0,g.normalWidth=0}},cleanfullscreen:function(a){a.exitFullScreen()},containerSizeTimeout:null,enterFullScreen:function(){var b=this;if("native"===b.media.pluginType||!mejs.MediaFeatures.isFirefox&&!b.options.usePluginFullScreen){if(a(document.documentElement).addClass("mejs-fullscreen"),b.normalHeight=b.container.height(),b.normalWidth=b.container.width(),"native"===b.media.pluginType)if(mejs.MediaFeatures.hasTrueNativeFullScreen)mejs.MediaFeatures.requestFullScreen(b.container[0]),b.isInIframe&&setTimeout(function d(){if(b.isNativeFullScreen){var c=window.devicePixelRatio||1,e=.002,f=c*a(window).width(),g=screen.width,h=c*f;Math.abs(g-f)>Math.abs(g-h)&&(f=h);var i=Math.abs(g-f),j=g*e;i>j?b.exitFullScreen():setTimeout(d,500)}},1e3);else if(mejs.MediaFeatures.hasSemiNativeFullScreen)return void b.media.webkitEnterFullscreen();if(b.isInIframe){var c=b.options.newWindowCallback(this);if(""!==c){if(!mejs.MediaFeatures.hasTrueNativeFullScreen)return b.pause(),void window.open(c,b.id,"top=0,left=0,width="+screen.availWidth+",height="+screen.availHeight+",resizable=yes,scrollbars=no,status=no,toolbar=no");setTimeout(function(){b.isNativeFullScreen||(b.pause(),window.open(c,b.id,"top=0,left=0,width="+screen.availWidth+",height="+screen.availHeight+",resizable=yes,scrollbars=no,status=no,toolbar=no"))},250)}}b.container.addClass("mejs-container-fullscreen").width("100%").height("100%"),b.containerSizeTimeout=setTimeout(function(){b.container.css({width:"100%",height:"100%"}),b.setControlsSize()},500),"native"===b.media.pluginType?b.$media.width("100%").height("100%"):(b.container.find(".mejs-shim").width("100%").height("100%"),b.media.setVideoSize(a(window).width(),a(window).height())),b.layers.children("div").width("100%").height("100%"),b.fullscreenBtn&&b.fullscreenBtn.removeClass("mejs-fullscreen").addClass("mejs-unfullscreen"),b.setControlsSize(),b.isFullScreen=!0,b.container.find(".mejs-captions-text").css("font-size",screen.width/b.width*1*100+"%"),b.container.find(".mejs-captions-position").css("bottom","45px"),b.container.trigger("enteredfullscreen")}},exitFullScreen:function(){var b=this;return clearTimeout(b.containerSizeTimeout),"native"!==b.media.pluginType&&mejs.MediaFeatures.isFirefox?void b.media.setFullscreen(!1):(mejs.MediaFeatures.hasTrueNativeFullScreen&&(mejs.MediaFeatures.isFullScreen()||b.isFullScreen)&&mejs.MediaFeatures.cancelFullScreen(),a(document.documentElement).removeClass("mejs-fullscreen"),b.container.removeClass("mejs-container-fullscreen").width(b.normalWidth).height(b.normalHeight),"native"===b.media.pluginType?b.$media.width(b.normalWidth).height(b.normalHeight):(b.container.find(".mejs-shim").width(b.normalWidth).height(b.normalHeight),b.media.setVideoSize(b.normalWidth,b.normalHeight)),b.layers.children("div").width(b.normalWidth).height(b.normalHeight),b.fullscreenBtn.removeClass("mejs-unfullscreen").addClass("mejs-fullscreen"),b.setControlsSize(),b.isFullScreen=!1,b.container.find(".mejs-captions-text").css("font-size",""),b.container.find(".mejs-captions-position").css("bottom",""),void b.container.trigger("exitedfullscreen"))}})}(mejs.$),function(a){a.extend(mejs.MepDefaults,{speeds:["2.00","1.50","1.25","1.00","0.75"],defaultSpeed:"1.00",speedChar:"x"}),a.extend(MediaElementPlayer.prototype,{buildspeed:function(b,c,d,e){var f=this;if("native"==f.media.pluginType){for(var g=null,h=null,i=null,j=null,k=[],l=!1,m=0,n=f.options.speeds.length;n>m;m++){
var o=f.options.speeds[m];"string"==typeof o?(k.push({name:o+f.options.speedChar,value:o}),o===f.options.defaultSpeed&&(l=!0)):(k.push(o),o.value===f.options.defaultSpeed&&(l=!0))}l||k.push({name:f.options.defaultSpeed+f.options.speedChar,value:f.options.defaultSpeed}),k.sort(function(a,b){return parseFloat(b.value)-parseFloat(a.value)});var p=function(a){for(m=0,n=k.length;n>m;m++)if(k[m].value===a)return k[m].name},q='<div class="mejs-button mejs-speed-button"><button type="button">'+p(f.options.defaultSpeed)+'</button><div class="mejs-speed-selector"><ul>';for(m=0,il=k.length;il>m;m++)j=f.id+"-speed-"+k[m].value,q+='<li><input type="radio" name="speed" value="'+k[m].value+'" id="'+j+'" '+(k[m].value===f.options.defaultSpeed?" checked":"")+' /><label for="'+j+'" '+(k[m].value===f.options.defaultSpeed?' class="mejs-speed-selected"':"")+">"+k[m].name+"</label></li>";q+="</ul></div></div>",g=a(q).appendTo(c),h=g.find(".mejs-speed-selector"),i=f.options.defaultSpeed,e.addEventListener("loadedmetadata",function(){i&&(e.playbackRate=parseFloat(i))},!0),h.on("click",'input[type="radio"]',function(){var b=a(this).attr("value");i=b,e.playbackRate=parseFloat(b),g.find("button").html(p(b)),g.find(".mejs-speed-selected").removeClass("mejs-speed-selected"),g.find('input[type="radio"]:checked').next().addClass("mejs-speed-selected")}),g.one("mouseenter focusin",function(){h.height(g.find(".mejs-speed-selector ul").outerHeight(!0)+g.find(".mejs-speed-translations").outerHeight(!0)).css("top",-1*h.height()+"px")})}}})}(mejs.$),function(a){a.extend(mejs.MepDefaults,{startLanguage:"",tracksText:mejs.i18n.t("Captions/Subtitles"),tracksAriaLive:!1,hideCaptionsButtonWhenEmpty:!0,toggleCaptionsButtonWhenOnlyOne:!1,slidesSelector:""}),a.extend(MediaElementPlayer.prototype,{hasChapters:!1,cleartracks:function(a){a&&(a.captions&&a.captions.remove(),a.chapters&&a.chapters.remove(),a.captionsText&&a.captionsText.remove(),a.captionsButton&&a.captionsButton.remove())},buildtracks:function(b,c,d,e){if(0!==b.tracks.length){var f,g=this,h=g.options.tracksAriaLive?'role="log" aria-live="assertive" aria-atomic="false"':"";if(g.domNode.textTracks)for(f=g.domNode.textTracks.length-1;f>=0;f--)g.domNode.textTracks[f].mode="hidden";g.cleartracks(b,c,d,e),b.chapters=a('<div class="mejs-chapters mejs-layer"></div>').prependTo(d).hide(),b.captions=a('<div class="mejs-captions-layer mejs-layer"><div class="mejs-captions-position mejs-captions-position-hover" '+h+'><span class="mejs-captions-text"></span></div></div>').prependTo(d).hide(),b.captionsText=b.captions.find(".mejs-captions-text"),b.captionsButton=a('<div class="mejs-button mejs-captions-button"><button type="button" aria-controls="'+g.id+'" title="'+g.options.tracksText+'" aria-label="'+g.options.tracksText+'"></button><div class="mejs-captions-selector"><ul><li><input type="radio" name="'+b.id+'_captions" id="'+b.id+'_captions_none" value="none" checked="checked" /><label for="'+b.id+'_captions_none">'+mejs.i18n.t("None")+"</label></li></ul></div></div>").appendTo(c);var i=0;for(f=0;f<b.tracks.length;f++)"subtitles"==b.tracks[f].kind&&i++;for(g.options.toggleCaptionsButtonWhenOnlyOne&&1==i?b.captionsButton.on("click",function(){lang=null===b.selectedTrack?b.tracks[0].srclang:"none",b.setTrack(lang)}):(b.captionsButton.on("mouseenter focusin",function(){a(this).find(".mejs-captions-selector").css("visibility","visible")}).on("click","input[type=radio]",function(){lang=this.value,b.setTrack(lang)}),b.captionsButton.on("mouseleave focusout",function(){a(this).find(".mejs-captions-selector").css("visibility","hidden")})),b.options.alwaysShowControls?b.container.find(".mejs-captions-position").addClass("mejs-captions-position-hover"):b.container.bind("controlsshown",function(){b.container.find(".mejs-captions-position").addClass("mejs-captions-position-hover")}).bind("controlshidden",function(){e.paused||b.container.find(".mejs-captions-position").removeClass("mejs-captions-position-hover")}),b.trackToLoad=-1,b.selectedTrack=null,b.isLoadingTrack=!1,f=0;f<b.tracks.length;f++)"subtitles"==b.tracks[f].kind&&b.addTrackButton(b.tracks[f].srclang,b.tracks[f].label);b.loadNextTrack(),e.addEventListener("timeupdate",function(){b.displayCaptions()},!1),""!==b.options.slidesSelector&&(b.slidesContainer=a(b.options.slidesSelector),e.addEventListener("timeupdate",function(){b.displaySlides()},!1)),e.addEventListener("loadedmetadata",function(){b.displayChapters()},!1),b.container.hover(function(){b.hasChapters&&(b.chapters.css("visibility","visible"),b.chapters.fadeIn(200).height(b.chapters.find(".mejs-chapter").outerHeight()))},function(){b.hasChapters&&!e.paused&&b.chapters.fadeOut(200,function(){a(this).css("visibility","hidden"),a(this).css("display","block")})}),g.container.on("controlsresize",function(){g.adjustLanguageBox()}),null!==b.node.getAttribute("autoplay")&&b.chapters.css("visibility","hidden")}},setTrack:function(a){var b,c=this;if("none"==a)c.selectedTrack=null,c.captionsButton.removeClass("mejs-captions-enabled");else for(b=0;b<c.tracks.length;b++)if(c.tracks[b].srclang==a){null===c.selectedTrack&&c.captionsButton.addClass("mejs-captions-enabled"),c.selectedTrack=c.tracks[b],c.captions.attr("lang",c.selectedTrack.srclang),c.displayCaptions();break}},loadNextTrack:function(){var a=this;a.trackToLoad++,a.trackToLoad<a.tracks.length?(a.isLoadingTrack=!0,a.loadTrack(a.trackToLoad)):(a.isLoadingTrack=!1,a.checkForTracks())},loadTrack:function(b){var c=this,d=c.tracks[b],e=function(){d.isLoaded=!0,c.enableTrackButton(d.srclang,d.label),c.loadNextTrack()};a.ajax({url:d.src,dataType:"text",success:function(a){d.entries="string"==typeof a&&/<tt\s+xml/gi.exec(a)?mejs.TrackFormatParser.dfxp.parse(a):mejs.TrackFormatParser.webvtt.parse(a),e(),"chapters"==d.kind&&c.media.addEventListener("play",function(){c.media.duration>0&&c.displayChapters(d)},!1),"slides"==d.kind&&c.setupSlides(d)},error:function(){c.removeTrackButton(d.srclang),c.loadNextTrack()}})},enableTrackButton:function(b,c){var d=this;""===c&&(c=mejs.language.codes[b]||b),d.captionsButton.find("input[value="+b+"]").prop("disabled",!1).siblings("label").html(c),d.options.startLanguage==b&&a("#"+d.id+"_captions_"+b).prop("checked",!0).trigger("click"),d.adjustLanguageBox()},removeTrackButton:function(a){var b=this;b.captionsButton.find("input[value="+a+"]").closest("li").remove(),b.adjustLanguageBox()},addTrackButton:function(b,c){var d=this;""===c&&(c=mejs.language.codes[b]||b),d.captionsButton.find("ul").append(a('<li><input type="radio" name="'+d.id+'_captions" id="'+d.id+"_captions_"+b+'" value="'+b+'" disabled="disabled" /><label for="'+d.id+"_captions_"+b+'">'+c+" (loading)</label></li>")),d.adjustLanguageBox(),d.container.find(".mejs-captions-translations option[value="+b+"]").remove()},adjustLanguageBox:function(){var a=this;a.captionsButton.find(".mejs-captions-selector").height(a.captionsButton.find(".mejs-captions-selector ul").outerHeight(!0)+a.captionsButton.find(".mejs-captions-translations").outerHeight(!0))},checkForTracks:function(){var a=this,b=!1;if(a.options.hideCaptionsButtonWhenEmpty){for(i=0;i<a.tracks.length;i++)if("subtitles"==a.tracks[i].kind&&a.tracks[i].isLoaded){b=!0;break}b||(a.captionsButton.hide(),a.setControlsSize())}},displayCaptions:function(){if("undefined"!=typeof this.tracks){var a,b=this,c=b.selectedTrack;if(null!==c&&c.isLoaded){for(a=0;a<c.entries.times.length;a++)if(b.media.currentTime>=c.entries.times[a].start&&b.media.currentTime<=c.entries.times[a].stop)return b.captionsText.html(c.entries.text[a]).attr("class","mejs-captions-text "+(c.entries.times[a].identifier||"")),void b.captions.show().height(0);b.captions.hide()}else b.captions.hide()}},setupSlides:function(a){var b=this;b.slides=a,b.slides.entries.imgs=[b.slides.entries.text.length],b.showSlide(0)},showSlide:function(b){if("undefined"!=typeof this.tracks&&"undefined"!=typeof this.slidesContainer){var c=this,d=c.slides.entries.text[b],e=c.slides.entries.imgs[b];"undefined"==typeof e||"undefined"==typeof e.fadeIn?c.slides.entries.imgs[b]=e=a('<img src="'+d+'">').on("load",function(){e.appendTo(c.slidesContainer).hide().fadeIn().siblings(":visible").fadeOut()}):e.is(":visible")||e.is(":animated")||e.fadeIn().siblings(":visible").fadeOut()}},displaySlides:function(){if("undefined"!=typeof this.slides){var a,b=this,c=b.slides;for(a=0;a<c.entries.times.length;a++)if(b.media.currentTime>=c.entries.times[a].start&&b.media.currentTime<=c.entries.times[a].stop)return void b.showSlide(a)}},displayChapters:function(){var a,b=this;for(a=0;a<b.tracks.length;a++)if("chapters"==b.tracks[a].kind&&b.tracks[a].isLoaded){b.drawChapters(b.tracks[a]),b.hasChapters=!0;break}},drawChapters:function(b){var c,d,e=this,f=0,g=0;for(e.chapters.empty(),c=0;c<b.entries.times.length;c++)d=b.entries.times[c].stop-b.entries.times[c].start,f=Math.floor(d/e.media.duration*100),(f+g>100||c==b.entries.times.length-1&&100>f+g)&&(f=100-g),e.chapters.append(a('<div class="mejs-chapter" rel="'+b.entries.times[c].start+'" style="left: '+g.toString()+"%;width: "+f.toString()+'%;"><div class="mejs-chapter-block'+(c==b.entries.times.length-1?" mejs-chapter-block-last":"")+'"><span class="ch-title">'+b.entries.text[c]+'</span><span class="ch-time">'+mejs.Utility.secondsToTimeCode(b.entries.times[c].start,e.options)+"&ndash;"+mejs.Utility.secondsToTimeCode(b.entries.times[c].stop,e.options)+"</span></div></div>")),g+=f;e.chapters.find("div.mejs-chapter").click(function(){e.media.setCurrentTime(parseFloat(a(this).attr("rel"))),e.media.paused&&e.media.play()}),e.chapters.show()}}),mejs.language={codes:{af:"Afrikaans",sq:"Albanian",ar:"Arabic",be:"Belarusian",bg:"Bulgarian",ca:"Catalan",zh:"Chinese","zh-cn":"Chinese Simplified","zh-tw":"Chinese Traditional",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch",en:"English",et:"Estonian",fl:"Filipino",fi:"Finnish",fr:"French",gl:"Galician",de:"German",el:"Greek",ht:"Haitian Creole",iw:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",ga:"Irish",it:"Italian",ja:"Japanese",ko:"Korean",lv:"Latvian",lt:"Lithuanian",mk:"Macedonian",ms:"Malay",mt:"Maltese",no:"Norwegian",fa:"Persian",pl:"Polish",pt:"Portuguese",ro:"Romanian",ru:"Russian",sr:"Serbian",sk:"Slovak",sl:"Slovenian",es:"Spanish",sw:"Swahili",sv:"Swedish",tl:"Tagalog",th:"Thai",tr:"Turkish",uk:"Ukrainian",vi:"Vietnamese",cy:"Welsh",yi:"Yiddish"}},mejs.TrackFormatParser={webvtt:{pattern_timecode:/^((?:[0-9]{1,2}:)?[0-9]{2}:[0-9]{2}([,.][0-9]{1,3})?) --\> ((?:[0-9]{1,2}:)?[0-9]{2}:[0-9]{2}([,.][0-9]{3})?)(.*)$/,parse:function(b){for(var c,d,e,f=0,g=mejs.TrackFormatParser.split2(b,/\r?\n/),h={text:[],times:[]};f<g.length;f++){if(c=this.pattern_timecode.exec(g[f]),c&&f<g.length){for(f-1>=0&&""!==g[f-1]&&(e=g[f-1]),f++,d=g[f],f++;""!==g[f]&&f<g.length;)d=d+"\n"+g[f],f++;d=a.trim(d).replace(/(\b(https?|ftp|file):\/\/[-A-Z0-9+&@#\/%?=~_|!:,.;]*[-A-Z0-9+&@#\/%=~_|])/gi,"<a href='$1' target='_blank'>$1</a>"),h.text.push(d),h.times.push({identifier:e,start:0===mejs.Utility.convertSMPTEtoSeconds(c[1])?.2:mejs.Utility.convertSMPTEtoSeconds(c[1]),stop:mejs.Utility.convertSMPTEtoSeconds(c[3]),settings:c[5]})}e=""}return h}},dfxp:{parse:function(b){b=a(b).filter("tt");var c,d,e=0,f=b.children("div").eq(0),g=f.find("p"),h=b.find("#"+f.attr("style")),i={text:[],times:[]};if(h.length){var j=h.removeAttr("id").get(0).attributes;if(j.length)for(c={},e=0;e<j.length;e++)c[j[e].name.split(":")[1]]=j[e].value}for(e=0;e<g.length;e++){var k,l={start:null,stop:null,style:null};if(g.eq(e).attr("begin")&&(l.start=mejs.Utility.convertSMPTEtoSeconds(g.eq(e).attr("begin"))),!l.start&&g.eq(e-1).attr("end")&&(l.start=mejs.Utility.convertSMPTEtoSeconds(g.eq(e-1).attr("end"))),g.eq(e).attr("end")&&(l.stop=mejs.Utility.convertSMPTEtoSeconds(g.eq(e).attr("end"))),!l.stop&&g.eq(e+1).attr("begin")&&(l.stop=mejs.Utility.convertSMPTEtoSeconds(g.eq(e+1).attr("begin"))),c){k="";for(var m in c)k+=m+":"+c[m]+";"}k&&(l.style=k),0===l.start&&(l.start=.2),i.times.push(l),d=a.trim(g.eq(e).html()).replace(/(\b(https?|ftp|file):\/\/[-A-Z0-9+&@#\/%?=~_|!:,.;]*[-A-Z0-9+&@#\/%=~_|])/gi,"<a href='$1' target='_blank'>$1</a>"),i.text.push(d),0===i.times.start&&(i.times.start=2)}return i}},split2:function(a,b){return a.split(b)}},3!="x\n\ny".split(/\n/gi).length&&(mejs.TrackFormatParser.split2=function(a,b){var c,d=[],e="";for(c=0;c<a.length;c++)e+=a.substring(c,c+1),b.test(e)&&(d.push(e.replace(b,"")),e="");return d.push(e),d})}(mejs.$),function(a){a.extend(mejs.MepDefaults,{contextMenuItems:[{render:function(a){return"undefined"==typeof a.enterFullScreen?null:mejs.i18n.t(a.isFullScreen?"Turn off Fullscreen":"Go Fullscreen")},click:function(a){a.isFullScreen?a.exitFullScreen():a.enterFullScreen()}},{render:function(a){return mejs.i18n.t(a.media.muted?"Unmute":"Mute")},click:function(a){a.setMuted(a.media.muted?!1:!0)}},{isSeparator:!0},{render:function(){return mejs.i18n.t("Download Video")},click:function(a){window.location.href=a.media.currentSrc}}]}),a.extend(MediaElementPlayer.prototype,{buildcontextmenu:function(b){b.contextMenu=a('<div class="mejs-contextmenu"></div>').appendTo(a("body")).hide(),b.container.bind("contextmenu",function(a){return b.isContextMenuEnabled?(a.preventDefault(),b.renderContextMenu(a.clientX-1,a.clientY-1),!1):void 0}),b.container.bind("click",function(){b.contextMenu.hide()}),b.contextMenu.bind("mouseleave",function(){b.startContextMenuTimer()})},cleancontextmenu:function(a){a.contextMenu.remove()},isContextMenuEnabled:!0,enableContextMenu:function(){this.isContextMenuEnabled=!0},disableContextMenu:function(){this.isContextMenuEnabled=!1},contextMenuTimeout:null,startContextMenuTimer:function(){var a=this;a.killContextMenuTimer(),a.contextMenuTimer=setTimeout(function(){a.hideContextMenu(),a.killContextMenuTimer()},750)},killContextMenuTimer:function(){var a=this.contextMenuTimer;null!=a&&(clearTimeout(a),delete a,a=null)},hideContextMenu:function(){this.contextMenu.hide()},renderContextMenu:function(b,c){for(var d=this,e="",f=d.options.contextMenuItems,g=0,h=f.length;h>g;g++)if(f[g].isSeparator)e+='<div class="mejs-contextmenu-separator"></div>';else{var i=f[g].render(d);null!=i&&(e+='<div class="mejs-contextmenu-item" data-itemindex="'+g+'" id="element-'+1e6*Math.random()+'">'+i+"</div>")}d.contextMenu.empty().append(a(e)).css({top:c,left:b}).show(),d.contextMenu.find(".mejs-contextmenu-item").each(function(){var b=a(this),c=parseInt(b.data("itemindex"),10),e=d.options.contextMenuItems[c];"undefined"!=typeof e.show&&e.show(b,d),b.click(function(){"undefined"!=typeof e.click&&e.click(d),d.contextMenu.hide()})}),setTimeout(function(){d.killControlsTimer("rev3")},100)}})}(mejs.$),function(a){a.extend(mejs.MepDefaults,{skipBackInterval:30,skipBackText:mejs.i18n.t("Skip back %1 seconds")}),a.extend(MediaElementPlayer.prototype,{buildskipback:function(b,c,d,e){var f=this,g=f.options.skipBackText.replace("%1",f.options.skipBackInterval);a('<div class="mejs-button mejs-skip-back-button"><button type="button" aria-controls="'+f.id+'" title="'+g+'" aria-label="'+g+'">'+f.options.skipBackInterval+"</button></div>").appendTo(c).click(function(){e.setCurrentTime(Math.max(e.currentTime-f.options.skipBackInterval,0)),a(this).find("button").blur()})}})}(mejs.$),function(a){a.extend(mejs.MepDefaults,{postrollCloseText:mejs.i18n.t("Close")}),a.extend(MediaElementPlayer.prototype,{buildpostroll:function(b,c,d){var e=this,f=e.container.find('link[rel="postroll"]').attr("href");"undefined"!=typeof f&&(b.postroll=a('<div class="mejs-postroll-layer mejs-layer"><a class="mejs-postroll-close" onclick="$(this).parent().hide();return false;">'+e.options.postrollCloseText+'</a><div class="mejs-postroll-layer-content"></div></div>').prependTo(d).hide(),e.media.addEventListener("ended",function(){a.ajax({dataType:"html",url:f,success:function(a){d.find(".mejs-postroll-layer-content").html(a)}}),b.postroll.show()},!1))}})}(mejs.$),function(a,b){function c(){function a(){"undefined"!=typeof _wpmejsSettings&&(c=b.extend(!0,{},_wpmejsSettings)),c.success=c.success||function(a){var b,c;"flash"===a.pluginType&&(b=a.attributes.autoplay&&"false"!==a.attributes.autoplay,c=a.attributes.loop&&"false"!==a.attributes.loop,b&&a.addEventListener("canplay",function(){a.play()},!1),c&&a.addEventListener("ended",function(){a.play()},!1))},b(".wp-audio-shortcode, .wp-video-shortcode").not(".mejs-container").filter(function(){return!b(this).parent().hasClass(".mejs-mediaelement")}).mediaelementplayer(c)}var c={};return{initialize:a}}a.wp=a.wp||{},mejs.plugins.silverlight[0].types.push("video/x-ms-wmv"),mejs.plugins.silverlight[0].types.push("audio/x-ms-wma"),a.wp.mediaelement=new c,b(a.wp.mediaelement.initialize)}(window,jQuery),function(){function a(){this.returnValue=!1}function b(){this.cancelBubble=!0}var c,d,e=0,f=[],g={},h={},i={"<":"lt",">":"gt","&":"amp",'"':"quot","'":"#39"},j=/[<>&\"\']/g,k=window.setTimeout,l={};!function(a){var b,c,d,e=a.split(/,/);for(b=0;b<e.length;b+=2)for(d=e[b+1].split(/ /),c=0;c<d.length;c++)h[d[c]]=e[b]}("application/msword,doc dot,application/pdf,pdf,application/pgp-signature,pgp,application/postscript,ps ai eps,application/rtf,rtf,application/vnd.ms-excel,xls xlb,application/vnd.ms-powerpoint,ppt pps pot,application/zip,zip,application/x-shockwave-flash,swf swfl,application/vnd.openxmlformats-officedocument.wordprocessingml.document,docx,application/vnd.openxmlformats-officedocument.wordprocessingml.template,dotx,application/vnd.openxmlformats-officedocument.spreadsheetml.sheet,xlsx,application/vnd.openxmlformats-officedocument.presentationml.presentation,pptx,application/vnd.openxmlformats-officedocument.presentationml.template,potx,application/vnd.openxmlformats-officedocument.presentationml.slideshow,ppsx,application/x-javascript,js,application/json,json,audio/mpeg,mpga mpega mp2 mp3,audio/x-wav,wav,audio/mp4,m4a,image/bmp,bmp,image/gif,gif,image/jpeg,jpeg jpg jpe,image/photoshop,psd,image/png,png,image/svg+xml,svg svgz,image/tiff,tiff tif,text/plain,asc txt text diff log,text/html,htm html xhtml,text/css,css,text/csv,csv,text/rtf,rtf,video/mpeg,mpeg mpg mpe m2v,video/quicktime,qt mov,video/mp4,mp4,video/x-m4v,m4v,video/x-flv,flv,video/x-ms-wmv,wmv,video/avi,avi,video/webm,webm,video/3gpp,3gp,video/3gpp2,3g2,video/vnd.rn-realvideo,rv,application/vnd.oasis.opendocument.formula-template,otf,application/octet-stream,exe");var m={VERSION:"1.5.7",STOPPED:1,STARTED:2,QUEUED:1,UPLOADING:2,FAILED:4,DONE:5,GENERIC_ERROR:-100,HTTP_ERROR:-200,IO_ERROR:-300,SECURITY_ERROR:-400,INIT_ERROR:-500,FILE_SIZE_ERROR:-600,FILE_EXTENSION_ERROR:-601,IMAGE_FORMAT_ERROR:-700,IMAGE_MEMORY_ERROR:-701,IMAGE_DIMENSIONS_ERROR:-702,mimeTypes:h,ua:function(){var a,b,c,d=navigator,e=d.userAgent,f=d.vendor;return a=/WebKit/.test(e),c=a&&-1!==f.indexOf("Apple"),b=window.opera&&window.opera.buildNumber,{windows:-1!==navigator.platform.indexOf("Win"),android:/Android/.test(e),ie:!a&&!b&&/MSIE/gi.test(e)&&/Explorer/gi.test(d.appName),webkit:a,gecko:!a&&/Gecko/.test(e),safari:c,opera:!!b}}(),typeOf:function(a){return{}.toString.call(a).match(/\s([a-z|A-Z]+)/)[1].toLowerCase()},extend:function(a){return m.each(arguments,function(b,c){c>0&&m.each(b,function(b,c){a[c]=b})}),a},cleanName:function(a){var b,c;for(c=[/[\300-\306]/g,"A",/[\340-\346]/g,"a",/\307/g,"C",/\347/g,"c",/[\310-\313]/g,"E",/[\350-\353]/g,"e",/[\314-\317]/g,"I",/[\354-\357]/g,"i",/\321/g,"N",/\361/g,"n",/[\322-\330]/g,"O",/[\362-\370]/g,"o",/[\331-\334]/g,"U",/[\371-\374]/g,"u"],b=0;b<c.length;b+=2)a=a.replace(c[b],c[b+1]);return a=a.replace(/\s+/g,"_"),a=a.replace(/[^a-z0-9_\-\.]+/gi,"")},addRuntime:function(a,b){return b.name=a,f[a]=b,f.push(b),b},guid:function(){var a,b=(new Date).getTime().toString(32);for(a=0;5>a;a++)b+=Math.floor(65535*Math.random()).toString(32);return(m.guidPrefix||"p")+b+(e++).toString(32)},buildUrl:function(a,b){var c="";return m.each(b,function(a,b){c+=(c?"&":"")+encodeURIComponent(b)+"="+encodeURIComponent(a)}),c&&(a+=(a.indexOf("?")>0?"&":"?")+c),a},each:function(a,b){var d,e,f;if(a)if(d=a.length,d===c){for(e in a)if(a.hasOwnProperty(e)&&b(a[e],e)===!1)return}else for(f=0;d>f;f++)if(b(a[f],f)===!1)return},formatSize:function(a){return a===c||/\D/.test(a)?m.translate("N/A"):a>1073741824?Math.round(a/1073741824,1)+" GB":a>1048576?Math.round(a/1048576,1)+" MB":a>1024?Math.round(a/1024,1)+" KB":a+" b"},getPos:function(a,b){function c(a){var b,c,d=0,e=0;return a&&(c=a.getBoundingClientRect(),b="CSS1Compat"===i.compatMode?i.documentElement:i.body,d=c.left+b.scrollLeft,e=c.top+b.scrollTop),{x:d,y:e}}var d,e,f,g=0,h=0,i=document;if(a=a,b=b||i.body,a&&a.getBoundingClientRect&&m.ua.ie&&(!i.documentMode||i.documentMode<8))return e=c(a),f=c(b),{x:e.x-f.x,y:e.y-f.y};for(d=a;d&&d!=b&&d.nodeType;)g+=d.offsetLeft||0,h+=d.offsetTop||0,d=d.offsetParent;for(d=a.parentNode;d&&d!=b&&d.nodeType;)g-=d.scrollLeft||0,h-=d.scrollTop||0,d=d.parentNode;return{x:g,y:h}},getSize:function(a){return{w:a.offsetWidth||a.clientWidth,h:a.offsetHeight||a.clientHeight}},parseSize:function(a){var b;return"string"==typeof a&&(a=/^([0-9]+)([mgk]?)$/.exec(a.toLowerCase().replace(/[^0-9mkg]/g,"")),b=a[2],a=+a[1],"g"==b&&(a*=1073741824),"m"==b&&(a*=1048576),"k"==b&&(a*=1024)),a},xmlEncode:function(a){return a?(""+a).replace(j,function(a){return i[a]?"&"+i[a]+";":a}):a},toArray:function(a){var b,c=[];for(b=0;b<a.length;b++)c[b]=a[b];return c},inArray:function(a,b){if(b){if(Array.prototype.indexOf)return Array.prototype.indexOf.call(b,a);for(var c=0,d=b.length;d>c;c++)if(b[c]===a)return c}return-1},addI18n:function(a){return m.extend(g,a)},translate:function(a){return g[a]||a},isEmptyObj:function(a){if(a===c)return!0;for(var b in a)return!1;return!0},hasClass:function(a,b){var c;return""==a.className?!1:(c=new RegExp("(^|\\s+)"+b+"(\\s+|$)"),c.test(a.className))},addClass:function(a,b){m.hasClass(a,b)||(a.className=""==a.className?b:a.className.replace(/\s+$/,"")+" "+b)},removeClass:function(a,b){var c=new RegExp("(^|\\s+)"+b+"(\\s+|$)");a.className=a.className.replace(c,function(a,b,c){return" "===b&&" "===c?" ":""})},getStyle:function(a,b){return a.currentStyle?a.currentStyle[b]:window.getComputedStyle?window.getComputedStyle(a,null)[b]:void 0},addEvent:function(e,f,g){var h,i,j;j=arguments[3],f=f.toLowerCase(),d===c&&(d="Plupload_"+m.guid()),e.addEventListener?(h=g,e.addEventListener(f,h,!1)):e.attachEvent&&(h=function(){var c=window.event;c.target||(c.target=c.srcElement),c.preventDefault=a,c.stopPropagation=b,g(c)},e.attachEvent("on"+f,h)),e[d]===c&&(e[d]=m.guid()),l.hasOwnProperty(e[d])||(l[e[d]]={}),i=l[e[d]],i.hasOwnProperty(f)||(i[f]=[]),i[f].push({func:h,orig:g,key:j})},removeEvent:function(a,b){var e,f,g;if("function"==typeof arguments[2]?f=arguments[2]:g=arguments[2],b=b.toLowerCase(),a[d]&&l[a[d]]&&l[a[d]][b]){e=l[a[d]][b];for(var h=e.length-1;h>=0&&(e[h].key!==g&&e[h].orig!==f||(a.removeEventListener?a.removeEventListener(b,e[h].func,!1):a.detachEvent&&a.detachEvent("on"+b,e[h].func),e[h].orig=null,e[h].func=null,e.splice(h,1),f===c));h--);if(e.length||delete l[a[d]][b],m.isEmptyObj(l[a[d]])){delete l[a[d]];try{delete a[d]}catch(i){a[d]=c}}}},removeAllEvents:function(a){var b=arguments[1];a[d]!==c&&a[d]&&m.each(l[a[d]],function(c,d){m.removeEvent(a,d,b)})}};m.Uploader=function(a){function b(){var a,b,c=0;if(this.state==m.STARTED){for(b=0;b<i.length;b++)a||i[b].status!=m.QUEUED?c++:(a=i[b],a.status=m.UPLOADING,this.trigger("BeforeUpload",a)&&this.trigger("UploadFile",a));c==i.length&&(this.stop(),this.trigger("UploadComplete",i))}}function d(){var a,b;for(e.reset(),a=0;a<i.length;a++)b=i[a],b.size!==c?(e.size+=b.size,e.loaded+=b.loaded):e.size=c,b.status==m.DONE?e.uploaded++:b.status==m.FAILED?e.failed++:e.queued++;e.size===c?e.percent=i.length>0?Math.ceil(e.uploaded/i.length*100):0:(e.bytesPerSec=Math.ceil(e.loaded/((+new Date-g||1)/1e3)),e.percent=e.size>0?Math.ceil(e.loaded/e.size*100):0)}var e,g,h={},i=[],j=!1;e=new m.QueueProgress,a=m.extend({chunk_size:0,multipart:!0,multi_selection:!0,file_data_name:"file",filters:[]},a),m.extend(this,{state:m.STOPPED,runtime:"",features:{},files:i,settings:a,total:e,id:m.guid(),init:function(){function e(){var a,b,c,d=j[o++];if(d){if(a=d.getFeatures(),b=n.settings.required_features)for(b=b.split(","),c=0;c<b.length;c++)if(!a[b[c]])return void e();d.init(n,function(b){b&&b.success?(n.features=a,n.runtime=d.name,n.trigger("Init",{runtime:d.name}),n.trigger("PostInit"),n.refresh()):e()})}else n.trigger("Error",{code:m.INIT_ERROR,message:m.translate("Init error.")})}var h,j,l,n=this,o=0;if("function"==typeof a.preinit?a.preinit(n):m.each(a.preinit,function(a,b){n.bind(b,a)}),a.page_url=a.page_url||document.location.pathname.replace(/\/[^\/]+$/g,"/"),/^(\w+:\/\/|\/)/.test(a.url)||(a.url=a.page_url+a.url),a.chunk_size=m.parseSize(a.chunk_size),a.max_file_size=m.parseSize(a.max_file_size),n.bind("FilesAdded",function(b,d){var e,f,g,h=0,j=a.filters;for(j&&j.length&&(g=[],m.each(j,function(a){m.each(a.extensions.split(/,/),function(a){/^\s*\*\s*$/.test(a)?g.push("\\.*"):g.push("\\."+a.replace(new RegExp("["+"/^$.*+?|()[]{}\\".replace(/./g,"\\$&")+"]","g"),"\\$&"))})}),g=new RegExp(g.join("|")+"$","i")),e=0;e<d.length;e++)f=d[e],f.loaded=0,f.percent=0,f.status=m.QUEUED,!g||g.test(f.name)?f.size!==c&&f.size>a.max_file_size?b.trigger("Error",{code:m.FILE_SIZE_ERROR,message:m.translate("File size error."),file:f}):(i.push(f),h++):b.trigger("Error",{code:m.FILE_EXTENSION_ERROR,message:m.translate("File extension error."),file:f});return h?void k(function(){n.trigger("QueueChanged"),n.refresh()},1):!1}),a.unique_names&&n.bind("UploadFile",function(a,b){var c=b.name.match(/\.([^.]+)$/),d="tmp";c&&(d=c[1]),b.target_name=b.id+"."+d}),n.bind("UploadProgress",function(a,b){b.percent=b.size>0?Math.ceil(b.loaded/b.size*100):100,d()}),n.bind("StateChanged",function(a){if(a.state==m.STARTED)g=+new Date;else if(a.state==m.STOPPED)for(h=a.files.length-1;h>=0;h--)a.files[h].status==m.UPLOADING&&(a.files[h].status=m.QUEUED,d())}),n.bind("QueueChanged",d),n.bind("Error",function(a,c){c.file&&(c.file.status=m.FAILED,d(),a.state==m.STARTED&&k(function(){b.call(n)},1))}),n.bind("FileUploaded",function(a,c){c.status=m.DONE,c.loaded=c.size,a.trigger("UploadProgress",c),k(function(){b.call(n)},1)}),a.runtimes)for(j=[],l=a.runtimes.split(/\s?,\s?/),h=0;h<l.length;h++)f[l[h]]&&j.push(f[l[h]]);else j=f;e(),"function"==typeof a.init?a.init(n):m.each(a.init,function(a,b){n.bind(b,a)})},refresh:function(){this.trigger("Refresh")},start:function(){i.length&&this.state!=m.STARTED&&(this.state=m.STARTED,this.trigger("StateChanged"),b.call(this))},stop:function(){this.state!=m.STOPPED&&(this.state=m.STOPPED,this.trigger("CancelUpload"),this.trigger("StateChanged"))},disableBrowse:function(){j=arguments[0]!==c?arguments[0]:!0,this.trigger("DisableBrowse",j)},getFile:function(a){var b;for(b=i.length-1;b>=0;b--)if(i[b].id===a)return i[b]},removeFile:function(a){var b;for(b=i.length-1;b>=0;b--)if(i[b].id===a.id)return this.splice(b,1)[0]},splice:function(a,b){var d;return d=i.splice(a===c?0:a,b===c?i.length:b),this.trigger("FilesRemoved",d),this.trigger("QueueChanged"),d},trigger:function(a){var b,c,d=h[a.toLowerCase()];if(d)for(c=Array.prototype.slice.call(arguments),c[0]=this,b=0;b<d.length;b++)if(d[b].func.apply(d[b].scope,c)===!1)return!1;return!0},hasEventListener:function(a){return!!h[a.toLowerCase()]},bind:function(a,b,c){var d;a=a.toLowerCase(),d=h[a]||[],d.push({func:b,scope:c||this}),h[a]=d},unbind:function(a){a=a.toLowerCase();var b,d=h[a],e=arguments[1];if(d){if(e!==c){for(b=d.length-1;b>=0;b--)if(d[b].func===e){d.splice(b,1);break}}else d=[];d.length||delete h[a]}},unbindAll:function(){var a=this;m.each(h,function(b,c){a.unbind(c)})},destroy:function(){this.stop(),this.trigger("Destroy"),this.unbindAll()}})},m.File=function(a,b,c){var d=this;d.id=a,d.name=b,d.size=c,d.loaded=0,d.percent=0,d.status=0},m.Runtime=function(){this.getFeatures=function(){},this.init=function(a,b){}},m.QueueProgress=function(){var a=this;a.size=0,a.loaded=0,a.uploaded=0,a.failed=0,a.queued=0,a.percent=0,a.bytesPerSec=0,a.reset=function(){a.size=a.loaded=a.uploaded=a.failed=a.queued=a.percent=a.bytesPerSec=0}},m.runtimes={},window.plupload=m}(),function(a,b,c,d){function e(a){var c=a.naturalWidth,d=a.naturalHeight;if(c*d>1048576){var e=b.createElement("canvas");e.width=e.height=1;var f=e.getContext("2d");return f.drawImage(a,-c+1,0),0===f.getImageData(0,0,1,1).data[3]}return!1}function f(a,c,d){var e=b.createElement("canvas");e.width=1,e.height=d;var f=e.getContext("2d");f.drawImage(a,0,0);for(var g=f.getImageData(0,0,1,d).data,h=0,i=d,j=d;j>h;){var k=g[4*(j-1)+3];0===k?i=j:h=j,j=i+h>>1}var l=j/d;return 0===l?1:l}function g(a,c,d){var g=a.naturalWidth,h=a.naturalHeight,i=d.width,j=d.height,k=c.getContext("2d");k.save();var l=e(a);l&&(g/=2,h/=2);var m=1024,n=b.createElement("canvas");n.width=n.height=m;for(var o=n.getContext("2d"),p=f(a,g,h),q=0;h>q;){for(var r=q+m>h?h-q:m,s=0;g>s;){var t=s+m>g?g-s:m;o.clearRect(0,0,m,m),o.drawImage(a,-s,-q);var u=s*i/g<<0,v=Math.ceil(t*i/g),w=q*j/h/p<<0,x=Math.ceil(r*j/h/p);k.drawImage(n,0,0,t,r,u,w,v,x),s+=m}q+=m}k.restore(),n=o=null}function h(b,c){var d;return"FileReader"in a?(d=new FileReader,d.readAsDataURL(b),d.onload=function(){c(d.result)},void 0):c(b.getAsDataURL())}function j(b,c){var d;return"FileReader"in a?(d=new FileReader,d.readAsBinaryString(b),d.onload=function(){c(d.result)},void 0):c(b.getAsBinary())}function k(a,c,d,e){var f,i,j,k=this;h(p[a.id],function(h){f=b.createElement("canvas"),f.style.display="none",b.body.appendChild(f),i=new Image,i.onerror=i.onabort=function(){e({success:!1})},i.onload=function(){var b,l,o,p;if(c.width||(c.width=i.width),c.height||(c.height=i.height),j=Math.min(c.width/i.width,c.height/i.height),1>j)b=Math.round(i.width*j),l=Math.round(i.height*j);else{if(!c.quality||"image/jpeg"!==d)return void e({success:!1});b=i.width,l=i.height}if(f.width=b,f.height=l,g(i,f,{width:b,height:l}),"image/jpeg"===d&&(o=new m(atob(h.substring(h.indexOf("base64,")+7))),o.headers&&o.headers.length&&(p=new n,p.init(o.get("exif")[0])&&(p.setExif("PixelXDimension",b),p.setExif("PixelYDimension",l),o.set("exif",p.getBinary()),k.hasEventListener("ExifData")&&k.trigger("ExifData",a,p.EXIF()),k.hasEventListener("GpsData")&&k.trigger("GpsData",a,p.GPS())))),c.quality&&"image/jpeg"===d)try{h=f.toDataURL(d,c.quality/100)}catch(q){h=f.toDataURL(d)}else h=f.toDataURL(d);h=h.substring(h.indexOf("base64,")+7),h=atob(h),o&&o.headers&&o.headers.length&&(h=o.restore(h),o.purge()),f.parentNode.removeChild(f),e({success:!0,data:h})},i.src=h})}function l(){function a(a,b){var c,d=f?0:-8*(b-1),g=0;for(c=0;b>c;c++)g|=e.charCodeAt(a+c)<<Math.abs(d+8*c);return g}function b(a,b,c){var c=3===arguments.length?c:e.length-b-1;e=e.substr(0,b)+a+e.substr(c+b)}function c(a,c,d){var e,g="",h=f?0:-8*(d-1);for(e=0;d>e;e++)g+=String.fromCharCode(c>>Math.abs(h+8*e)&255);b(g,a,d)}var e,f=!1;return{II:function(a){return a===d?f:void(f=a)},init:function(a){f=!1,e=a},SEGMENT:function(a,c,d){switch(arguments.length){case 1:return e.substr(a,e.length-a-1);case 2:return e.substr(a,c);case 3:b(d,a,c);break;default:return e}},BYTE:function(b){return a(b,1)},SHORT:function(b){return a(b,2)},LONG:function(b,e){return e===d?a(b,4):void c(b,e,4)},SLONG:function(b){var c=a(b,4);return c>2147483647?c-4294967296:c},STRING:function(b,c){var d="";for(c+=b;c>b;b++)d+=String.fromCharCode(a(b,1));return d}}}function m(a){var b,c,e,f={65505:{app:"EXIF",name:"APP1",signature:"Exif\x00"},65506:{app:"ICC",name:"APP2",signature:"ICC_PROFILE\x00"},65517:{app:"IPTC",name:"APP13",signature:"Photoshop 3.0\x00"}},g=[],h=d,i=0;if(b=new l,b.init(a),65496===b.SHORT(0)){for(c=2,e=Math.min(1048576,a.length);e>=c;)if(h=b.SHORT(c),h>=65488&&65495>=h)c+=2;else{if(65498===h||65497===h)break;i=b.SHORT(c+2)+2,f[h]&&b.STRING(c+4,f[h].signature.length)===f[h].signature&&g.push({hex:h,app:f[h].app.toUpperCase(),name:f[h].name.toUpperCase(),start:c,length:i,segment:b.SEGMENT(c,i)}),c+=i}return b.init(null),
{headers:g,restore:function(a){b.init(a);var d=new m(a);if(!d.headers)return!1;for(var e=d.headers.length;e>0;e--){var f=d.headers[e-1];b.SEGMENT(f.start,f.length,"")}d.purge(),c=65504==b.SHORT(2)?4+b.SHORT(4):2;for(var e=0,h=g.length;h>e;e++)b.SEGMENT(c,0,g[e].segment),c+=g[e].length;return b.SEGMENT()},get:function(a){for(var b=[],c=0,d=g.length;d>c;c++)g[c].app===a.toUpperCase()&&b.push(g[c].segment);return b},set:function(a,b){var c=[];"string"==typeof b?c.push(b):c=b;for(var d=ii=0,e=g.length;e>d&&(g[d].app===a.toUpperCase()&&(g[d].segment=c[ii],g[d].length=c[ii].length,ii++),!(ii>=c.length));d++);},purge:function(){g=[],b.init(null)}}}}function n(){function a(a,b){var c,e,g,i,k,l,m,n,o=f.SHORT(a),p=[],q={};for(c=0;o>c;c++)if(m=l=a+12*c+2,g=b[f.SHORT(m)],g!==d){switch(i=f.SHORT(m+=2),k=f.LONG(m+=2),m+=4,p=[],i){case 1:case 7:for(k>4&&(m=f.LONG(m)+j.tiffHeader),e=0;k>e;e++)p[e]=f.BYTE(m+e);break;case 2:k>4&&(m=f.LONG(m)+j.tiffHeader),q[g]=f.STRING(m,k-1);continue;case 3:for(k>2&&(m=f.LONG(m)+j.tiffHeader),e=0;k>e;e++)p[e]=f.SHORT(m+2*e);break;case 4:for(k>1&&(m=f.LONG(m)+j.tiffHeader),e=0;k>e;e++)p[e]=f.LONG(m+4*e);break;case 5:for(m=f.LONG(m)+j.tiffHeader,e=0;k>e;e++)p[e]=f.LONG(m+4*e)/f.LONG(m+4*e+4);break;case 9:for(m=f.LONG(m)+j.tiffHeader,e=0;k>e;e++)p[e]=f.SLONG(m+4*e);break;case 10:for(m=f.LONG(m)+j.tiffHeader,e=0;k>e;e++)p[e]=f.SLONG(m+4*e)/f.SLONG(m+4*e+4);break;default:continue}n=1==k?p[0]:p,h.hasOwnProperty(g)&&"object"!=typeof n?q[g]=h[g][n]:q[g]=n}return q}function b(){var b=d,c=j.tiffHeader;return f.II(18761==f.SHORT(c)),42!==f.SHORT(c+=2)?!1:(j.IFD0=j.tiffHeader+f.LONG(c+=2),b=a(j.IFD0,g.tiff),j.exifIFD="ExifIFDPointer"in b?j.tiffHeader+b.ExifIFDPointer:d,j.gpsIFD="GPSInfoIFDPointer"in b?j.tiffHeader+b.GPSInfoIFDPointer:d,!0)}function e(a,b,c){var d,e,h,k=0;if("string"==typeof b){var l=g[a.toLowerCase()];for(hex in l)if(l[hex]===b){b=hex;break}}for(d=j[a.toLowerCase()+"IFD"],e=f.SHORT(d),i=0;i<e;i++)if(h=d+12*i+2,f.SHORT(h)==b){k=h+8;break}return k?(f.LONG(k,c),!0):!1}var f,g,h,j={};return f=new l,g={tiff:{274:"Orientation",34665:"ExifIFDPointer",34853:"GPSInfoIFDPointer"},exif:{36864:"ExifVersion",40961:"ColorSpace",40962:"PixelXDimension",40963:"PixelYDimension",36867:"DateTimeOriginal",33434:"ExposureTime",33437:"FNumber",34855:"ISOSpeedRatings",37377:"ShutterSpeedValue",37378:"ApertureValue",37383:"MeteringMode",37384:"LightSource",37385:"Flash",41986:"ExposureMode",41987:"WhiteBalance",41990:"SceneCaptureType",41988:"DigitalZoomRatio",41992:"Contrast",41993:"Saturation",41994:"Sharpness"},gps:{0:"GPSVersionID",1:"GPSLatitudeRef",2:"GPSLatitude",3:"GPSLongitudeRef",4:"GPSLongitude"}},h={ColorSpace:{1:"sRGB",0:"Uncalibrated"},MeteringMode:{0:"Unknown",1:"Average",2:"CenterWeightedAverage",3:"Spot",4:"MultiSpot",5:"Pattern",6:"Partial",255:"Other"},LightSource:{1:"Daylight",2:"Fliorescent",3:"Tungsten",4:"Flash",9:"Fine weather",10:"Cloudy weather",11:"Shade",12:"Daylight fluorescent (D 5700 - 7100K)",13:"Day white fluorescent (N 4600 -5400K)",14:"Cool white fluorescent (W 3900 - 4500K)",15:"White fluorescent (WW 3200 - 3700K)",17:"Standard light A",18:"Standard light B",19:"Standard light C",20:"D55",21:"D65",22:"D75",23:"D50",24:"ISO studio tungsten",255:"Other"},Flash:{0:"Flash did not fire.",1:"Flash fired.",5:"Strobe return light not detected.",7:"Strobe return light detected.",9:"Flash fired, compulsory flash mode",13:"Flash fired, compulsory flash mode, return light not detected",15:"Flash fired, compulsory flash mode, return light detected",16:"Flash did not fire, compulsory flash mode",24:"Flash did not fire, auto mode",25:"Flash fired, auto mode",29:"Flash fired, auto mode, return light not detected",31:"Flash fired, auto mode, return light detected",32:"No flash function",65:"Flash fired, red-eye reduction mode",69:"Flash fired, red-eye reduction mode, return light not detected",71:"Flash fired, red-eye reduction mode, return light detected",73:"Flash fired, compulsory flash mode, red-eye reduction mode",77:"Flash fired, compulsory flash mode, red-eye reduction mode, return light not detected",79:"Flash fired, compulsory flash mode, red-eye reduction mode, return light detected",89:"Flash fired, auto mode, red-eye reduction mode",93:"Flash fired, auto mode, return light not detected, red-eye reduction mode",95:"Flash fired, auto mode, return light detected, red-eye reduction mode"},ExposureMode:{0:"Auto exposure",1:"Manual exposure",2:"Auto bracket"},WhiteBalance:{0:"Auto white balance",1:"Manual white balance"},SceneCaptureType:{0:"Standard",1:"Landscape",2:"Portrait",3:"Night scene"},Contrast:{0:"Normal",1:"Soft",2:"Hard"},Saturation:{0:"Normal",1:"Low saturation",2:"High saturation"},Sharpness:{0:"Normal",1:"Soft",2:"Hard"},GPSLatitudeRef:{N:"North latitude",S:"South latitude"},GPSLongitudeRef:{E:"East longitude",W:"West longitude"}},{init:function(a){return j={tiffHeader:10},a!==d&&a.length?(f.init(a),65505===f.SHORT(0)&&"EXIF\x00"===f.STRING(4,5).toUpperCase()?b():!1):!1},EXIF:function(){var b;if(b=a(j.exifIFD,g.exif),b.ExifVersion&&"array"===c.typeOf(b.ExifVersion)){for(var d=0,e="";d<b.ExifVersion.length;d++)e+=String.fromCharCode(b.ExifVersion[d]);b.ExifVersion=e}return b},GPS:function(){var b;return b=a(j.gpsIFD,g.gps),b.GPSVersionID&&(b.GPSVersionID=b.GPSVersionID.join(".")),b},setExif:function(a,b){return"PixelXDimension"!==a&&"PixelYDimension"!==a?!1:e("exif",a,b)},getBinary:function(){return f.SEGMENT()}}}var o,p={};c.runtimes.Html5=c.addRuntime("html5",{getFeatures:function(){var d,e,f,g,h,i;return e=f=h=i=!1,a.XMLHttpRequest&&(d=new XMLHttpRequest,f=!!d.upload,e=!(!d.sendAsBinary&&!d.upload)),e&&(g=!!(d.sendAsBinary||a.Uint8Array&&a.ArrayBuffer),h=!(!File||!File.prototype.getAsDataURL&&!a.FileReader||!g),i=!(!File||!(File.prototype.mozSlice||File.prototype.webkitSlice||File.prototype.slice))),o=c.ua.safari&&c.ua.windows,{html5:e,dragdrop:function(){var a=b.createElement("div");return"draggable"in a||"ondragstart"in a&&"ondrop"in a}(),jpgresize:h,pngresize:h,multipart:h||!!a.FileReader||!!a.FormData,canSendBinary:g,cantSendBlobInFormData:!(!(c.ua.gecko&&a.FormData&&a.FileReader)||FileReader.prototype.readAsArrayBuffer)||c.ua.android,progress:f,chunks:i,multi_selection:!(c.ua.safari&&c.ua.windows),triggerDialog:c.ua.gecko&&a.FormData||c.ua.webkit}},init:function(d,e){var f,g,h=function(a){var b,e,f,g=[],h={};for(e=0;e<a.length;e++)b=a[e],h[b.name]&&c.ua.safari&&c.ua.windows||(h[b.name]=!0,f=c.guid(),p[f]=b,g.push(new c.File(f,b.fileName||b.name,b.fileSize||b.size)));g.length&&d.trigger("FilesAdded",g)};return d.addFiles=h,f=this.getFeatures(),f.html5?(d.bind("Init",function(a){var e,f,g,i,j,k,l,m=[],n=a.settings.filters,o=b.body;e=b.createElement("div"),e.id=a.id+"_html5_container",c.extend(e.style,{position:"absolute",background:d.settings.shim_bgcolor||"transparent",width:"100px",height:"100px",overflow:"hidden",zIndex:99999,opacity:d.settings.shim_bgcolor?"":0}),e.className="plupload html5",d.settings.container&&(o=b.getElementById(d.settings.container),"static"===c.getStyle(o,"position")&&(o.style.position="relative")),o.appendChild(e);a:for(g=0;g<n.length;g++)for(j=n[g].extensions.split(/,/),i=0;i<j.length;i++){if("*"===j[i]){m=[];break a}k=c.mimeTypes[j[i]],k&&-1===c.inArray(k,m)&&m.push(k)}if(e.innerHTML='<input id="'+d.id+'_html5"  style="font-size:999px" type="file" accept="'+m.join(",")+'" '+(d.settings.multi_selection&&d.features.multi_selection?'multiple="multiple"':"")+" />",e.scrollTop=100,l=b.getElementById(d.id+"_html5"),a.features.triggerDialog?c.extend(l.style,{position:"absolute",width:"100%",height:"100%"}):c.extend(l.style,{cssFloat:"right",styleFloat:"right"}),l.onchange=function(){h(this.files),this.value=""},f=b.getElementById(a.settings.browse_button)){var p=a.settings.browse_button_hover,q=a.settings.browse_button_active,r=a.features.triggerDialog?f:e;p&&(c.addEvent(r,"mouseover",function(){c.addClass(f,p)},a.id),c.addEvent(r,"mouseout",function(){c.removeClass(f,p)},a.id)),q&&(c.addEvent(r,"mousedown",function(){c.addClass(f,q)},a.id),c.addEvent(b.body,"mouseup",function(){c.removeClass(f,q)},a.id)),a.features.triggerDialog&&c.addEvent(f,"click",function(c){var d=b.getElementById(a.id+"_html5");d&&!d.disabled&&d.click(),c.preventDefault()},a.id)}}),d.bind("PostInit",function(){var a=b.getElementById(d.settings.drop_element);if(a){if(o)return void c.addEvent(a,"dragenter",function(e){var f,g,i;f=b.getElementById(d.id+"_drop"),f||(f=b.createElement("input"),f.setAttribute("type","file"),f.setAttribute("id",d.id+"_drop"),f.setAttribute("multiple","multiple"),c.addEvent(f,"change",function(){h(this.files),c.removeEvent(f,"change",d.id),f.parentNode.removeChild(f)},d.id),c.addEvent(f,"dragover",function(a){a.stopPropagation()},d.id),a.appendChild(f)),g=c.getPos(a,b.getElementById(d.settings.container)),i=c.getSize(a),"static"===c.getStyle(a,"position")&&c.extend(a.style,{position:"relative"}),c.extend(f.style,{position:"absolute",display:"block",top:0,left:0,width:i.w+"px",height:i.h+"px",opacity:0})},d.id);c.addEvent(a,"dragover",function(a){a.preventDefault()},d.id),c.addEvent(a,"drop",function(a){var b=a.dataTransfer;b&&b.files&&h(b.files),a.preventDefault()},d.id)}}),d.bind("Refresh",function(a){var e,f,g,h,i;e=b.getElementById(d.settings.browse_button),e&&(f=c.getPos(e,b.getElementById(a.settings.container)),g=c.getSize(e),h=b.getElementById(d.id+"_html5_container"),c.extend(h.style,{top:f.y+"px",left:f.x+"px",width:g.w+"px",height:g.h+"px"}),d.features.triggerDialog&&("static"===c.getStyle(e,"position")&&c.extend(e.style,{position:"relative"}),i=parseInt(c.getStyle(e,"zIndex"),10),isNaN(i)&&(i=0),c.extend(e.style,{zIndex:i}),c.extend(h.style,{zIndex:i-1})))}),d.bind("DisableBrowse",function(a,c){var d=b.getElementById(a.id+"_html5");d&&(d.disabled=c)}),d.bind("CancelUpload",function(){g&&g.abort&&g.abort()}),d.bind("UploadFile",function(b,d){function e(a,b,c){var d;if(!File.prototype.slice)return(d=File.prototype.webkitSlice||File.prototype.mozSlice)?d.call(a,b,c):null;try{return a.slice(),a.slice(b,c)}catch(e){return a.slice(b,c-b)}}function h(h){function i(){function m(a){if(g.sendAsBinary)g.sendAsBinary(a);else if(b.features.canSendBinary){for(var c=new Uint8Array(a.length),d=0;d<a.length;d++)c[d]=255&a.charCodeAt(d);g.send(c.buffer)}}function n(e){var h,l=0,n="----pluploadboundary"+c.guid(),v="--",w="\r\n",x="";if(g=new XMLHttpRequest,g.upload&&(g.upload.onprogress=function(a){d.loaded=Math.min(d.size,k+a.loaded-l),b.trigger("UploadProgress",d)}),g.onreadystatechange=function(){var a,f;if(4==g.readyState&&b.state!==c.STOPPED){try{a=g.status}catch(l){a=0}if(a>=400)b.trigger("Error",{code:c.HTTP_ERROR,message:c.translate("HTTP Error."),file:d,status:a});else{if(p){if(f={chunk:j,chunks:p,response:g.responseText,status:a},b.trigger("ChunkUploaded",d,f),k+=s,f.cancelled)return void(d.status=c.FAILED);d.loaded=Math.min(d.size,(j+1)*r)}else d.loaded=d.size;b.trigger("UploadProgress",d),e=o=h=x=null,!p||++j>=p?(d.status=c.DONE,b.trigger("FileUploaded",d,{response:g.responseText,status:a})):i()}}},b.settings.multipart&&f.multipart){if(q.name=d.target_name||d.name,g.open("post",u,!0),c.each(b.settings.headers,function(a,b){g.setRequestHeader(b,a)}),"string"!=typeof e&&a.FormData)return h=new FormData,c.each(c.extend(q,b.settings.multipart_params),function(a,b){h.append(b,a)}),h.append(b.settings.file_data_name,e),void g.send(h);if("string"==typeof e)return g.setRequestHeader("Content-Type","multipart/form-data; boundary="+n),c.each(c.extend(q,b.settings.multipart_params),function(a,b){x+=v+n+w+'Content-Disposition: form-data; name="'+b+'"'+w+w,x+=unescape(encodeURIComponent(a))+w}),t=c.mimeTypes[d.name.replace(/^.+\.([^.]+)/,"$1").toLowerCase()]||"application/octet-stream",x+=v+n+w+'Content-Disposition: form-data; name="'+b.settings.file_data_name+'"; filename="'+unescape(encodeURIComponent(d.name))+'"'+w+"Content-Type: "+t+w+w+e+w+v+n+v+w,l=x.length-e.length,e=x,void m(e)}u=c.buildUrl(b.settings.url,c.extend(q,b.settings.multipart_params)),g.open("post",u,!0),g.setRequestHeader("Content-Type","application/octet-stream"),c.each(b.settings.headers,function(a,b){g.setRequestHeader(b,a)}),"string"==typeof e?m(e):g.send(e)}var o,p,q,r,s,t,u=b.settings.url;d.status!=c.DONE&&d.status!=c.FAILED&&b.state!=c.STOPPED&&(q={name:d.target_name||d.name},l.chunk_size&&d.size>l.chunk_size&&(f.chunks||"string"==typeof h)?(r=l.chunk_size,p=Math.ceil(d.size/r),s=Math.min(r,d.size-j*r),o="string"==typeof h?h.substring(j*r,j*r+s):e(h,j*r,j*r+s),q.chunk=j,q.chunks=p):(s=d.size,o=h),b.settings.multipart&&f.multipart&&"string"!=typeof o&&a.FileReader&&f.cantSendBlobInFormData&&f.chunks&&b.settings.chunk_size?!function(){var a=new FileReader;a.onload=function(){n(a.result),a=null},a.readAsBinaryString(o)}():n(o))}var j=0,k=0;i()}var i,l=b.settings;i=p[d.id],f.jpgresize&&b.settings.resize&&/\.(png|jpg|jpeg)$/i.test(d.name)?k.call(b,d,b.settings.resize,/\.png$/i.test(d.name)?"image/png":"image/jpeg",function(a){a.success?(d.size=a.data.length,h(a.data)):f.chunks?h(i):j(i,h)}):!f.chunks&&f.jpgresize?j(i,h):h(i)}),d.bind("Destroy",function(a){var d,e,f=b.body,g={inputContainer:a.id+"_html5_container",inputFile:a.id+"_html5",browseButton:a.settings.browse_button,dropElm:a.settings.drop_element};for(d in g)e=b.getElementById(g[d]),e&&c.removeAllEvents(e,a.id);c.removeAllEvents(b.body,a.id),a.settings.container&&(f=b.getElementById(a.settings.container)),f.removeChild(b.getElementById(g.inputContainer))}),void e({success:!0})):void e({success:!1})}})}(window,document,plupload),function(a,b,c,d){function e(a){return b.getElementById(a)}c.runtimes.Html4=c.addRuntime("html4",{getFeatures:function(){return{multipart:!0,triggerDialog:c.ua.gecko&&a.FormData||c.ua.webkit}},init:function(d,f){d.bind("Init",function(f){function g(){var a,h,i,j;k=c.guid(),r.push(k),a=b.createElement("form"),a.setAttribute("id","form_"+k),a.setAttribute("method","post"),a.setAttribute("enctype","multipart/form-data"),a.setAttribute("encoding","multipart/form-data"),a.setAttribute("target",f.id+"_iframe"),a.style.position="absolute",h=b.createElement("input"),h.setAttribute("id","input_"+k),h.setAttribute("type","file"),h.setAttribute("accept",t),h.setAttribute("size",1),j=e(f.settings.browse_button),f.features.triggerDialog&&j&&c.addEvent(e(f.settings.browse_button),"click",function(a){h.disabled||h.click(),a.preventDefault()},f.id),c.extend(h.style,{width:"100%",height:"100%",opacity:0,fontSize:"99px",cursor:"pointer"}),c.extend(a.style,{overflow:"hidden"}),i=f.settings.shim_bgcolor,i&&(a.style.background=i),s&&c.extend(h.style,{filter:"alpha(opacity=0)"}),c.addEvent(h,"change",function(b){var i,l=b.target,m=[];l.value&&(e("form_"+k).style.top="-1048575px",i=l.value.replace(/\\/g,"/"),i=i.substring(i.length,i.lastIndexOf("/")+1),m.push(new c.File(k,i)),f.features.triggerDialog?c.removeEvent(j,"click",f.id):c.removeAllEvents(a,f.id),c.removeEvent(h,"change",f.id),g(),m.length&&d.trigger("FilesAdded",m))},f.id),a.appendChild(h),p.appendChild(a),f.refresh()}function h(){var d=b.createElement("div");d.innerHTML='<iframe id="'+f.id+'_iframe" name="'+f.id+'_iframe" src="'+q+':&quot;&quot;" style="display:none"></iframe>',i=d.firstChild,p.appendChild(i),c.addEvent(i,"load",function(b){var d,e,g=b.target;if(j){try{d=g.contentWindow.document||g.contentDocument||a.frames[g.id].document}catch(h){return void f.trigger("Error",{code:c.SECURITY_ERROR,message:c.translate("Security error."),file:j})}e=d.documentElement.innerText||d.documentElement.textContent,e&&(j.status=c.DONE,j.loaded=1025,j.percent=100,f.trigger("UploadProgress",j),f.trigger("FileUploaded",j,{response:e}))}},f.id)}var i,j,k,l,m,n,o,p=b.body,q="javascript",r=[],s=/MSIE/.test(navigator.userAgent),t=[],u=f.settings.filters;a:for(l=0;l<u.length;l++)for(m=u[l].extensions.split(/,/),o=0;o<m.length;o++){if("*"===m[o]){t=[];break a}n=c.mimeTypes[m[o]],n&&-1===c.inArray(n,t)&&t.push(n)}t=t.join(","),f.settings.container&&(p=e(f.settings.container),"static"===c.getStyle(p,"position")&&(p.style.position="relative")),f.bind("UploadFile",function(a,d){var f,g;d.status!=c.DONE&&d.status!=c.FAILED&&a.state!=c.STOPPED&&(f=e("form_"+d.id),g=e("input_"+d.id),g.setAttribute("name",a.settings.file_data_name),f.setAttribute("action",a.settings.url),c.each(c.extend({name:d.target_name||d.name},a.settings.multipart_params),function(a,d){var e=b.createElement("input");c.extend(e,{type:"hidden",name:d,value:a}),f.insertBefore(e,f.firstChild)}),j=d,e("form_"+k).style.top="-1048575px",f.submit())}),f.bind("FileUploaded",function(a){a.refresh()}),f.bind("StateChanged",function(b){b.state==c.STARTED?h():b.state==c.STOPPED&&a.setTimeout(function(){c.removeEvent(i,"load",b.id),i.parentNode&&i.parentNode.removeChild(i)},0),c.each(b.files,function(a,b){if(a.status===c.DONE||a.status===c.FAILED){var d=e("form_"+a.id);d&&d.parentNode.removeChild(d)}})}),f.bind("Refresh",function(a){var d,f,g,h,i,j,l,m,n;d=e(a.settings.browse_button),d&&(i=c.getPos(d,e(a.settings.container)),j=c.getSize(d),l=e("form_"+k),m=e("input_"+k),c.extend(l.style,{top:i.y+"px",left:i.x+"px",width:j.w+"px",height:j.h+"px"}),a.features.triggerDialog&&("static"===c.getStyle(d,"position")&&c.extend(d.style,{position:"relative"}),n=parseInt(d.style.zIndex,10),isNaN(n)&&(n=0),c.extend(d.style,{zIndex:n}),c.extend(l.style,{zIndex:n-1})),g=a.settings.browse_button_hover,h=a.settings.browse_button_active,f=a.features.triggerDialog?d:l,g&&(c.addEvent(f,"mouseover",function(){c.addClass(d,g)},a.id),c.addEvent(f,"mouseout",function(){c.removeClass(d,g)},a.id)),h&&(c.addEvent(f,"mousedown",function(){c.addClass(d,h)},a.id),c.addEvent(b.body,"mouseup",function(){c.removeClass(d,h)},a.id)))}),d.bind("FilesRemoved",function(a,b){var c,d;for(c=0;c<b.length;c++)d=e("form_"+b[c].id),d&&d.parentNode.removeChild(d)}),d.bind("DisableBrowse",function(a,c){var d=b.getElementById("input_"+k);d&&(d.disabled=c)}),d.bind("Destroy",function(a){var d,f,g,h={inputContainer:"form_"+k,inputFile:"input_"+k,browseButton:a.settings.browse_button};for(d in h)f=e(h[d]),f&&c.removeAllEvents(f,a.id);c.removeAllEvents(b.body,a.id),c.each(r,function(a,b){g=e("form_"+a),g&&g.parentNode.removeChild(g)})}),g()}),f({success:!0})}})}(window,document,plupload),"undefined"==typeof jQuery)throw new Error("Bootstrap's JavaScript requires jQuery");+function(a){var b=a.fn.jquery.split(" ")[0].split(".");if(b[0]<2&&b[1]<9||1==b[0]&&9==b[1]&&b[2]<1)throw new Error("Bootstrap's JavaScript requires jQuery version 1.9.1 or higher")}(jQuery),+function(a){"use strict";function b(b,d){return this.each(function(){var e=a(this),f=e.data("bs.modal"),g=a.extend({},c.DEFAULTS,e.data(),"object"==typeof b&&b);f||e.data("bs.modal",f=new c(this,g)),"string"==typeof b?f[b](d):g.show&&f.show(d)})}var c=function(b,c){this.options=c,this.$body=a(document.body),this.$element=a(b),this.$backdrop=this.isShown=null,this.scrollbarWidth=0,this.options.remote&&this.$element.find(".modal-content").load(this.options.remote,a.proxy(function(){this.$element.trigger("loaded.bs.modal")},this))};c.VERSION="3.2.0",c.DEFAULTS={backdrop:!0,keyboard:!0,show:!0},c.prototype.toggle=function(a){return this.isShown?this.hide():this.show(a)},c.prototype.show=function(b){var c=this,d=a.Event("show.bs.modal",{relatedTarget:b});this.$element.trigger(d),this.isShown||d.isDefaultPrevented()||(this.isShown=!0,this.checkScrollbar(),this.$body.addClass("modal-open"),this.setScrollbar(),this.escape(),this.$element.on("click.dismiss.bs.modal",'[data-dismiss="modal"]',a.proxy(this.hide,this)),this.backdrop(function(){var d=a.support.transition&&c.$element.hasClass("fade");c.$element.parent().length||c.$element.appendTo(c.$body),c.$element.show().scrollTop(0),d&&c.$element[0].offsetWidth,c.$element.addClass("in").attr("aria-hidden",!1),c.enforceFocus();var e=a.Event("shown.bs.modal",{relatedTarget:b});d?c.$element.find(".modal-dialog").one("bsTransitionEnd",function(){c.$element.trigger("focus").trigger(e)}).emulateTransitionEnd(300):c.$element.trigger("focus").trigger(e)}))},c.prototype.hide=function(b){b&&b.preventDefault(),b=a.Event("hide.bs.modal"),this.$element.trigger(b),this.isShown&&!b.isDefaultPrevented()&&(this.isShown=!1,this.$body.removeClass("modal-open"),this.resetScrollbar(),this.escape(),a(document).off("focusin.bs.modal"),this.$element.removeClass("in").attr("aria-hidden",!0).off("click.dismiss.bs.modal"),a.support.transition&&this.$element.hasClass("fade")?this.$element.one("bsTransitionEnd",a.proxy(this.hideModal,this)).emulateTransitionEnd(300):this.hideModal())},c.prototype.enforceFocus=function(){a(document).off("focusin.bs.modal").on("focusin.bs.modal",a.proxy(function(a){this.$element[0]===a.target||this.$element.has(a.target).length||this.$element.trigger("focus")},this))},c.prototype.escape=function(){this.isShown&&this.options.keyboard?this.$element.on("keyup.dismiss.bs.modal",a.proxy(function(a){27==a.which&&this.hide()},this)):this.isShown||this.$element.off("keyup.dismiss.bs.modal")},c.prototype.hideModal=function(){var a=this;this.$element.hide(),this.backdrop(function(){a.$element.trigger("hidden.bs.modal")})},c.prototype.removeBackdrop=function(){this.$backdrop&&this.$backdrop.remove(),this.$backdrop=null},c.prototype.backdrop=function(b){var c=this,d=this.$element.hasClass("fade")?"fade":"";if(this.isShown&&this.options.backdrop){var e=a.support.transition&&d;if(this.$backdrop=a('<div class="modal-backdrop '+d+'" />').appendTo(this.$body),this.$element.on("click.dismiss.bs.modal",a.proxy(function(a){a.target===a.currentTarget&&("static"==this.options.backdrop?this.$element[0].focus.call(this.$element[0]):this.hide.call(this))},this)),e&&this.$backdrop[0].offsetWidth,this.$backdrop.addClass("in"),!b)return;e?this.$backdrop.one("bsTransitionEnd",b).emulateTransitionEnd(150):b()}else if(!this.isShown&&this.$backdrop){this.$backdrop.removeClass("in");var f=function(){c.removeBackdrop(),b&&b()};a.support.transition&&this.$element.hasClass("fade")?this.$backdrop.one("bsTransitionEnd",f).emulateTransitionEnd(150):f()}else b&&b()},c.prototype.checkScrollbar=function(){document.body.clientWidth>=window.innerWidth||(this.scrollbarWidth=this.scrollbarWidth||this.measureScrollbar())},c.prototype.setScrollbar=function(){var a=parseInt(this.$body.css("padding-right")||0,10);this.scrollbarWidth&&this.$body.css("padding-right",a+this.scrollbarWidth)},c.prototype.resetScrollbar=function(){this.$body.css("padding-right","")},c.prototype.measureScrollbar=function(){var a=document.createElement("div");a.className="modal-scrollbar-measure",this.$body.append(a);var b=a.offsetWidth-a.clientWidth;return this.$body[0].removeChild(a),b};var d=a.fn.modal;a.fn.modal=b,a.fn.modal.Constructor=c,a.fn.modal.noConflict=function(){return a.fn.modal=d,this},a(document).on("click.bs.modal.data-api",'[data-toggle="modal"]',function(c){var d=a(this),e=d.attr("href"),f=a(d.attr("data-target")||e&&e.replace(/.*(?=#[^\s]+$)/,"")),g=f.data("bs.modal")?"toggle":a.extend({remote:!/#/.test(e)&&e},f.data(),d.data());d.is("a")&&c.preventDefault(),f.one("show.bs.modal",function(a){a.isDefaultPrevented()||f.one("hidden.bs.modal",function(){d.is(":visible")&&d.trigger("focus")})}),b.call(f,g,this)})}(jQuery),+function(a){"use strict";function b(){var a=document.createElement("bootstrap"),b={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};for(var c in b)if(void 0!==a.style[c])return{end:b[c]};return!1}a.fn.emulateTransitionEnd=function(b){var c=!1,d=this;a(this).one("bsTransitionEnd",function(){c=!0});var e=function(){c||a(d).trigger(a.support.transition.end)};return setTimeout(e,b),this},a(function(){a.support.transition=b(),a.support.transition&&(a.event.special.bsTransitionEnd={bindType:a.support.transition.end,delegateType:a.support.transition.end,handle:function(b){return a(b.target).is(this)?b.handleObj.handler.apply(this,arguments):void 0}})})}(jQuery),+function(a){"use strict";function b(b){b&&3===b.which||(a(e).remove(),a(f).each(function(){var d=a(this),e=c(d),f={relatedTarget:this};e.hasClass("open")&&(e.trigger(b=a.Event("hide.bs.dropdown",f)),b.isDefaultPrevented()||(d.attr("aria-expanded","false"),e.removeClass("open").trigger("hidden.bs.dropdown",f)))}))}function c(b){var c=b.attr("data-target");c||(c=b.attr("href"),c=c&&/#[A-Za-z]/.test(c)&&c.replace(/.*(?=#[^\s]*$)/,""));var d=c&&a(c);return d&&d.length?d:b.parent()}function d(b){return this.each(function(){var c=a(this),d=c.data("bs.dropdown");d||c.data("bs.dropdown",d=new g(this)),"string"==typeof b&&d[b].call(c)})}var e=".dropdown-backdrop",f='[data-toggle="dropdown"]',g=function(b){a(b).on("click.bs.dropdown",this.toggle)};g.VERSION="3.3.0",g.prototype.toggle=function(d){var e=a(this);if(!e.is(".disabled, :disabled")){var f=c(e),g=f.hasClass("open");if(b(),!g){"ontouchstart"in document.documentElement&&!f.closest(".navbar-nav").length&&a('<div class="dropdown-backdrop"/>').insertAfter(a(this)).on("click",b);var h={relatedTarget:this};if(f.trigger(d=a.Event("show.bs.dropdown",h)),d.isDefaultPrevented())return;e.trigger("focus").attr("aria-expanded","true"),f.toggleClass("open").trigger("shown.bs.dropdown",h)}return!1}},g.prototype.keydown=function(b){if(/(38|40|27|32)/.test(b.which)){var d=a(this);if(b.preventDefault(),b.stopPropagation(),!d.is(".disabled, :disabled")){var e=c(d),g=e.hasClass("open");if(!g&&27!=b.which||g&&27==b.which)return 27==b.which&&e.find(f).trigger("focus"),d.trigger("click");var h=" li:not(.divider):visible a",i=e.find('[role="menu"]'+h+', [role="listbox"]'+h);if(i.length){var j=i.index(b.target);38==b.which&&j>0&&j--,40==b.which&&j<i.length-1&&j++,~j||(j=0),i.eq(j).trigger("focus")}}}};var h=a.fn.dropdown;a.fn.dropdown=d,a.fn.dropdown.Constructor=g,a.fn.dropdown.noConflict=function(){return a.fn.dropdown=h,this},a(document).on("click.bs.dropdown.data-api",b).on("click.bs.dropdown.data-api",".dropdown form",function(a){a.stopPropagation()}).on("click.bs.dropdown.data-api",f,g.prototype.toggle).on("keydown.bs.dropdown.data-api",f,g.prototype.keydown).on("keydown.bs.dropdown.data-api",'[role="menu"]',g.prototype.keydown).on("keydown.bs.dropdown.data-api",'[role="listbox"]',g.prototype.keydown)}(jQuery),function(){for(var a,b=function(){},c=["assert","clear","count","debug","dir","dirxml","error","exception","group","groupCollapsed","groupEnd","info","log","markTimeline","profile","profileEnd","table","time","timeEnd","timeStamp","trace","warn"],d=c.length,e=window.console=window.console||{};d--;)a=c[d],e[a]||(e[a]=b)}(),function(a){function b(a,b,e){var f=a[0],g=/er/.test(e)?_indeterminate:/bl/.test(e)?n:l,h=e==_update?{checked:f[l],disabled:f[n],indeterminate:"true"==a.attr(_indeterminate)||"false"==a.attr(_determinate)}:f[g];if(/^(ch|di|in)/.test(e)&&!h)c(a,g);else if(/^(un|en|de)/.test(e)&&h)d(a,g);else if(e==_update)for(var i in h)h[i]?c(a,i,!0):d(a,i,!0);else b&&"toggle"!=e||(b||a[_callback]("ifClicked"),h?f[_type]!==k&&d(a,g):c(a,g))}function c(b,c,e){var o=b[0],p=b.parent(),q=c==l,r=c==_indeterminate,s=c==n,t=r?_determinate:q?m:"enabled",u=f(b,t+g(o[_type])),v=f(b,c+g(o[_type]));if(!0!==o[c]){if(!e&&c==l&&o[_type]==k&&o.name){var w=b.closest("form"),x='input[name="'+o.name+'"]',x=w.length?w.find(x):a(x);x.each(function(){this!==o&&a(this).data(i)&&d(a(this),c)})}r?(o[c]=!0,o[l]&&d(b,l,"force")):(e||(o[c]=!0),q&&o[_indeterminate]&&d(b,_indeterminate,!1)),h(b,q,c,e)}o[n]&&f(b,_cursor,!0)&&p.find("."+j).css(_cursor,"default"),p[_add](v||f(b,c)||""),p.attr("role")&&!r&&p.attr("aria-"+(s?n:l),"true"),p[_remove](u||f(b,t)||"")}function d(a,b,c){var d=a[0],e=a.parent(),i=b==l,k=b==_indeterminate,o=b==n,p=k?_determinate:i?m:"enabled",q=f(a,p+g(d[_type])),r=f(a,b+g(d[_type]));!1!==d[b]&&((k||!c||"force"==c)&&(d[b]=!1),h(a,i,p,c)),!d[n]&&f(a,_cursor,!0)&&e.find("."+j).css(_cursor,"pointer"),e[_remove](r||f(a,b)||""),e.attr("role")&&!k&&e.attr("aria-"+(o?n:l),"false"),e[_add](q||f(a,p)||"")}function e(b,c){b.data(i)&&(b.parent().html(b.attr("style",b.data(i).s||"")),c&&b[_callback](c),b.off(".i").unwrap(),a(_label+'[for="'+b[0].id+'"]').add(b.closest(_label)).off(".i"))}function f(a,b,c){return a.data(i)?a.data(i).o[b+(c?"":"Class")]:void 0}function g(a){return a.charAt(0).toUpperCase()+a.slice(1)}function h(a,b,c,d){d||(b&&a[_callback]("ifToggled"),a[_callback]("ifChanged")[_callback]("if"+g(c)))}var i="iCheck",j=i+"-helper",k="radio",l="checked",m="un"+l,n="disabled";_determinate="determinate",_indeterminate="in"+_determinate,_update="update",_type="type",_click="click",_touch="touchbegin.i touchend.i",_add="addClass",_remove="removeClass",_callback="trigger",_label="label",_cursor="cursor",_mobile=/ipad|iphone|ipod|android|blackberry|windows phone|opera mini|silk/i.test(navigator.userAgent),a.fn[i]=function(f,g){var h='input[type="checkbox"], input[type="'+k+'"]',m=a(),o=function(b){b.each(function(){var b=a(this);m=b.is(h)?m.add(b):m.add(b.find(h))})};if(/^(check|uncheck|toggle|indeterminate|determinate|disable|enable|update|destroy)$/i.test(f))return f=f.toLowerCase(),o(this),m.each(function(){var c=a(this);"destroy"==f?e(c,"ifDestroyed"):b(c,!0,f),a.isFunction(g)&&g()});if("object"!=typeof f&&f)return this;var p=a.extend({checkedClass:l,disabledClass:n,indeterminateClass:_indeterminate,labelHover:!0},f),q=p.handle,r=p.hoverClass||"hover",s=p.focusClass||"focus",t=p.activeClass||"active",u=!!p.labelHover,v=p.labelHoverClass||"hover",w=0|(""+p.increaseArea).replace("%","");return("checkbox"==q||q==k)&&(h='input[type="'+q+'"]'),-50>w&&(w=-50),o(this),m.each(function(){var f=a(this);e(f);var g=this,h=g.id,m=-w+"%",o=100+2*w+"%",o={position:"absolute",top:m,left:m,display:"block",width:o,height:o,margin:0,padding:0,background:"#fff",border:0,opacity:0},m=_mobile?{position:"absolute",visibility:"hidden"}:w?o:{position:"absolute",opacity:0},q="checkbox"==g[_type]?p.checkboxClass||"icheckbox":p.radioClass||"i"+k,x=a(_label+'[for="'+h+'"]').add(f.closest(_label)),y=!!p.aria,z=i+"-"+Math.random().toString(36).substr(2,6),A='<div class="'+q+'" '+(y?'role="'+g[_type]+'" ':"");y&&x.each(function(){A+='aria-labelledby="',this.id?A+=this.id:(this.id=z,A+=z),A+='"'}),A=f.wrap(A+"/>")[_callback]("ifCreated").parent().append(p.insert),o=a('<ins class="'+j+'"/>').css(o).appendTo(A),f.data(i,{o:p,s:f.attr("style")}).css(m),p.inheritClass&&A[_add](g.className||""),p.inheritID&&h&&A.attr("id",i+"-"+h),"static"==A.css("position")&&A.css("position","relative"),b(f,!0,_update),x.length&&x.on(_click+".i mouseover.i mouseout.i "+_touch,function(c){var d=c[_type],e=a(this);if(!g[n]){if(d==_click){if(a(c.target).is("a"))return;b(f,!1,!0)}else u&&(/ut|nd/.test(d)?(A[_remove](r),e[_remove](v)):(A[_add](r),e[_add](v)));if(!_mobile)return!1;c.stopPropagation()}}),f.on(_click+".i focus.i blur.i keyup.i keydown.i keypress.i",function(a){var b=a[_type];return a=a.keyCode,b==_click?!1:"keydown"==b&&32==a?(g[_type]==k&&g[l]||(g[l]?d(f,l):c(f,l)),!1):void("keyup"==b&&g[_type]==k?!g[l]&&c(f,l):/us|ur/.test(b)&&A["blur"==b?_remove:_add](s))}),o.on(_click+" mousedown mouseup mouseover mouseout "+_touch,function(a){var c=a[_type],d=/wn|up/.test(c)?t:r;if(!g[n]){if(c==_click?b(f,!1,!0):(/wn|er|in/.test(c)?A[_add](d):A[_remove](d+" "+t),x.length&&u&&d==r&&x[/ut|nd/.test(c)?_remove:_add](v)),!_mobile)return!1;a.stopPropagation()}})})}}(window.jQuery||window.Zepto),function(a){"function"==typeof define&&define.amd?define(["jquery"],a):a(jQuery)}(function(a){if(!a.support.cors&&a.ajaxTransport&&window.XDomainRequest){var b=/^https?:\/\//i,c=/^get|post$/i,d=new RegExp("^"+location.protocol,"i");a.ajaxTransport("* text html xml json",function(e,f,g){if(e.crossDomain&&e.async&&c.test(e.type)&&b.test(e.url)&&d.test(e.url)){var h=null;return{send:function(b,c){var d="",g=(f.dataType||"").toLowerCase();h=new XDomainRequest,/^\d+$/.test(f.timeout)&&(h.timeout=f.timeout),h.ontimeout=function(){c(500,"timeout")},h.onload=function(){var b="Content-Length: "+h.responseText.length+"\r\nContent-Type: "+h.contentType,d={
code:200,message:"success"},e={text:h.responseText};try{if("html"===g||/text\/html/i.test(h.contentType))e.html=h.responseText;else if("json"===g||"text"!==g&&/\/json/i.test(h.contentType))try{e.json=a.parseJSON(h.responseText)}catch(f){d.code=500,d.message="parseerror"}else if("xml"===g||"text"!==g&&/\/xml/i.test(h.contentType)){var i=new ActiveXObject("Microsoft.XMLDOM");i.async=!1;try{i.loadXML(h.responseText)}catch(f){i=void 0}if(!i||!i.documentElement||i.getElementsByTagName("parsererror").length)throw d.code=500,d.message="parseerror","Invalid XML: "+h.responseText;e.xml=i}}catch(j){throw j}finally{c(d.code,d.message,e,b)}},h.onprogress=function(){},h.onerror=function(){c(500,"error",{text:h.responseText})},f.data&&(d="string"===a.type(f.data)?f.data:a.param(f.data)),h.open(e.type,e.url),h.send(d)},abort:function(){h&&h.abort()}}}})}}),function(a){"function"==typeof define&&define.amd?define(["jquery"],a):a("object"==typeof exports?require("jquery"):jQuery)}(function(a){function b(a){return h.raw?a:encodeURIComponent(a)}function c(a){return h.raw?a:decodeURIComponent(a)}function d(a){return b(h.json?JSON.stringify(a):String(a))}function e(a){0===a.indexOf('"')&&(a=a.slice(1,-1).replace(/\\"/g,'"').replace(/\\\\/g,"\\"));try{return a=decodeURIComponent(a.replace(g," ")),h.json?JSON.parse(a):a}catch(b){}}function f(b,c){var d=h.raw?b:e(b);return a.isFunction(c)?c(d):d}var g=/\+/g,h=a.cookie=function(e,g,i){if(void 0!==g&&!a.isFunction(g)){if(i=a.extend({},h.defaults,i),"number"==typeof i.expires){var j=i.expires,k=i.expires=new Date;k.setTime(+k+864e5*j)}return document.cookie=[b(e),"=",d(g),i.expires?"; expires="+i.expires.toUTCString():"",i.path?"; path="+i.path:"",i.domain?"; domain="+i.domain:"",i.secure?"; secure":""].join("")}for(var l=e?void 0:{},m=document.cookie?document.cookie.split("; "):[],n=0,o=m.length;o>n;n++){var p=m[n].split("="),q=c(p.shift()),r=p.join("=");if(e&&e===q){l=f(r,g);break}e||void 0===(r=f(r))||(l[q]=r)}return l};h.defaults={},a.removeCookie=function(b,c){return void 0===a.cookie(b)?!1:(a.cookie(b,"",a.extend({},c,{expires:-1})),!a.cookie(b))}}),!function(a){var b;b=function(){function a(){}return a.prototype.setup=function(a,b,c,d){var e,f;return null==c&&(c=1),f=b.w/a.w,e=b.h/a.h,this.minZoom=(null!=d?d.fitWidth:void 0)&&!(null!=d?d.fitHeight:void 0)?f:(null!=d?d.fitHeight:void 0)&&!(null!=d?d.fitWidth:void 0)?e:(null!=d?d.fitWidth:void 0)&&(null!=d?d.fitHeight:void 0)?e>f?f:e:e>f?e:f,this.maxZoom=this.minZoom<1/c?1/c:this.minZoom},a.prototype.getZoom=function(a){return this.minZoom&&this.maxZoom?a*(this.maxZoom-this.minZoom)+this.minZoom:null},a.prototype.getSliderPos=function(a){return this.minZoom&&this.maxZoom?this.minZoom===this.maxZoom?0:(a-this.minZoom)/(this.maxZoom-this.minZoom):null},a.prototype.isZoomable=function(){return this.minZoom&&this.maxZoom?this.minZoom!==this.maxZoom:null},a.prototype.fixZoom=function(a){return a<this.minZoom?this.minZoom:a>this.maxZoom?this.maxZoom:a},a}();var c;c=function(){function c(b,d){var e;this.element=b,this.$el=a(this.element),e={$fileInput:this.$("input.cropit-image-input"),$preview:this.$(".cropit-image-preview"),$zoomSlider:this.$("input.cropit-image-zoom-input"),$previewContainer:this.$(".cropit-image-preview-container")},this.options=a.extend({},c._DEFAULTS,e,d),this.init()}return c._DEFAULTS={exportZoom:1,imageBackground:!1,imageBackgroundBorderWidth:0,imageState:null,allowCrossOrigin:!1,allowDragNDrop:!0,fitWidth:!1,fitHeight:!1,freeMove:!1},c.PREVIEW_EVENTS=function(){return["mousedown","mouseup","mouseleave","touchstart","touchend","touchcancel","touchleave"].map(function(a){return""+a+".cropit"}).join(" ")}(),c.PREVIEW_MOVE_EVENTS="mousemove.cropit touchmove.cropit",c.ZOOM_INPUT_EVENTS=function(){return["mousemove","touchmove","change"].map(function(a){return""+a+".cropit"}).join(" ")}(),c.prototype.init=function(){var c,d,e,f;return this.image=new Image,this.options.allowCrossOrigin&&(this.image.crossOrigin="Anonymous"),this.$fileInput=this.options.$fileInput.attr({accept:"image/*"}),this.$preview=this.options.$preview.css({backgroundRepeat:"no-repeat"}),this.$zoomSlider=this.options.$zoomSlider.attr({min:0,max:1,step:.01}),this.previewSize={w:this.options.width||this.$preview.width(),h:this.options.height||this.$preview.height()},this.options.width&&this.$preview.width(this.previewSize.w),this.options.height&&this.$preview.height(this.previewSize.h),this.options.imageBackground&&(a.isArray(this.options.imageBackgroundBorderWidth)?this.imageBgBorderWidthArray=this.options.imageBackgroundBorderWidth:(this.imageBgBorderWidthArray=[],[0,1,2,3].forEach(function(a){return function(b){return a.imageBgBorderWidthArray[b]=a.options.imageBackgroundBorderWidth}}(this))),c=this.options.$previewContainer,this.$imageBg=a("<img />").addClass("cropit-image-background").attr("alt","").css("position","absolute"),this.$imageBgContainer=a("<div />").addClass("cropit-image-background-container").css({position:"absolute",zIndex:0,left:-this.imageBgBorderWidthArray[3]+window.parseInt(this.$preview.css("border-left-width")),top:-this.imageBgBorderWidthArray[0]+window.parseInt(this.$preview.css("border-top-width")),width:this.previewSize.w+this.imageBgBorderWidthArray[1]+this.imageBgBorderWidthArray[3],height:this.previewSize.h+this.imageBgBorderWidthArray[0]+this.imageBgBorderWidthArray[2]}).append(this.$imageBg),this.imageBgBorderWidthArray[0]>0&&this.$imageBgContainer.css({overflow:"hidden"}),c.css("position","relative").prepend(this.$imageBgContainer),this.$preview.css("position","relative"),this.$preview.hover(function(a){return function(){return a.$imageBg.addClass("cropit-preview-hovered")}}(this),function(a){return function(){return a.$imageBg.removeClass("cropit-preview-hovered")}}(this))),this.initialOffset={x:0,y:0},this.initialZoom=0,this.initialZoomSliderPos=0,this.imageLoaded=!1,this.moveContinue=!1,this.zoomer=new b,this.options.allowDragNDrop&&jQuery.event.props.push("dataTransfer"),this.bindListeners(),this.$zoomSlider.val(this.initialZoomSliderPos),this.setOffset((null!=(d=this.options.imageState)?d.offset:void 0)||this.initialOffset),this.zoom=(null!=(e=this.options.imageState)?e.zoom:void 0)||this.initialZoom,this.loadImage((null!=(f=this.options.imageState)?f.src:void 0)||null)},c.prototype.bindListeners=function(){return this.$fileInput.on("change.cropit",this.onFileChange.bind(this)),this.$preview.on(c.PREVIEW_EVENTS,this.onPreviewEvent.bind(this)),this.$zoomSlider.on(c.ZOOM_INPUT_EVENTS,this.onZoomSliderChange.bind(this)),this.options.allowDragNDrop?(this.$preview.on("dragover.cropit dragleave.cropit",this.onDragOver.bind(this)),this.$preview.on("drop.cropit",this.onDrop.bind(this))):void 0},c.prototype.unbindListeners=function(){return this.$fileInput.off("change.cropit"),this.$preview.off(c.PREVIEW_EVENTS),this.$preview.off("dragover.cropit dragleave.cropit drop.cropit"),this.$zoomSlider.off(c.ZOOM_INPUT_EVENTS)},c.prototype.reset=function(){return this.zoom=this.initialZoom,this.offset=this.initialOffset},c.prototype.onFileChange=function(){var a;return"function"==typeof(a=this.options).onFileChange&&a.onFileChange(),this.loadFileReader(this.$fileInput.get(0).files[0])},c.prototype.loadFileReader=function(a){var b;return b=new FileReader,(null!=a?a.type.match("image"):void 0)?(this.setImageLoadingClass(),b.readAsDataURL(a),b.onload=this.onFileReaderLoaded.bind(this),b.onerror=this.onFileReaderError.bind(this)):void 0},c.prototype.onFileReaderLoaded=function(a){return this.reset(),this.loadImage(a.target.result)},c.prototype.onFileReaderError=function(){var a;return"function"==typeof(a=this.options).onFileReaderError?a.onFileReaderError():void 0},c.prototype.onDragOver=function(a){return a.preventDefault(),a.dataTransfer.dropEffect="copy",this.$preview.toggleClass("cropit-drag-hovered","dragover"===a.type)},c.prototype.onDrop=function(a){var b;return a.preventDefault(),a.stopPropagation(),b=Array.prototype.slice.call(a.dataTransfer.files,0),b.some(function(a){return function(b){return b.type.match("image")?(a.loadFileReader(b),!0):void 0}}(this)),this.$preview.removeClass("cropit-drag-hovered")},c.prototype.loadImage=function(a){var b;return this.imageSrc=a,this.imageSrc?("function"==typeof(b=this.options).onImageLoading&&b.onImageLoading(),this.setImageLoadingClass(),this.image.onload=this.onImageLoaded.bind(this),this.image.onerror=this.onImageError.bind(this),this.image.src=this.imageSrc):void 0},c.prototype.onImageLoaded=function(){var a;return this.setImageLoadedClass(),this.setOffset(this.offset),this.$preview.css("background-image","url("+this.imageSrc+")"),this.options.imageBackground&&this.$imageBg.attr("src",this.imageSrc),this.imageSize={w:this.image.width,h:this.image.height},this.setupZoomer(),this.imageLoaded=!0,"function"==typeof(a=this.options).onImageLoaded?a.onImageLoaded():void 0},c.prototype.onImageError=function(){var a;return"function"==typeof(a=this.options).onImageError?a.onImageError():void 0},c.prototype.setImageLoadingClass=function(){return this.$preview.removeClass("cropit-image-loaded").addClass("cropit-image-loading")},c.prototype.setImageLoadedClass=function(){return this.$preview.removeClass("cropit-image-loading").addClass("cropit-image-loaded")},c.prototype.getEventPosition=function(a){var b,c,d,e;return(null!=(b=a.originalEvent)&&null!=(c=b.touches)?c[0]:void 0)&&(a=null!=(d=a.originalEvent)&&null!=(e=d.touches)?e[0]:void 0),a.clientX&&a.clientY?{x:a.clientX,y:a.clientY}:void 0},c.prototype.onPreviewEvent=function(b){return this.imageLoaded?(this.moveContinue=!1,this.$preview.off(c.PREVIEW_MOVE_EVENTS),"mousedown"===b.type||"touchstart"===b.type?(this.origin=this.getEventPosition(b),this.moveContinue=!0,this.$preview.on(c.PREVIEW_MOVE_EVENTS,this.onMove.bind(this))):a(document.body).focus(),b.stopPropagation(),!1):void 0},c.prototype.onMove=function(a){var b;return b=this.getEventPosition(a),this.moveContinue&&b&&this.setOffset({x:this.offset.x+b.x-this.origin.x,y:this.offset.y+b.y-this.origin.y}),this.origin=b,a.stopPropagation(),!1},c.prototype.setOffset=function(a){return this.offset=this.fixOffset(a),this.$preview.css("background-position",""+this.offset.x+"px "+this.offset.y+"px"),this.options.imageBackground?this.$imageBg.css({left:this.offset.x+this.imageBgBorderWidthArray[3],top:this.offset.y+this.imageBgBorderWidthArray[0]}):void 0},c.prototype.fixOffset=function(a){var b;return this.imageLoaded?(b={x:a.x,y:a.y},this.options.freeMove||(this.imageSize.w*this.zoom<=this.previewSize.w?b.x=0:b.x>0?b.x=0:b.x+this.imageSize.w*this.zoom<this.previewSize.w&&(b.x=this.previewSize.w-this.imageSize.w*this.zoom),this.imageSize.h*this.zoom<=this.previewSize.h?b.y=0:b.y>0?b.y=0:b.y+this.imageSize.h*this.zoom<this.previewSize.h&&(b.y=this.previewSize.h-this.imageSize.h*this.zoom)),b.x=this.round(b.x),b.y=this.round(b.y),b):a},c.prototype.onZoomSliderChange=function(){var a;return this.imageLoaded?(this.zoomSliderPos=Number(this.$zoomSlider.val()),a=this.zoomer.getZoom(this.zoomSliderPos),this.setZoom(a)):void 0},c.prototype.enableZoomSlider=function(){var a;return this.$zoomSlider.removeAttr("disabled"),"function"==typeof(a=this.options).onZoomEnabled?a.onZoomEnabled():void 0},c.prototype.disableZoomSlider=function(){var a;return this.$zoomSlider.attr("disabled",!0),"function"==typeof(a=this.options).onZoomDisabled?a.onZoomDisabled():void 0},c.prototype.setupZoomer=function(){return this.zoomer.setup(this.imageSize,this.previewSize,this.options.exportZoom,this.options),this.zoom=this.fixZoom(this.zoom),this.setZoom(this.zoom),this.isZoomable()?this.enableZoomSlider():this.disableZoomSlider()},c.prototype.setZoom=function(a){var b,c,d,e,f;return a=this.fixZoom(a),f=this.round(this.imageSize.w*a),e=this.round(this.imageSize.h*a),d=this.zoom,b=this.previewSize.w/2-(this.previewSize.w/2-this.offset.x)*a/d,c=this.previewSize.h/2-(this.previewSize.h/2-this.offset.y)*a/d,this.zoom=a,this.setOffset({x:b,y:c}),this.zoomSliderPos=this.zoomer.getSliderPos(this.zoom),this.$zoomSlider.val(this.zoomSliderPos),this.$preview.css("background-size",""+f+"px "+e+"px"),this.options.imageBackground?this.$imageBg.css({width:f,height:e}):void 0},c.prototype.fixZoom=function(a){return this.zoomer.fixZoom(a)},c.prototype.isZoomable=function(){return this.zoomer.isZoomable()},c.prototype.getCroppedImageData=function(b){var c,d,e,f,g;return this.imageSrc?(f={type:"image/png",quality:.75,originalSize:!1,fillBg:"#fff"},b=a.extend({},f,b),e={w:this.previewSize.w,h:this.previewSize.h},this.options.fitHeight&&!this.options.fitWidth&&this.imageSize.w*this.zoom<this.previewSize.w?e.w=this.imageSize.w*this.zoom:this.options.fitWidth&&!this.options.fitHeight&&this.imageSize.h*this.zoom<this.previewSize.h&&(e.h=this.imageSize.h*this.zoom),g=b.originalSize?1/this.zoom:this.options.exportZoom,c=a("<canvas />").attr({width:e.w*g,height:e.h*g}).get(0),d=c.getContext("2d"),"image/jpeg"===b.type&&(d.fillStyle=b.fillBg,d.fillRect(0,0,c.width,c.height)),d.drawImage(this.image,this.offset.x*g,this.offset.y*g,this.zoom*g*this.imageSize.w,this.zoom*g*this.imageSize.h),c.toDataURL(b.type,b.quality)):null},c.prototype.getImageState=function(){return{src:this.imageSrc,offset:this.offset,zoom:this.zoom}},c.prototype.getImageSrc=function(){return this.imageSrc},c.prototype.getOffset=function(){return this.offset},c.prototype.getZoom=function(){return this.zoom},c.prototype.getImageSize=function(){return this.imageSize?{width:this.imageSize.w,height:this.imageSize.h}:null},c.prototype.getPreviewSize=function(){return{width:this.previewSize.w,height:this.previewSize.h}},c.prototype.setPreviewSize=function(a){return(null!=a?a.width:void 0)>0&&(null!=a?a.height:void 0)>0?(this.previewSize={w:a.width,h:a.height},this.$preview.css({width:this.previewSize.w,height:this.previewSize.h}),this.options.imageBackground&&this.$imageBgContainer.css({width:this.previewSize.w+this.imageBgBorderWidthArray[1]+this.imageBgBorderWidthArray[3],height:this.previewSize.h+this.imageBgBorderWidthArray[0]+this.imageBgBorderWidthArray[2]}),this.imageLoaded?this.setupZoomer():void 0):void 0},c.prototype.disable=function(){return this.unbindListeners(),this.disableZoomSlider(),this.$el.addClass("cropit-disabled")},c.prototype.reenable=function(){return this.bindListeners(),this.enableZoomSlider(),this.$el.removeClass("cropit-disabled")},c.prototype.round=function(a){return Math.round(1e5*a)/1e5},c.prototype.$=function(a){return this.$el?this.$el.find(a):null},c}();var d,e;d="cropit",e={init:function(b){return this.each(function(){var e;return a.data(this,d)?void 0:(e=new c(this,b),a.data(this,d,e))})},destroy:function(){return this.each(function(){return a.removeData(this,d)})},isZoomable:function(){var a;return a=this.first().data(d),null!=a?a.isZoomable():void 0},"export":function(a){var b;return b=this.first().data(d),null!=b?b.getCroppedImageData(a):void 0},imageState:function(){var a;return a=this.first().data(d),null!=a?a.getImageState():void 0},imageSrc:function(b){var c;return null!=b?this.each(function(){var c;return c=a.data(this,d),null!=c&&c.reset(),null!=c?c.loadImage(b):void 0}):(c=this.first().data(d),null!=c?c.getImageSrc():void 0)},offset:function(b){var c;return null!=b&&null!=b.x&&null!=b.y?this.each(function(){var c;return c=a.data(this,d),null!=c?c.setOffset(b):void 0}):(c=this.first().data(d),null!=c?c.getOffset():void 0)},zoom:function(b){var c;return null!=b?this.each(function(){var c;return c=a.data(this,d),null!=c?c.setZoom(b):void 0}):(c=this.first().data(d),null!=c?c.getZoom():void 0)},imageSize:function(){var a;return a=this.first().data(d),null!=a?a.getImageSize():void 0},previewSize:function(b){var c;return null!=b?this.each(function(){var c;return c=a.data(this,d),null!=c?c.setPreviewSize(b):void 0}):(c=this.first().data(d),null!=c?c.getPreviewSize():void 0)},disable:function(){return this.each(function(){var b;return b=a.data(this,d),b.disable()})},reenable:function(){return this.each(function(){var b;return b=a.data(this,d),b.reenable()})}},a.fn.cropit=function(a){return e[a]?e[a].apply(this,[].slice.call(arguments,1)):e.init.apply(this,arguments)}}(window.jQuery),function(a,b){function c(b,c){var e,f,g,h=b.nodeName.toLowerCase();return"area"===h?(e=b.parentNode,f=e.name,b.href&&f&&"map"===e.nodeName.toLowerCase()?(g=a("img[usemap=#"+f+"]")[0],!!g&&d(g)):!1):(/input|select|textarea|button|object/.test(h)?!b.disabled:"a"===h?b.href||c:c)&&d(b)}function d(b){return a.expr.filters.visible(b)&&!a(b).parents().addBack().filter(function(){return"hidden"===a.css(this,"visibility")}).length}var e=0,f=/^ui-id-\d+$/;a.ui=a.ui||{},a.extend(a.ui,{version:"1.10.4",keyCode:{BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38}}),a.fn.extend({focus:function(b){return function(c,d){return"number"==typeof c?this.each(function(){var b=this;setTimeout(function(){a(b).focus(),d&&d.call(b)},c)}):b.apply(this,arguments)}}(a.fn.focus),scrollParent:function(){var b;return b=a.ui.ie&&/(static|relative)/.test(this.css("position"))||/absolute/.test(this.css("position"))?this.parents().filter(function(){return/(relative|absolute|fixed)/.test(a.css(this,"position"))&&/(auto|scroll)/.test(a.css(this,"overflow")+a.css(this,"overflow-y")+a.css(this,"overflow-x"))}).eq(0):this.parents().filter(function(){return/(auto|scroll)/.test(a.css(this,"overflow")+a.css(this,"overflow-y")+a.css(this,"overflow-x"))}).eq(0),/fixed/.test(this.css("position"))||!b.length?a(document):b},zIndex:function(c){if(c!==b)return this.css("zIndex",c);if(this.length)for(var d,e,f=a(this[0]);f.length&&f[0]!==document;){if(d=f.css("position"),("absolute"===d||"relative"===d||"fixed"===d)&&(e=parseInt(f.css("zIndex"),10),!isNaN(e)&&0!==e))return e;f=f.parent()}return 0},uniqueId:function(){return this.each(function(){this.id||(this.id="ui-id-"+ ++e)})},removeUniqueId:function(){return this.each(function(){f.test(this.id)&&a(this).removeAttr("id")})}}),a.extend(a.expr[":"],{data:a.expr.createPseudo?a.expr.createPseudo(function(b){return function(c){return!!a.data(c,b)}}):function(b,c,d){return!!a.data(b,d[3])},focusable:function(b){return c(b,!isNaN(a.attr(b,"tabindex")))},tabbable:function(b){var d=a.attr(b,"tabindex"),e=isNaN(d);return(e||d>=0)&&c(b,!e)}}),a("<a>").outerWidth(1).jquery||a.each(["Width","Height"],function(c,d){function e(b,c,d,e){return a.each(f,function(){c-=parseFloat(a.css(b,"padding"+this))||0,d&&(c-=parseFloat(a.css(b,"border"+this+"Width"))||0),e&&(c-=parseFloat(a.css(b,"margin"+this))||0)}),c}var f="Width"===d?["Left","Right"]:["Top","Bottom"],g=d.toLowerCase(),h={innerWidth:a.fn.innerWidth,innerHeight:a.fn.innerHeight,outerWidth:a.fn.outerWidth,outerHeight:a.fn.outerHeight};a.fn["inner"+d]=function(c){return c===b?h["inner"+d].call(this):this.each(function(){a(this).css(g,e(this,c)+"px")})},a.fn["outer"+d]=function(b,c){return"number"!=typeof b?h["outer"+d].call(this,b):this.each(function(){a(this).css(g,e(this,b,!0,c)+"px")})}}),a.fn.addBack||(a.fn.addBack=function(a){return this.add(null==a?this.prevObject:this.prevObject.filter(a))}),a("<a>").data("a-b","a").removeData("a-b").data("a-b")&&(a.fn.removeData=function(b){return function(c){return arguments.length?b.call(this,a.camelCase(c)):b.call(this)}}(a.fn.removeData)),a.ui.ie=!!/msie [\w.]+/.exec(navigator.userAgent.toLowerCase()),a.support.selectstart="onselectstart"in document.createElement("div"),a.fn.extend({disableSelection:function(){return this.bind((a.support.selectstart?"selectstart":"mousedown")+".ui-disableSelection",function(a){a.preventDefault()})},enableSelection:function(){return this.unbind(".ui-disableSelection")}}),a.extend(a.ui,{plugin:{add:function(b,c,d){var e,f=a.ui[b].prototype;for(e in d)f.plugins[e]=f.plugins[e]||[],f.plugins[e].push([c,d[e]])},call:function(a,b,c){var d,e=a.plugins[b];if(e&&a.element[0].parentNode&&11!==a.element[0].parentNode.nodeType)for(d=0;e.length>d;d++)a.options[e[d][0]]&&e[d][1].apply(a.element,c)}},hasScroll:function(b,c){if("hidden"===a(b).css("overflow"))return!1;var d=c&&"left"===c?"scrollLeft":"scrollTop",e=!1;return b[d]>0?!0:(b[d]=1,e=b[d]>0,b[d]=0,e)}})}(jQuery),function(a,b){var c=0,d=Array.prototype.slice,e=a.cleanData;a.cleanData=function(b){for(var c,d=0;null!=(c=b[d]);d++)try{a(c).triggerHandler("remove")}catch(f){}e(b)},a.widget=function(c,d,e){var f,g,h,i,j={},k=c.split(".")[0];c=c.split(".")[1],f=k+"-"+c,e||(e=d,d=a.Widget),a.expr[":"][f.toLowerCase()]=function(b){return!!a.data(b,f)},a[k]=a[k]||{},g=a[k][c],h=a[k][c]=function(a,c){return this._createWidget?(arguments.length&&this._createWidget(a,c),b):new h(a,c)},a.extend(h,g,{version:e.version,_proto:a.extend({},e),_childConstructors:[]}),i=new d,i.options=a.widget.extend({},i.options),a.each(e,function(c,e){return a.isFunction(e)?(j[c]=function(){var a=function(){return d.prototype[c].apply(this,arguments)},b=function(a){return d.prototype[c].apply(this,a)};return function(){var c,d=this._super,f=this._superApply;return this._super=a,this._superApply=b,c=e.apply(this,arguments),this._super=d,this._superApply=f,c}}(),b):(j[c]=e,b)}),h.prototype=a.widget.extend(i,{widgetEventPrefix:g?i.widgetEventPrefix||c:c},j,{constructor:h,namespace:k,widgetName:c,widgetFullName:f}),g?(a.each(g._childConstructors,function(b,c){var d=c.prototype;a.widget(d.namespace+"."+d.widgetName,h,c._proto)}),delete g._childConstructors):d._childConstructors.push(h),a.widget.bridge(c,h)},a.widget.extend=function(c){for(var e,f,g=d.call(arguments,1),h=0,i=g.length;i>h;h++)for(e in g[h])f=g[h][e],g[h].hasOwnProperty(e)&&f!==b&&(c[e]=a.isPlainObject(f)?a.isPlainObject(c[e])?a.widget.extend({},c[e],f):a.widget.extend({},f):f);return c},a.widget.bridge=function(c,e){var f=e.prototype.widgetFullName||c;a.fn[c]=function(g){var h="string"==typeof g,i=d.call(arguments,1),j=this;return g=!h&&i.length?a.widget.extend.apply(null,[g].concat(i)):g,h?this.each(function(){var d,e=a.data(this,f);return e?a.isFunction(e[g])&&"_"!==g.charAt(0)?(d=e[g].apply(e,i),d!==e&&d!==b?(j=d&&d.jquery?j.pushStack(d.get()):d,!1):b):a.error("no such method '"+g+"' for "+c+" widget instance"):a.error("cannot call methods on "+c+" prior to initialization; attempted to call method '"+g+"'")}):this.each(function(){var b=a.data(this,f);b?b.option(g||{})._init():a.data(this,f,new e(g,this))}),j}},a.Widget=function(){},a.Widget._childConstructors=[],a.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{disabled:!1,create:null},_createWidget:function(b,d){d=a(d||this.defaultElement||this)[0],this.element=a(d),this.uuid=c++,this.eventNamespace="."+this.widgetName+this.uuid,this.options=a.widget.extend({},this.options,this._getCreateOptions(),b),this.bindings=a(),this.hoverable=a(),this.focusable=a(),d!==this&&(a.data(d,this.widgetFullName,this),this._on(!0,this.element,{remove:function(a){a.target===d&&this.destroy()}}),this.document=a(d.style?d.ownerDocument:d.document||d),this.window=a(this.document[0].defaultView||this.document[0].parentWindow)),this._create(),this._trigger("create",null,this._getCreateEventData()),this._init()},_getCreateOptions:a.noop,_getCreateEventData:a.noop,_create:a.noop,_init:a.noop,destroy:function(){this._destroy(),this.element.unbind(this.eventNamespace).removeData(this.widgetName).removeData(this.widgetFullName).removeData(a.camelCase(this.widgetFullName)),this.widget().unbind(this.eventNamespace).removeAttr("aria-disabled").removeClass(this.widgetFullName+"-disabled ui-state-disabled"),this.bindings.unbind(this.eventNamespace),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")},_destroy:a.noop,widget:function(){return this.element},option:function(c,d){var e,f,g,h=c;if(0===arguments.length)return a.widget.extend({},this.options);if("string"==typeof c)if(h={},e=c.split("."),c=e.shift(),e.length){for(f=h[c]=a.widget.extend({},this.options[c]),g=0;e.length-1>g;g++)f[e[g]]=f[e[g]]||{},f=f[e[g]];if(c=e.pop(),1===arguments.length)return f[c]===b?null:f[c];f[c]=d}else{if(1===arguments.length)return this.options[c]===b?null:this.options[c];h[c]=d}return this._setOptions(h),this},_setOptions:function(a){var b;for(b in a)this._setOption(b,a[b]);return this},_setOption:function(a,b){return this.options[a]=b,"disabled"===a&&(this.widget().toggleClass(this.widgetFullName+"-disabled ui-state-disabled",!!b).attr("aria-disabled",b),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")),this},enable:function(){return this._setOption("disabled",!1)},disable:function(){return this._setOption("disabled",!0)},_on:function(c,d,e){var f,g=this;"boolean"!=typeof c&&(e=d,d=c,c=!1),e?(d=f=a(d),this.bindings=this.bindings.add(d)):(e=d,d=this.element,f=this.widget()),a.each(e,function(e,h){function i(){return c||g.options.disabled!==!0&&!a(this).hasClass("ui-state-disabled")?("string"==typeof h?g[h]:h).apply(g,arguments):b}"string"!=typeof h&&(i.guid=h.guid=h.guid||i.guid||a.guid++);var j=e.match(/^(\w+)\s*(.*)$/),k=j[1]+g.eventNamespace,l=j[2];l?f.delegate(l,k,i):d.bind(k,i)})},_off:function(a,b){b=(b||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace,a.unbind(b).undelegate(b)},_delay:function(a,b){function c(){return("string"==typeof a?d[a]:a).apply(d,arguments)}var d=this;return setTimeout(c,b||0)},_hoverable:function(b){this.hoverable=this.hoverable.add(b),this._on(b,{mouseenter:function(b){a(b.currentTarget).addClass("ui-state-hover")},mouseleave:function(b){a(b.currentTarget).removeClass("ui-state-hover")}})},_focusable:function(b){this.focusable=this.focusable.add(b),this._on(b,{focusin:function(b){a(b.currentTarget).addClass("ui-state-focus")},focusout:function(b){a(b.currentTarget).removeClass("ui-state-focus")}})},_trigger:function(b,c,d){var e,f,g=this.options[b];if(d=d||{},c=a.Event(c),c.type=(b===this.widgetEventPrefix?b:this.widgetEventPrefix+b).toLowerCase(),c.target=this.element[0],f=c.originalEvent)for(e in f)e in c||(c[e]=f[e]);return this.element.trigger(c,d),!(a.isFunction(g)&&g.apply(this.element[0],[c].concat(d))===!1||c.isDefaultPrevented())}},a.each({show:"fadeIn",hide:"fadeOut"},function(b,c){a.Widget.prototype["_"+b]=function(d,e,f){"string"==typeof e&&(e={effect:e});var g,h=e?e===!0||"number"==typeof e?c:e.effect||c:b;e=e||{},"number"==typeof e&&(e={duration:e}),g=!a.isEmptyObject(e),e.complete=f,e.delay&&d.delay(e.delay),g&&a.effects&&a.effects.effect[h]?d[b](e):h!==b&&d[h]?d[h](e.duration,e.easing,f):d.queue(function(c){a(this)[b](),f&&f.call(d[0]),c()})}})}(jQuery),function(a){var b=!1;a(document).mouseup(function(){b=!1}),a.widget("ui.mouse",{version:"1.10.4",options:{cancel:"input,textarea,button,select,option",distance:1,delay:0},_mouseInit:function(){var b=this;this.element.bind("mousedown."+this.widgetName,function(a){return b._mouseDown(a)}).bind("click."+this.widgetName,function(c){return!0===a.data(c.target,b.widgetName+".preventClickEvent")?(a.removeData(c.target,b.widgetName+".preventClickEvent"),c.stopImmediatePropagation(),!1):void 0}),this.started=!1},_mouseDestroy:function(){this.element.unbind("."+this.widgetName),this._mouseMoveDelegate&&a(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate)},_mouseDown:function(c){if(!b){this._mouseStarted&&this._mouseUp(c),this._mouseDownEvent=c;var d=this,e=1===c.which,f="string"==typeof this.options.cancel&&c.target.nodeName?a(c.target).closest(this.options.cancel).length:!1;return e&&!f&&this._mouseCapture(c)?(this.mouseDelayMet=!this.options.delay,this.mouseDelayMet||(this._mouseDelayTimer=setTimeout(function(){d.mouseDelayMet=!0},this.options.delay)),this._mouseDistanceMet(c)&&this._mouseDelayMet(c)&&(this._mouseStarted=this._mouseStart(c)!==!1,!this._mouseStarted)?(c.preventDefault(),!0):(!0===a.data(c.target,this.widgetName+".preventClickEvent")&&a.removeData(c.target,this.widgetName+".preventClickEvent"),this._mouseMoveDelegate=function(a){return d._mouseMove(a)},this._mouseUpDelegate=function(a){return d._mouseUp(a)},a(document).bind("mousemove."+this.widgetName,this._mouseMoveDelegate).bind("mouseup."+this.widgetName,this._mouseUpDelegate),c.preventDefault(),b=!0,!0)):!0}},_mouseMove:function(b){return a.ui.ie&&(!document.documentMode||9>document.documentMode)&&!b.button?this._mouseUp(b):this._mouseStarted?(this._mouseDrag(b),b.preventDefault()):(this._mouseDistanceMet(b)&&this._mouseDelayMet(b)&&(this._mouseStarted=this._mouseStart(this._mouseDownEvent,b)!==!1,this._mouseStarted?this._mouseDrag(b):this._mouseUp(b)),!this._mouseStarted)},_mouseUp:function(b){return a(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate),this._mouseStarted&&(this._mouseStarted=!1,b.target===this._mouseDownEvent.target&&a.data(b.target,this.widgetName+".preventClickEvent",!0),this._mouseStop(b)),!1},_mouseDistanceMet:function(a){return Math.max(Math.abs(this._mouseDownEvent.pageX-a.pageX),Math.abs(this._mouseDownEvent.pageY-a.pageY))>=this.options.distance},_mouseDelayMet:function(){return this.mouseDelayMet},_mouseStart:function(){},_mouseDrag:function(){},_mouseStop:function(){},_mouseCapture:function(){return!0}})}(jQuery),function(a,b){function c(a,b,c){return[parseFloat(a[0])*(n.test(a[0])?b/100:1),parseFloat(a[1])*(n.test(a[1])?c/100:1)]}function d(b,c){return parseInt(a.css(b,c),10)||0}function e(b){var c=b[0];return 9===c.nodeType?{width:b.width(),height:b.height(),offset:{top:0,left:0}}:a.isWindow(c)?{width:b.width(),height:b.height(),offset:{top:b.scrollTop(),left:b.scrollLeft()}}:c.preventDefault?{width:0,height:0,offset:{top:c.pageY,left:c.pageX}}:{width:b.outerWidth(),height:b.outerHeight(),offset:b.offset()}}a.ui=a.ui||{};var f,g=Math.max,h=Math.abs,i=Math.round,j=/left|center|right/,k=/top|center|bottom/,l=/[\+\-]\d+(\.[\d]+)?%?/,m=/^\w+/,n=/%$/,o=a.fn.position;a.position={scrollbarWidth:function(){if(f!==b)return f;var c,d,e=a("<div style='display:block;position:absolute;width:50px;height:50px;overflow:hidden;'><div style='height:100px;width:auto;'></div></div>"),g=e.children()[0];return a("body").append(e),c=g.offsetWidth,e.css("overflow","scroll"),d=g.offsetWidth,c===d&&(d=e[0].clientWidth),e.remove(),f=c-d},getScrollInfo:function(b){var c=b.isWindow||b.isDocument?"":b.element.css("overflow-x"),d=b.isWindow||b.isDocument?"":b.element.css("overflow-y"),e="scroll"===c||"auto"===c&&b.width<b.element[0].scrollWidth,f="scroll"===d||"auto"===d&&b.height<b.element[0].scrollHeight;return{width:f?a.position.scrollbarWidth():0,height:e?a.position.scrollbarWidth():0}},getWithinInfo:function(b){var c=a(b||window),d=a.isWindow(c[0]),e=!!c[0]&&9===c[0].nodeType;return{element:c,isWindow:d,isDocument:e,offset:c.offset()||{left:0,top:0},scrollLeft:c.scrollLeft(),scrollTop:c.scrollTop(),width:d?c.width():c.outerWidth(),height:d?c.height():c.outerHeight()}}},a.fn.position=function(b){if(!b||!b.of)return o.apply(this,arguments);b=a.extend({},b);var f,n,p,q,r,s,t=a(b.of),u=a.position.getWithinInfo(b.within),v=a.position.getScrollInfo(u),w=(b.collision||"flip").split(" "),x={};return s=e(t),t[0].preventDefault&&(b.at="left top"),n=s.width,p=s.height,q=s.offset,r=a.extend({},q),a.each(["my","at"],function(){var a,c,d=(b[this]||"").split(" ");1===d.length&&(d=j.test(d[0])?d.concat(["center"]):k.test(d[0])?["center"].concat(d):["center","center"]),d[0]=j.test(d[0])?d[0]:"center",d[1]=k.test(d[1])?d[1]:"center",a=l.exec(d[0]),c=l.exec(d[1]),x[this]=[a?a[0]:0,c?c[0]:0],b[this]=[m.exec(d[0])[0],m.exec(d[1])[0]]}),1===w.length&&(w[1]=w[0]),"right"===b.at[0]?r.left+=n:"center"===b.at[0]&&(r.left+=n/2),"bottom"===b.at[1]?r.top+=p:"center"===b.at[1]&&(r.top+=p/2),f=c(x.at,n,p),r.left+=f[0],r.top+=f[1],this.each(function(){var e,j,k=a(this),l=k.outerWidth(),m=k.outerHeight(),o=d(this,"marginLeft"),s=d(this,"marginTop"),y=l+o+d(this,"marginRight")+v.width,z=m+s+d(this,"marginBottom")+v.height,A=a.extend({},r),B=c(x.my,k.outerWidth(),k.outerHeight());
"right"===b.my[0]?A.left-=l:"center"===b.my[0]&&(A.left-=l/2),"bottom"===b.my[1]?A.top-=m:"center"===b.my[1]&&(A.top-=m/2),A.left+=B[0],A.top+=B[1],a.support.offsetFractions||(A.left=i(A.left),A.top=i(A.top)),e={marginLeft:o,marginTop:s},a.each(["left","top"],function(c,d){a.ui.position[w[c]]&&a.ui.position[w[c]][d](A,{targetWidth:n,targetHeight:p,elemWidth:l,elemHeight:m,collisionPosition:e,collisionWidth:y,collisionHeight:z,offset:[f[0]+B[0],f[1]+B[1]],my:b.my,at:b.at,within:u,elem:k})}),b.using&&(j=function(a){var c=q.left-A.left,d=c+n-l,e=q.top-A.top,f=e+p-m,i={target:{element:t,left:q.left,top:q.top,width:n,height:p},element:{element:k,left:A.left,top:A.top,width:l,height:m},horizontal:0>d?"left":c>0?"right":"center",vertical:0>f?"top":e>0?"bottom":"middle"};l>n&&n>h(c+d)&&(i.horizontal="center"),m>p&&p>h(e+f)&&(i.vertical="middle"),i.important=g(h(c),h(d))>g(h(e),h(f))?"horizontal":"vertical",b.using.call(this,a,i)}),k.offset(a.extend(A,{using:j}))})},a.ui.position={fit:{left:function(a,b){var c,d=b.within,e=d.isWindow?d.scrollLeft:d.offset.left,f=d.width,h=a.left-b.collisionPosition.marginLeft,i=e-h,j=h+b.collisionWidth-f-e;b.collisionWidth>f?i>0&&0>=j?(c=a.left+i+b.collisionWidth-f-e,a.left+=i-c):a.left=j>0&&0>=i?e:i>j?e+f-b.collisionWidth:e:i>0?a.left+=i:j>0?a.left-=j:a.left=g(a.left-h,a.left)},top:function(a,b){var c,d=b.within,e=d.isWindow?d.scrollTop:d.offset.top,f=b.within.height,h=a.top-b.collisionPosition.marginTop,i=e-h,j=h+b.collisionHeight-f-e;b.collisionHeight>f?i>0&&0>=j?(c=a.top+i+b.collisionHeight-f-e,a.top+=i-c):a.top=j>0&&0>=i?e:i>j?e+f-b.collisionHeight:e:i>0?a.top+=i:j>0?a.top-=j:a.top=g(a.top-h,a.top)}},flip:{left:function(a,b){var c,d,e=b.within,f=e.offset.left+e.scrollLeft,g=e.width,i=e.isWindow?e.scrollLeft:e.offset.left,j=a.left-b.collisionPosition.marginLeft,k=j-i,l=j+b.collisionWidth-g-i,m="left"===b.my[0]?-b.elemWidth:"right"===b.my[0]?b.elemWidth:0,n="left"===b.at[0]?b.targetWidth:"right"===b.at[0]?-b.targetWidth:0,o=-2*b.offset[0];0>k?(c=a.left+m+n+o+b.collisionWidth-g-f,(0>c||h(k)>c)&&(a.left+=m+n+o)):l>0&&(d=a.left-b.collisionPosition.marginLeft+m+n+o-i,(d>0||l>h(d))&&(a.left+=m+n+o))},top:function(a,b){var c,d,e=b.within,f=e.offset.top+e.scrollTop,g=e.height,i=e.isWindow?e.scrollTop:e.offset.top,j=a.top-b.collisionPosition.marginTop,k=j-i,l=j+b.collisionHeight-g-i,m="top"===b.my[1],n=m?-b.elemHeight:"bottom"===b.my[1]?b.elemHeight:0,o="top"===b.at[1]?b.targetHeight:"bottom"===b.at[1]?-b.targetHeight:0,p=-2*b.offset[1];0>k?(d=a.top+n+o+p+b.collisionHeight-g-f,a.top+n+o+p>k&&(0>d||h(k)>d)&&(a.top+=n+o+p)):l>0&&(c=a.top-b.collisionPosition.marginTop+n+o+p-i,a.top+n+o+p>l&&(c>0||l>h(c))&&(a.top+=n+o+p))}},flipfit:{left:function(){a.ui.position.flip.left.apply(this,arguments),a.ui.position.fit.left.apply(this,arguments)},top:function(){a.ui.position.flip.top.apply(this,arguments),a.ui.position.fit.top.apply(this,arguments)}}},function(){var b,c,d,e,f,g=document.getElementsByTagName("body")[0],h=document.createElement("div");b=document.createElement(g?"div":"body"),d={visibility:"hidden",width:0,height:0,border:0,margin:0,background:"none"},g&&a.extend(d,{position:"absolute",left:"-1000px",top:"-1000px"});for(f in d)b.style[f]=d[f];b.appendChild(h),c=g||document.documentElement,c.insertBefore(b,c.firstChild),h.style.cssText="position: absolute; left: 10.7432222px;",e=a(h).offset().left,a.support.offsetFractions=e>10&&11>e,b.innerHTML="",c.removeChild(b)}()}(jQuery),function(a){function b(a,b,c){return a>b&&b+c>a}function c(a){return/left|right/.test(a.css("float"))||/inline|table-cell/.test(a.css("display"))}a.widget("ui.sortable",a.ui.mouse,{version:"1.10.4",widgetEventPrefix:"sort",ready:!1,options:{appendTo:"parent",axis:!1,connectWith:!1,containment:!1,cursor:"auto",cursorAt:!1,dropOnEmpty:!0,forcePlaceholderSize:!1,forceHelperSize:!1,grid:!1,handle:!1,helper:"original",items:"> *",opacity:!1,placeholder:!1,revert:!1,scroll:!0,scrollSensitivity:20,scrollSpeed:20,scope:"default",tolerance:"intersect",zIndex:1e3,activate:null,beforeStop:null,change:null,deactivate:null,out:null,over:null,receive:null,remove:null,sort:null,start:null,stop:null,update:null},_create:function(){var a=this.options;this.containerCache={},this.element.addClass("ui-sortable"),this.refresh(),this.floating=this.items.length?"x"===a.axis||c(this.items[0].item):!1,this.offset=this.element.offset(),this._mouseInit(),this.ready=!0},_destroy:function(){this.element.removeClass("ui-sortable ui-sortable-disabled"),this._mouseDestroy();for(var a=this.items.length-1;a>=0;a--)this.items[a].item.removeData(this.widgetName+"-item");return this},_setOption:function(b,c){"disabled"===b?(this.options[b]=c,this.widget().toggleClass("ui-sortable-disabled",!!c)):a.Widget.prototype._setOption.apply(this,arguments)},_mouseCapture:function(b,c){var d=null,e=!1,f=this;return this.reverting?!1:this.options.disabled||"static"===this.options.type?!1:(this._refreshItems(b),a(b.target).parents().each(function(){return a.data(this,f.widgetName+"-item")===f?(d=a(this),!1):void 0}),a.data(b.target,f.widgetName+"-item")===f&&(d=a(b.target)),d&&(!this.options.handle||c||(a(this.options.handle,d).find("*").addBack().each(function(){this===b.target&&(e=!0)}),e))?(this.currentItem=d,this._removeCurrentsFromItems(),!0):!1)},_mouseStart:function(b,c,d){var e,f,g=this.options;if(this.currentContainer=this,this.refreshPositions(),this.helper=this._createHelper(b),this._cacheHelperProportions(),this._cacheMargins(),this.scrollParent=this.helper.scrollParent(),this.offset=this.currentItem.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},a.extend(this.offset,{click:{left:b.pageX-this.offset.left,top:b.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.helper.css("position","absolute"),this.cssPosition=this.helper.css("position"),this.originalPosition=this._generatePosition(b),this.originalPageX=b.pageX,this.originalPageY=b.pageY,g.cursorAt&&this._adjustOffsetFromHelper(g.cursorAt),this.domPosition={prev:this.currentItem.prev()[0],parent:this.currentItem.parent()[0]},this.helper[0]!==this.currentItem[0]&&this.currentItem.hide(),this._createPlaceholder(),g.containment&&this._setContainment(),g.cursor&&"auto"!==g.cursor&&(f=this.document.find("body"),this.storedCursor=f.css("cursor"),f.css("cursor",g.cursor),this.storedStylesheet=a("<style>*{ cursor: "+g.cursor+" !important; }</style>").appendTo(f)),g.opacity&&(this.helper.css("opacity")&&(this._storedOpacity=this.helper.css("opacity")),this.helper.css("opacity",g.opacity)),g.zIndex&&(this.helper.css("zIndex")&&(this._storedZIndex=this.helper.css("zIndex")),this.helper.css("zIndex",g.zIndex)),this.scrollParent[0]!==document&&"HTML"!==this.scrollParent[0].tagName&&(this.overflowOffset=this.scrollParent.offset()),this._trigger("start",b,this._uiHash()),this._preserveHelperProportions||this._cacheHelperProportions(),!d)for(e=this.containers.length-1;e>=0;e--)this.containers[e]._trigger("activate",b,this._uiHash(this));return a.ui.ddmanager&&(a.ui.ddmanager.current=this),a.ui.ddmanager&&!g.dropBehaviour&&a.ui.ddmanager.prepareOffsets(this,b),this.dragging=!0,this.helper.addClass("ui-sortable-helper"),this._mouseDrag(b),!0},_mouseDrag:function(b){var c,d,e,f,g=this.options,h=!1;for(this.position=this._generatePosition(b),this.positionAbs=this._convertPositionTo("absolute"),this.lastPositionAbs||(this.lastPositionAbs=this.positionAbs),this.options.scroll&&(this.scrollParent[0]!==document&&"HTML"!==this.scrollParent[0].tagName?(this.overflowOffset.top+this.scrollParent[0].offsetHeight-b.pageY<g.scrollSensitivity?this.scrollParent[0].scrollTop=h=this.scrollParent[0].scrollTop+g.scrollSpeed:b.pageY-this.overflowOffset.top<g.scrollSensitivity&&(this.scrollParent[0].scrollTop=h=this.scrollParent[0].scrollTop-g.scrollSpeed),this.overflowOffset.left+this.scrollParent[0].offsetWidth-b.pageX<g.scrollSensitivity?this.scrollParent[0].scrollLeft=h=this.scrollParent[0].scrollLeft+g.scrollSpeed:b.pageX-this.overflowOffset.left<g.scrollSensitivity&&(this.scrollParent[0].scrollLeft=h=this.scrollParent[0].scrollLeft-g.scrollSpeed)):(b.pageY-a(document).scrollTop()<g.scrollSensitivity?h=a(document).scrollTop(a(document).scrollTop()-g.scrollSpeed):a(window).height()-(b.pageY-a(document).scrollTop())<g.scrollSensitivity&&(h=a(document).scrollTop(a(document).scrollTop()+g.scrollSpeed)),b.pageX-a(document).scrollLeft()<g.scrollSensitivity?h=a(document).scrollLeft(a(document).scrollLeft()-g.scrollSpeed):a(window).width()-(b.pageX-a(document).scrollLeft())<g.scrollSensitivity&&(h=a(document).scrollLeft(a(document).scrollLeft()+g.scrollSpeed))),h!==!1&&a.ui.ddmanager&&!g.dropBehaviour&&a.ui.ddmanager.prepareOffsets(this,b)),this.positionAbs=this._convertPositionTo("absolute"),this.options.axis&&"y"===this.options.axis||(this.helper[0].style.left=this.position.left+"px"),this.options.axis&&"x"===this.options.axis||(this.helper[0].style.top=this.position.top+"px"),c=this.items.length-1;c>=0;c--)if(d=this.items[c],e=d.item[0],f=this._intersectsWithPointer(d),f&&d.instance===this.currentContainer&&e!==this.currentItem[0]&&this.placeholder[1===f?"next":"prev"]()[0]!==e&&!a.contains(this.placeholder[0],e)&&("semi-dynamic"===this.options.type?!a.contains(this.element[0],e):!0)){if(this.direction=1===f?"down":"up","pointer"!==this.options.tolerance&&!this._intersectsWithSides(d))break;this._rearrange(b,d),this._trigger("change",b,this._uiHash());break}return this._contactContainers(b),a.ui.ddmanager&&a.ui.ddmanager.drag(this,b),this._trigger("sort",b,this._uiHash()),this.lastPositionAbs=this.positionAbs,!1},_mouseStop:function(b,c){if(b){if(a.ui.ddmanager&&!this.options.dropBehaviour&&a.ui.ddmanager.drop(this,b),this.options.revert){var d=this,e=this.placeholder.offset(),f=this.options.axis,g={};f&&"x"!==f||(g.left=e.left-this.offset.parent.left-this.margins.left+(this.offsetParent[0]===document.body?0:this.offsetParent[0].scrollLeft)),f&&"y"!==f||(g.top=e.top-this.offset.parent.top-this.margins.top+(this.offsetParent[0]===document.body?0:this.offsetParent[0].scrollTop)),this.reverting=!0,a(this.helper).animate(g,parseInt(this.options.revert,10)||500,function(){d._clear(b)})}else this._clear(b,c);return!1}},cancel:function(){if(this.dragging){this._mouseUp({target:null}),"original"===this.options.helper?this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper"):this.currentItem.show();for(var b=this.containers.length-1;b>=0;b--)this.containers[b]._trigger("deactivate",null,this._uiHash(this)),this.containers[b].containerCache.over&&(this.containers[b]._trigger("out",null,this._uiHash(this)),this.containers[b].containerCache.over=0)}return this.placeholder&&(this.placeholder[0].parentNode&&this.placeholder[0].parentNode.removeChild(this.placeholder[0]),"original"!==this.options.helper&&this.helper&&this.helper[0].parentNode&&this.helper.remove(),a.extend(this,{helper:null,dragging:!1,reverting:!1,_noFinalSort:null}),this.domPosition.prev?a(this.domPosition.prev).after(this.currentItem):a(this.domPosition.parent).prepend(this.currentItem)),this},serialize:function(b){var c=this._getItemsAsjQuery(b&&b.connected),d=[];return b=b||{},a(c).each(function(){var c=(a(b.item||this).attr(b.attribute||"id")||"").match(b.expression||/(.+)[\-=_](.+)/);c&&d.push((b.key||c[1]+"[]")+"="+(b.key&&b.expression?c[1]:c[2]))}),!d.length&&b.key&&d.push(b.key+"="),d.join("&")},toArray:function(b){var c=this._getItemsAsjQuery(b&&b.connected),d=[];return b=b||{},c.each(function(){d.push(a(b.item||this).attr(b.attribute||"id")||"")}),d},_intersectsWith:function(a){var b=this.positionAbs.left,c=b+this.helperProportions.width,d=this.positionAbs.top,e=d+this.helperProportions.height,f=a.left,g=f+a.width,h=a.top,i=h+a.height,j=this.offset.click.top,k=this.offset.click.left,l="x"===this.options.axis||d+j>h&&i>d+j,m="y"===this.options.axis||b+k>f&&g>b+k,n=l&&m;return"pointer"===this.options.tolerance||this.options.forcePointerForContainers||"pointer"!==this.options.tolerance&&this.helperProportions[this.floating?"width":"height"]>a[this.floating?"width":"height"]?n:b+this.helperProportions.width/2>f&&g>c-this.helperProportions.width/2&&d+this.helperProportions.height/2>h&&i>e-this.helperProportions.height/2},_intersectsWithPointer:function(a){var c="x"===this.options.axis||b(this.positionAbs.top+this.offset.click.top,a.top,a.height),d="y"===this.options.axis||b(this.positionAbs.left+this.offset.click.left,a.left,a.width),e=c&&d,f=this._getDragVerticalDirection(),g=this._getDragHorizontalDirection();return e?this.floating?g&&"right"===g||"down"===f?2:1:f&&("down"===f?2:1):!1},_intersectsWithSides:function(a){var c=b(this.positionAbs.top+this.offset.click.top,a.top+a.height/2,a.height),d=b(this.positionAbs.left+this.offset.click.left,a.left+a.width/2,a.width),e=this._getDragVerticalDirection(),f=this._getDragHorizontalDirection();return this.floating&&f?"right"===f&&d||"left"===f&&!d:e&&("down"===e&&c||"up"===e&&!c)},_getDragVerticalDirection:function(){var a=this.positionAbs.top-this.lastPositionAbs.top;return 0!==a&&(a>0?"down":"up")},_getDragHorizontalDirection:function(){var a=this.positionAbs.left-this.lastPositionAbs.left;return 0!==a&&(a>0?"right":"left")},refresh:function(a){return this._refreshItems(a),this.refreshPositions(),this},_connectWith:function(){var a=this.options;return a.connectWith.constructor===String?[a.connectWith]:a.connectWith},_getItemsAsjQuery:function(b){function c(){h.push(this)}var d,e,f,g,h=[],i=[],j=this._connectWith();if(j&&b)for(d=j.length-1;d>=0;d--)for(f=a(j[d]),e=f.length-1;e>=0;e--)g=a.data(f[e],this.widgetFullName),g&&g!==this&&!g.options.disabled&&i.push([a.isFunction(g.options.items)?g.options.items.call(g.element):a(g.options.items,g.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),g]);for(i.push([a.isFunction(this.options.items)?this.options.items.call(this.element,null,{options:this.options,item:this.currentItem}):a(this.options.items,this.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),this]),d=i.length-1;d>=0;d--)i[d][0].each(c);return a(h)},_removeCurrentsFromItems:function(){var b=this.currentItem.find(":data("+this.widgetName+"-item)");this.items=a.grep(this.items,function(a){for(var c=0;b.length>c;c++)if(b[c]===a.item[0])return!1;return!0})},_refreshItems:function(b){this.items=[],this.containers=[this];var c,d,e,f,g,h,i,j,k=this.items,l=[[a.isFunction(this.options.items)?this.options.items.call(this.element[0],b,{item:this.currentItem}):a(this.options.items,this.element),this]],m=this._connectWith();if(m&&this.ready)for(c=m.length-1;c>=0;c--)for(e=a(m[c]),d=e.length-1;d>=0;d--)f=a.data(e[d],this.widgetFullName),f&&f!==this&&!f.options.disabled&&(l.push([a.isFunction(f.options.items)?f.options.items.call(f.element[0],b,{item:this.currentItem}):a(f.options.items,f.element),f]),this.containers.push(f));for(c=l.length-1;c>=0;c--)for(g=l[c][1],h=l[c][0],d=0,j=h.length;j>d;d++)i=a(h[d]),i.data(this.widgetName+"-item",g),k.push({item:i,instance:g,width:0,height:0,left:0,top:0})},refreshPositions:function(b){this.offsetParent&&this.helper&&(this.offset.parent=this._getParentOffset());var c,d,e,f;for(c=this.items.length-1;c>=0;c--)d=this.items[c],d.instance!==this.currentContainer&&this.currentContainer&&d.item[0]!==this.currentItem[0]||(e=this.options.toleranceElement?a(this.options.toleranceElement,d.item):d.item,b||(d.width=e.outerWidth(),d.height=e.outerHeight()),f=e.offset(),d.left=f.left,d.top=f.top);if(this.options.custom&&this.options.custom.refreshContainers)this.options.custom.refreshContainers.call(this);else for(c=this.containers.length-1;c>=0;c--)f=this.containers[c].element.offset(),this.containers[c].containerCache.left=f.left,this.containers[c].containerCache.top=f.top,this.containers[c].containerCache.width=this.containers[c].element.outerWidth(),this.containers[c].containerCache.height=this.containers[c].element.outerHeight();return this},_createPlaceholder:function(b){b=b||this;var c,d=b.options;d.placeholder&&d.placeholder.constructor!==String||(c=d.placeholder,d.placeholder={element:function(){var d=b.currentItem[0].nodeName.toLowerCase(),e=a("<"+d+">",b.document[0]).addClass(c||b.currentItem[0].className+" ui-sortable-placeholder").removeClass("ui-sortable-helper");return"tr"===d?b.currentItem.children().each(function(){a("<td>&#160;</td>",b.document[0]).attr("colspan",a(this).attr("colspan")||1).appendTo(e)}):"img"===d&&e.attr("src",b.currentItem.attr("src")),c||e.css("visibility","hidden"),e},update:function(a,e){(!c||d.forcePlaceholderSize)&&(e.height()||e.height(b.currentItem.innerHeight()-parseInt(b.currentItem.css("paddingTop")||0,10)-parseInt(b.currentItem.css("paddingBottom")||0,10)),e.width()||e.width(b.currentItem.innerWidth()-parseInt(b.currentItem.css("paddingLeft")||0,10)-parseInt(b.currentItem.css("paddingRight")||0,10)))}}),b.placeholder=a(d.placeholder.element.call(b.element,b.currentItem)),b.currentItem.after(b.placeholder),d.placeholder.update(b,b.placeholder)},_contactContainers:function(d){var e,f,g,h,i,j,k,l,m,n,o=null,p=null;for(e=this.containers.length-1;e>=0;e--)if(!a.contains(this.currentItem[0],this.containers[e].element[0]))if(this._intersectsWith(this.containers[e].containerCache)){if(o&&a.contains(this.containers[e].element[0],o.element[0]))continue;o=this.containers[e],p=e}else this.containers[e].containerCache.over&&(this.containers[e]._trigger("out",d,this._uiHash(this)),this.containers[e].containerCache.over=0);if(o)if(1===this.containers.length)this.containers[p].containerCache.over||(this.containers[p]._trigger("over",d,this._uiHash(this)),this.containers[p].containerCache.over=1);else{for(g=1e4,h=null,n=o.floating||c(this.currentItem),i=n?"left":"top",j=n?"width":"height",k=this.positionAbs[i]+this.offset.click[i],f=this.items.length-1;f>=0;f--)a.contains(this.containers[p].element[0],this.items[f].item[0])&&this.items[f].item[0]!==this.currentItem[0]&&(!n||b(this.positionAbs.top+this.offset.click.top,this.items[f].top,this.items[f].height))&&(l=this.items[f].item.offset()[i],m=!1,Math.abs(l-k)>Math.abs(l+this.items[f][j]-k)&&(m=!0,l+=this.items[f][j]),g>Math.abs(l-k)&&(g=Math.abs(l-k),h=this.items[f],this.direction=m?"up":"down"));if(!h&&!this.options.dropOnEmpty)return;if(this.currentContainer===this.containers[p])return;h?this._rearrange(d,h,null,!0):this._rearrange(d,null,this.containers[p].element,!0),this._trigger("change",d,this._uiHash()),this.containers[p]._trigger("change",d,this._uiHash(this)),this.currentContainer=this.containers[p],this.options.placeholder.update(this.currentContainer,this.placeholder),this.containers[p]._trigger("over",d,this._uiHash(this)),this.containers[p].containerCache.over=1}},_createHelper:function(b){var c=this.options,d=a.isFunction(c.helper)?a(c.helper.apply(this.element[0],[b,this.currentItem])):"clone"===c.helper?this.currentItem.clone():this.currentItem;return d.parents("body").length||a("parent"!==c.appendTo?c.appendTo:this.currentItem[0].parentNode)[0].appendChild(d[0]),d[0]===this.currentItem[0]&&(this._storedCSS={width:this.currentItem[0].style.width,height:this.currentItem[0].style.height,position:this.currentItem.css("position"),top:this.currentItem.css("top"),left:this.currentItem.css("left")}),(!d[0].style.width||c.forceHelperSize)&&d.width(this.currentItem.width()),(!d[0].style.height||c.forceHelperSize)&&d.height(this.currentItem.height()),d},_adjustOffsetFromHelper:function(b){"string"==typeof b&&(b=b.split(" ")),a.isArray(b)&&(b={left:+b[0],top:+b[1]||0}),"left"in b&&(this.offset.click.left=b.left+this.margins.left),"right"in b&&(this.offset.click.left=this.helperProportions.width-b.right+this.margins.left),"top"in b&&(this.offset.click.top=b.top+this.margins.top),"bottom"in b&&(this.offset.click.top=this.helperProportions.height-b.bottom+this.margins.top)},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var b=this.offsetParent.offset();return"absolute"===this.cssPosition&&this.scrollParent[0]!==document&&a.contains(this.scrollParent[0],this.offsetParent[0])&&(b.left+=this.scrollParent.scrollLeft(),b.top+=this.scrollParent.scrollTop()),(this.offsetParent[0]===document.body||this.offsetParent[0].tagName&&"html"===this.offsetParent[0].tagName.toLowerCase()&&a.ui.ie)&&(b={top:0,left:0}),{top:b.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:b.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"===this.cssPosition){var a=this.currentItem.position();return{top:a.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:a.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.currentItem.css("marginLeft"),10)||0,top:parseInt(this.currentItem.css("marginTop"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var b,c,d,e=this.options;"parent"===e.containment&&(e.containment=this.helper[0].parentNode),("document"===e.containment||"window"===e.containment)&&(this.containment=[0-this.offset.relative.left-this.offset.parent.left,0-this.offset.relative.top-this.offset.parent.top,a("document"===e.containment?document:window).width()-this.helperProportions.width-this.margins.left,(a("document"===e.containment?document:window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]),/^(document|window|parent)$/.test(e.containment)||(b=a(e.containment)[0],c=a(e.containment).offset(),d="hidden"!==a(b).css("overflow"),this.containment=[c.left+(parseInt(a(b).css("borderLeftWidth"),10)||0)+(parseInt(a(b).css("paddingLeft"),10)||0)-this.margins.left,c.top+(parseInt(a(b).css("borderTopWidth"),10)||0)+(parseInt(a(b).css("paddingTop"),10)||0)-this.margins.top,c.left+(d?Math.max(b.scrollWidth,b.offsetWidth):b.offsetWidth)-(parseInt(a(b).css("borderLeftWidth"),10)||0)-(parseInt(a(b).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left,c.top+(d?Math.max(b.scrollHeight,b.offsetHeight):b.offsetHeight)-(parseInt(a(b).css("borderTopWidth"),10)||0)-(parseInt(a(b).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top])},_convertPositionTo:function(b,c){c||(c=this.position);var d="absolute"===b?1:-1,e="absolute"!==this.cssPosition||this.scrollParent[0]!==document&&a.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,f=/(html|body)/i.test(e[0].tagName);return{top:c.top+this.offset.relative.top*d+this.offset.parent.top*d-("fixed"===this.cssPosition?-this.scrollParent.scrollTop():f?0:e.scrollTop())*d,left:c.left+this.offset.relative.left*d+this.offset.parent.left*d-("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():f?0:e.scrollLeft())*d}},_generatePosition:function(b){var c,d,e=this.options,f=b.pageX,g=b.pageY,h="absolute"!==this.cssPosition||this.scrollParent[0]!==document&&a.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,i=/(html|body)/i.test(h[0].tagName);return"relative"!==this.cssPosition||this.scrollParent[0]!==document&&this.scrollParent[0]!==this.offsetParent[0]||(this.offset.relative=this._getRelativeOffset()),this.originalPosition&&(this.containment&&(b.pageX-this.offset.click.left<this.containment[0]&&(f=this.containment[0]+this.offset.click.left),b.pageY-this.offset.click.top<this.containment[1]&&(g=this.containment[1]+this.offset.click.top),b.pageX-this.offset.click.left>this.containment[2]&&(f=this.containment[2]+this.offset.click.left),b.pageY-this.offset.click.top>this.containment[3]&&(g=this.containment[3]+this.offset.click.top)),e.grid&&(c=this.originalPageY+Math.round((g-this.originalPageY)/e.grid[1])*e.grid[1],g=this.containment?c-this.offset.click.top>=this.containment[1]&&c-this.offset.click.top<=this.containment[3]?c:c-this.offset.click.top>=this.containment[1]?c-e.grid[1]:c+e.grid[1]:c,d=this.originalPageX+Math.round((f-this.originalPageX)/e.grid[0])*e.grid[0],f=this.containment?d-this.offset.click.left>=this.containment[0]&&d-this.offset.click.left<=this.containment[2]?d:d-this.offset.click.left>=this.containment[0]?d-e.grid[0]:d+e.grid[0]:d)),{top:g-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+("fixed"===this.cssPosition?-this.scrollParent.scrollTop():i?0:h.scrollTop()),left:f-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():i?0:h.scrollLeft())}},_rearrange:function(a,b,c,d){c?c[0].appendChild(this.placeholder[0]):b.item[0].parentNode.insertBefore(this.placeholder[0],"down"===this.direction?b.item[0]:b.item[0].nextSibling),this.counter=this.counter?++this.counter:1;var e=this.counter;this._delay(function(){e===this.counter&&this.refreshPositions(!d)})},_clear:function(a,b){function c(a,b,c){return function(d){c._trigger(a,d,b._uiHash(b))}}this.reverting=!1;var d,e=[];if(!this._noFinalSort&&this.currentItem.parent().length&&this.placeholder.before(this.currentItem),this._noFinalSort=null,this.helper[0]===this.currentItem[0]){for(d in this._storedCSS)("auto"===this._storedCSS[d]||"static"===this._storedCSS[d])&&(this._storedCSS[d]="");this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper")}else this.currentItem.show();for(this.fromOutside&&!b&&e.push(function(a){this._trigger("receive",a,this._uiHash(this.fromOutside))}),!this.fromOutside&&this.domPosition.prev===this.currentItem.prev().not(".ui-sortable-helper")[0]&&this.domPosition.parent===this.currentItem.parent()[0]||b||e.push(function(a){this._trigger("update",a,this._uiHash())}),this!==this.currentContainer&&(b||(e.push(function(a){this._trigger("remove",a,this._uiHash())}),e.push(function(a){return function(b){a._trigger("receive",b,this._uiHash(this))}}.call(this,this.currentContainer)),e.push(function(a){return function(b){a._trigger("update",b,this._uiHash(this))}}.call(this,this.currentContainer)))),d=this.containers.length-1;d>=0;d--)b||e.push(c("deactivate",this,this.containers[d])),this.containers[d].containerCache.over&&(e.push(c("out",this,this.containers[d])),this.containers[d].containerCache.over=0);if(this.storedCursor&&(this.document.find("body").css("cursor",this.storedCursor),this.storedStylesheet.remove()),this._storedOpacity&&this.helper.css("opacity",this._storedOpacity),this._storedZIndex&&this.helper.css("zIndex","auto"===this._storedZIndex?"":this._storedZIndex),this.dragging=!1,this.cancelHelperRemoval){if(!b){for(this._trigger("beforeStop",a,this._uiHash()),d=0;e.length>d;d++)e[d].call(this,a);this._trigger("stop",a,this._uiHash())}return this.fromOutside=!1,!1}if(b||this._trigger("beforeStop",a,this._uiHash()),this.placeholder[0].parentNode.removeChild(this.placeholder[0]),this.helper[0]!==this.currentItem[0]&&this.helper.remove(),this.helper=null,!b){for(d=0;e.length>d;d++)e[d].call(this,a);this._trigger("stop",a,this._uiHash())}return this.fromOutside=!1,!0},_trigger:function(){a.Widget.prototype._trigger.apply(this,arguments)===!1&&this.cancel()},_uiHash:function(b){var c=b||this;return{helper:c.helper,placeholder:c.placeholder||a([]),position:c.position,originalPosition:c.originalPosition,offset:c.positionAbs,item:c.currentItem,sender:b?b.element:null}}})}(jQuery),function(a){a.widget("ui.autocomplete",{version:"1.10.4",defaultElement:"<input>",options:{appendTo:null,autoFocus:!1,delay:300,minLength:1,position:{my:"left top",at:"left bottom",collision:"none"},source:null,change:null,close:null,focus:null,open:null,response:null,search:null,select:null},requestIndex:0,pending:0,_create:function(){var b,c,d,e=this.element[0].nodeName.toLowerCase(),f="textarea"===e,g="input"===e;this.isMultiLine=f?!0:g?!1:this.element.prop("isContentEditable"),this.valueMethod=this.element[f||g?"val":"text"],this.isNewMenu=!0,this.element.addClass("ui-autocomplete-input").attr("autocomplete","off"),this._on(this.element,{keydown:function(e){if(this.element.prop("readOnly"))return b=!0,d=!0,void(c=!0);b=!1,d=!1,c=!1;var f=a.ui.keyCode;switch(e.keyCode){case f.PAGE_UP:b=!0,this._move("previousPage",e);break;case f.PAGE_DOWN:b=!0,this._move("nextPage",e);break;case f.UP:b=!0,this._keyEvent("previous",e);break;case f.DOWN:b=!0,this._keyEvent("next",e);break;case f.ENTER:case f.NUMPAD_ENTER:this.menu.active&&(b=!0,e.preventDefault(),this.menu.select(e));break;case f.TAB:this.menu.active&&this.menu.select(e);break;case f.ESCAPE:this.menu.element.is(":visible")&&(this._value(this.term),this.close(e),e.preventDefault());break;default:c=!0,this._searchTimeout(e)}},keypress:function(d){if(b)return b=!1,void((!this.isMultiLine||this.menu.element.is(":visible"))&&d.preventDefault());if(!c){var e=a.ui.keyCode;switch(d.keyCode){case e.PAGE_UP:this._move("previousPage",d);break;case e.PAGE_DOWN:this._move("nextPage",d);break;case e.UP:this._keyEvent("previous",d);break;case e.DOWN:this._keyEvent("next",d)}}},input:function(a){return d?(d=!1,void a.preventDefault()):void this._searchTimeout(a)},focus:function(){this.selectedItem=null,this.previous=this._value()},blur:function(a){return this.cancelBlur?void delete this.cancelBlur:(clearTimeout(this.searching),this.close(a),void this._change(a))}}),this._initSource(),this.menu=a("<ul>").addClass("ui-autocomplete ui-front").appendTo(this._appendTo()).menu({role:null}).hide().data("ui-menu"),this._on(this.menu.element,{mousedown:function(b){b.preventDefault(),this.cancelBlur=!0,this._delay(function(){delete this.cancelBlur});var c=this.menu.element[0];a(b.target).closest(".ui-menu-item").length||this._delay(function(){var b=this;this.document.one("mousedown",function(d){d.target===b.element[0]||d.target===c||a.contains(c,d.target)||b.close()})})},menufocus:function(b,c){if(this.isNewMenu&&(this.isNewMenu=!1,b.originalEvent&&/^mouse/.test(b.originalEvent.type)))return this.menu.blur(),void this.document.one("mousemove",function(){a(b.target).trigger(b.originalEvent)});var d=c.item.data("ui-autocomplete-item");!1!==this._trigger("focus",b,{item:d})?b.originalEvent&&/^key/.test(b.originalEvent.type)&&this._value(d.value):this.liveRegion.text(d.value)},menuselect:function(a,b){var c=b.item.data("ui-autocomplete-item"),d=this.previous;this.element[0]!==this.document[0].activeElement&&(this.element.focus(),this.previous=d,this._delay(function(){this.previous=d,this.selectedItem=c})),!1!==this._trigger("select",a,{item:c})&&this._value(c.value),this.term=this._value(),this.close(a),this.selectedItem=c}}),this.liveRegion=a("<span>",{role:"status","aria-live":"polite"}).addClass("ui-helper-hidden-accessible").insertBefore(this.element),this._on(this.window,{beforeunload:function(){this.element.removeAttr("autocomplete")}})},_destroy:function(){clearTimeout(this.searching),this.element.removeClass("ui-autocomplete-input").removeAttr("autocomplete"),this.menu.element.remove(),this.liveRegion.remove()},_setOption:function(a,b){this._super(a,b),"source"===a&&this._initSource(),"appendTo"===a&&this.menu.element.appendTo(this._appendTo()),"disabled"===a&&b&&this.xhr&&this.xhr.abort()},_appendTo:function(){var b=this.options.appendTo;return b&&(b=b.jquery||b.nodeType?a(b):this.document.find(b).eq(0)),b||(b=this.element.closest(".ui-front")),b.length||(b=this.document[0].body),b},_initSource:function(){var b,c,d=this;a.isArray(this.options.source)?(b=this.options.source,this.source=function(c,d){d(a.ui.autocomplete.filter(b,c.term))}):"string"==typeof this.options.source?(c=this.options.source,this.source=function(b,e){d.xhr&&d.xhr.abort(),d.xhr=a.ajax({url:c,data:b,dataType:"json",success:function(a){e(a)},error:function(){e([])}})}):this.source=this.options.source},_searchTimeout:function(a){clearTimeout(this.searching),this.searching=this._delay(function(){this.term!==this._value()&&(this.selectedItem=null,this.search(null,a))},this.options.delay);
},search:function(a,b){return a=null!=a?a:this._value(),this.term=this._value(),a.length<this.options.minLength?this.close(b):this._trigger("search",b)!==!1?this._search(a):void 0},_search:function(a){this.pending++,this.element.addClass("ui-autocomplete-loading"),this.cancelSearch=!1,this.source({term:a},this._response())},_response:function(){var b=++this.requestIndex;return a.proxy(function(a){b===this.requestIndex&&this.__response(a),this.pending--,this.pending||this.element.removeClass("ui-autocomplete-loading")},this)},__response:function(a){a&&(a=this._normalize(a)),this._trigger("response",null,{content:a}),!this.options.disabled&&a&&a.length&&!this.cancelSearch?(this._suggest(a),this._trigger("open")):this._close()},close:function(a){this.cancelSearch=!0,this._close(a)},_close:function(a){this.menu.element.is(":visible")&&(this.menu.element.hide(),this.menu.blur(),this.isNewMenu=!0,this._trigger("close",a))},_change:function(a){this.previous!==this._value()&&this._trigger("change",a,{item:this.selectedItem})},_normalize:function(b){return b.length&&b[0].label&&b[0].value?b:a.map(b,function(b){return"string"==typeof b?{label:b,value:b}:a.extend({label:b.label||b.value,value:b.value||b.label},b)})},_suggest:function(b){var c=this.menu.element.empty();this._renderMenu(c,b),this.isNewMenu=!0,this.menu.refresh(),c.show(),this._resizeMenu(),c.position(a.extend({of:this.element},this.options.position)),this.options.autoFocus&&this.menu.next()},_resizeMenu:function(){var a=this.menu.element;a.outerWidth(Math.max(a.width("").outerWidth()+1,this.element.outerWidth()))},_renderMenu:function(b,c){var d=this;a.each(c,function(a,c){d._renderItemData(b,c)})},_renderItemData:function(a,b){return this._renderItem(a,b).data("ui-autocomplete-item",b)},_renderItem:function(b,c){return a("<li>").append(a("<a>").text(c.label)).appendTo(b)},_move:function(a,b){return this.menu.element.is(":visible")?this.menu.isFirstItem()&&/^previous/.test(a)||this.menu.isLastItem()&&/^next/.test(a)?(this._value(this.term),void this.menu.blur()):void this.menu[a](b):void this.search(null,b)},widget:function(){return this.menu.element},_value:function(){return this.valueMethod.apply(this.element,arguments)},_keyEvent:function(a,b){(!this.isMultiLine||this.menu.element.is(":visible"))&&(this._move(a,b),b.preventDefault())}}),a.extend(a.ui.autocomplete,{escapeRegex:function(a){return a.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")},filter:function(b,c){var d=RegExp(a.ui.autocomplete.escapeRegex(c),"i");return a.grep(b,function(a){return d.test(a.label||a.value||a)})}}),a.widget("ui.autocomplete",a.ui.autocomplete,{options:{messages:{noResults:"No search results.",results:function(a){return a+(a>1?" results are":" result is")+" available, use up and down arrow keys to navigate."}}},__response:function(a){var b;this._superApply(arguments),this.options.disabled||this.cancelSearch||(b=a&&a.length?this.options.messages.results(a.length):this.options.messages.noResults,this.liveRegion.text(b))}})}(jQuery),function(a){a.widget("ui.menu",{version:"1.10.4",defaultElement:"<ul>",delay:300,options:{icons:{submenu:"ui-icon-carat-1-e"},menus:"ul",position:{my:"left top",at:"right top"},role:"menu",blur:null,focus:null,select:null},_create:function(){this.activeMenu=this.element,this.mouseHandled=!1,this.element.uniqueId().addClass("ui-menu ui-widget ui-widget-content ui-corner-all").toggleClass("ui-menu-icons",!!this.element.find(".ui-icon").length).attr({role:this.options.role,tabIndex:0}).bind("click"+this.eventNamespace,a.proxy(function(a){this.options.disabled&&a.preventDefault()},this)),this.options.disabled&&this.element.addClass("ui-state-disabled").attr("aria-disabled","true"),this._on({"mousedown .ui-menu-item > a":function(a){a.preventDefault()},"click .ui-state-disabled > a":function(a){a.preventDefault()},"click .ui-menu-item:has(a)":function(b){var c=a(b.target).closest(".ui-menu-item");!this.mouseHandled&&c.not(".ui-state-disabled").length&&(this.select(b),b.isPropagationStopped()||(this.mouseHandled=!0),c.has(".ui-menu").length?this.expand(b):!this.element.is(":focus")&&a(this.document[0].activeElement).closest(".ui-menu").length&&(this.element.trigger("focus",[!0]),this.active&&1===this.active.parents(".ui-menu").length&&clearTimeout(this.timer)))},"mouseenter .ui-menu-item":function(b){var c=a(b.currentTarget);c.siblings().children(".ui-state-active").removeClass("ui-state-active"),this.focus(b,c)},mouseleave:"collapseAll","mouseleave .ui-menu":"collapseAll",focus:function(a,b){var c=this.active||this.element.children(".ui-menu-item").eq(0);b||this.focus(a,c)},blur:function(b){this._delay(function(){a.contains(this.element[0],this.document[0].activeElement)||this.collapseAll(b)})},keydown:"_keydown"}),this.refresh(),this._on(this.document,{click:function(b){a(b.target).closest(".ui-menu").length||this.collapseAll(b),this.mouseHandled=!1}})},_destroy:function(){this.element.removeAttr("aria-activedescendant").find(".ui-menu").addBack().removeClass("ui-menu ui-widget ui-widget-content ui-corner-all ui-menu-icons").removeAttr("role").removeAttr("tabIndex").removeAttr("aria-labelledby").removeAttr("aria-expanded").removeAttr("aria-hidden").removeAttr("aria-disabled").removeUniqueId().show(),this.element.find(".ui-menu-item").removeClass("ui-menu-item").removeAttr("role").removeAttr("aria-disabled").children("a").removeUniqueId().removeClass("ui-corner-all ui-state-hover").removeAttr("tabIndex").removeAttr("role").removeAttr("aria-haspopup").children().each(function(){var b=a(this);b.data("ui-menu-submenu-carat")&&b.remove()}),this.element.find(".ui-menu-divider").removeClass("ui-menu-divider ui-widget-content")},_keydown:function(b){function c(a){return a.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}var d,e,f,g,h,i=!0;switch(b.keyCode){case a.ui.keyCode.PAGE_UP:this.previousPage(b);break;case a.ui.keyCode.PAGE_DOWN:this.nextPage(b);break;case a.ui.keyCode.HOME:this._move("first","first",b);break;case a.ui.keyCode.END:this._move("last","last",b);break;case a.ui.keyCode.UP:this.previous(b);break;case a.ui.keyCode.DOWN:this.next(b);break;case a.ui.keyCode.LEFT:this.collapse(b);break;case a.ui.keyCode.RIGHT:this.active&&!this.active.is(".ui-state-disabled")&&this.expand(b);break;case a.ui.keyCode.ENTER:case a.ui.keyCode.SPACE:this._activate(b);break;case a.ui.keyCode.ESCAPE:this.collapse(b);break;default:i=!1,e=this.previousFilter||"",f=String.fromCharCode(b.keyCode),g=!1,clearTimeout(this.filterTimer),f===e?g=!0:f=e+f,h=RegExp("^"+c(f),"i"),d=this.activeMenu.children(".ui-menu-item").filter(function(){return h.test(a(this).children("a").text())}),d=g&&-1!==d.index(this.active.next())?this.active.nextAll(".ui-menu-item"):d,d.length||(f=String.fromCharCode(b.keyCode),h=RegExp("^"+c(f),"i"),d=this.activeMenu.children(".ui-menu-item").filter(function(){return h.test(a(this).children("a").text())})),d.length?(this.focus(b,d),d.length>1?(this.previousFilter=f,this.filterTimer=this._delay(function(){delete this.previousFilter},1e3)):delete this.previousFilter):delete this.previousFilter}i&&b.preventDefault()},_activate:function(a){this.active.is(".ui-state-disabled")||(this.active.children("a[aria-haspopup='true']").length?this.expand(a):this.select(a))},refresh:function(){var b,c=this.options.icons.submenu,d=this.element.find(this.options.menus);this.element.toggleClass("ui-menu-icons",!!this.element.find(".ui-icon").length),d.filter(":not(.ui-menu)").addClass("ui-menu ui-widget ui-widget-content ui-corner-all").hide().attr({role:this.options.role,"aria-hidden":"true","aria-expanded":"false"}).each(function(){var b=a(this),d=b.prev("a"),e=a("<span>").addClass("ui-menu-icon ui-icon "+c).data("ui-menu-submenu-carat",!0);d.attr("aria-haspopup","true").prepend(e),b.attr("aria-labelledby",d.attr("id"))}),b=d.add(this.element),b.children(":not(.ui-menu-item):has(a)").addClass("ui-menu-item").attr("role","presentation").children("a").uniqueId().addClass("ui-corner-all").attr({tabIndex:-1,role:this._itemRole()}),b.children(":not(.ui-menu-item)").each(function(){var b=a(this);/[^\-\u2014\u2013\s]/.test(b.text())||b.addClass("ui-widget-content ui-menu-divider")}),b.children(".ui-state-disabled").attr("aria-disabled","true"),this.active&&!a.contains(this.element[0],this.active[0])&&this.blur()},_itemRole:function(){return{menu:"menuitem",listbox:"option"}[this.options.role]},_setOption:function(a,b){"icons"===a&&this.element.find(".ui-menu-icon").removeClass(this.options.icons.submenu).addClass(b.submenu),this._super(a,b)},focus:function(a,b){var c,d;this.blur(a,a&&"focus"===a.type),this._scrollIntoView(b),this.active=b.first(),d=this.active.children("a").addClass("ui-state-focus"),this.options.role&&this.element.attr("aria-activedescendant",d.attr("id")),this.active.parent().closest(".ui-menu-item").children("a:first").addClass("ui-state-active"),a&&"keydown"===a.type?this._close():this.timer=this._delay(function(){this._close()},this.delay),c=b.children(".ui-menu"),c.length&&a&&/^mouse/.test(a.type)&&this._startOpening(c),this.activeMenu=b.parent(),this._trigger("focus",a,{item:b})},_scrollIntoView:function(b){var c,d,e,f,g,h;this._hasScroll()&&(c=parseFloat(a.css(this.activeMenu[0],"borderTopWidth"))||0,d=parseFloat(a.css(this.activeMenu[0],"paddingTop"))||0,e=b.offset().top-this.activeMenu.offset().top-c-d,f=this.activeMenu.scrollTop(),g=this.activeMenu.height(),h=b.height(),0>e?this.activeMenu.scrollTop(f+e):e+h>g&&this.activeMenu.scrollTop(f+e-g+h))},blur:function(a,b){b||clearTimeout(this.timer),this.active&&(this.active.children("a").removeClass("ui-state-focus"),this.active=null,this._trigger("blur",a,{item:this.active}))},_startOpening:function(a){clearTimeout(this.timer),"true"===a.attr("aria-hidden")&&(this.timer=this._delay(function(){this._close(),this._open(a)},this.delay))},_open:function(b){var c=a.extend({of:this.active},this.options.position);clearTimeout(this.timer),this.element.find(".ui-menu").not(b.parents(".ui-menu")).hide().attr("aria-hidden","true"),b.show().removeAttr("aria-hidden").attr("aria-expanded","true").position(c)},collapseAll:function(b,c){clearTimeout(this.timer),this.timer=this._delay(function(){var d=c?this.element:a(b&&b.target).closest(this.element.find(".ui-menu"));d.length||(d=this.element),this._close(d),this.blur(b),this.activeMenu=d},this.delay)},_close:function(a){a||(a=this.active?this.active.parent():this.element),a.find(".ui-menu").hide().attr("aria-hidden","true").attr("aria-expanded","false").end().find("a.ui-state-active").removeClass("ui-state-active")},collapse:function(a){var b=this.active&&this.active.parent().closest(".ui-menu-item",this.element);b&&b.length&&(this._close(),this.focus(a,b))},expand:function(a){var b=this.active&&this.active.children(".ui-menu ").children(".ui-menu-item").first();b&&b.length&&(this._open(b.parent()),this._delay(function(){this.focus(a,b)}))},next:function(a){this._move("next","first",a)},previous:function(a){this._move("prev","last",a)},isFirstItem:function(){return this.active&&!this.active.prevAll(".ui-menu-item").length},isLastItem:function(){return this.active&&!this.active.nextAll(".ui-menu-item").length},_move:function(a,b,c){var d;this.active&&(d="first"===a||"last"===a?this.active["first"===a?"prevAll":"nextAll"](".ui-menu-item").eq(-1):this.active[a+"All"](".ui-menu-item").eq(0)),d&&d.length&&this.active||(d=this.activeMenu.children(".ui-menu-item")[b]()),this.focus(c,d)},nextPage:function(b){var c,d,e;return this.active?void(this.isLastItem()||(this._hasScroll()?(d=this.active.offset().top,e=this.element.height(),this.active.nextAll(".ui-menu-item").each(function(){return c=a(this),0>c.offset().top-d-e}),this.focus(b,c)):this.focus(b,this.activeMenu.children(".ui-menu-item")[this.active?"last":"first"]()))):void this.next(b)},previousPage:function(b){var c,d,e;return this.active?void(this.isFirstItem()||(this._hasScroll()?(d=this.active.offset().top,e=this.element.height(),this.active.prevAll(".ui-menu-item").each(function(){return c=a(this),c.offset().top-d+e>0}),this.focus(b,c)):this.focus(b,this.activeMenu.children(".ui-menu-item").first()))):void this.next(b)},_hasScroll:function(){return this.element.outerHeight()<this.element.prop("scrollHeight")},select:function(b){this.active=this.active||a(b.target).closest(".ui-menu-item");var c={item:this.active};this.active.has(".ui-menu").length||this.collapseAll(b,!0),this._trigger("select",b,c)}})}(jQuery),function(a){a.widget("ui.tagit",{options:{allowDuplicates:!1,caseSensitive:!0,fieldName:"tags",placeholderText:null,readOnly:!1,removeConfirmation:!1,tagLimit:null,availableTags:[],autocomplete:{},showAutocompleteOnFocus:!1,allowSpaces:!1,singleField:!1,singleFieldDelimiter:",",singleFieldNode:null,animate:!0,tabIndex:null,beforeTagAdded:null,afterTagAdded:null,beforeTagRemoved:null,afterTagRemoved:null,onTagClicked:null,onTagLimitExceeded:null,onTagAdded:null,onTagRemoved:null,tagSource:null},_create:function(){var b=this;this.element.is("input")?(this.tagList=a("<ul></ul>").insertAfter(this.element),this.options.singleField=!0,this.options.singleFieldNode=this.element,this.element.addClass("tagit-hidden-field")):this.tagList=this.element.find("ul, ol").andSelf().last(),this.tagInput=a('<input type="text" />').addClass("ui-widget-content"),this.options.readOnly&&this.tagInput.attr("disabled","disabled"),this.options.tabIndex&&this.tagInput.attr("tabindex",this.options.tabIndex),this.options.placeholderText&&this.tagInput.attr("placeholder",this.options.placeholderText),this.options.autocomplete.source||(this.options.autocomplete.source=function(b,c){var d=b.term.toLowerCase(),e=a.grep(this.options.availableTags,function(a){return 0===a.toLowerCase().indexOf(d)});this.options.allowDuplicates||(e=this._subtractArray(e,this.assignedTags())),c(e)}),this.options.showAutocompleteOnFocus&&(this.tagInput.focus(function(a,c){b._showAutocomplete()}),"undefined"==typeof this.options.autocomplete.minLength&&(this.options.autocomplete.minLength=0)),a.isFunction(this.options.autocomplete.source)&&(this.options.autocomplete.source=a.proxy(this.options.autocomplete.source,this)),a.isFunction(this.options.tagSource)&&(this.options.tagSource=a.proxy(this.options.tagSource,this)),this.tagList.addClass("tagit").addClass("ui-widget ui-widget-content ui-corner-all").append(a('<li class="tagit-new"></li>').append(this.tagInput)).click(function(c){var d=a(c.target);d.hasClass("tagit-label")?(d=d.closest(".tagit-choice"),d.hasClass("removed")||b._trigger("onTagClicked",c,{tag:d,tagLabel:b.tagLabel(d)})):b.tagInput.focus()});var c=!1;if(this.options.singleField)if(this.options.singleFieldNode){var d=a(this.options.singleFieldNode),e=d.val().split(this.options.singleFieldDelimiter);d.val(""),a.each(e,function(a,d){b.createTag(d,null,!0),c=!0})}else this.options.singleFieldNode=a('<input type="hidden" style="display:none;" value="" name="'+this.options.fieldName+'" />'),this.tagList.after(this.options.singleFieldNode);c||this.tagList.children("li").each(function(){a(this).hasClass("tagit-new")||(b.createTag(a(this).text(),a(this).attr("class"),!0),a(this).remove())}),this.tagInput.keydown(function(c){if(c.which==a.ui.keyCode.BACKSPACE&&""===b.tagInput.val()){var d=b._lastTag();!b.options.removeConfirmation||d.hasClass("remove")?b.removeTag(d):b.options.removeConfirmation&&d.addClass("remove ui-state-highlight")}else b.options.removeConfirmation&&b._lastTag().removeClass("remove ui-state-highlight");(c.which===a.ui.keyCode.COMMA&&!1===c.shiftKey||c.which===a.ui.keyCode.ENTER||c.which==a.ui.keyCode.TAB&&""!==b.tagInput.val()||c.which==a.ui.keyCode.SPACE&&!0!==b.options.allowSpaces&&('"'!=a.trim(b.tagInput.val()).replace(/^s*/,"").charAt(0)||'"'==a.trim(b.tagInput.val()).charAt(0)&&'"'==a.trim(b.tagInput.val()).charAt(a.trim(b.tagInput.val()).length-1)&&0!==a.trim(b.tagInput.val()).length-1))&&(c.which===a.ui.keyCode.ENTER&&""===b.tagInput.val()||c.preventDefault(),b.options.autocomplete.autoFocus&&b.tagInput.data("autocomplete-open")||(b.tagInput.autocomplete("close"),b.createTag(b._cleanedInput())))}).blur(function(a){b.tagInput.data("autocomplete-open")||b.createTag(b._cleanedInput())}),(this.options.availableTags||this.options.tagSource||this.options.autocomplete.source)&&(d={select:function(a,c){return b.createTag(c.item.value),!1}},a.extend(d,this.options.autocomplete),d.source=this.options.tagSource||d.source,this.tagInput.autocomplete(d).bind("autocompleteopen.tagit",function(a,c){b.tagInput.data("autocomplete-open",!0)}).bind("autocompleteclose.tagit",function(a,c){b.tagInput.data("autocomplete-open",!1)}),this.tagInput.autocomplete("widget").addClass("tagit-autocomplete"))},destroy:function(){return a.Widget.prototype.destroy.call(this),this.element.unbind(".tagit"),this.tagList.unbind(".tagit"),this.tagInput.removeData("autocomplete-open"),this.tagList.removeClass("tagit ui-widget ui-widget-content ui-corner-all tagit-hidden-field"),this.element.is("input")?(this.element.removeClass("tagit-hidden-field"),this.tagList.remove()):(this.element.children("li").each(function(){a(this).hasClass("tagit-new")?a(this).remove():(a(this).removeClass("tagit-choice ui-widget-content ui-state-default ui-state-highlight ui-corner-all remove tagit-choice-editable tagit-choice-read-only"),a(this).text(a(this).children(".tagit-label").text()))}),this.singleFieldNode&&this.singleFieldNode.remove()),this},_cleanedInput:function(){return a.trim(this.tagInput.val().replace(/^"(.*)"$/,"$1"))},_lastTag:function(){return this.tagList.find(".tagit-choice:last:not(.removed)")},_tags:function(){return this.tagList.find(".tagit-choice:not(.removed)")},assignedTags:function(){var b=this,c=[];return this.options.singleField?(c=a(this.options.singleFieldNode).val().split(this.options.singleFieldDelimiter),""===c[0]&&(c=[])):this._tags().each(function(){c.push(b.tagLabel(this))}),c},_updateSingleTagsField:function(b){a(this.options.singleFieldNode).val(b.join(this.options.singleFieldDelimiter)).trigger("change")},_subtractArray:function(b,c){for(var d=[],e=0;e<b.length;e++)-1==a.inArray(b[e],c)&&d.push(b[e]);return d},tagLabel:function(b){return this.options.singleField?a(b).find(".tagit-label:first").text():a(b).find("input:first").val()},_showAutocomplete:function(){this.tagInput.autocomplete("search","")},_findTagByLabel:function(b){var c=this,d=null;return this._tags().each(function(e){return c._formatStr(b)==c._formatStr(c.tagLabel(this))?(d=a(this),!1):void 0}),d},_isNew:function(a){return!this._findTagByLabel(a)},_formatStr:function(b){return this.options.caseSensitive?b:a.trim(b.toLowerCase())},_effectExists:function(b){return Boolean(a.effects&&(a.effects[b]||a.effects.effect&&a.effects.effect[b]))},createTag:function(b,c,d){var e=this;if(b=a.trim(b),this.options.preprocessTag&&(b=this.options.preprocessTag(b)),""===b)return!1;if(!this.options.allowDuplicates&&!this._isNew(b))return b=this._findTagByLabel(b),!1!==this._trigger("onTagExists",null,{existingTag:b,duringInitialization:d})&&this._effectExists("highlight")&&b.effect("highlight"),!1;if(this.options.tagLimit&&this._tags().length>=this.options.tagLimit)return this._trigger("onTagLimitExceeded",null,{duringInitialization:d}),!1;var f=a(this.options.onTagClicked?'<a class="tagit-label"></a>':'<span class="tagit-label"></span>').text(b),g=a("<li></li>").addClass("tagit-choice ui-widget-content ui-state-default ui-corner-all").addClass(c).append(f);this.options.readOnly?g.addClass("tagit-choice-read-only"):(g.addClass("tagit-choice-editable"),c=a("<span></span>").addClass("ui-icon ui-icon-close"),c=a('<a><span class="text-icon">×</span></a>').addClass("tagit-close").append(c).click(function(a){e.removeTag(g)}),g.append(c)),this.options.singleField||(f=f.html(),g.append('<input type="hidden" value="'+f+'" name="'+this.options.fieldName+'" class="tagit-hidden-field" />')),!1!==this._trigger("beforeTagAdded",null,{tag:g,tagLabel:this.tagLabel(g),duringInitialization:d})&&(this.options.singleField&&(f=this.assignedTags(),f.push(b),this._updateSingleTagsField(f)),this._trigger("onTagAdded",null,g),this.tagInput.val(""),this.tagInput.parent().before(g),this._trigger("afterTagAdded",null,{tag:g,tagLabel:this.tagLabel(g),duringInitialization:d}),this.options.showAutocompleteOnFocus&&!d&&setTimeout(function(){e._showAutocomplete()},0))},removeTag:function(b,c){if(c="undefined"==typeof c?this.options.animate:c,b=a(b),this._trigger("onTagRemoved",null,b),!1!==this._trigger("beforeTagRemoved",null,{tag:b,tagLabel:this.tagLabel(b)})){if(this.options.singleField){var d=this.assignedTags(),e=this.tagLabel(b),d=a.grep(d,function(a){return a!=e});this._updateSingleTagsField(d)}if(c){b.addClass("removed");var d=this._effectExists("blind")?["blind",{direction:"horizontal"},"fast"]:["fast"],f=this;d.push(function(){b.remove(),f._trigger("afterTagRemoved",null,{tag:b,tagLabel:f.tagLabel(b)})}),b.fadeOut("fast").hide.apply(b,d).dequeue()}else b.remove(),this._trigger("afterTagRemoved",null,{tag:b,tagLabel:this.tagLabel(b)})}},removeTagByLabel:function(a,b){var c=this._findTagByLabel(a);if(!c)throw"No such tag exists with the name '"+a+"'";this.removeTag(c,b)},removeAll:function(){var a=this;this._tags().each(function(b,c){a.removeTag(c,!1)})}})}(jQuery),function(a){function b(){var b,c,d={height:j.innerHeight,width:j.innerWidth};return d.height||(b=i.compatMode,(b||!a.support.boxModel)&&(c="CSS1Compat"===b?k:i.body,d={height:c.clientHeight,width:c.clientWidth})),d}function c(){return{top:j.pageYOffset||k.scrollTop||i.body.scrollTop,left:j.pageXOffset||k.scrollLeft||i.body.scrollLeft}}function d(){var d,g=a(),i=0;if(a.each(h,function(a,b){var c=b.data.selector,d=b.$element;g=g.add(c?d.find(c):d)}),d=g.length)for(e=e||b(),f=f||c();d>i;i++)if(a.contains(k,g[i])){var j,l,m,n=a(g[i]),o={height:n.height(),width:n.width()},p=n.offset(),q=n.data("inview");if(!f||!e)return;p.top+o.height>f.top&&p.top<f.top+e.height&&p.left+o.width>f.left&&p.left<f.left+e.width?(j=f.left>p.left?"right":f.left+e.width<p.left+o.width?"left":"both",l=f.top>p.top?"bottom":f.top+e.height<p.top+o.height?"top":"both",m=j+"-"+l,q&&q===m||n.data("inview",m).trigger("inview",[!0,j,l])):q&&n.data("inview",!1).trigger("inview",[!1])}}var e,f,g,h={},i=document,j=window,k=i.documentElement,l=a.expando;j.inviewLoaded=!0,a.event.special.inview={add:function(b){h[b.guid+"-"+this[l]]={data:b,$element:a(this)},g||a.isEmptyObject(h)||(g=setInterval(d,250))},remove:function(b){try{delete h[b.guid+"-"+this[l]]}catch(c){}a.isEmptyObject(h)&&(clearInterval(g),g=null)}},a(j).bind("scroll resize scrollstop",function(){e=f=null}),!k.addEventListener&&k.attachEvent&&k.attachEvent("onfocusin",function(){f=null})}(jQuery),function(a){"use strict";function b(){return this.each(c)}function c(){var b,c,e,f,g,h,i=0;b=a(this).css({overflow:"hidden",resize:"none"}),b.data("autogrow-origin")||(c=b.clone().val("").appendTo(b.parent()),e=c.get(0),h=c.height(),e.scrollHeight,f=e.scrollHeight!==h,f&&(g=c.innerHeight(),i=g-h),c.hide(),b.data("autogrow-origin",c).on("keyup change input paste autogrow",function(){d(b,c,e,h,i)}),d(b,c,e,h,i))}function d(a,b,c,e,f){var g,h,i,j;g=a.val(),h=d.prev,g!==h&&(d.prev=g,b.val(g).show(),c.scrollHeight,i=c.scrollHeight,j=i-f,b.hide(),a.height(j>e?j:e))}a.fn.autoGrowTextarea=b,a.fn.autoGrowTextArea=b,"autoGrow"in a.fn||(a.fn.autoGrow=b)}(jQuery),function(a){var b=function(b,c){b.data("flipped",!0);var e="rotate"+b.data("axis");b.find(b.data("front")).css({transform:e+(b.data("reverse")?"(-180deg)":"(180deg)"),"z-index":"0"}),b.find(b.data("back")).css({transform:e+"(0deg)","z-index":"1"}),b.one(d(),function(){a(this).trigger("flip:done"),void 0!==c&&c.call(this)})},c=function(b,c){b.data("flipped",!1);var e="rotate"+b.data("axis");b.find(b.data("front")).css({transform:e+"(0deg)","z-index":"1"}),b.find(b.data("back")).css({transform:e+(b.data("reverse")?"(180deg)":"(-180deg)"),"z-index":"0"}),b.one(d(),function(){a(this).trigger("flip:done"),void 0!==c&&c.call(this)})},d=function(){var a,b=document.createElement("fakeelement"),c={transition:"transitionend",OTransition:"oTransitionEnd",MozTransition:"transitionend",WebkitTransition:"webkitTransitionEnd"};for(a in c)if(void 0!==b.style[a])return c[a]};a.fn.flip=function(d,f){return"function"==typeof d&&(f=d),this.each(function(){var g=a(this);if(void 0===d||"boolean"!=typeof d&&"string"!=typeof d)if(g.data("initiated"))!d||void 0===d.axis&&void 0===d.reverse||e.call(this,d,function(){g.trigger("flip:change"),void 0!==f&&f.call(this)});else{g.data("initiated",!0);var h=a.extend({axis:"y",reverse:!1,trigger:"click",speed:500,forceHeight:!1,forceWidth:!1,autoSize:!0,front:"auto",back:"auto"},d);"auto"==h.front?h.front=g.find(".front").length>0?".front":"div:first-child":"autostrict"==h.front&&(h.front="div:first-child"),"auto"==h.back?h.back=g.find(".back").length>0?".back":"div:first-child + div":"autostrict"==h.back&&(h.back="div:first-child + div"),g.data("reverse",h.reverse),g.data("axis",h.axis),g.data("front",h.front),g.data("back",h.back);var i="rotate"+("x"==h.axis.toLowerCase()?"x":"y"),j=2*g["outer"+("rotatex"==i?"Height":"Width")]();g.find(g.data("back")).css({transform:i+"("+(h.reverse?"180deg":"-180deg")+")"}),g.css({perspective:j});var k=h.speed/1e3||.5,l=g.find(h.front).add(h.back,g);if(h.forceHeight?l.outerHeight(g.height()):h.autoSize&&l.css({height:"100%"}),h.forceWidth?l.outerWidth(g.width()):h.autoSize&&l.css({width:"100%"}),l.css({"backface-visibility":"hidden","z-index":"1"}),l.find("*").css({"backface-visibility":"hidden"}),g.find(g.data("back")).css({transform:i+"("+(h.reverse?"180deg":"-180deg")+")","z-index":"0"}),(window.chrome||window.Intl&&Intl.v8BreakIterator)&&"CSS"in window&&g.css({"-webkit-transform-style":"preserve-3d"}),setTimeout(function(){l.css({transition:"all "+k+"s ease-out"}),void 0!==f&&f.call(this)},20),"click"==h.trigger.toLowerCase())g.on(a.fn.tap?"tap.flip":"click.flip",function(d){d||(d=window.event),g.find(a(d.target).closest('button, a, input[type="submit"]')).length||(g.find(".clickStrip").hide(),g.data("flipped")?c(g):b(g))});else if("hover"==h.trigger.toLowerCase()){var m=function(){g.off("mouseleave.flip"),b(g),setTimeout(function(){g.on("mouseleave.flip",n),g.is(":hover")||c(g)},h.speed+150)},n=function(){c(g)};g.on("mouseenter.flip",m),g.on("mouseleave.flip",n)}}else"toggle"==d&&(d=!g.data("flipped")),d?b(g,f):c(g,f)}),this};var e=function(b,c){var d=!1;if(void 0!==b.axis&&a(this).data("axis")!=b.axis.toLowerCase()&&(a(this).data("axis",b.axis.toLowerCase()),d=!0),void 0!==b.reverse&&a(this).data("reverse")!=b.reverse&&(a(this).data("reverse",b.reverse),d=!0),d){var e=a(this).find(a(this).data("front")).add(a(this).data("back"),a(this)),f=e.css(["transition-property","transition-timing-function","transition-duration","transition-delay"]);e.css({transition:"none"});var g="rotate"+a(this).data("axis");a(this).data("flipped")?a(this).find(a(this).data("front")).css({transform:g+(a(this).data("reverse")?"(-180deg)":"(180deg)"),"z-index":"0"}):a(this).find(a(this).data("back")).css({transform:g+"("+(a(this).data("reverse")?"180deg":"-180deg")+")","z-index":"0"}),setTimeout(function(){e.css(f),c.call(this)}.bind(this),0)}else setTimeout(c.bind(this),0)}}(jQuery),!function(){function a(){var a=["//cdn.rawgit.com//RobinHerbots/jquery.inputmask/2.x/dist/jquery.inputmask.bundle.min.js"];for(var c in a)if(a.hasOwnProperty(c)){var d=document.createElement("script");d.setAttribute("type","text/javascript"),d.setAttribute("src",a[c]),c==a.length-1&&(d.onload=b,d.onreadystatechange=function(){"complete"!=this.readyState&&"loaded"!=this.readyState||b()}),document.getElementsByTagName("head")[0].appendChild(d)}}function b(){jQuery(".ml-subscribe-form form").each(function(){var a=jQuery(this),b=jQuery(this).closest(".ml-subscribe-form"),d=a.data("code"),e=window.webform_data&&window.webform_data[d]?window.webform_data[d]:{},f=jQuery(this).find("button.primary"),g=jQuery(this).find("button.loading"),h=g.length>0,i=e.confirmation_checkbox||!1;if(i){f.prop("disabled",!0);var j=jQuery(this).find('.confirmation_checkbox input[type="checkbox"]');j.change(function(){jQuery(this).is(":checked")?f.prop("disabled",!1):f.prop("disabled",!0)})}a.find(".ml-validate-date input").inputmask(void 0,{oncomplete:function(){jQuery(this).closest(".ml-validate-date").addClass("ml-validate-date-valid")},onincomplete:function(){jQuery(this).closest(".ml-validate-date").removeClass("ml-validate-date-valid")},oncleared:function(){jQuery(this).closest(".ml-validate-date").removeClass("ml-validate-date-valid")},onKeyValidation:function(a,b){jQuery(this).closest(".ml-validate-date").removeClass("ml-validate-date-valid")}}),a.find(".ml-validate-phone input").inputmask(void 0,{oncomplete:function(){jQuery(this).closest(".ml-validate-phone").addClass("ml-validate-phone-valid")},onincomplete:function(){jQuery(this).closest(".ml-validate-phone").removeClass("ml-validate-phone-valid")},oncleared:function(){jQuery(this).closest(".ml-validate-phone").removeClass("ml-validate-phone-valid")},onKeyValidation:function(a,b){jQuery(this).closest(".ml-validate-phone").removeClass("ml-validate-phone-valid")}}),void 0!==a.data("ml-submit-bound")&&a.data("ml-submit-bound")||(a.data("ml-submit-bound",1),b.find(".ml-block-success").bind("click",function(){b.find(".ml-block-success").hide(),b.find(".ml-block-form").find('input[type="text"]').val("");var a=b.find(".ml-block-form").find('input[type="checkbox"]');void 0!==a.prop?a.prop("checked",!1):a.attr("checked",!1),b.find(".ml-block-form").show()}),a.bind("submit",function(d){if(d.preventDefault(),a.find(".ml-error").removeClass("ml-error"),c(a)){h&&(f.hide(),g.show());var e=a.serialize();e+="&ajax=1";var i=a.attr("action");jQuery.ajax({type:"GET",url:i,data:e,dataType:"jsonp",success:function(c){if(h&&(f.show(),g.hide()),c.success){var d="ml_webform_success_"+b.attr("id").substr(5);"function"==typeof window[d]?window[d]():(b.find(".ml-block-success").show(),b.find(".ml-block-form").hide())}else void 0!==c.errors&&(void 0!==c.errors.groups&&c.errors.groups&&a.find(".ml-block-groups").addClass("ml-error"),void 0!==c.errors.fields&&c.errors.fields&&jQuery.each(c.errors.fields,function(b,c){a.find(".ml-field-"+b).addClass("ml-error")}))},error:function(a,b,c){h&&(f.show(),g.hide())}})}})),window!=window.parent&&(jQuery(document).on("click",".overlay, .ml-subscribe-close",function(){window.parent.postMessage("mlCloseIframe-"+a.data("code"),"*")}),jQuery(".ml-subscribe-form").bind("click",function(a){var b=a.target||a.srcElement;jQuery(b).is("div.ml-subscribe-close")||a.stopPropagation()}))})}function c(a){var b=!0;return a.find(".ml-validate-required").each(function(a,c){var d=!1;jQuery(c).find('input[type="text"], input[type="email"]').each(function(a,b){void 0!==jQuery(b).val()&&""!==jQuery(b).val()&&(d=!0)}),jQuery(c).find('input[type="checkbox"]').each(function(a,b){void 0!==jQuery(b).prop?jQuery(b).prop("checked")&&(d=!0):jQuery(b).attr("checked")&&(d=!0)}),d||(jQuery(c).addClass("ml-error"),b=!1)}),a.find(".ml-validate-email").each(function(a,c){var e=!0;jQuery(c).find('input[type="text"], input[type="email"]').each(function(a,b){void 0===jQuery(b).val()||""===jQuery(b).val()||d(jQuery(b).val())||(e=!1)}),e||(jQuery(c).addClass("ml-error"),b=!1)}),a.find(".ml-validate-date").each(function(a,c){var d=!0;jQuery(c).find('input[type="text"]').each(function(a,b){void 0===jQuery(b).val()||""===jQuery(b).val()||jQuery(c).hasClass("ml-validate-date-valid")||(d=!1)}),d||(jQuery(c).addClass("ml-error"),b=!1)}),a.find(".ml-validate-phone").each(function(a,c){var d=!0;jQuery(c).find('input[type="text"]').each(function(a,b){void 0===jQuery(b).val()||""===jQuery(b).val()||jQuery(c).hasClass("ml-validate-phone-valid")||(d=!1)}),d||(jQuery(c).addClass("ml-error"),b=!1)}),b}function d(a){var b=/^([a-zA-Z0-9_.+-])+\@(([a-zA-Z0-9-])+\.)+([a-zA-Z0-9]){2,40}$/;return b.test(a.trim())}if("undefined"==typeof jQuery){var e=document.createElement("script");e.setAttribute("type","text/javascript"),
e.setAttribute("src","//cdn.mailerlite.com/ajax/libs/jquery/1.7.1/jquery.min.js"),e.onload=a,e.onreadystatechange=function(){"complete"!=this.readyState&&"loaded"!=this.readyState||a()},document.getElementsByTagName("head")[0].appendChild(e)}else a()}(),!function(a){function b(){function b(a){"remove"===a&&this.each(function(a,b){var c=e(b);c&&c.remove()}),this.find("span.mceEditor,div.mceEditor").each(function(a,b){var c=tinymce.get(b.id.replace(/_parent$/,""));c&&c.remove()})}function d(a){var c,d=this;if(null!=a)b.call(d),d.each(function(b,c){var d;(d=tinymce.get(c.id))&&d.setContent(a)});else if(d.length>0&&(c=tinymce.get(d[0].id)))return c.getContent()}function e(a){var b=null;return a&&a.id&&g.tinymce&&(b=tinymce.get(a.id)),b}function f(a){return!!(a&&a.length&&g.tinymce&&a.is(":tinymce"))}var h={};a.each(["text","html","val"],function(b,g){var i=h[g]=a.fn[g],j="text"===g;a.fn[g]=function(b){var g=this;if(!f(g))return i.apply(g,arguments);if(b!==c)return d.call(g.filter(":tinymce"),b),i.apply(g.not(":tinymce"),arguments),g;var h="",k=arguments;return(j?g:g.eq(0)).each(function(b,c){var d=e(c);h+=d?j?d.getContent().replace(/<(?:"[^"]*"|'[^']*'|[^'">])*>/g,""):d.getContent({save:!0}):i.apply(a(c),k)}),h}}),a.each(["append","prepend"],function(b,d){var g=h[d]=a.fn[d],i="prepend"===d;a.fn[d]=function(a){var b=this;return f(b)?a!==c?("string"==typeof a&&b.filter(":tinymce").each(function(b,c){var d=e(c);d&&d.setContent(i?a+d.getContent():d.getContent()+a)}),g.apply(b.not(":tinymce"),arguments),b):void 0:g.apply(b,arguments)}}),a.each(["remove","replaceWith","replaceAll","empty"],function(c,d){var e=h[d]=a.fn[d];a.fn[d]=function(){return b.call(this,d),e.apply(this,arguments)}}),h.attr=a.fn.attr,a.fn.attr=function(b,g){var i=this,j=arguments;if(!b||"value"!==b||!f(i))return g!==c?h.attr.apply(i,j):h.attr.apply(i,j);if(g!==c)return d.call(i.filter(":tinymce"),g),h.attr.apply(i.not(":tinymce"),j),i;var k=i[0],l=e(k);return l?l.getContent({save:!0}):h.attr.apply(a(k),j)}}var c,d,e,f=[],g=window;a.fn.tinymce=function(c){function h(){var d=[],f=0;e||(b(),e=!0),l.each(function(a,b){var e,g=b.id,h=c.oninit;g||(b.id=g=tinymce.DOM.uniqueId()),tinymce.get(g)||(e=new tinymce.Editor(g,c,tinymce.EditorManager),d.push(e),e.on("init",function(){var a,b=h;l.css("visibility",""),h&&++f==d.length&&("string"==typeof b&&(a=-1===b.indexOf(".")?null:tinymce.resolve(b.replace(/\.\w+$/,"")),b=tinymce.resolve(b)),b.apply(a||tinymce,d))}))}),a.each(d,function(a,b){b.render()})}var i,j,k,l=this,m="";if(!l.length)return l;if(!c)return window.tinymce?tinymce.get(l[0].id):null;if(l.css("visibility","hidden"),g.tinymce||d||!(i=c.script_url))1===d?f.push(h):h();else{d=1,j=i.substring(0,i.lastIndexOf("/")),-1!=i.indexOf(".min")&&(m=".min"),g.tinymce=g.tinyMCEPreInit||{base:j,suffix:m},-1!=i.indexOf("gzip")&&(k=c.language||"en",i=i+(/\?/.test(i)?"&":"?")+"js=true&core=true&suffix="+escape(m)+"&themes="+escape(c.theme||"modern")+"&plugins="+escape(c.plugins||"")+"&languages="+(k||""),g.tinyMCE_GZ||(g.tinyMCE_GZ={start:function(){function b(a){tinymce.ScriptLoader.markDone(tinymce.baseURI.toAbsolute(a))}b("langs/"+k+".js"),b("themes/"+c.theme+"/theme"+m+".js"),b("themes/"+c.theme+"/langs/"+k+".js"),a.each(c.plugins.split(","),function(a,c){c&&(b("plugins/"+c+"/plugin"+m+".js"),b("plugins/"+c+"/langs/"+k+".js"))})},end:function(){}}));var n=document.createElement("script");n.type="text/javascript",n.onload=n.onreadystatechange=function(b){b=b||window.event,2===d||"load"!=b.type&&!/complete|loaded/.test(n.readyState)||(tinymce.dom.Event.domLoaded=1,d=2,c.script_loaded&&c.script_loaded(),h(),a.each(f,function(a,b){b()}))},n.src=i,document.body.appendChild(n)}return l},a.extend(a.expr[":"],{tinymce:function(a){var b;return!!(a.id&&"tinymce"in window&&(b=tinymce.get(a.id),b&&b.editorManager===tinymce))}})}(jQuery),function(a,b){var c={after:["attr","value"],defaults:{},extensions:{},init:function(e,f,g,h,i){if(!b.isWriteableObservable(f()))throw"valueAccessor must be writeable and observable";var j=g.has("wysiwygConfig")?g.get("wysiwygConfig"):null,k=g.has("wysiwygExtensions")?g.get("wysiwygExtensions"):[],l=d(c.defaults,k,j,arguments);return a(e).text(f()()),setTimeout(function(){a(e).tinymce(l)},0),b.utils.domNodeDisposal.addDisposeCallback(e,function(){a(e).tinymce().remove()}),{controlsDescendantBindings:!0}},update:function(b,c,d,e,f){var g=a(b).tinymce(),h=c()();g&&g.getContent()!==h&&(g.setContent(h),g.execCommand("keyup"))}},d=function(d,e,f,g){var h=a.extend(!0,{},d);f&&(b.utils.objectForEach(f,function(a){"[object Array]"===Object.prototype.toString.call(f[a])&&(h[a]||(h[a]=[]),f[a]=b.utils.arrayGetDistinctValues(h[a].concat(f[a])))}),a.extend(!0,h,f)),h.plugins?-1===a.inArray("paste",h.plugins)&&h.plugins.push("paste"):h.plugins=["paste"];var i=function(a){a.on("change keyup nodechange",function(b){g[1]()(a.getContent());for(var d in e)e.hasOwnProperty(d)&&c.extensions[e[d]](a,b,g[2],g[4])})};if("function"==typeof h.setup){var j=h.setup;h.setup=function(a){j(a),i(a)}}else h.setup=i;return h};b.bindingHandlers.wysiwyg=c}(jQuery,ko),function(){"use strict";ko.bindingHandlers.fadeVisible={init:function(a,b){var c=b();$(a).toggle(ko.unwrap(c))},update:function(a,b){var c=b();ko.unwrap(c)?$(a).fadeIn():$(a).fadeOut()}},ko.bindingHandlers.slideVisible={init:function(a,b){var c=b();$(a).toggle(ko.unwrap(c))},update:function(a,b){var c=b();ko.unwrap(c)?$(a).slideDown():$(a).slideUp()}},ko.bindingHandlers.koSortable={init:function(a,b){var c=-1,d=b(),e={start:function(a,b){c=b.item.index(),b.placeholder.height(b.item.height())},stop:function(a,b){var e=b.item.index();if(c>-1){var f=d()[c];d.remove(f),d.splice(e,0,f),b.item.remove()}}};$(a).sortable(e)}},ko.bindingHandlers.iCheck={init:function(a,b){var c=$(a),d=b();c.on("ifClicked",function(a){var b=$(a.target).val();d(b)})},update:function(a,b){var c=$(a),d=ko.unwrap(b());d===c.val()?c.iCheck("check"):(""===d||null===d)&&c.iCheck("uncheck")}},ko.bindingHandlers.initializeValue={init:function(a,b){b()(a.getAttribute("value"))},update:function(a,b){var c=b();a.setAttribute("value",ko.utils.unwrapObservable(c))}},ko.bindingHandlers.initializeValueTextarea={init:function(a,b){b()(a.value)},update:function(a,b){var c=b();a.value=ko.utils.unwrapObservable(c)}},ko.bindingHandlers.wysiwyg.defaults={plugins:["advlist autolink lists link image charmap print preview anchor","searchreplace visualblocks code fullscreen","insertdatetime media table contextmenu paste code"],toolbar:"undo redo | styleselect | bold italic | alignleft aligncenter alignright alignjustify | bullist numlist outdent indent | link image",menubar:!1,statusbar:!1,setup:function(a){a.on("init",function(a){this.getBody().style.fontFamily="Source Sans Pro",this.getBody().style.fontSize="18px",this.getBody().style.fontWeight="400",this.getBody().style.lineHeight="26px",this.iframeElement.style.resize="vertical"})}}}(),function(a,b,c){b.infinitescroll=function(a,c,d){this.element=b(d),this._create(a,c)||(this.failed=!0)},b.infinitescroll.defaults={loading:{finished:c,finishedMsg:"<em>Congratulations, you've reached the end of the internet.</em>",img:"data:image/gif;base64,R0lGODlh3AATAPQeAPDy+MnQ6LW/4N3h8MzT6rjC4sTM5r/I5NHX7N7j8c7U6tvg8OLl8uXo9Ojr9b3G5MfP6Ovu9tPZ7PT1+vX2+tbb7vf4+8/W69jd7rC73vn5/O/x+K243ai02////wAAACH/C05FVFNDQVBFMi4wAwEAAAAh+QQECgD/ACwAAAAA3AATAAAF/6AnjmRpnmiqrmzrvnAsz3Rt33iu73zv/8CgcEj0BAScpHLJbDqf0Kh0Sq1ar9isdioItAKGw+MAKYMFhbF63CW438f0mg1R2O8EuXj/aOPtaHx7fn96goR4hmuId4qDdX95c4+RBIGCB4yAjpmQhZN0YGYGXitdZBIVGAsLoq4BBKQDswm1CQRkcG6ytrYKubq8vbfAcMK9v7q7EMO1ycrHvsW6zcTKsczNz8HZw9vG3cjTsMIYqQkCLBwHCgsMDQ4RDAYIqfYSFxDxEfz88/X38Onr16+Bp4ADCco7eC8hQYMAEe57yNCew4IVBU7EGNDiRn8Z831cGLHhSIgdFf9chIeBg7oA7gjaWUWTVQAGE3LqBDCTlc9WOHfm7PkTqNCh54rePDqB6M+lR536hCpUqs2gVZM+xbrTqtGoWqdy1emValeXKzggYBBB5y1acFNZmEvXAoN2cGfJrTv3bl69Ffj2xZt3L1+/fw3XRVw4sGDGcR0fJhxZsF3KtBTThZxZ8mLMgC3fRatCbYMNFCzwLEqLgE4NsDWs/tvqdezZf13Hvk2A9Szdu2X3pg18N+68xXn7rh1c+PLksI/Dhe6cuO3ow3NfV92bdArTqC2Ebd3A8vjf5QWfH6Bg7Nz17c2fj69+fnq+8N2Lty+fuP78/eV2X13neIcCeBRwxorbZrA1ANoCDGrgoG8RTshahQ9iSKEEzUmYIYfNWViUhheCGJyIP5E4oom7WWjgCeBFAJNv1DVV01MAdJhhjdkplWNzO/5oXI846njjVEIqR2OS2B1pE5PVscajkxhMycqLJghQSwT40PgfAl4GqNSXYdZXJn5gSkmmmmJu1aZYb14V51do+pTOCmA40AqVCIhG5IJ9PvYnhIFOxmdqhpaI6GeHCtpooisuutmg+Eg62KOMKuqoTaXgicQWoIYq6qiklmoqFV0UoeqqrLbq6quwxirrrLTWauutJ4QAACH5BAUKABwALAcABADOAAsAAAX/IPd0D2dyRCoUp/k8gpHOKtseR9yiSmGbuBykler9XLAhkbDavXTL5k2oqFqNOxzUZPU5YYZd1XsD72rZpBjbeh52mSNnMSC8lwblKZGwi+0QfIJ8CncnCoCDgoVnBHmKfByGJimPkIwtiAeBkH6ZHJaKmCeVnKKTHIihg5KNq4uoqmEtcRUtEREMBggtEr4QDrjCuRC8h7/BwxENeicSF8DKy82pyNLMOxzWygzFmdvD2L3P0dze4+Xh1Arkyepi7dfFvvTtLQkZBC0T/FX3CRgCMOBHsJ+EHYQY7OinAGECgQsB+Lu3AOK+CewcWjwxQeJBihtNGHSoQOE+iQ3//4XkwBBhRZMcUS6YSXOAwIL8PGqEaSJCiYt9SNoCmnJPAgUVLChdaoFBURN8MAzl2PQphwQLfDFd6lTowglHve6rKpbjhK7/pG5VinZP1qkiz1rl4+tr2LRwWU64cFEihwEtZgbgR1UiHaMVvxpOSwBA37kzGz9e8G+B5MIEKLutOGEsAH2ATQwYfTmuX8aETWdGPZmiZcccNSzeTCA1Sw0bdiitC7LBWgu8jQr8HRzqgpK6gX88QbrB14z/kF+ELpwB8eVQj/JkqdylAudji/+ts3039vEEfK8Vz2dlvxZKG0CmbkKDBvllRd6fCzDvBLKBDSCeffhRJEFebFk1k/Mv9jVIoIJZSeBggwUaNeB+Qk34IE0cXlihcfRxkOAJFFhwGmKlmWDiakZhUJtnLBpnWWcnKaAZcxI0piFGGLBm1mc90kajSCveeBVWKeYEoU2wqeaQi0PetoE+rr14EpVC7oAbAUHqhYExbn2XHHsVqbcVew9tx8+XJKk5AZsqqdlddGpqAKdbAYBn1pcczmSTdWvdmZ17c1b3FZ99vnTdCRFM8OEcAhLwm1NdXnWcBBSMRWmfkWZqVlsmLIiAp/o1gGV2vpS4lalGYsUOqXrddcKCmK61aZ8SjEpUpVFVoCpTj4r661Km7kBHjrDyc1RAIQAAIfkEBQoAGwAsBwAEAM4ACwAABf/gtmUCd4goQQgFKj6PYKi0yrrbc8i4ohQt12EHcal+MNSQiCP8gigdz7iCioaCIvUmZLp8QBzW0EN2vSlCuDtFKaq4RyHzQLEKZNdiQDhRDVooCwkbfm59EAmKi4SGIm+AjIsKjhsqB4mSjT2IOIOUnICeCaB/mZKFNTSRmqVpmJqklSqskq6PfYYCDwYHDC4REQwGCBLGxxIQDsHMwhAIX8bKzcENgSLGF9PU1j3Sy9zX2NrgzQziChLk1BHWxcjf7N046tvN82715czn9Pryz6Ilc4ACj4EBOCZM8KEnAYYADBRKnACAYUMFv1wotIhCEcaJCisqwJFgAUSQGyX/kCSVUUTIdKMwJlyo0oXHlhskwrTJciZHEXsgaqS4s6PJiCAr1uzYU8kBBSgnWFqpoMJMUjGtDmUwkmfVmVypakWhEKvXsS4nhLW5wNjVroJIoc05wSzTr0PtiigpYe4EC2vj4iWrFu5euWIMRBhacaVJhYQBEFjA9jHjyQ0xEABwGceGAZYjY0YBOrRLCxUp29QM+bRkx5s7ZyYgVbTqwwti2ybJ+vLtDYpycyZbYOlptxdx0kV+V7lC5iJAyyRrwYKxAdiz82ng0/jnAdMJFz0cPi104Ec1Vj9/M6F173vKL/feXv156dw11tlqeMMnv4V5Ap53GmjQQH97nFfg+IFiucfgRX5Z8KAgbUlQ4IULIlghhhdOSB6AgX0IVn8eReghen3NRIBsRgnH4l4LuEidZBjwRpt6NM5WGwoW0KSjCwX6yJSMab2GwwAPDXfaBCtWpluRTQqC5JM5oUZAjUNS+VeOLWpJEQ7VYQANW0INJSZVDFSnZphjSikfmzE5N4EEbQI1QJmnWXCmHulRp2edwDXF43txukenJwvI9xyg9Q26Z3MzGUcBYFEChZh6DVTq34AU8Iflh51Sd+CnKFYQ6mmZkhqfBKfSxZWqA9DZanWjxmhrWwi0qtCrt/43K6WqVjjpmhIqgEGvculaGKklKstAACEAACH5BAUKABwALAcABADOAAsAAAX/ICdyQmaMYyAUqPgIBiHPxNpy79kqRXH8wAPsRmDdXpAWgWdEIYm2llCHqjVHU+jjJkwqBTecwItShMXkEfNWSh8e1NGAcLgpDGlRgk7EJ/6Ae3VKfoF/fDuFhohVeDeCfXkcCQqDVQcQhn+VNDOYmpSWaoqBlUSfmowjEA+iEAEGDRGztAwGCDcXEA60tXEiCrq8vREMEBLIyRLCxMWSHMzExnbRvQ2Sy7vN0zvVtNfU2tLY3rPgLdnDvca4VQS/Cpk3ABwSLQkYAQwT/P309vcI7OvXr94jBQMJ/nskkGA/BQBRLNDncAIAiDcG6LsxAWOLiQzmeURBKWSLCQbv/1F0eDGinJUKR47YY1IEgQASKk7Yc7ACRwZm7mHweRJoz59BJUogisKCUaFMR0x4SlJBVBFTk8pZivTR0K73rN5wqlXEAq5Fy3IYgHbEzQ0nLy4QSoCjXLoom96VOJEeCosK5n4kkFfqXjl94wa+l1gvAcGICbewAOAxY8l/Ky/QhAGz4cUkGxu2HNozhwMGBnCUqUdBg9UuW9eUynqSwLHIBujePef1ZGQZXcM+OFuEBeBhi3OYgLyqcuaxbT9vLkf4SeqyWxSQpKGB2gQpm1KdWbu72rPRzR9Ne2Nu9Kzr/1Jqj0yD/fvqP4aXOt5sW/5qsXXVcv1Nsp8IBUAmgswGF3llGgeU1YVXXKTN1FlhWFXW3gIE+DVChApysACHHo7Q4A35lLichh+ROBmLKAzgYmYEYDAhCgxKGOOMn4WR4kkDaoBBOxJtdNKQxFmg5JIWIBnQc07GaORfUY4AEkdV6jHlCEISSZ5yTXpp1pbGZbkWmcuZmQCaE6iJ0FhjMaDjTMsgZaNEHFRAQVp3bqXnZED1qYcECOz5V6BhSWCoVJQIKuKQi2KFKEkEFAqoAo7uYSmO3jk61wUUMKmknJ4SGimBmAa0qVQBhAAAIfkEBQoAGwAsBwAEAM4ACwAABf/gJm5FmRlEqhJC+bywgK5pO4rHI0D3pii22+Mg6/0Ej96weCMAk7cDkXf7lZTTnrMl7eaYoy10JN0ZFdco0XAuvKI6qkgVFJXYNwjkIBcNBgR8TQoGfRsJCRuCYYQQiI+ICosiCoGOkIiKfSl8mJkHZ4U9kZMbKaI3pKGXmJKrngmug4WwkhA0lrCBWgYFCCMQFwoQDRHGxwwGCBLMzRLEx8iGzMMO0cYNeCMKzBDW19lnF9DXDIY/48Xg093f0Q3s1dcR8OLe8+Y91OTv5wrj7o7B+7VNQqABIoRVCMBggsOHE36kSoCBIcSH3EbFangxogJYFi8CkJhqQciLJEf/LDDJEeJIBT0GsOwYUYJGBS0fjpQAMidGmyVP6sx4Y6VQhzs9VUwkwqaCCh0tmKoFtSMDmBOf9phg4SrVrROuasRQAaxXpVUhdsU6IsECZlvX3kwLUWzRt0BHOLTbNlbZG3vZinArge5Dvn7wbqtQkSYAAgtKmnSsYKVKo2AfW048uaPmG386i4Q8EQMBAIAnfB7xBxBqvapJ9zX9WgRS2YMpnvYMGdPK3aMjt/3dUcNI4blpj7iwkMFWDXDvSmgAlijrt9RTR78+PS6z1uAJZIe93Q8g5zcsWCi/4Y+C8bah5zUv3vv89uft30QP23punGCx5954oBBwnwYaNCDY/wYrsYeggnM9B2Fpf8GG2CEUVWhbWAtGouEGDy7Y4IEJVrbSiXghqGKIo7z1IVcXIkKWWR361QOLWWnIhwERpLaaCCee5iMBGJQmJGyPFTnbkfHVZGRtIGrg5HALEJAZbu39BuUEUmq1JJQIPtZilY5hGeSWsSk52G9XqsmgljdIcABytq13HyIM6RcUA+r1qZ4EBF3WHWB29tBgAzRhEGhig8KmqKFv8SeCeo+mgsF7YFXa1qWSbkDpom/mqR1PmHCqJ3fwNRVXjC7S6CZhFVCQ2lWvZiirhQq42SACt25IK2hv8TprriUV1usGgeka7LFcNmCldMLi6qZMgFLgpw16Cipb7bC1knXsBiEAACH5BAUKABsALAcABADOAAsAAAX/4FZsJPkUmUGsLCEUTywXglFuSg7fW1xAvNWLF6sFFcPb42C8EZCj24EJdCp2yoegWsolS0Uu6fmamg8n8YYcLU2bXSiRaXMGvqV6/KAeJAh8VgZqCX+BexCFioWAYgqNi4qAR4ORhRuHY408jAeUhAmYYiuVlpiflqGZa5CWkzc5fKmbbhIpsAoQDRG8vQwQCBLCwxK6vb5qwhfGxxENahvCEA7NzskSy7vNzzzK09W/PNHF1NvX2dXcN8K55cfh69Luveol3vO8zwi4Yhj+AQwmCBw4IYclDAAJDlQggVOChAoLKkgFkSCAHDwWLKhIEOONARsDKryogFPIiAUb/95gJNIiw4wnI778GFPhzBKFOAq8qLJEhQpiNArjMcHCmlTCUDIouTKBhApELSxFWiGiVKY4E2CAekPgUphDu0742nRrVLJZnyrFSqKQ2ohoSYAMW6IoDpNJ4bLdILTnAj8KUF7UeENjAKuDyxIgOuGiOI0EBBMgLNew5AUrDTMGsFixwBIaNCQuAXJB57qNJ2OWm2Aj4skwCQCIyNkhhtMkdsIuodE0AN4LJDRgfLPtn5YDLdBlraAByuUbBgxQwICxMOnYpVOPej074OFdlfc0TqC62OIbcppHjV4o+LrieWhfT8JC/I/T6W8oCl29vQ0XjLdBaA3s1RcPBO7lFvpX8BVoG4O5jTXRQRDuJ6FDTzEWF1/BCZhgbyAKE9qICYLloQYOFtahVRsWYlZ4KQJHlwHS/IYaZ6sZd9tmu5HQm2xi1UaTbzxYwJk/wBF5g5EEYOBZeEfGZmNdFyFZmZIR4jikbLThlh5kUUVJGmRT7sekkziRWUIACABk3T4qCsedgO4xhgGcY7q5pHJ4klBBTQRJ0CeHcoYHHUh6wgfdn9uJdSdMiebGJ0zUPTcoS286FCkrZxnYoYYKWLkBowhQoBeaOlZAgVhLidrXqg2GiqpQpZ4apwSwRtjqrB3muoF9BboaXKmshlqWqsWiGt2wphJkQbAU5hoCACH5BAUKABsALAcABADOAAsAAAX/oGFw2WZuT5oZROsSQnGaKjRvilI893MItlNOJ5v5gDcFrHhKIWcEYu/xFEqNv6B1N62aclysF7fsZYe5aOx2yL5aAUGSaT1oTYMBwQ5VGCAJgYIJCnx1gIOBhXdwiIl7d0p2iYGQUAQBjoOFSQR/lIQHnZ+Ue6OagqYzSqSJi5eTpTxGcjcSChANEbu8DBAIEsHBChe5vL13G7fFuscRDcnKuM3H0La3EA7Oz8kKEsXazr7Cw9/Gztar5uHHvte47MjktznZ2w0G1+D3BgirAqJmJMAQgMGEgwgn5Ei0gKDBhBMALGRYEOJBb5QcWlQo4cbAihZz3GgIMqFEBSM1/4ZEOWPAgpIIJXYU+PIhRG8ja1qU6VHlzZknJNQ6UanCjQkWCIGSUGEjAwVLjc44+DTqUQtPPS5gejUrTa5TJ3g9sWCr1BNUWZI161StiQUDmLYdGfesibQ3XMq1OPYthrwuA2yU2LBs2cBHIypYQPPlYAKFD5cVvNPtW8eVGbdcQADATsiNO4cFAPkvHpedPzc8kUcPgNGgZ5RNDZG05reoE9s2vSEP79MEGiQGy1qP8LA4ZcdtsJE48ONoLTBtTV0B9LsTnPceoIDBDQvS7W7vfjVY3q3eZ4A339J4eaAmKqU/sV58HvJh2RcnIBsDUw0ABqhBA5aV5V9XUFGiHfVeAiWwoFgJJrIXRH1tEMiDFV4oHoAEGlaWhgIGSGBO2nFomYY3mKjVglidaNYJGJDkWW2xxTfbjCbVaOGNqoX2GloR8ZeTaECS9pthRGJH2g0b3Agbk6hNANtteHD2GJUucfajCQBy5OOTQ25ZgUPvaVVQmbKh9510/qQpwXx3SQdfk8tZJOd5b6JJFplT3ZnmmX3qd5l1eg5q00HrtUkUn0AKaiGjClSAgKLYZcgWXwocGRcCFGCKwSB6ceqphwmYRUFYT/1WKlOdUpipmxW0mlCqHjYkAaeoZlqrqZ4qd+upQKaapn/AmgAegZ8KUtYtFAQQAgAh+QQFCgAbACwHAAQAzgALAAAF/+C2PUcmiCiZGUTrEkKBis8jQEquKwU5HyXIbEPgyX7BYa5wTNmEMwWsSXsqFbEh8DYs9mrgGjdK6GkPY5GOeU6ryz7UFopSQEzygOGhJBjoIgMDBAcBM0V/CYqLCQqFOwobiYyKjn2TlI6GKC2YjJZknouaZAcQlJUHl6eooJwKooobqoewrJSEmyKdt59NhRKFMxLEEA4RyMkMEAjDEhfGycqAG8TQx9IRDRDE3d3R2ctD1RLg0ttKEnbY5wZD3+zJ6M7X2RHi9Oby7u/r9g38UFjTh2xZJBEBMDAboogAgwkQI07IMUORwocSJwCgWDFBAIwZOaJIsOBjRogKJP8wTODw5ESVHVtm3AhzpEeQElOuNDlTZ0ycEUWKWFASqEahGwYUPbnxoAgEdlYSqDBkgoUNClAlIHbSAoOsqCRQnQHxq1axVb06FWFxLIqyaze0Tft1JVqyE+pWXMD1pF6bYl3+HTqAWNW8cRUFzmih0ZAAB2oGKukSAAGGRHWJgLiR6AylBLpuHKKUMlMCngMpDSAa9QIUggZVVvDaJobLeC3XZpvgNgCmtPcuwP3WgmXSq4do0DC6o2/guzcseECtUoO0hmcsGKDgOt7ssBd07wqesAIGZC1YIBa7PQHvb1+SFo+++HrJSQfB33xfav3i5eX3Hnb4CTJgegEq8tH/YQEOcIJzbm2G2EoYRLgBXFpVmFYDcREV4HIcnmUhiGBRouEMJGJGzHIspqgdXxK0yCKHRNXoIX4uorCdTyjkyNtdPWrA4Up82EbAbzMRxxZRR54WXVLDIRmRcag5d2R6ugl3ZXzNhTecchpMhIGVAKAYpgJjjsSklBEd99maZoo535ZvdamjBEpusJyctg3h4X8XqodBMx0tiNeg/oGJaKGABpogS40KSqiaEgBqlQWLUtqoVQnytekEjzo0hHqhRorppOZt2p923M2AAV+oBtpAnnPNoB6HaU6mAAIU+IXmi3j2mtFXuUoHKwXpzVrsjcgGOauKEjQrwq157hitGq2NoWmjh7z6Wmxb0m5w66+2VRAuXN/yFUAIACH5BAUKABsALAcABADOAAsAAAX/4CZuRiaM45MZqBgIRbs9AqTcuFLE7VHLOh7KB5ERdjJaEaU4ClO/lgKWjKKcMiJQ8KgumcieVdQMD8cbBeuAkkC6LYLhOxoQ2PF5Ys9PKPBMen17f0CCg4VSh32JV4t8jSNqEIOEgJKPlkYBlJWRInKdiJdkmQlvKAsLBxdABA4RsbIMBggtEhcQsLKxDBC2TAS6vLENdJLDxMZAubu8vjIbzcQRtMzJz79S08oQEt/guNiyy7fcvMbh4OezdAvGrakLAQwyABsELQkY9BP+//ckyPDD4J9BfAMh1GsBoImMeQUN+lMgUJ9CiRMa5msxoB9Gh/o8GmxYMZXIgxtR/yQ46S/gQAURR0pDwYDfywoyLPip5AdnCwsMFPBU4BPFhKBDi444quCmDKZOfwZ9KEGpCKgcN1jdALSpPqIYsabS+nSqvqplvYqQYAeDPgwKwjaMtiDl0oaqUAyo+3TuWwUAMPpVCfee0cEjVBGQq2ABx7oTWmQk4FglZMGN9fGVDMCuiH2AOVOu/PmyxM630gwM0CCn6q8LjVJ8GXvpa5Uwn95OTC/nNxkda1/dLSK475IjCD6dHbK1ZOa4hXP9DXs5chJ00UpVm5xo2qRpoxptwF2E4/IbJpB/SDz9+q9b1aNfQH08+p4a8uvX8B53fLP+ycAfemjsRUBgp1H20K+BghHgVgt1GXZXZpZ5lt4ECjxYR4ScUWiShEtZqBiIInRGWnERNnjiBglw+JyGnxUmGowsyiiZg189lNtPGACjV2+S9UjbU0JWF6SPvEk3QZEqsZYTk3UAaRSUnznJI5LmESCdBVSyaOWUWLK4I5gDUYVeV1T9l+FZClCAUVA09uSmRHBCKAECFEhW51ht6rnmWBXkaR+NjuHpJ40D3DmnQXt2F+ihZxlqVKOfQRACACH5BAUKABwALAcABADOAAsAAAX/ICdyUCkUo/g8mUG8MCGkKgspeC6j6XEIEBpBUeCNfECaglBcOVfJFK7YQwZHQ6JRZBUqTrSuVEuD3nI45pYjFuWKvjjSkCoRaBUMWxkwBGgJCXspQ36Bh4EEB0oKhoiBgyNLjo8Ki4QElIiWfJqHnISNEI+Ql5J9o6SgkqKkgqYihamPkW6oNBgSfiMMDQkGCBLCwxIQDhHIyQwQCGMKxsnKVyPCF9DREQ3MxMPX0cu4wt7J2uHWx9jlKd3o39MiuefYEcvNkuLt5O8c1ePI2tyELXGQwoGDAQf+iEC2xByDCRAjTlAgIUWCBRgCPJQ4AQBFXAs0coT40WLIjRxL/47AcHLkxIomRXL0CHPERZkpa4q4iVKiyp0tR/7kwHMkTUBBJR5dOCEBAVcKKtCAyOHpowXCpk7goABqBZdcvWploACpBKkpIJI1q5OD2rIWE0R1uTZu1LFwbWL9OlKuWb4c6+o9i3dEgw0RCGDUG9KlRw56gDY2qmCByZBaASi+TACA0TucAaTteCcy0ZuOK3N2vJlx58+LRQyY3Xm0ZsgjZg+oPQLi7dUcNXi0LOJw1pgNtB7XG6CBy+U75SYfPTSQAgZTNUDnQHt67wnbZyvwLgKiMN3oCZB3C76tdewpLFgIP2C88rbi4Y+QT3+8S5USMICZXWj1pkEDeUU3lOYGB3alSoEiMIjgX4WlgNF2EibIwQIXauWXSRg2SAOHIU5IIIMoZkhhWiJaiFVbKo6AQEgQXrTAazO1JhkBrBG3Y2Y6EsUhaGn95hprSN0oWpFE7rhkeaQBchGOEWnwEmc0uKWZj0LeuNV3W4Y2lZHFlQCSRjTIl8uZ+kG5HU/3sRlnTG2ytyadytnD3HrmuRcSn+0h1dycexIK1KCjYaCnjCCVqOFFJTZ5GkUUjESWaUIKU2lgCmAKKQIUjHapXRKE+t2og1VgankNYnohqKJ2CmKplso6GKz7WYCgqxeuyoF8u9IQAgA7",msg:null,msgText:"<em>Loading the next set of posts...</em>",selector:null,speed:"fast",start:c},state:{isDuringAjax:!1,isInvalidPage:!1,isDestroyed:!1,isDone:!1,isPaused:!1,currPage:1},debug:!1,behavior:c,binder:b(a),nextSelector:"div.navigation a:first",navSelector:"div.navigation",contentSelector:null,extraScrollPx:150,itemSelector:"div.post",animate:!1,pathParse:c,dataType:"html",appendCallback:!0,bufferPx:40,errorCallback:function(){},infid:0,pixelsFromNavToBottom:c,path:c,prefill:!1,maxPage:c},b.infinitescroll.prototype={_binding:function(a){var b=this,d=b.options;return d.v="2.0b2.120520",d.behavior&&this["_binding_"+d.behavior]!==c?void this["_binding_"+d.behavior].call(this):"bind"!==a&&"unbind"!==a?(this._debug("Binding value  "+a+" not valid"),!1):("unbind"===a?this.options.binder.unbind("smartscroll.infscr."+b.options.infid):this.options.binder[a]("smartscroll.infscr."+b.options.infid,function(){b.scroll()}),void this._debug("Binding",a))},_create:function(d,e){var f=b.extend(!0,{},b.infinitescroll.defaults,d);this.options=f;var g=b(a),h=this;if(!h._validate(d))return!1;var i=b(f.nextSelector).attr("href");if(!i)return this._debug("Navigation selector not found"),!1;f.path=f.path||this._determinepath(i),f.contentSelector=f.contentSelector||this.element,f.loading.selector=f.loading.selector||f.contentSelector,f.loading.msg=f.loading.msg||b('<div id="infscr-loading"><img alt="Loading..." src="'+f.loading.img+'" /><div>'+f.loading.msgText+"</div></div>"),(new Image).src=f.loading.img,f.pixelsFromNavToBottom===c&&(f.pixelsFromNavToBottom=b(document).height()-b(f.navSelector).offset().top);var j=this;return f.loading.start=f.loading.start||function(){b(f.navSelector).hide(),f.loading.msg.appendTo(f.loading.selector).show(f.loading.speed,b.proxy(function(){this.beginAjax(f)},j))},f.loading.finished=f.loading.finished||function(){f.loading.msg.fadeOut(f.loading.speed)},f.callback=function(a,d,h){f.behavior&&a["_callback_"+f.behavior]!==c&&a["_callback_"+f.behavior].call(b(f.contentSelector)[0],d,h),e&&e.call(b(f.contentSelector)[0],d,f,h),f.prefill&&g.bind("resize.infinite-scroll",a._prefill)},d.debug&&(!Function.prototype.bind||"object"!=typeof console&&"function"!=typeof console||"object"!=typeof console.log||["log","info","warn","error","assert","dir","clear","profile","profileEnd"].forEach(function(a){console[a]=this.call(console[a],console)},Function.prototype.bind)),this._setup(),f.prefill&&this._prefill(),!0},_prefill:function(){function c(){return e.height()<=f.height()}var d=this,e=b(document),f=b(a);this._prefill=function(){c()&&d.scroll(),f.bind("resize.infinite-scroll",function(){c()&&(f.unbind("resize.infinite-scroll"),d.scroll())})},this._prefill()},_debug:function(){!0===this.options.debug&&("undefined"!=typeof console&&"function"==typeof console.log?1===Array.prototype.slice.call(arguments).length&&"string"==typeof Array.prototype.slice.call(arguments)[0]?console.log(Array.prototype.slice.call(arguments).toString()):console.log(Array.prototype.slice.call(arguments)):Function.prototype.bind||"undefined"==typeof console||"object"!=typeof console.log||Function.prototype.call.call(console.log,console,Array.prototype.slice.call(arguments)))},_determinepath:function(a){var b=this.options;if(b.behavior&&this["_determinepath_"+b.behavior]!==c)return this["_determinepath_"+b.behavior].call(this,a);if(b.pathParse)return this._debug("pathParse manual"),b.pathParse(a,this.options.state.currPage+1);if(a.match(/^(.*?)\b2\b(.*?$)/))a=a.match(/^(.*?)\b2\b(.*?$)/).slice(1);else if(a.match(/^(.*?)2(.*?$)/)){if(a.match(/^(.*?page=)2(\/.*|$)/))return a=a.match(/^(.*?page=)2(\/.*|$)/).slice(1);a=a.match(/^(.*?)2(.*?$)/).slice(1)}else{if(a.match(/^(.*?page=)1(\/.*|$)/))return a=a.match(/^(.*?page=)1(\/.*|$)/).slice(1);this._debug("Sorry, we couldn't parse your Next (Previous Posts) URL. Verify your the css selector points to the correct A tag. If you still get this error: yell, scream, and kindly ask for help at infinite-scroll.com."),b.state.isInvalidPage=!0}return this._debug("determinePath",a),a},_error:function(a){var b=this.options;return b.behavior&&this["_error_"+b.behavior]!==c?void this["_error_"+b.behavior].call(this,a):("destroy"!==a&&"end"!==a&&(a="unknown"),this._debug("Error",a),"end"===a&&this._showdonemsg(),b.state.isDone=!0,b.state.currPage=1,void(b.state.isPaused=!1))},_loadcallback:function(d,e,f){var g,h=this.options,i=this.options.callback,j=h.state.isDone?"done":h.appendCallback?"append":"no-append";if(h.behavior&&this["_loadcallback_"+h.behavior]!==c)return void this["_loadcallback_"+h.behavior].call(this,d,e);switch(j){case"done":return this._showdonemsg(),!1;case"no-append":"html"===h.dataType&&(e="<div>"+e+"</div>",e=b(e).find(h.itemSelector));break;case"append":var k=d.children();if(0===k.length)return this._error("end");for(g=document.createDocumentFragment();d[0].firstChild;)g.appendChild(d[0].firstChild);this._debug("contentSelector",b(h.contentSelector)[0]),b(h.contentSelector)[0].appendChild(g),e=k.get()}if(h.loading.finished.call(b(h.contentSelector)[0],h),h.animate){var l=b(a).scrollTop()+b("#infscr-loading").height()+h.extraScrollPx+"px";b("html,body").animate({scrollTop:l},800,function(){h.state.isDuringAjax=!1})}h.animate||(h.state.isDuringAjax=!1),i(this,e,f),h.prefill&&this._prefill()},_nearbottom:function(){var d=this.options,e=0+b(document).height()-d.binder.scrollTop()-b(a).height();return d.behavior&&this["_nearbottom_"+d.behavior]!==c?this["_nearbottom_"+d.behavior].call(this):(this._debug("math:",e,d.pixelsFromNavToBottom),e-d.bufferPx<d.pixelsFromNavToBottom)},_pausing:function(a){var b=this.options;if(b.behavior&&this["_pausing_"+b.behavior]!==c)return void this["_pausing_"+b.behavior].call(this,a);switch("pause"!==a&&"resume"!==a&&null!==a&&this._debug("Invalid argument. Toggling pause value instead"),a=!a||"pause"!==a&&"resume"!==a?"toggle":a){case"pause":b.state.isPaused=!0;break;case"resume":b.state.isPaused=!1;break;case"toggle":b.state.isPaused=!b.state.isPaused}return this._debug("Paused",b.state.isPaused),!1},_setup:function(){var a=this.options;return a.behavior&&this["_setup_"+a.behavior]!==c?void this["_setup_"+a.behavior].call(this):(this._binding("bind"),!1)},_showdonemsg:function(){var a=this.options;return a.behavior&&this["_showdonemsg_"+a.behavior]!==c?void this["_showdonemsg_"+a.behavior].call(this):(a.loading.msg.find("img").hide().parent().find("div").html(a.loading.finishedMsg).animate({opacity:1},2e3,function(){b(this).parent().fadeOut(a.loading.speed)}),void a.errorCallback.call(b(a.contentSelector)[0],"done"))},_validate:function(a){for(var c in a)if(c.indexOf&&c.indexOf("Selector")>-1&&0===b(a[c]).length)return this._debug("Your "+c+" found no elements."),!1;return!0},bind:function(){this._binding("bind")},destroy:function(){return this.options.state.isDestroyed=!0,this.options.loading.finished(),this._error("destroy")},pause:function(){this._pausing("pause")},resume:function(){this._pausing("resume")},beginAjax:function(a){var d,e,f,g,h=this,i=a.path;if(a.state.currPage++,a.maxPage!=c&&a.state.currPage>a.maxPage)return void this.destroy();switch(d=b(b(a.contentSelector).is("table")?"<tbody/>":"<div/>"),e="function"==typeof i?i(a.state.currPage):i.join(a.state.currPage),h._debug("heading into ajax",e),f="html"===a.dataType||"json"===a.dataType?a.dataType:"html+callback",a.appendCallback&&"html"===a.dataType&&(f+="+callback"),f){case"html+callback":h._debug("Using HTML via .load() method"),d.load(e+" "+a.itemSelector,c,function(a){h._loadcallback(d,a,e)});break;case"html":h._debug("Using "+f.toUpperCase()+" via $.ajax() method"),b.ajax({url:e,dataType:a.dataType,complete:function(a,b){g="undefined"!=typeof a.isResolved?a.isResolved():"success"===b||"notmodified"===b,g?h._loadcallback(d,a.responseText,e):h._error("end")}});break;case"json":h._debug("Using "+f.toUpperCase()+" via $.ajax() method"),b.ajax({dataType:"json",type:"GET",url:e,success:function(b,f,i){if(g="undefined"!=typeof i.isResolved?i.isResolved():"success"===f||"notmodified"===f,a.appendCallback)if(a.template!==c){var j=a.template(b);d.append(j),g?h._loadcallback(d,j):h._error("end")}else h._debug("template must be defined."),h._error("end");else g?h._loadcallback(d,b,e):h._error("end")},error:function(){h._debug("JSON ajax request failed."),h._error("end")}})}},retrieve:function(a){a=a||null;var d=this,e=d.options;return e.behavior&&this["retrieve_"+e.behavior]!==c?void this["retrieve_"+e.behavior].call(this,a):e.state.isDestroyed?(this._debug("Instance is destroyed"),!1):(e.state.isDuringAjax=!0,void e.loading.start.call(b(e.contentSelector)[0],e))},scroll:function(){var a=this.options,b=a.state;return a.behavior&&this["scroll_"+a.behavior]!==c?void this["scroll_"+a.behavior].call(this):void(b.isDuringAjax||b.isInvalidPage||b.isDone||b.isDestroyed||b.isPaused||this._nearbottom()&&this.retrieve())},toggle:function(){this._pausing()},unbind:function(){this._binding("unbind")},update:function(a){b.isPlainObject(a)&&(this.options=b.extend(!0,this.options,a))}},b.fn.infinitescroll=function(a,c){var d=typeof a;switch(d){case"string":var e=Array.prototype.slice.call(arguments,1);this.each(function(){var c=b.data(this,"infinitescroll");return c&&b.isFunction(c[a])&&"_"!==a.charAt(0)?void c[a].apply(c,e):!1});break;case"object":this.each(function(){var d=b.data(this,"infinitescroll");d?d.update(a):(d=new b.infinitescroll(a,c,this),d.failed||b.data(this,"infinitescroll",d))})}return this};var d,e=b.event;e.special.smartscroll={setup:function(){b(this).bind("scroll",e.special.smartscroll.handler)},teardown:function(){b(this).unbind("scroll",e.special.smartscroll.handler)},handler:function(a,c){var e=this,f=arguments;a.type="smartscroll",d&&clearTimeout(d),d=setTimeout(function(){b(e).trigger("smartscroll",f)},"execAsap"===c?0:100)}},b.fn.smartscroll=function(a){return a?this.bind("smartscroll",a):this.trigger("smartscroll",["execAsap"])}}(window,jQuery),function(){"use strict";window.BoredPanda=window.BoredPanda||{},BoredPanda.Utils={generateRandomString:function(a){var b="0123456789ABCDEFGHIJKLMNOPQRSTUVWXTZabcdefghiklmnopqrstuvwxyz".split("");a||(a=Math.floor(Math.random()*b.length));for(var c="",d=0;a>d;d++)c+=b[Math.floor(Math.random()*b.length)];return c},getParameterByName:function(a,b){void 0===b&&(b=location.search),-1!==b.indexOf("?")&&(b=b.slice(b.indexOf("?")));var c=null;a=a.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var d=new RegExp("[\\?&]"+a+"=([^&#]*)");return c=d.exec(b),null===c?"":decodeURIComponent(c[1].replace(/\+/g," "))},generateLink:function(a){var b=document.createElement("a");b.href=a;var c=b.hostname;return("undefined"===c||""===c||c===location.hostname)&&(c=a),c=c.replace("www.",""),c=c.replace("http://",""),c=c.replace("https://","")},annotatePath:function(a,b){if(null===a||void 0===a)return a;var c=a.substr(a.lastIndexOf(".")+1);return a.replace("."+c,b+"."+c)},wpAjax:function(a,b){return b=b||"json",$.ajax({type:"POST",url:ajax_object.ajax_url,data:a,dataType:b})},nAjax:function(a,b,c){var d=BoredPanda.Config.notificationServiceUrl;return c=c||{},$.ajax({type:a,url:d+b,crossDomain:!0,xhrFields:{withCredentials:!0},data:c,dataType:"json",contentType:"application/json"})},gatewayAjax:function(a,b,c){var d=BoredPanda.Config.gatewayUrl;return c=c||{},$.ajax({type:a,url:d+b,crossDomain:!0,data:c,dataType:"json",contentType:"application/json"})},prettyDate:function(a){var b=new Date(a||""),c=((new Date).getTime()-b.getTime())/1e3,d=Math.floor(c/86400),e=Math.ceil(d/7);if(!(isNaN(d)||0>d))return 0===d&&(60>c&&"now"||3600>c&&Math.floor(c/60)+" min"||86400>c&&Math.floor(c/3600)+" h")||7>d&&d+" d"||e+" w"},isPasswordSecure:function(a){var b=new RegExp("^(?=.*[a-z])(?=.*[A-Z])(?=.*[0-9])(?=.{8,})");return b.test(a)}},BoredPanda.generateShareablePermalink=function(a){void 0===a&&(a=location.href);var b=BoredPanda.Utils.getParameterByName("image_id",a);return-1!==a.indexOf("?")&&b.length>0?a.slice(0,a.indexOf("?"))+"?image_id="+b:a}}(),function(){"use strict";window.BoredPanda=window.BoredPanda||{},BoredPanda.Cropper=function(a){var b=this;b.visible=ko.observable(!1),b.columns=ko.observable(1),b.height=a.height,b.separator=a.separator,b.saveText=ko.observable("Save"),b.error=ko.observable(""),b.thumb=a.thumb,b.images=a.images,b.width=a.width||490,b.ratio=a.ratio||1.42857143,b.cropOneColumn={api:null,originalImg:ko.observable(""),offset:{x:ko.observable(0),y:ko.observable(0)},zoom:0},b.cropTwoColumnLeft={api:null,originalImg:ko.observable(""),offset:{x:ko.observable(0),y:ko.observable(0)},zoom:0},b.cropTwoColumnRight={api:null,originalImg:ko.observable(""),offset:{x:ko.observable(0),y:ko.observable(0)},zoom:0},b.show=function(){c(),b.visible(!0),d(),b.changed(),$("body").css("overflow","hidden")},b.setColumns=function(a){b.setApi("cropOneColumn"),b.setApi("cropTwoColumnLeft"),b.setApi("cropTwoColumnRight"),b.columns(a),d()},b.changed=function(){b.cropOneColumn.api.cropit("previewSize",{width:b.width,height:b.height()/b.ratio}),b.cropTwoColumnLeft.api.cropit("previewSize",{width:e("left"),height:b.height()/b.ratio}),b.cropTwoColumnRight.api.cropit("previewSize",{width:e("right"),height:b.height()/b.ratio}),$(a.selector+" .left-column").css("width",e("left")+"px"),$(a.selector+" .right-column").css("width",e("right")+"px")},b.hide=function(){b.visible(!1),$("body").css("overflow","")},b.save=function(){var c={};if(b.error(""),b.saveText("Save"),1===b.columns()){if(""===b.cropOneColumn.originalImg())return b.error("Please select image to edit.");c={action:a.action,type:"one_column",filename:a.filename,height:b.height(),image:{originalImg:b.cropOneColumn.originalImg(),offset:b.cropOneColumn.api.cropit("offset"),zoom:b.cropOneColumn.api.cropit("zoom")}}}else if(2===b.columns()){if(""===b.cropTwoColumnLeft.originalImg()||""===b.cropTwoColumnRight.originalImg())return b.error("Please select both sides of the image to edit.");c={action:a.action,type:"two_column",filename:a.filename,height:b.height(),separator:b.separator(),images:[{originalImg:b.cropTwoColumnLeft.originalImg(),offset:b.cropTwoColumnLeft.api.cropit("offset"),zoom:b.cropTwoColumnLeft.api.cropit("zoom")},{originalImg:b.cropTwoColumnRight.originalImg(),offset:b.cropTwoColumnRight.api.cropit("offset"),zoom:b.cropTwoColumnRight.api.cropit("zoom")}]}}b.saveText("Saving..."),$.ajax({type:"POST",url:ajax_object.ajax_url,data:c,
dataType:"json"}).done(function(c){a.callback(c,b),b.hide(),b.saveText("Save")})},b.chooseColumnImage=function(a,c){var e=c.originalUrl();b[a].originalImg(e),b.setApi("cropOneColumn"),b.setApi("cropTwoColumnLeft"),b.setApi("cropTwoColumnRight"),d()},b.setApi=function(a){var c=b[a].api.cropit("offset");b[a].offset.x(c.x),b[a].offset.y(c.y),b[a].zoom=b[a].api.cropit("zoom")};var c=function(){var c=function(c){a.imgs[c]?(b[c].originalImg(a.imgs[c].originalImg()),b[c].zoom=a.imgs[c].zoom,b[c].offset.x(a.imgs[c].offset.x()),b[c].offset.y(a.imgs[c].offset.y())):(b[c].originalImg(""),b[c].zoom=0,b[c].offset.x(0),b[c].offset.y(0))};c("cropOneColumn"),c("cropTwoColumnLeft"),c("cropTwoColumnRight"),0===b.cropOneColumn.originalImg().length&&0===b.cropTwoColumnLeft.originalImg().length&&0===b.cropTwoColumnRight.originalImg().length&&b.thumb().length>0&&(b.cropOneColumn.originalImg(b.thumb()),b.cropOneColumn.offset.x(0),b.cropOneColumn.offset.x(0))},d=function(){var c=function(a){b[a].api.cropit("imageSrc")!==b[a].originalImg()&&b[a].api.cropit("imageSrc",b[a].originalImg()),b[a].zoom>0&&b[a].api.cropit("zoom",b[a].zoom),b[a].api.cropit("offset",{x:b[a].offset.x(),y:b[a].offset.y()})};null===b.cropOneColumn.api?b.cropOneColumn.api=$(a.selector+" .one-column .thumbnail-crop").cropit({imageState:{src:b.cropOneColumn.originalImg(),offset:{x:b.cropOneColumn.offset.x(),y:b.cropOneColumn.offset.y()},zoom:b.cropOneColumn.zoom},previewSize:{width:b.width,height:b.height()/b.ratio},exportZoom:b.ratio}):c("cropOneColumn"),null===b.cropTwoColumnLeft.api?b.cropTwoColumnLeft.api=$(a.selector+" .two-column .left-column .thumbnail-crop").cropit({imageState:{src:b.cropTwoColumnLeft.originalImg(),offset:{x:b.cropTwoColumnLeft.offset.x(),y:b.cropTwoColumnLeft.offset.y()},zoom:b.cropTwoColumnLeft.zoom},previewSize:{width:b.width/2-2,height:b.height()/b.ratio},exportZoom:b.ratio}):c("cropTwoColumnLeft"),null===b.cropTwoColumnRight.api?b.cropTwoColumnRight.api=$(a.selector+" .two-column .right-column .thumbnail-crop").cropit({imageState:{src:b.cropTwoColumnRight.originalImg(),offset:{x:b.cropTwoColumnRight.offset.x(),y:b.cropTwoColumnRight.offset.y()},zoom:b.cropTwoColumnRight.zoom},previewSize:{width:b.width/2-2,height:b.height()/b.ratio},exportZoom:b.ratio}):c("cropTwoColumnRight")},e=function(a){var c=b.width-6;return"left"===a?c/100*b.separator():c/100*(100-b.separator())},f=function(a){$(a.selector).each(function(){ko.applyBindings(b,this)})};f(a)}}(),function(){"use strict";window.BoredPanda=window.BoredPanda||{},BoredPanda.Scroll={didScroll:!1,init:function(){this.scrollCallback=$.Callbacks("unique");var a=this;$(window).scroll(function(){BoredPanda.Config.isTabletWidth?a.didScroll=!0:a.scrollCallback.fire()}),BoredPanda.Config.isTabletWidth&&setInterval(function(){a.didScroll&&(a.didScroll=!1,a.scrollCallback.fire())},250)}},$(document).ready(function(){BoredPanda.Scroll.init()})}(),function(){"use strict";window.BoredPanda=window.BoredPanda||{};var a=BoredPanda.NotificationSettings||{};a=function(a){var b=this;b.showMessage=ko.observable(!1),b.options=ko.observableArray(),b._lines={n_post_comment:"Email me when somebody comments on my post for the first time",n_comment_reply:"Email me when somebody replies to my comment for the first time",n_open_list_author:"Email me when somebody contributes to an open list I created",n_open_list_contributor:"Email me about my open list contribution success",n_post_author:"Email me about my story success"},b.contactAuthor=ko.observable(a.find("#contact-author").data("checked")===!0);var c=BoredPanda.Utils.nAjax("GET","/user_settings?client=email");c.done(function(a){var c=a.data;for(var d in c.email)b.options.push({val:c.email[d],text:b._lines[d],key:d})}),b.save=function(){for(var a={},c=0;c<b.options().length;c++)a[b.options()[c].key]=b.options()[c].val;var d=BoredPanda.Utils.nAjax("POST","/user_settings",JSON.stringify({email:a})),e=BoredPanda.Utils.wpAjax({action:"save_notification_settings",settings:{allow_contact_author:b.contactAuthor()}});d.done(function(){e.done(function(){b.showMessage(!0),setTimeout(function(){b.showMessage(!1)},5e3)})})}},$(document).ready(function(b){b("#notification-settings").length>0&&(BoredPanda.notificationSettings=new a(b("#notification-settings")),ko.applyBindings(BoredPanda.notificationSettings,b("#notification-settings")[0]))})}(),function(){"use strict";window.BoredPanda=window.BoredPanda||{},BoredPanda.Analytics={STORAGE_KEY:"bp-analytics",available:void 0,init:function(){return this.testStorageAvailability()?(this.isStorageInitialized()||this.setup(),this.available=!0,this.getUserId(),this.migrations(),this.addPageView(),void this.updateHistoryInCookies()):void(this.available=!1)},migrations:function(){var a=this.getStorageContents();void 0!==a.finished_reading&&0!==a.finished_reading.length||void 0===a.pageviews||(a.finished_reading=a.pageviews),this.saveStorageConents(a)},updateHistoryInCookies:function(){$.cookie("bp_hist",JSON.stringify([]),{expires:365,path:"/"}),$.cookie("bp_skipped_posts",JSON.stringify([]),{expires:365,path:"/"}),$.cookie("bp_unfinished",JSON.stringify([]),{expires:365,path:"/"})},setup:function(){var a={pageviews:[],finished_reading:[],events:[],showed_recommendations:[],guest_user_id:null,skipped_posts:[]},b=JSON.stringify(a);localStorage.setItem(this.STORAGE_KEY,b)},getUserId:function(){if(void 0!==BoredPanda.Config.userId&&BoredPanda.Config.userId>0)return"r"+parseInt(BoredPanda.Config.userId).toString();var a=this.getStorageContents();if(void 0!==a.guest_user_id&&null!==a.guest_user_id)return a.guest_user_id;var b=this.generateGuestUserId();return a.guest_user_id=b,this.saveStorageConents(a),b},generateGuestUserId:function(){var a=Math.ceil(Math.random()*(void 0!==Number.MAX_SAFE_INTEGER?Number.MAX_SAFE_INTEGER:99999999)),b=new Date;b=b.getTime();var c="g"+a.toString()+b.toString();return c},isStorageInitialized:function(){return null!==localStorage.getItem(this.STORAGE_KEY)},finishedReading:function(){var a=this.getStorageContents();void 0===a.finished_reading&&(a.finished_reading=[]);var b=this.createCurrentPageView();return a.finished_reading.push(b),this.saveStorageConents(a),b},addPageView:function(){var a=this.getStorageContents();void 0===a.pageviews&&(a.pageviews=[]);var b=this.createCurrentPageView();return a.pageviews.push(b),this.saveStorageConents(a),b},addSkippedPosts:function(a){if(a&&0!==a.length){var b=this.getStorageContents();void 0!==b.skipped_posts&&Array.isArray(b.skipped_posts)||(b.skipped_posts=[]);var c=this._unixTimestamp(),d=this.getUniquePostIds();for(var e in a){var f=parseInt(a[e]);-1===d.indexOf(f)&&b.skipped_posts.push({id:f,timestamp:c})}this.saveStorageConents(b)}},getSkippedPosts:function(){var a=this.getStorageContents();if(void 0===a.skipped_posts||!Array.isArray(a.skipped_posts))return[];var b=[];for(var c in a.skipped_posts){var d=a.skipped_posts[c];void 0!==d.id&&b.push(d.id)}return b},setRecommendationsAsSeen:function(a){var b=this.getStorageContents();void 0===b.showed_recommendations&&(b.showed_recommendations=[]);for(var c in a){var d=a[c];-1===b.showed_recommendations.indexOf(d)&&b.showed_recommendations.push(d)}b.showed_recommendations.length>100&&(b.showed_recommendations=b.showed_recommendations.slice(-100)),this.saveStorageConents(b)},setVisibleRecommendationsAsSeen:function(){var a=[];BoredPanda.Config.isMobileWidth?$(".post-recommendations-main-block section.recommended-posts article").slice(0,3).each(function(){a.push($(this).attr("data-post-id"))}):$(".post-recommendations-main-block section.recommended-posts article").each(function(){a.push(parseInt($(this).attr("data-post-id")))}),this.setRecommendationsAsSeen(a)},getSeenRecommendations:function(){var a=this.getStorageContents();if(void 0===a.showed_recommendations)return[];var b=a.showed_recommendations,c=[];return $.each(b,function(a,b){c.push(parseInt(b))}),c},getUniquePostIds:function(a){a||(a="finished_reading");var b=[];"pageviews"===a&&(b=this.getPageViews()),"finished_reading"===a&&(b=this.getFinishedReading());var c={};for(var d in b){var e=b[d],f=parseInt(e.postId);c[f]=1}var g=Object.keys(c),h=[];return $.each(g,function(a,b){h.push(parseInt(b))}),h},getPageViews:function(){if(!this.available)return[];var a=this.getStorageContents();return a.pageviews},getFinishedReading:function(){var a=this.getStorageContents();return void 0===a.finished_reading?[]:a.finished_reading},getUnfinishedPosts:function(){var a=this.getUniquePostIds(),b=this.getUniquePostIds("pageviews"),c=$(b).not(a).get();return c},getStorageContents:function(){if(!this.available)return{};var a=JSON.parse(localStorage.getItem(this.STORAGE_KEY));return a=this.afterGettingStorageContents(a)},afterGettingStorageContents:function(a){var b=this._unixTimestamp(),c=[];if(void 0!==a.skipped_posts)for(var d in a.skipped_posts){var e=a.skipped_posts[d];void 0!==e.timestamp&&e.timestamp+43200>b&&c.push(e)}return a.skipped_posts=c,a},saveStorageConents:function(a){this.available&&(localStorage.setItem(this.STORAGE_KEY,JSON.stringify(a)),BoredPanda.Analytics.updateHistoryInCookies())},createCurrentPageView:function(){var a=(new Date).getTime()/1e3,b={timestamp:a,url:location.pathname+location.search,postId:parseInt(BoredPanda.Config.postId)};return b},testStorageAvailability:function(){var a="foobar";try{return localStorage.setItem(a,a),localStorage.removeItem(a),!0}catch(b){return!1}},_unixTimestamp:function(){return Math.floor((new Date).getTime()/1e3)}},$(document).ready(function(){})}(),function(){"use strict";window.BoredPanda=window.BoredPanda||{},BoredPanda.Tracking={PAGE_REGION_TOP:"page-top",PAGE_REGION_CONTENT:"in-content",PAGE_REGION_CONTENT_BOTTOM:"content-bottom",PAGE_REGION_BOTTOM:"page-bottom",init:function(){var a=this;a.postsWithStickyFooterTracked=[],a.postsProgressTracked=[],a.postsMiddlePorgressTracked=[],a.postContentBottomThreshold=void 0,BoredPanda.Config.isStaffMember||"undefined"!=typeof BoredPanda.Config.postJson||a.trackAddPostInputs();var b="Ads";a.trackElem(".presented-turkish-airlines .turkish-airlines-logo",b,"Turkish Airlines"),b="Newsletter Form",a.trackElem(".sidebar .sidebar-top .newsletter-form .btn",b,"Sidebar Top"),a.trackElem(".sidebar .sticky .newsletter-form .btn",b,"Sidebar Bottom Sticky"),window.location.origin||(window.location.origin=window.location.protocol+"//"+window.location.hostname+(window.location.port?":"+window.location.port:"")),location.origin.length>=location.href.length-1?$(".bottom-bar-share-button").each(function(){a.trackElem(this,"Facebook","Home Page Share")}):($(".bottom-bar-share-button.fb-custom-share, .bottom-bar-share-button.fb-custom-share-mobile").each(function(){a.trackElem(this,"Facebook","Post Footer Share")}),$(".bottom-bar-share-button.pinterest-custom-share").each(function(){a.trackElem(this,"Pinterest","Desktop Post Bottom Bar")})),b="Facebook",a.trackClick(".facebook-page-promotion .share-button",b,"In Content Fan Banner Mobile"),a.trackClick(".facebook-page-promotion .fb-page-title a",b,"In Content Fb Page Link"),a.trackClick(".facebook-page-promotion .fb-page-image",b,"In Content Fb Page Link"),a.trackClick(".facebook-page-promotion-text h3 a",b,"In Content Fb Page Link"),b="Recommendations",a.trackClick(".mid-post-recommendations a",b,"Mid Post"),b="Add Post Button",a.trackClick(".post .post-submission-line.post-footer .add-post-link",b,"Submission In Content"),a.trackClick(".header .add-post-top-button",b,"Submission Top Bar"),a.trackClick(".header .add-post-menu-button",b,"Submission User Menu"),a.trackClick(".header .mobile .add-post-tablet",b,"Submission Tablet Portrait"),a.trackClick(".single-post-author .author-communication-line .learn-more",b,"Success Stories Below Post"),b="iOS app",a.trackClick(".app-promotion .updated .ios-app .install-block .install-button",b,"custom widget"),a.trackClickDelegated(".top-message",".ios-download-desktop-top-link",b,"top desktop message"),a.trackClick(".get-app .get-ios-app",b,"Desktop Sidebar"),b="Android app",a.trackClick(".app-promotion .updated .android-app .install-block .install-button",b,"custom widget"),a.trackClick(".get-app .get-android-app",b,"Desktop Sidebar"),b="Navigation",a.trackElem(".top-categories a",b,"Top Bar Categories",!1,!0),a.trackElem(".mobile-category-list ul li a",b,"Top Bar Categories",!1,!0),a.trackElem(".top-level-navigation a.popular",b,"Top Bar Popular",!1,!0),a.trackElem(".top-level-navigation a.trending",b,"Top Bar Trending",!1,!0),a.trackElem(".top-level-navigation a.latest",b,"Top Bar Latest",!1,!0),a.trackElem(".responsive-sub-menu span.popular",b,"Top Bar Popular",!1,!0),a.trackElem(".responsive-sub-menu span.trending",b,"Top Bar Trending",!1,!0),a.trackElem(".responsive-sub-menu span.latest",b,"Top Bar Latest",!1,!0),a.trackElem(".post .post-header .post-cover-container a",b,"Feed Cover Image"),a.trackElem(".posts .post h2 a",b,"Feed Title"),BoredPanda.Config.isHome&&(a.trackElem(".post .post-header .post-cover-container a",b,"Homepage Cover Image"),a.trackElem(".posts .post h2 a",b,"Homepage Title")),b="Mobile Newsletter",a.trackElem(".subscribe-form .input-group .subscribe-button",b,"Newsletter Submit"),b="Contact Author",a.trackClick(".author-info-contact-author a",b,"Contact"),b="Post",a.trackClick(".post-content .read-more-block .read-more-button",b,"Read More"),a.trackClick(".sharebar .vote-panel.vote-post .btn-up","Votes","Sharebar","up",!0,!0),a.trackClick(".sharebar .vote-panel.vote-post .btn-down","Votes","Sharebar","down",!0,!0),a.trackClick(".post-info-block.mobile .vote-panel.vote-post .btn-up","Votes","Mobile Post Bottom","up",!0),a.trackClick(".post-info-block.mobile .vote-panel.vote-post .btn-down","Votes","Mobile Post Bottom","down",!0),a.trackClickDelegated("main.bp-container","footer.footer .vote-panel.vote-post .btn-up","Votes","Post Footer","up",!0),a.trackClickDelegated("main.bp-container","footer.footer .vote-panel.vote-post .btn-down","Votes","Post Footer","down",!0),a.trackClickDelegated("main.bp-container",".fixed-bottom-overlay.socialbar .vote .btn-up","Votes","Mobile Footer","up",!0,!1,!0),a.trackClickDelegated("main.bp-container",".fixed-bottom-overlay.socialbar .vote .btn-down","Votes","Mobile Footer","down",!0,!1,!0),a.trackClickDelegated("main.bp-container",".comment-container .comment .vote .btn-up","Votes","Comment","up",!0),a.trackClickDelegated("main.bp-container",".comment-container .comment .vote .btn-down","Votes","Comment","down",!0),a.trackClickDelegated("main.bp-container",".open-list-footer .vote .btn-up","Votes","Open List Submission","up",!0),a.trackClickDelegated("main.bp-container",".open-list-footer .vote .btn-down","Votes","Open List Submission","down",!0),a.trackClickDelegated("main.bp-container",".comment-add-block .post-comment","Comment","Post Comment","Top Level",!0),a.trackClickDelegated("main.bp-container",".comment-container .comment-add-block .post-comment","Comment","Post Comment","Reply",!0),a.trackClickDelegated("main.bp-container",".entry .open-list-item h2.open-list-header a","Open List","Submission Heading","click",!0),a.trackClickDelegated("main.bp-container",".append-open-list .publish-button","Open List","Add Submission Desktop","submit",!0),a.trackClickDelegated("main.bp-container",".append-open-list.mobile .post-button","Open List","Add Submission Mobile","submit",!0),a.trackClickDelegated("main.bp-container",".open-list-pagination-block .open-list-pagination-new a.pagination","Open List","Show More","click"),a.trackClickDelegated("main.bp-container",".open-list-pagination-block .open-list-pagination-new a.open-list-pagination-previous","Open List","Show Previous","click"),a.trackClickDelegated("main.bp-container",".open-list-pagination-block .open-list-pagination-new a.open-list-pagination-first","Open List","Show First","click"),a.trackClickDelegated("main.bp-container",".single-post-pagination-block .single-post-pagination-new a.pagination","Post","Show More","click"),a.trackClickDelegated("main.bp-container",".single-post-pagination-block .single-post-pagination-new a.single-post-pagination-previouss","Post","Show Previous","click"),a.trackClickDelegated("main.bp-container",".single-post-pagination-block .single-post-pagination-new a.single-post-pagination-first","Post","Show First","click"),a.trackClickDelegated("main.bp-container","section.recommended-posts article.popular-post-rec:not([data-rec-type])","Recommendations","Recommended","click",!1,!1),a.trackClickDelegated("main.bp-container",'section.recommended-posts article.popular-post-rec[data-rec-type="personal"]',"Recommendations","Recommended On History","click",!1,!1),a.trackClickDelegated("main.bp-container",'section.recommended-posts article.popular-post-rec[data-rec-type="popular"]',"Recommendations","Recommended Personal Popular","click",!1,!1),a.trackClickDelegated("main.bp-container","section.recommended-posts article.trending-post-rec","Recommendations","Recommended Trending","click",!1,!0),a.trackClickDelegated("main.bp-container","section.related-posts article.popular-post-rec","Recommendations","Most Popular","click",!1,!0),a.trackClickDelegated("main.bp-container","section.trending-posts article.trending-post-rec","Recommendations","Trending","click",!1,!0),a.trackClickDelegated("main.bp-container","section.recent-challenges article","Recommendations","Recent Challenges","click",!1,!0),a.trackClickDelegated("main.bp-container","section.trending-posts article.recent-challenge","Recommendations","Recent Challenges","click",!1,!0),a.trackClickDelegated("main.bp-container","section.related-posts article.success-story-rec","Recommendations","Success Story","click",!1,!0),a.trackClickDelegated("main.bp-container","section.post-complete-bottom-recommendations article","Recommendations","Post Bottom","click",!1,!0),a.trackClick(".sidebar .staff-stats-box.users-banner .create-challenge","Challenges","Sidebar Banner","click"),void 0!==BoredPanda.Config&&(void 0===BoredPanda.Config.postId||null===BoredPanda.Config.postId||0===BoredPanda.Config.postId?a.trackClickDelegated("main.bp-container",'.sidebar-top .trending-post:not(".trending-post-ad")',"Recommendations","Homepage Sidebar","click",!1):a.trackClickDelegated("main.bp-container",'.sidebar-top .trending-post:not(".trending-post-ad")',"Recommendations","Post Sidebar","click",!1)),a.trackFooterShares(),a.trackStickyFooter(),a.trackPostProgress(),a.trackAdClicks(),a.trackAuthorInvitationInvitees(),a.trackLoginFormButtons(),a.trackImageSharesByDevice(),a.trackYoutubeSubscribe(),BoredPanda.Config.isTabletWidth?(a.trackClick(".single-image-template .horizontal-fb-share","Facebook","Single Image Share Button Mobile"),a.trackClick(".single-image-template .post-info-block .vote-panel.vote-post .btn-up","Votes","Single Image Vote Mobile","up",!0),a.trackClick(".single-image-template .post-info-block .vote-panel.vote-post .btn-down","Votes","Single Image Vote Mobile","down",!0)):(a.trackClick(".single-image-template .fb-custom-share.bottom-bar-share-button","Facebook","Single Image Share Button Desktop"),a.trackClick(".single-image-template .footer .vote-panel.vote-post .btn-up","Votes","Single Image Vote Desktop","up",!0),a.trackClick(".single-image-template .footer .vote-panel.vote-post .btn-down","Votes","Single Image Vote Desktop","down",!0)),BoredPanda.Utils.getParameterByName("pageid")&&a.trackInviteeClicks(),$(document).on("fbload",function(){a.trackFacebook()})},trackLoginFormButtons:function(){var a="Login form";this.trackClickDelegated("body",".login-form .fb-login",a,"Facebook"),this.trackClickDelegated("body",".login-form .google-login",a,"Google"),this.trackClickDelegated("body",".login-form .links .btn-primary",a,"Login Email"),this.trackClickDelegated("body",".signup-form .links .btn-primary",a,"Sign Up Submit"),this.trackClickDelegated("body",".login-form .links .sign-up-link",a,"Sign Up"),a="Add Post Login Form",this.trackClickDelegated("body",".add-post-login .fb-login",a,"Facebook"),this.trackClickDelegated("body",".add-post-login .google-login",a,"Google"),this.trackClickDelegated("body",".add-post-login .login-form .links .submit-button",a,"Login Email"),this.trackClickDelegated("body",".add-post-login .signup-form .links .submit-button",a,"Sign Up"),this.trackClickDelegated("body",".add-post-login .login-form .sign-up-link a",a,"Sign Up Link in Log In Form"),this.trackClickDelegated("body",".add-post-login .signup-form .login-link a",a,"Log In Link in Sign Up Form")},trackFooterShares:function(){var a="Post footer shares",b="mobile";this.trackClickDelegated("body",".shares.mobile .horizontal-fb-share",a,"Facebook",b),this.trackClickDelegated("body",".small-social-icons a.whatsapp",a,"Whatsapp",b),this.trackClickDelegated("body",".small-social-icons a.email",a,"Email Sharing",b),this.trackClickDelegated("body",".small-social-icons a.pintrest",a,"Pinterest",b),this.trackClickDelegated("body",".small-social-icons a.twitter",a,"Twitter",b),this.trackClickDelegated("body",".small-social-icons a.gplus",a,"G Plus",b),this.trackClickDelegated("body",".post-shares-footer.mobile .fb-footer-share",a,"Facebook",b),this.trackClickDelegated("body",".post-shares-footer.mobile .email-footer-share",a,"Email Sharing",b),this.trackClickDelegated("body",".post-shares-footer.mobile .pinterest-footer-share",a,"Pinterest",b),this.trackClickDelegated("body",".post-shares-footer.mobile .additional-shares-row.whatsapp",a,"Whatsapp",b),this.trackClickDelegated("body",".post-shares-footer.mobile .additional-shares-row.tumblr",a,"Tumblr",b),this.trackClickDelegated("body",".post-shares-footer.mobile .additional-shares-row.twitter",a,"Twitter",b),this.trackClickDelegated("body",".post-shares-footer.mobile .additional-shares-row.sms",a,"Sms",b),this.trackClickDelegated("body",".post-shares-footer.mobile .shares-newsletter-sign-up .form .sign-up",a,"Newsletter Sign Up",b),b="desktop",this.trackClickDelegated("body",".post-shares-footer:not(.mobile) .fb-footer-share",a,"Facebook",b),this.trackClickDelegated("body",".post-shares-footer:not(.mobile) .email-footer-share",a,"Email Sharing",b),this.trackClickDelegated("body",".post-shares-footer:not(.mobile) .pinterest-footer-share",a,"Pinterest",b),this.trackClickDelegated("body",".post-shares-footer:not(.mobile) .tumblr-footer-share ",a,"Tumblr",b),this.trackClickDelegated("body",".post-shares-footer:not(.mobile) .twitter-footer-share ",a,"Twitter",b),this.trackClickDelegated("body",".post-shares-footer:not(.mobile) .google-footer-share ",a,"Google Plus",b),this.trackClickDelegated("body",".post-shares-footer:not(.mobile) .reddit-footer-share ",a,"Reddit",b)},trackPageview:function(a,b){ga("send","event","Pageviews",a,b)},trackAdClicks:function(){$("main.bp-container").on("click",".outbrain-widget .ob-dynamic-rec-container",function(){ga("send","event","Ads","Post Bottom Outbrain","click")}),$("div.cover-banner").on("click",".bp-container .backup-ad",function(){ga("send","event","Ads","970x250 clickbank","click")})},trackAdImpression:function(a,b){ga("send","event",a,b,"impression",{nonInteraction:!0})},trackFacebook:function(){var a=this;FB.Event.subscribe("comment.create",function(){var a="Comment";ga("send","event",a,"Post Facebook Comment","click")}),FB.Event.subscribe("edge.create",function(a,b){var c="Facebook";$(".post .right .fb-like")[0]===b?ga("send","event",c,"Post Top Right Like","click"):$(".sharebar .fb-like")[0]===b?ga("send","event",c,"Post Sharebar Like","click"):$(".post .footer .fb-like")[0]===b?ga("send","event",c,"Post Footer Like","click"):$(".top-message .fb-like")[0]===b?ga("send","event",c,"Spanish Message Like","click"):$(".bottom-bar-facebook .fb-like")[0]===b?ga("send","event",c,"Fixed Bottom Bar Fan","click"):$(".single-image-template .footer .left .fb-like")[0]===b?ga("send","event",c,"Single Image Share Button Desktop","click"):$(".single-image-template .post-info-block .right .fb-like")[0]===b?ga("send","event",c,"Single Image Share Button Mobile","click"):$(".facebook-block .like-block .fb-like")[0]===b?ga("send","event",c,"Mobile Fan Bottom","click"):b.classList.contains("post-bottom-fb-like-bpanimals")?ga("send","event",c,"In Content Fan Banner","click"):$(".facebook-page-promotion-text .native-fb-like .fb-like")[0]===b?ga("send","event",c,"In Content Fan Banner","click"):$(".fb-mobile-page-like-widget .install-block .fb-like")[0]===b?(ga("send","event",c,"Mobile Fixed Top Widget","click"),$.cookie("disablefbmobilewidget","1",{expires:60,path:"/"}),$(".app-promotion").remove()):$(".fixed-bottom-facebook-widget .fb-like")[0]===b&&(ga("send","event",c,"Desktop Fixed Bottom Widget","click"),$.cookie("disablefbdesktopwidget","1",{expires:60,path:"/"}),$(".fixed-bottom-facebook-widget").remove())}),"undefined"!=typeof twttr&&twttr.ready(function(a){a.events.bind("follow",function(a){$(a.target.parentElement).hasClass("install-block")&&ga("send","event","Twitter","Mobile Fixed Top Widget","click")})}),a.trackClick(".fb-mobile-page-like-widget .close-icon","Facebook","Mobile Fixed Top Widget","close"),a.trackClick(".twitter-mobile-page-like-widget .close-icon","Twitter","Mobile Fixed Top Widget","close"),a.trackClick(".fixed-bottom-facebook-widget .widget-block .modal-close","Facebook","Desktop Fixed Bottom Widget","close"),a.trackClick(".fixed-bottom-facebook-widget .widget-block .close-text","Facebook","Desktop Fixed Bottom Widget","no")},trackClick:function(a,b,c,d,e,f){void 0===d&&(d="click");var g=this;$(a).on("mousedown",function(){if(!e||BoredPanda.Config.isLoggedIn){f=f||!1;var a=new Object(d);if(f){var h=g.getCurrentPageRegion();""!==h&&(a=a+"-"+h)}ga("send","event",b,c,a.toString())}})},trackClickDelegated:function(a,b,c,d,e,f,g,h){void 0===e&&(e="click"),g=g||!1,h=h||!1;var i=this;$(a).on("mousedown",b,function(){if(!f||BoredPanda.Config.isLoggedIn){var a=new Object(e);if(a=!g||$(window).width()>979?a:a+"-mobile",h){var b=i.getCurrentPageRegion();""!==b&&(a=a+"-"+b)}a+="",ga("send","event",c,d,a)}})},trackImpression:function(a,b,c){$(a).each(function(){ga("send","event",b,c,"impression",{nonInteraction:!0})})},trackElem:function(a,b,c,d,e){var f=this;$(a).each(function(){f.trackClick(this,b,c,"click",d,e)})},trackPostProgress:function(){var a=this.getCurrentPostFromUrl();if(void 0!==a&&""!==a){var b=$('article.post div.post-content img,video,iframe[src*="youtube"],iframe[src*="vimeo"]').length,c=this;if(b>1&&$(".post-footer-reached").length>0){var d=Math.ceil(b/2);$("article.post div.post-content img,video").eq(d).bind("inview",function(a,d){if(d){var e=c.getCurrentPostFromUrl();if(c.postsMiddlePorgressTracked.indexOf(e)>-1)return;c.postsMiddlePorgressTracked.push(e),ga("send","event","Navigation","Post-"+b,"Middle Reached",{nonInteraction:!0})}})}$(".post-footer-reached").bind("inview",function(a,d){if(d){var e=c.getCurrentPostFromUrl();if(c.postsProgressTracked.indexOf(e)>-1)return;c.postContentBottomThreshold=$(window).scrollTop(),c.postsProgressTracked.push(e),ga("send","event","Navigation","Post-"+b,"Bottom Reached",{nonInteraction:!0}),void 0!==BoredPanda.Analytics&&void 0!==BoredPanda.Analytics.finishedReading&&BoredPanda.Analytics.finishedReading()}}),$(".post-recommendations-main-block").bind("inview",function(a,b){if(b&&"true"!==$(".post-recommendations-main-block").attr("data-viewed")&&void 0!==BoredPanda.Analytics&&(BoredPanda.Analytics.setVisibleRecommendationsAsSeen(),$(".post-recommendations-main-block").attr("data-viewed",!0),$(".post-recommendations-main-block section.recommended-posts article.popular-post-rec[data-rec-type]").length>0)){var c=BoredPanda.Analytics.getUniquePostIds().length;ga("send","event","Navigation","Personal Recommendations","seen-"+c,{nonInteraction:!0})}})}},getCurrentPageRegion:function(){if(0===BoredPanda.Config.postId)return"";var a=$(window).scrollTop();if(350>=a)return this.PAGE_REGION_TOP;var b=Math.max(document.documentElement.clientHeight,window.innerHeight||0);return void 0!==this.postContentBottomThreshold&&a>=this.postContentBottomThreshold-.8*b&&a<=this.postContentBottomThreshold+.25*b?this.PAGE_REGION_CONTENT_BOTTOM:void 0!==this.postContentBottomThreshold&&a>=this.postContentBottomThreshold+.25*b?this.PAGE_REGION_BOTTOM:this.PAGE_REGION_CONTENT},trackStickyFooter:function(a){var b=979,c=$(document).width()<=b;return c?(void 0===a&&(a=window.location.pathname,a=a.substr(1,a.length-2)),void(this.postsWithStickyFooterTracked.indexOf(a)>-1||(this.postsWithStickyFooterTracked.push(a),this.trackElem('article[data-post-name="'+a+'"] .fixed-bottom-overlay.bottom-bar-newsletter a',"Newsletter Form","Mobile Fixed Bottom Bar"),this.trackElem('article[data-post-name="'+a+'"] .fixed-bottom-overlay .share-button .facebook',"Mobile Fixed Bottom Bar Share","Facebook"),this.trackElem('article[data-post-name="'+a+'"] .fixed-bottom-overlay .share-button .twitter',"Mobile Fixed Bottom Bar Share","Twitter"),this.trackElem('article[data-post-name="'+a+'"] .fixed-bottom-overlay .share-button .whatsapp',"Mobile Fixed Bottom Bar Share","Whatsapp"),this.trackElem('article[data-post-name="'+a+'"] .fixed-bottom-overlay .share-button .pinterest',"Mobile Fixed Bottom Bar Share","Pinterest"),this.trackElem('article[data-post-name="'+a+'"] .fixed-bottom-overlay .share-button .email',"Mobile Fixed Bottom Bar Share","Email")))):!1},getCurrentPostFromUrl:function(){var a=window.location.pathname;return a=a.substr(1,a.length-2)},trackEvent:function(a,b,c){ga("send","event",a,b,c)},trackAddPostInputs:function(){var a=!1,b=!1,c=!1,d=!1,e=!1,f=!1;$(".post-title .add-post-form-input").on("change",function(){!a&&$(".post-title .add-post-form-input").val().length>=10&&BoredPanda.Config.trackAddPost&&(a=!0,ga("send","event","Add Post Form","Title","True"))}),$(".post-description .add-post-form-input").on("change",function(){!b&&$(".post-description .add-post-form-input").val().length>=50&&BoredPanda.Config.trackAddPost&&(b=!0,ga("send","event","Add Post Form","Description","True"))}),$(".contribution-facebook-image-overlay").on("click",function(){!c&&BoredPanda.Config.trackAddPost&&(c=!0,ga("send","event","Add Post Form","Facebook Image Generator","click"))}),$(".button.fb-image-save").on("click",function(){!d&&BoredPanda.Config.trackAddPost&&(d=!0,ga("send","event","Add Post Form","Facebook Image Save Btn","click"))}),$(".contribution-thumbnail-images-overlay").on("click",function(){!e&&BoredPanda.Config.trackAddPost&&(e=!0,ga("send","event","Add Post Form","Thumb Image Generator","click"))}),$(".button.save-thumbnails").on("click",function(){!f&&BoredPanda.Config.trackAddPost&&(f=!0,ga("send","event","Add Post Form","Thumb Image Save Btn","click"))})},publishSent:!1,trackAddPostPublish:function(){BoredPanda.Config.trackAddPost&&(BoredPanda.Tracking.publishSent||(BoredPanda.Tracking.publishSent=!0,ga("send","event","Add Post Form","Publish","click")))},trackAddPostPublishError:function(){BoredPanda.Config.trackAddPost&&ga("send","event","Add Post Form","Missing Mandatory Fields","True")},categorySent:!1,trackAddPostCategories:function(){BoredPanda.Config.trackAddPost&&(BoredPanda.Tracking.categorySent||(BoredPanda.Tracking.categorySent=!0,ga("send","event","Add Post Form","Category","True")))},imageSent:!1,trackAddPostImage:function(){BoredPanda.Config.trackAddPost&&(BoredPanda.Tracking.imageSent||(BoredPanda.Tracking.imageSent=!0,ga("send","event","Add Post Form","Images","True")))},imageTooSamllSent:!1,trackImageTooSmallError:function(){BoredPanda.Config.trackAddPost&&(BoredPanda.Tracking.imageTooSamllSent||(BoredPanda.Tracking.imageTooSamllSent=!0,ga("send","event","Add Post Form","Small Image","True")))},trackAuthorInvitationInvitees:function(){BoredPanda.Config.authorInvitationId&&!BoredPanda.Config.isStaffMember&&$.cookie("invitation",BoredPanda.Config.authorInvitationId,{expires:90,path:"/"})},trackInviteeAddPost:function(a){BoredPanda.Utils.wpAjax({action:"track_invitation_conversion",post_id:a})},trackInviteeAction:function(a){BoredPanda.Utils.wpAjax({action:"track_invitation_action",invitation_action:a
})},trackInviteeClicks:function(a){var b="",c="";if(BoredPanda.Utils.getParameterByName("pageid")){var d=BoredPanda.Utils.getParameterByName("pageid");b=d.substring(0,d.length-2),c=d.substring(d.length-2,d.length)}else $.cookie("invitation")&&(b=$.cookie("invitation"));if(""!==b){var e="desktop";BoredPanda.Config.isMobileWidth?(e="mobile",BoredPanda.Config.isiPhone()&&(e="iphone")):BoredPanda.Config.isMobileWidth&&(e="tablet");var f="other-page-visit";window.location.href.indexOf("info-for-invited-author")>-1?f="landing-visit":"undefined"!=typeof a&&"login"===a?f="logged-in":"undefined"!=typeof a&&"download"===a?f="download-app":window.location.href.indexOf("add-new-post")>-1&&(f="add-post-visit");var g="event:"+f+"|link_nr:"+c+"|device:"+e;BoredPanda.Utils.wpAjax({action:"track_invitation_click",value:g,id:b})}},trackFeedSkippedArticles:function(){$("section.posts article.post[data-post-id] header a, section.posts article.post[data-post-id] h2 a").on("mousedown",function(){var a=[];$(this).closest("article").prevAll("article[data-post-id]").each(function(){a.push($(this).attr("data-post-id"))}),void 0!==BoredPanda.Analytics.addSkippedPosts&&a.length<10&&BoredPanda.Analytics.addSkippedPosts(a)})},trackOpenListCommentSubmit:function(){ga("send","event","Open List","First Level Comment","submit")},trackAddPostFormLoggedIn:function(){var a={action:"add_meta_current_user",meta:"logged-in-via-add-post",value:"true"};BoredPanda.Utils.wpAjax(a)},trackImageShares:function(a,b,c,d){var e=[{name:"post_id",value:b},{name:"parent_list_id",value:d},{name:"image",value:c},{name:"social_network",value:a}],f=BoredPanda.ContentTracking.generateEvent("image_share",e);BoredPanda.ContentTracking.sendEvent(f)},trackImageSharesByDevice:function(){var a="desktop";BoredPanda.Config.isTabletWidth&&(a="mobile");var b="Shares on images";this.trackClick(".image-share-box .whatsapp-share",b,"Whatsapp",a),this.trackClick(".image-share-box .email-share-mobile",b,"Email share",a),this.trackClick(".image-share-box .fb-share",b,"Facebook",a),this.trackClick(".image-share-box .pinterest-share",b,"Pinterest",a),this.trackClick(".image-share-box .tumblr-share",b,"Tumblr",a),this.trackClick(".image-share-box .email-share",b,"Email",a),$(".link-share-modal .link").bind("copy",function(){ga("send","event",b,"Link",a)}),this.trackClick(".email-share-modal .form .submit-button",b,"Email send",a),this.trackClick(".email-share-modal .success .sign-up",b,"Email newsletter sign-up",a)},trackYoutubeSubscribe:function(){$(".youtube-subscribe-button").click(function(){var a=$(this).data("track-label");a||(a="not set"),ga("send","event","Youtube","Subscribe",a)})}},$(document).ready(function(){BoredPanda.Tracking.init()})}(),function(){"use strict";window.BoredPanda=window.BoredPanda||{},BoredPanda.AppPromotion={cookie:"disablepromotion",cookieTakeOver:"disabletakeover",campaignReferrer:document.referrer.indexOf("utm_campaign=")>-1,campaign:BoredPanda.Utils.getParameterByName("utm_campaign"),androidAppHomeDeeplink:"intent://deeplink/home/?referrer=utm_source%3Dwebsite%26utm_medium%3Dtakeover#Intent;scheme=boredpanda;package=com.boredpanda.android;end",androidAppPostDeeplink:"intent://deeplink/post?post_id="+BoredPanda.Config.postId+"&referrer=utm_source%3Dwebsite%26utm_medium%3Dtakeover#Intent;scheme=boredpanda;package=com.boredpanda.android;end",takeovers:{iOS:{"default":{3:{text:"Bored Panda works better on our iPhone app",imageClass:"icon-3"}}},Android:{"default":{1:{text:"Bored Panda works best if you switch to our Android app",imageClass:"icon-android-1"}}}},banners:{iOS:{1:{text:"Get the latest inspiring stories via our awesome iOS app!","class":"banner-with-logo"}},Android:{1:{text:"Get the latest inspiring stories via our awesome Android app!","class":"banner-with-logo"}}},isPromotionVisible:function(){return void 0===$.cookie(this.cookie)&&(BoredPanda.Config.isiPad()||BoredPanda.Config.isiPhone()||BoredPanda.Config.isAndroid())&&!BoredPanda.Config.isWindowsPhone()&&!$("body").hasClass("page-template-add-post-template-php")&&!$("body").hasClass("page")},isTakeOverVisible:function(){return(BoredPanda.Config.isiPhone()||BoredPanda.Config.isAndroid())&&($("body").hasClass("home")&&!document.referrer||this.campaignReferrer)&&$("body").width()<=480&&-1===BoredPanda.Config.pandaBaseUrl.indexOf("boredpanda.es")&&!BoredPanda.Config.isWindowsPhone()},isBannerVisible:function(){return(BoredPanda.Config.isiPhone()||BoredPanda.Config.isAndroid())&&this.campaign&&$("body").width()<=480},initUpdated:function(){this.isPromotionVisible()&&(this.initLinks(),BoredPanda.Config.isAndroid()?$(".app-promotion .updated .android-app").show():$(".app-promotion .updated .ios-app").show(),$(".app-promotion .updated-app").show(),$(".header").addClass("promotion-updated"),$(".main.bp-container").addClass("promotion-updated"),$(".page-template").hasClass("page-template-add-post-template-php")&&($(".header.promotion-updated").attr("style","top: 49px;"),$(".main.promotion-updated").attr("style","margin-top: 6.5em !important;")))},initLinks:function(){$(".app-promotion .close-block a.close-icon").on("click",function(){$(".page-template").hasClass("page-template-add-post-template-php")&&($(".header.promotion-updated").removeAttr("style"),$(".main.promotion-updated").removeAttr("style")),$(".header").hasClass("promotion-updated")&&($(".header").removeClass("promotion-updated"),$(window).scroll()),$(".main.bp-container").hasClass("promotion-updated")&&$(".main.bp-container").removeClass("promotion-updated"),$.cookie("disablepromotion","1",{expires:60,path:"/"}),$(".app-promotion").remove()})},getCampaign:function(a){var b="default";return(this.campaignReferrer||this.campaign)&&(b=BoredPanda.Utils.getParameterByName("utm_campaign",a).toLowerCase()),b},initTakeOver:function(){var a=this;if(this.isTakeOverVisible()){var b=$(".app-takeover"),c=this.getCampaign(document.referrer),d=BoredPanda.Config.isiPhone()?"iOS":"";if(BoredPanda.Config.isAndroid()){d="Android",b.find(".takeover-icon").addClass("android");var e=this.androidAppHomeDeeplink;!BoredPanda.Config.isHome&&BoredPanda.Config.postId&&(e=this.androidAppPostDeeplink+BoredPanda.Config.postId),b.find(".takeover-button").attr("href",e)}if(this.takeovers[d][c]&&void 0===$.cookie(this.cookieTakeOver)&&void 0===$.cookie(this.cookieTakeOver+"_"+c)){var f=Math.floor(Math.random()*(1+Object.keys(this.takeovers[d][c]).length-1))+1;"iOS"===d&&(f=3),b.find(".takeover-icon").addClass(this.takeovers[d][c][f].imageClass),b.find(".takeover-description").text(this.takeovers[d][c][f].text),$("body").addClass("takeover-open"),b.show(),$.cookie(this.cookieTakeOver+"_"+c,"1",{expires:60,path:"/"}),BoredPanda.Tracking.trackEvent(d+" app","Takeover App Store "+c,"impression"+f),$(".takeover-button").on("click",function(){BoredPanda.Tracking.trackEvent(d+" app","Takeover App Store "+c,"click"+f),$(".app-takeover").hide(),$("body").removeClass("takeover-open")}),$(".takeover-link").on("click",function(){BoredPanda.Tracking.trackEvent(d+" app","Takeover Website "+c,"click"+f),$(".app-takeover").hide(),$("body").removeClass("takeover-open")}),$(window).resize(function(){a.isTakeOverVisible()&&$(".app-takeover").is(":visible")?$("body").addClass("takeover-open"):$("body").removeClass("takeover-open")})}}},initAddPostDownloadApp:function(){(BoredPanda.Config.isiPad()||BoredPanda.Config.isiPhone())&&$(".download-app").show()}},$(document).ready(function(){BoredPanda.AppPromotion.initAddPostDownloadApp()})}(),function(){"use strict";window.BoredPanda=window.BoredPanda||{},BoredPanda.Notice=function(){var a=this;a.noticeVisible=ko.observable(!1),a.notice=ko.observable(""),a.showNotice=function(b){void 0===b&&(b=$.cookie("notice"),$.removeCookie("notice",{path:"/"})),void 0!==b&&(a.notice(b),a.noticeVisible(!0),setTimeout(function(){a.noticeVisible(!1)},5e3))},a.setNotice=function(a){$.cookie("notice",a,{expires:1,path:"/"})},a.showNotice()},$(document).ready(function(){$("#notice").length>0&&(BoredPanda.notice=new BoredPanda.Notice,ko.applyBindings(BoredPanda.notice,$("#notice")[0]))})}(),function(){"use strict";window.BoredPanda=window.BoredPanda||{};var a=BoredPanda.Notifications||{};a=function(){var a=this,b="/notifications/",c=10,d=1;a.open=!1,a.exists=ko.observable(!1),a.visible=ko.observable(!1),a.noMoreLeft=ko.observable(!1),a.loading=ko.observable(!1),a.initiating=ko.observable(!0),a.unseen=ko.observable(0),a.notifications=ko.observableArray();var e=function(a){return BoredPanda.Utils.prettyDate(new Date(1e3*a).toISOString())},f=function(a){var b=document.createElement("div");return b.innerHTML=a,$(b).find("a").each(function(){$(this).contents().unwrap().wrap("<strong/>")}),$(b).find("p").each(function(){$(this).contents().unwrap()}),$(b).html()},g=BoredPanda.Utils.nAjax;a.markSeen=function(){var c=g("POST",b);c.done(function(){a.unseen(0)})},a.getOlder=function(){i(a.notifications().length)};var h=function(b,c){c=c||!1,b.time=e(b.created_at),b.text=f(b.text),b.thumb||(b.thumb=BoredPanda.Config.assetsBaseUrl+"/wp-content/themes/boredpanda/images/notifications-default-image.png"),c?a.notifications.push(b):a.notifications.unshift(b)},i=function(e){a.loading(!0);var f=g("GET",b+c+"/"+e);f.always(function(){a.loading(!1)}),f.done(function(b){var c=b.data;a.unseen(c.unseenCount);for(var d=0;d<c.notifications.length;d++)h(c.notifications[d],!0);a.noMoreLeft(0===c.notifications.length),a.exists(a.notifications().length>0),a.initiating(!1)}),f.fail(function(a){if(401===a.status&&d>0){d--;var b=$.ajax({type:"POST",url:ajax_object.ajax_url,dataType:"json",data:{action:"renew_boredpanda_auth_cookie"}});b.done(function(){i(e)})}})},j=function(){return"undefined"==typeof io?void setTimeout(j,1e3):(a.socket=io(BoredPanda.Config.notificationServiceUrl,{path:"/socket",secure:!0}),void a.socket.on("new notification",function(b){h(b),a.unseen(a.unseen()+1)}))};BoredPanda.Config.isLoggedIn&&-1===window.location.hostname.indexOf("ci.boredpanda")&&-1===window.location.hostname.indexOf("boredpanda.es")&&(i(0),j())},$(document).ready(function(b){BoredPanda.Config.isLoggedIn&&(BoredPanda.notifications=new a,b(".notifications").each(function(){ko.applyBindings(BoredPanda.notifications,this)}))})}(),function(){"use strict";window.BoredPanda=window.BoredPanda||{},BoredPanda.GeoIP={},BoredPanda.GeoIP.spanishLangs=["MX","PH","ES","CO","AR","PE","VE","CL","EC","GT","CU","BO","DO","HN","PY","SV","NI","CR","PR","PA","UY","GQ","EH"],BoredPanda.GeoIP.messageLangs=["LT"],BoredPanda.GeoIP.europeLangs=["EU","AD","AL","AT","BA","BE","BG","BY","CH","CS","CZ","DE","DK","EE","ES","FI","FO","FR","FX","GB","GI","GR","HR","HU","IE","IS","IT","LI","LT","LU","LV","MC","MD","MK","MT","NL","NO","PL","PT","RO","SE","SI","SJ","SK","SM","UA","VA"],BoredPanda.init=function(){this.FacebookLoader.init(),this.Header.init(),this.Layout.init(),this.SocialIcons.init(),this.Header.mobileHeader(),this.Sidebar.init(),this.Post.init(),this.ICheck.init(),this.AuthorTabs.init(),this.SubscribtionValidation.init(),this.ShowMatureContent.init(),this.ContactForm.changeSubject(),this.ShareBox.init(),this.ScrollToImage.init(),this.BookPayPalLanding.init(),this.Shares.init(),this.Advertise.init(),this.Quiz.init(),this.InitCloseButton.init()},BoredPanda.InitCloseButton={init:function(){setInterval(function(){$(".closeable-div").height()>0&&$(".closeable-div .modal-close").show()},1e3),$(".closeable-div .modal-close").on("click",function(){$(this).parent().remove()})}},BoredPanda.ContactForm={changeSubject:function(){location.search.split("report-post=")[1]&&$('select[name="your-recipient"]').val("Report Post"),$("input[name=subject-timestamp]").val(Math.round((new Date).getTime()/1e3))}},BoredPanda.ScrollToImage={init:function(){var a=BoredPanda.Utils.getParameterByName("media_id",window.location.href);a&&$('[id="'+a+'"]').get(0).scrollIntoView()}},BoredPanda.BookPayPalLanding={init:function(){if($(".page-template-book-landing").length>0){var a=function(){var a=$(".book-image");a.height(a.width())};BoredPanda.Config.windowWidth<=940&&($(window).on("resize",a),a())}}},BoredPanda.ShareBox={init:function(){$("body").on("click",".shareable-image-block",function(a){if(BoredPanda.Config.isTabletWidth&&-1===$.inArray("social-button",a.target.classList)&&0===$(this).find(".image-slider-info").length&&0===$(this).find(".mature-content-image").length){var b=$(this).find(".image-share-box");$(".shareable-image-block .image-share-box").each(function(){$(this).get(0)!==b.get(0)&&$(this).hide()}),b.toggle()}}),this.linkShare(),this.sharesCount()},sharesCount:function(){if(BoredPanda.Config.isStaffMember&&BoredPanda.Config.postId&&!BoredPanda.Config.isTabletWidth){var a={action:"image_share_stats",property_type:BoredPanda.Config.inOpenList?"parent_list_id":"post_id",property_value:BoredPanda.Config.postId},b=$.ajax({type:"POST",url:ajax_object.ajax_url,data:a,dataType:"json"});b.done(function(a){a.success===!0&&$.each(a.data,function(a,b){var c=$('.shareable-post-image img[src*="'+a+'"]').closest(".shareable-image-block").find(".image-share-box");c.find(".fb-share .statistics").text(b.facebook?b.facebook:0),c.find(".pinterest-share .statistics").text(b.pinterest?b.pinterest:0),c.find(".tumblr-share .statistics").text(b.tumblr?b.tumblr:0),c.find(".email-share .statistics").text(b.email?b.email:0),c.find(".link-share .statistics").text(b.link?b.link:0)})})}},emailShare:function(){$("body").on("click",".email-share",function(){var a=$(this).closest(".shareable-post-image"),b=a.find(".email-share-modal:first");b.css("top",$(this).offset().top-a.offset().top-b.height()/2+$(this).outerHeight()/2),$(this).parent().attr("style","display:block;"),b.show()}),$("body").on("click",".email-share-modal .modal-close",function(){a($(this).closest(".email-share-modal"))}),$("body").on("click",".email-share-modal .sign-up",function(){var c=$(this).closest(".email-share-modal"),d=c.find('input[name="email"]').val();if(!d)return b("Please fill your email address",c),!1;var e={action:"email_share_subscribe_newsletter",email:c.find('input[name="email"]').val()},f=$.ajax({type:"POST",url:ajax_object.ajax_url,data:e,dataType:"json"});f.done(function(){var b=c.closest(".shareable-post-image"),d=b.find(".email-share");c.find(".success").hide(),c.removeClass("subscribe-form"),c.addClass("subscribed"),c.find(".success-subscribe").show(),b.length>0&&d.length>0&&c.css("top",d.offset().top-b.offset().top-c.height()/2+d.outerHeight()/2),setTimeout(function(){a(c)},2e3)})}),$("body").on("click",function(a){!$(a.target).closest("a").hasClass("email-share")&&!$(a.target).closest("a").hasClass("email-footer-share")&&$(a.target).closest(".email-share-modal").length<1&&$(".email-share-modal:visible").each(function(){$(this).hide(),$(this).parent().find(".image-share-box").removeAttr("style")})});var a=function(a){a.hide(),a.parent().find(".image-share-box").removeAttr("style"),a.removeClass("subscribed"),a.addClass("subscribe-form"),a.find(".success").show(),a.find(".success-subscribe").hide(),a.find("input").val(""),c(a)},b=function(a,b){b.find(".error .error-text").text(a),b.find(".error").show()},c=function(a){a.find(".error").hide()}},linkShare:function(){$("body").on("click",".link-share",function(){var a=$(this).closest(".shareable-post-image"),b=a.find(".link-share-modal:first");b.css("top",$(this).offset().top-a.offset().top-b.height()/2+$(this).outerHeight()/2),b.find(".link").val($(this).data("link")),$(this).parent().attr("style","display:block;"),b.show(),b.find(".link").focus().select()}),$("body").on("click",function(a){!$(a.target).closest("a").hasClass("link-share")&&!$(a.target).closest("a").hasClass("email-footer-share")&&$(a.target).closest(".email-share-modal").length<1&&$(".email-share-modal:visible").each(function(){$(this).hide(),$(this).parent().find(".image-share-box").removeAttr("style")})})}},BoredPanda.Quiz={init:function(){var a=$(".post-content.quiz-post");a.length>0&&$(".post-content.quiz-post .quiz-submit").click(function(){a.find(".quiz-block").length===a.find(".quiz-block input:checked").length?(a.find(".quiz-error").hide(),a.find(".quiz-result").show(),$("html, body").animate({scrollTop:a.find(".quiz-result").offset().top-$("header.header").height()},600)):a.find(".quiz-error").show()})}},BoredPanda.ShowMatureContent={init:function(){$(".mature-content-image").each(function(){$(this).append('<div class="mature-content"><div class="mature-title">'+BoredPanda.Translate.Post.mature_content+'</div><div class="mature-explanation">'+BoredPanda.Translate.Post.mature_content_confirm+"</div></div>")}),$(document).on("click",".mature-content-image",function(a){a.preventDefault(),$(this).removeClass("mature-content-image")})}},BoredPanda.SubscribtionValidation={init:function(){$(".newsletter-subscribe").on("submit",function(){var a=$(this),b=/^([\w-]+(?:\.[\w-]+)*)@((?:[\w-]+\.)*\w[\w-]{0,66})\.([a-z]{2,6}(?:\.[a-z]{2})?)$/i,c=a.find(".email-field");a.find(".subscribe-block"),a.find(".response-block");if(""===c.val()||!b.test(c.val()))return c.addClass("invalid-email"),a.find(".error").show(),!1;a.find(".newsletter-spinner").show();var d=a.attr("data-form-name"),e="Newsletter Form",f="click";a.parent(".newsletter-variation").length>0&&(f+=a.parent(".newsletter-variation").data("variation")),ga("send","event",e,d,f)})}},BoredPanda.FacebookLoader={init:function(){var a=function(){var b=function(){FB.XFBML.parse()};"undefined"!=typeof FB?setTimeout(b,500):setTimeout(a,500)};if(BoredPanda.Config.isMobileWidth)a();else{$(".post-info-block .right:not(.spanish-panda)").append('<div class="fb-like" data-href="https://www.facebook.com/boredpanda" data-layout="button_count" data-action="like" data-show-faces="false" data-share="false" data-page-like-position="home_page" data-page-like-category="post_like"></div>'),$(".post-info-block .right.spanish-panda").append('<div class="fb-like" data-href="https://www.facebook.com/pandacurioso" data-layout="button_count" data-action="like" data-show-faces="false" data-share="false" data-page-like-position="home_page" data-page-like-category="post_like"></div>');var b=$("#sharebar .fb-sharebar-box").attr("data-post");$("#sharebar .fb-sharebar-box").append('<div class="fb-like" data-href="'+b+'" data-layout="box_count" data-action="like" data-show-faces="false" data-share="true"></div>'),a()}}},BoredPanda.Sticky=function(a){function b(){return d.$sticky.topOffset=d.$sticky.offset().top-parseInt(d.$sticky.css("margin-top")),d.$sticky.topOffset?void(d.$sticky.length>0&&BoredPanda.Scroll.scrollCallback.add(function(){d.$sticky.is(":visible")&&((window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop||0)+c>d.$sticky.topOffset?d.$sticky.addClass("fixed"):(d.$sticky.removeClass("fixed"),d.$sticky.topOffset=d.$sticky.offset().top-parseInt(d.$sticky.css("margin-top"))+(parseInt(d.$sticky.css("top"))||0)))})):void setTimeout(b,500)}var c,d=this;c=$("header").length?12:0,d.$sticky=$(a),b()},BoredPanda.Header={init:function(){(!BoredPanda.Config.isTabletWidth||BoredPanda.Config.isTabletWidth&&90===Math.abs(window.orientation))&&(this.categoriesHover(),this.search(),this.checkCategoriesWidth()),this.searchMobile(),this.userMenuHover(),this.topMessage()},checkCategoriesWidth:function(){$("div.logotype").width()>210&&($(".more-categories .last-visible-category").show(),$(".nav.left.top-level-navigation ul:first > li:not(.more):last").hide())},sticky:function(){var a;a=$("body").hasClass("page-template-add-post-template-php")?0:$(".cover").height(),BoredPanda.Scroll.scrollCallback.add(function(){$(document).scrollTop()>a?$(".header").addClass("fixed"):$(".header").removeClass("fixed")})},stickySidebarAd:function(){$(".sidebar .sticky-bottom").addClass("fixed-bottom"),BoredPanda.Scroll.scrollCallback.add(function(){$(".sidebar .sticky-bottom").hasClass("fixed")?($(".sidebar .sticky-bottom").css("top","271px"),$(".sidebar .sticky-top").addClass("fixed-bottom")):($(".sidebar .sticky-top").removeClass("fixed-bottom"),$(".sidebar .sticky-bottom").css("top","0"))})},mobileHeader:function(){$("#mobile-categories-show").on("click",function(){$(".mobile-more-categories-list").is(":visible")?$(".mobile-more-categories-list").hide():($(document).scrollTop(0),$(".mobile-more-categories-list").show())}),$(".my-menu").on("click",function(){$("nav.submenu").is(":visible")?($("nav.submenu").hide(),$(".my-menu").removeClass("active")):($("nav.submenu").show(),$(".my-menu").addClass("active"))}),window.location.href.indexOf("#upvotes")>-1&&($(".submenu li.admin").removeClass("active"),$(".upvotes").addClass("active")),$(".upvotes").on("click",function(){window.location.href!==$(this).find("a").attr("href")&&(window.location.href=$(this).find("a").attr("href")),window.location.reload(!0)}),$("header.static-pages-header .top-menu-mobile").change(function(){window.location.href=$(this).val()})},topMessage:function(){var a="disabletopmessage1",b="disablecookiemessage",c=this;(void 0===$.cookie(a)||void 0===$.cookie(b))&&$.ajax({type:"GET",url:"https://geoip.boredpanda.com/",dataType:"json"}).done(function(d){var e=BoredPanda.GeoIP.spanishLangs.indexOf(d.countrycode),f=BoredPanda.GeoIP.europeLangs.indexOf(d.countrycode),g=(BoredPanda.GeoIP.messageLangs.indexOf(d.countrycode),"");void 0===$.cookie(a)&&e>-1&&(g='<span>¿Te gusta Bored Panda? ¡Ahora puedes leernos en español! </span><div class="fb-like" data-href="https://www.facebook.com/pandacurioso" data-layout="button_count" data-action="like" data-show-faces="false" data-share="false" data-page-like-position="home_page" data-page-like-category="post_like"></div>'),!BoredPanda.Config.isTabletWidth||window.innerWidth>979&&window.innerWidth>window.innerHeight?(void 0===$.cookie(b)&&f>-1&&(BoredPanda.Config.isCookiePolicyVisible=!0,c.initDesktopCookieMessage()),$("body").hasClass("home")&&g.length>0&&($(".top-message").addClass("top-message-visible"),$(".top-message").html(g+'<a title="" href="javascript:void(0);" class="close-box"></a>'),$(".main").css("margin-top","50px"),$(".top-message .close-box").on("click",function(b){b.preventDefault(),$.cookie(a,"1",{expires:60,path:"/"}),c.hideTopMessage()}))):void 0===$.cookie(b)&&f>-1&&(BoredPanda.Config.isCookiePolicyVisible=!0,c.initMobileCookiePolicy(b))})},initDesktopCookieMessage:function(){$(".cookie-message").show(),$(".cookie-message .cookie-policy .got-it, .cookie-message .cookie-policy .close-box").on("click",function(){$(".cookie-message").remove(),$.cookie("disablecookiemessage","1",{expires:60,path:"/"})})},initMobileCookiePolicy:function(a){$(".cookie-policy-mobile").show(),$(".main.bp-container").addClass("show-cookie-message"),$(".cookie-policy-mobile .got-it").on("click",function(){$.cookie(a,"1",{expires:60,path:"/"}),$(".cookie-policy-mobile").remove(),$(".main.bp-container").removeClass("show-cookie-message")})},hideCookiePolicy:function(a){BoredPanda.Config.isCookiePolicyVisible=!1,$.cookie("disablecookiemessage","1",{expires:60,path:"/"}),void 0===$.cookie(a)?$(".cookie-policy").animate({"margin-top":"-28px"},1e3):this.hideTopMessage()},hideTopMessage:function(){$(".top-message").hide(),$(".main").css("margin-top","25px")},categoriesHover:function(){var a=$(".more-categories");$(".header").on("click",".more",function(){a.toggle()}),$(".header").on("mouseleave",".more-categories",function(){a.hide()})},userMenuHover:function(){var a=$(".nav.right .user-menu .submenu");$(".header").on("click",".user-menu .button",function(){a.toggle()}),$(".header").on("mouseleave",".nav.right .user-menu .submenu",function(){a.hide()})},search:function(){var a=$(".header .search"),b=a.find(".search-icon"),c=a.find(".search-box"),d=a.find(".text"),e=a.find(".search-close");b.on("click",function(a){a.preventDefault(),c.toggle(),b.toggleClass("hover"),d.focus()}),d.on("focusout",function(a){a.relatedTarget&&"submit"===a.relatedTarget.className||(c.toggle(),b.toggleClass("hover"))}),e.on("click",function(a){c.hide(),b.removeClass("hover")})},searchMobile:function(){var a=$(".header .mobile .search"),b=a.parent().find(".search-form"),c=a.parent().find(".text"),d=a.parent().find(".modal-close");a.on("click",function(a){a.preventDefault(),b.toggle(),c.focus()}),d.on("click",function(a){a.preventDefault(),b.hide()})}},BoredPanda.Sidebar={init:function(){var a=function(){$(".sidebar .sticky").each(function(){new BoredPanda.Sticky(this)})};a(),$(window).resize(function(){$(window).width()>=768&&$(window).scrollTop($(window).scrollTop()+1).trigger("scroll"),a()});var b=$("aside.sidebar");b.length>0&&(BoredPanda.sidebar=new BoredPanda.SidebarController,ko.applyBindings(BoredPanda.sidebar,b.get(0)))}},BoredPanda.SocialIcons={init:function(){this.genericSocialIcons()},genericSocialIcons:function(){$("a.social.twitter.share").each(function(){$(this).click(function(){window.open("https://www.twitter.com/share?url="+encodeURIComponent(BoredPanda.generateShareablePermalink())+"&via=boredpanda&text="+encodeURIComponent(document.title),"twitter-share-dialog","width=626,height=273")})}),$("a.social.pintrest.share").each(function(){$(this).click(function(){window.open("https://www.pinterest.com/pin/create/button/?url="+encodeURIComponent(BoredPanda.generateShareablePermalink())+"&media="+encodeURIComponent($('meta[property="og:image"]').attr("content"))+"&description="+encodeURIComponent(document.title),"pintrest-pin-dialog","width=750,height=328")})})},widgets:{facebook:function(a){return'<div class="fb-like" data-href="'+a+'" data-send="false" data-layout="button_count" data-show-faces="false"></div>'},pinterest:function(a,b,c){return'<a href="//www.pinterest.com/pin/create/button/?url='+encodeURIComponent(a)+"&media="+encodeURIComponent(b)+"&description="+encodeURIComponent(c)+'" class="pin-it" data-pin-do="buttonPin" data-pin-config="beside"><img src="//assets.pinterest.com/images/pidgets/pinit_fg_en_rect_gray_20.png" /></a>'}}},BoredPanda.Post={init:function(){BoredPanda.Post.Votes.init(),$(".gallery-nav").length>0&&this.gallery()},sharebar:function(a){BoredPanda.Sticky(a),BoredPanda.Scroll.scrollCallback.add(function(){var b=$("#post-comments-area").offset().top+$("#post-comments-area").height();$(document).scrollTop()>b?a.hide():a.show()})},gallery:function(){var a=function(a,b){$("a.mobile-gallery-nav."+b).addClass("gallery-spinner");var c=$.ajax({url:a,data:{only_post:1},type:"POST"});c.done(function(b){var c=$(".left-content-column"),d=c.parent();c.remove(),d.append(b),window.history.replaceState({html:b,pageTitle:document.title},"",a),BoredPanda.Slider.bindDrag(),BoredPanda.Flipper.bind(),$(document).scrollTop(0),ga("send","pageview",a),BoredPanda.SocialIcons.init(),BoredPanda.FooterControl.init(),void 0!==FB&&FB.XFBML.parse(),$("#div-gpt-ad-1426006150012-0").length>0?$("#div-gpt-ad-1426006150012-0").html("<script type=\"text/javascript\">if (BoredPanda.Config.isMobileWidth) { googletag.cmd.push(function() { googletag.display('div-gpt-ad-1426006150012-0'); }); }</script>"):$("#div-gpt-ad-1426085663937-0").html("<script type=\"text/javascript\">if (BoredPanda.Config.isMobileWidth) { googletag.cmd.push(function() { googletag.display('div-gpt-ad-1426085663937-0'); }); }</script>"),googletag.pubads().refresh()}),c.fail(function(){})};$(document).keydown(function(b){if(!$("input, textarea").is(":focus")){var c,d={left:37,right:39};b.keyCode===d.left?(c=$(".gallery-nav.prev").attr("href"),c&&a(c,"prev")):b.keyCode===d.right&&(c=$(".gallery-nav.next").attr("href"),c&&a(c,"next"))}}),$(document).on("click",".mobile-gallery-nav.prev",function(b){b.preventDefault(),a($(this).attr("href"),"prev")}),$(document).on("click",".mobile-gallery-nav.next",function(b){b.preventDefault(),a($(this).attr("href"),"next")})}},BoredPanda.Post.Votes={init:function(){this.registerVotes()},registerVotes:function(){var a=this;$(document).on("click",".vote-panel.vote-post .btn",function(){var b=$(this),c=$(this).parent().parent().parent(),d=$(this).hasClass("btn-up"),e=c.find(".vote-panel.vote-post .btn."+(d?"btn-up":"btn-down")),f=c.find(".vote-panel.vote-post .btn."+(d?"btn-down":"btn-up")),g=$(".voting-panda"),h=$(this).hasClass("btn-up")?1:-1,i=$(this).data("postId"),j=h,k=h;if(!BoredPanda.Config.isLoggedIn){var l=window.location.pathname+"?afterlogin=savevote&post="+i+"&score="+h;return window.history.pushState("Vote","Vote",l),void BoredPanda.Login.form.show(l,void 0,BoredPanda.Translate.Signup.please_login_vote)}BoredPanda.Config.isSuperVoter||(e.hasClass("active")?(k=-h,j=0):f.hasClass("active")&&(k*=2,f.removeClass("active")),e.toggleClass("active"),g.removeClass("panda-happy").removeClass("panda-sad"),g.addClass(j>0?"panda-happy":0>j?"panda-sad":"")),a.updatePoints(k,c),a.updateSharebarPanda(b.closest(".vote-panel"),j);var m=a.sendRequest(h,i);"1"!==BoredPanda.Utils.getParameterByName("offline_voting")&&m.error(function(b){void 0===b.responseJSON&&BoredPanda.Config.isSuperVoter?alert("Error! Vote was not saved."):b.responseJSON.success===!1&&"undefined"!=typeof b.responseJSON.error&&BoredPanda.Config.isSuperVoter&&alert(b.responseJSON.error),a.updatePoints(-1*k,c)})})},updateSharebarPanda:function(a,b){var c=$(a),d=c.find(".mood .panda");d.length>0&&(0>b?d.removeClass("happy neutral").addClass("sad"):b>0?d.removeClass("sad neutral").addClass("happy"):0===b&&d.removeClass("happy sad").addClass("neutral"))},updatePoints:function(a,b){function c(a,b){var c=Math.pow(10,b||0);return Math.round(a*c)/c}b.find(".vote-panel .points").each(function(){var b=$(this).data("points")+a;$(this).data("points",b),1===b||-1===b?$(this).html(b+"<span>point</span>"):(b/1e3>=1&&1e6>b?b=c(b/1e3,1)+"K":b/1e6>=1&&(b=c(b/1e6,1)+"M"),$(this).html(b+"<span>points</span>"))})},sendRequest:function(a,b){var c={action:"vote_for_post",score:a,post_id:b};return BoredPanda.Utils.wpAjax(c)}},BoredPanda.ICheck={init:function(){var a=$(".radio.iwhite, .checkbox.iwhite");a.length>0&&a.iCheck({increaseArea:"20%",checkboxClass:"checkbox-white",radioClass:"radio-white"});var b=$(".radio.iblack, .checkbox.iblack");b.length>0&&b.iCheck({increaseArea:"20%",checkboxClass:"checkbox-black",radioClass:"radio-black"})}},BoredPanda.Newsletter=function(){var a=this;a.visible=ko.observable(!1),a.group=ko.observable("Daily"),a.email=ko.observable(""),a.submit=function(){var b={action:"newsletter_subscribe",group:a.group(),email:a.email,user_id:BoredPanda.Login.form.accountActivation.userId()};BoredPanda.Login.form.buffering(!0);var c=$.ajax({url:ajax_object.ajax_url,data:b,type:"POST"});c.done(function(){BoredPanda.Login.afterNewsletter()}),c.fail(function(){BoredPanda.Login.afterNewsletter()})}},BoredPanda.Layout={init:function(){this.hiddenLoggedIn(),this.hiddenCookie(),this.newsletterCookie(),this.showFullText()},hiddenLoggedIn:function(){var a=this;$(".hidden-logged-in").each(function(){BoredPanda.Config.isLoggedIn?a.hide(this):$(this).show()})},hiddenCookie:function(){var a=this;$(".hidden-cookie").each(function(){$(this).data("cookie")&&$.cookie($(this).data("cookie"))?a.hide(this):$(this).show()})},hide:function(a){$(a).hide(),$(a).removeClass("hidden-cookie hidden-logged-in")},newsletterCookie:function(){var a="newsletter_subscribed";$(".newsletter-form form, .post-subscribe-form form, .ml-subscribe-form form").each(function(){$(this).submit(function(){$.cookie(a,"1",{expires:365,path:"/"})})})},showFullText:function(){$(".post-content .read-more-block .read-more-button").click(function(){$(this).closest(".post-content").find(".read-more-block").hide(),$(this).closest(".post-content").find(".hidden-mobile-paragraphs").show()})}},BoredPanda.AuthorTabs={init:function(){$(".author-tabs").length>0&&(BoredPanda.AuthorTabs.model=new BoredPanda.AuthorTabs.Model,$(".author-tabs").each(function(){ko.applyBindings(BoredPanda.AuthorTabs.model,this)}))},Model:function(){var a=this;a.activeTab=ko.observable("posts"),a.feeds={posts:ko.observableArray(),submissions:ko.observableArray(),upvotes:ko.observableArray()},a.feedFinished={posts:ko.observable(!1),submissions:ko.observable(!1),upvotes:ko.observable(!1)
},a.activateTab=function(b){return function(){a.activeTab(b),$(".posts").each(function(){$(this).infinitescroll("pause")}),b="posts"===b?"blog":b,$(".posts."+b).infinitescroll("resume")}},$(".posts.blog").infinitescroll({navSelector:".posts.blog .pagination",nextSelector:".posts.blog .pagination a:first",itemSelector:".posts.blog .post",loading:{finishedMsg:"",msgText:"",img:BoredPanda.Config.assetsBaseUrl+"/wp-content/themes/boredpanda/images/add-post-loading.gif"}}),$(".posts.submissions").infinitescroll({navSelector:".posts.submissions .pagination",nextSelector:".posts.submissions .pagination a:first",itemSelector:".post",loading:{finishedMsg:"",msgText:"",img:BoredPanda.Config.assetsBaseUrl+"/wp-content/themes/boredpanda/images/add-post-loading.gif"}}),$(".posts.upvotes").infinitescroll({navSelector:".posts.upvotes .pagination",nextSelector:".posts.upvotes .pagination a:first",itemSelector:".post",loading:{finishedMsg:"",msgText:"",img:BoredPanda.Config.assetsBaseUrl+"/wp-content/themes/boredpanda/images/add-post-loading.gif"}}),"#upvotes"===window.location.hash?a.activateTab("upvotes")():$(".author-tabs .posts.blog .no-posts").length>0&&0===$(".author-tabs .posts.submissions .no-posts").length?a.activateTab("submissions")():"#bonuses"===window.location.hash?a.activateTab("bonuses")():a.activateTab("posts")()}},BoredPanda.ResponsiveImagePlaceholders={init:function(){$(document).ajaxComplete(function(){clearTimeout(this.timeout),this.timeout=setTimeout(placeholderImages,100)})}},BoredPanda.SidebarController=function(){var a=this;a.tooltips={subs:{showTooltip:ko.observable(!1)},challenges:{showTooltip:ko.observable(!1)}},a.hoverSubsOn=function(){a.tooltips.subs.showTooltip(!0)},a.hoverSubsOff=function(){a.tooltips.subs.showTooltip(!1)},a.hoverChallengesOn=function(){a.tooltips.challenges.showTooltip(!0)},a.hoverChallengesOff=function(){a.tooltips.challenges.showTooltip(!1)}},BoredPanda.AdvertiseController=function(){var a=this;a.name=ko.observable(""),a.surname=ko.observable(""),a.position=ko.observable(""),a.email=ko.observable(""),a.phone=ko.observable(""),a.company=ko.observable(""),a.industry=ko.observable(""),a.budget=ko.observable(""),a.country=ko.observable(""),a.description=ko.observable(""),a.loading=ko.observable(!1),a.successMessage=ko.observable(!1),a.errorMessage=ko.observable(""),a.error=ko.observable(!1),a.errorSend=ko.observable(!1),a.submit=function(){a.successMessage(!1),a.errorSend(!1),a.error(!1);var b=$.extend({},this);delete b.loading,delete b.successMessage,delete b.errorSend,delete b.error,delete b.errorMessage,delete b.submit;for(var c in b)if(""===b[c]())return a.error(!0),void a.errorMessage("Please fill all fields!");if(b.description().length<50)return a.error(!0),void a.errorMessage("Description must be at least 50 characters length");var d={action:"advertise_send_data",data:ko.toJSON(b)};a.loading(!0);var e=$.ajax({type:"POST",url:ajax_object.ajax_url,data:d,dataType:"json"});e.done(function(b){a.loading(!1),b.success===!0?a.successMessage(!0):(a.error(!0),a.errorMessage("Error sending email. Please try again."))})}},BoredPanda.Advertise={init:function(){var a=$("body.page-template-advertise section.contact");a.length>0&&(BoredPanda.advertise=new BoredPanda.AdvertiseController,ko.applyBindings(BoredPanda.advertise,a.get(0)))}},BoredPanda.Shares={init:function(){this.initShares(),this.mobileAdditionalShares(),this.mobileEmailShare(),this.youtubeSubscribe()},initShares:function(){$(".twitter-post-share").each(function(){$(this).click(function(){var a=$(this).data("share-url");window.open("https://www.twitter.com/share?url="+encodeURIComponent(a?a:BoredPanda.generateShareablePermalink())+"&via=boredpanda&text="+encodeURIComponent(document.title),"twitter-share-dialog","width=626,height=273")})}),$(".pinterest-post-share").each(function(){$(this).click(function(){var a=$(this).data("share-url");window.open("https://www.pinterest.com/pin/create/button/?url="+encodeURIComponent(a?a:BoredPanda.generateShareablePermalink())+"&media="+encodeURIComponent($('meta[property="og:image"]').attr("content"))+"&description="+encodeURIComponent(document.title),"pintrest-pin-dialog","width=750,height=328")})}),$(".tumblr-post-share").each(function(){var a=$(this).data("share-url");$(this).click(function(){window.open("http://tumblr.com/widgets/share/tool?posttype=photo&canonicalUrl="+encodeURIComponent(a?a:BoredPanda.generateShareablePermalink())+"&content="+encodeURIComponent($('meta[property="og:image"]').attr("content"))+"&title="+encodeURIComponent(document.title),"tumblr-share-dialog","width=540,height=600")})}),$(".reddit-post-share").each(function(){var a=$(this).data("share-url");$(this).click(function(){window.open("http://reddit.com/submit?url="+encodeURIComponent(a?a:BoredPanda.generateShareablePermalink())+"&title="+encodeURIComponent(document.title),"reddit-share-dialog","width=540,height=600")})}),$(".google-post-share").each(function(){var a=$(this).data("share-url");$(this).click(function(){window.open("https://plus.google.com/share?url="+encodeURIComponent(a?a:BoredPanda.generateShareablePermalink())+"&title="+encodeURIComponent(document.title),"google-share-dialog","width=540,height=600")})}),$(".post-shares-footer .email-footer-share").click(function(){var a=$(this).parent().find(".email-share-modal");a.show()})},mobileAdditionalShares:function(){$(".post-shares-footer.mobile .more-shares").click(function(){var a=$(".post-shares-footer.mobile .additional-shares");$("body").addClass("additional-shares-open"),a.show()}),$(".post-shares-footer.mobile .additional-shares .close").click(function(){$("body").removeClass("additional-shares-open"),$(".post-shares-footer.mobile .additional-shares").hide()}),$(".post-shares-footer.mobile .additional-shares").click(function(a){a.target===this&&($("body").removeClass("additional-shares-open"),$(".post-shares-footer.mobile .additional-shares").hide())})},mobileEmailShare:function(){$(".post-shares-footer.mobile .email-footer-share").click(function(){$(".post-shares-footer.mobile .shares-newsletter-sign-up").show()}),$(".post-shares-footer.mobile .shares-newsletter-sign-up .sign-up").click(function(){var a=$(this).parent().find("input.email").val();if(a){var b={action:"email_share_subscribe_newsletter",email:a},c=$.ajax({type:"POST",url:ajax_object.ajax_url,data:b,dataType:"json"});c.done(function(){var a=$(".post-shares-footer.mobile .shares-newsletter-sign-up");a.html('<span class="title">Subscribed!</span>'),setTimeout(function(){a.remove()},2e3)})}})},youtubeSubscribe:function(){$(".youtube-subscribe-button").click(function(){var a=$(this).data("channelid");window.open("https://www.youtube.com/channel/"+a+"?sub_confirmation=1","youtube-subscribe-dialog","width=540,height=600")})}},$(document).ready(function(a){a("#read-more-inside-post").on("click",function(b){b.preventDefault(),a(this).hide(),a(".hiddenPostText").removeClass("hiddenPostText"),a("#content img").each(function(){var b=a(this).offset(),c=a.trim(a(this).attr("src")),d=document.getElementById(c),e=a(d);e.offset({top:b.top,left:b.left})})}),a(".facebook-shareable-url-for-staff").on("click",function(){a(this).select()}),a(window).on("beforeunload",function(){if(-1!==document.URL.indexOf("scrolltop")){var b=BoredPanda.Utils.getParameterByName("scrolltop");a(window).scrollTop(b)}}),a(".ml-subscribe-form-2341867 .ml-block-success").click(function(){a(this).parent().find(".newsletter-subscribe-post-bottom").show(),a(this).parent().find(".newsletter-spinner").hide(),a(this).parent().find(".error").hide(),a(this).parent().find(".email").removeClass("invalid-email")}),a(".ml-subscribe-form-2341867.newsletter-form .show-form").click(function(){a(this).closest("form").find(".input-group").show()}),BoredPanda.init()}),BoredPanda.ResponsiveImagePlaceholders.init()}(),function(){"use strict";window.BoredPanda=window.BoredPanda||{},BoredPanda.FooterControl={init:function(){$(document).width()>979||1===$(".single-image-template").length||(this.state={currentPost:null,activeFooter:null},this.isDebugMode=!1,this.update())},update:function(){this.bindInView(),BoredPanda.SocialIcons.genericSocialIcons()},bindInView:function(){var a=this;$("article.post .post-header, article.post .entry, article.post .shareable-image-block:last").bind("inview",function(b,c,d,e){if(a.debug("article inView: "+c+" "+d+" "+e),c){var f=$(this).closest("article.post").attr("data-post-name");void 0!==f&&(a.onPostChange(f,a.state.currentPost),a.onSectionChange("content"))}}),$(".related-posts").bind("inview",function(b,c,d,e){a.debug("related inView: "+c+" "+d+" "+e),a.debug("isVisible: "+$(this).is(":visible")),c&&$(this).is(":visible")&&a.onSectionChange("other")}),$(".post-recommendations").bind("inview",function(b,c,d,e){a.debug("recommendations inView: "+c+" "+d+" "+e),a.debug("isVisible: "+$(this).is(":visible")),c&&$(this).is(":visible")&&a.onSectionChange("other")}),$(".post-comments").bind("inview",function(b,c,d,e){a.debug("post comments inView: "+c+" "+d+" "+e),a.debug("isVisible: "+$(this).is(":visible")),c&&$(this).is(":visible")&&a.onSectionChange("other")}),$(".trending-posts").bind("inview",function(b,c,d,e){a.debug("trending inView: "+c+" "+d+" "+e),a.debug("isVisible: "+$(this).is(":visible")),c&&$(this).is(":visible")&&a.onSectionChange("other")})},showSelectedFooter:function(a,b){if(!("share"!==b&&"newsletter"!==b||$.cookie("utm_campaign"))){var c=".socialbar";"newsletter"===b&&(c=".newsletterbar"),this.debug("Changing footer: "+a+" "+b),this.state.activeFooter=b,"newsletter"===b&&(this.debug('article[data-post-name="'+a+'"] .fixed-bottom-overlay'+c),$('article[data-post-name="'+a+'"] .fixed-bottom-overlay'+c).addClass("headroom--pinned"),$('article[data-post-name="'+a+'"] .fixed-bottom-overlay').css("visibility","hidden"),$('article[data-post-name="'+a+'"] .fixed-bottom-overlay'+c).css("visibility","visible")),"share"===b&&($(".fixed-bottom-overlay.headroom--pinned").removeClass("headroom--pinned"),$(".fixed-bottom-overlay").css("visibility","hidden"),$('article[data-post-name="'+a+'"] .fixed-bottom-overlay.socialbar').css("visibility","visible"))}},onPostChange:function(a,b){a!==b&&(this.debug("Post change: "+b+" => "+a),this.state.currentPost=a,this.showSelectedFooter(a,"share"),BoredPanda.Tracking.trackStickyFooter(a))},onSectionChange:function(a){if("content"===a||"other"===a){var b=this.state.currentPost,c=this.state.activeFooter;"content"===a&&"share"!==c&&this.showSelectedFooter(b,"share"),"content"!==a&&"share"===c&&this.showSelectedFooter(b,"newsletter")}},debug:function(a){this.isDebugMode&&console.log(a)}},$(document).ready(function(){BoredPanda.FooterControl.init()})}(),function(){"use strict";window.BoredPanda=window.BoredPanda||{},BoredPanda.Login={init:function(){BoredPanda.Login.form=new BoredPanda.Login.Form,$("#auth-modal").length>0?ko.applyBindings(BoredPanda.Login.form,$("#auth-modal")[0]):$(".auth").length>0&&ko.applyBindings(BoredPanda.Login.form,$(".auth")[0]),$(".login-url").on("click",function(a){a.preventDefault(),a.stopPropagation(),BoredPanda.Login.form.show()})},afterLoginCallback:void 0,afterLoginCallFunction:void 0,afterLogin:function(){function a(){var a=BoredPanda.Utils.wpAjax({action:"newsletter_prompt_show",user_id:BoredPanda.Login.form.accountActivation.userId()||0});a.done(function(a){a.data&&a.data.show===!0&&BoredPanda.Login.form.prompNewsletter()?(BoredPanda.Login.form.signupForm.visible()||$("#newsletter-prompt .newsletter-choice").addClass("signin"),BoredPanda.Login.form.loginForm.visible(!1),BoredPanda.Login.form.signupForm.visible(!1),BoredPanda.Login.form.forgotForm.visible(!1),BoredPanda.Login.form.newsletterPrompt.visible(!0),BoredPanda.Login.form.buffering(!1),BoredPanda.Login.form.closeable(!1),BoredPanda.Login.form.closeToHomepage(!1)):b.afterNewsletter()}),a.fail(function(){b.afterNewsletter()})}var b=this;BoredPanda.Tracking.trackInviteeClicks("login"),BoredPanda.Login.form.buffering(!0),ga("send","event","auth","login"),-1!==document.URL.indexOf("add-new-post")?BoredPanda.Tracking.trackEvent("Add Post Login Form","Logged In","success"):BoredPanda.Tracking.trackEvent("Login form","Logged In","success"),BoredPanda.Config.isLoggedIn=!0,BoredPanda.Config.showSubmissionPopup=!1,"undefined"!=typeof BoredPanda.Config.loginFromAddPost&&BoredPanda.Config.loginFromAddPost===!0&&BoredPanda.Tracking.trackEvent("Add Post Form","Login Popup","click"),void 0!==b.afterLoginCallback?b.afterLoginCallback().always(a):a()},afterNewsletter:function(){var a,b;return BoredPanda.Login.form.accountActivation.userActive()===!1?void BoredPanda.Login.form.showAccountActivation():(a=""!==BoredPanda.Config.returnUrl?BoredPanda.Config.returnUrl:document.URL,b=-1!==document.URL.indexOf("auth")?a.slice(0,a.indexOf("?")):document.location.pathname,a.indexOf("add-new-post")>-1&&BoredPanda.Tracking.trackAddPostFormLoggedIn(),void 0!==BoredPanda.Login.afterLoginCallFunction?BoredPanda.Login.afterLoginCallFunction():void(a.indexOf("cid=")>-1?this.afterComment(a,b):a.indexOf("savevote")>-1?this.afterVote(b):a.indexOf("savecommentvote")>-1?this.afterCommentVote(b):a.indexOf("textsub")>-1?this.afterTextSubmission():a===document.URL||-1!==document.URL.indexOf("auth")?location.reload():window.location.replace(a)))},afterVote:function(a){var b=BoredPanda.Utils.getParameterByName("score",document.URL),c=BoredPanda.Utils.getParameterByName("post",document.URL);b=b||BoredPanda.Utils.getParameterByName("score",decodeURIComponent(document.URL)),c=c||BoredPanda.Utils.getParameterByName("post",decodeURIComponent(document.URL)),BoredPanda.Post.Votes.sendRequest(b,c).done(function(){BoredPanda.notice.setNotice("<p><i></i>Woohoo! Your vote has been saved!</p>"),window.history.pushState("object or string","Title",a),location.reload()})},afterCommentVote:function(a){var b=BoredPanda.Utils.getParameterByName("score",document.URL),c=BoredPanda.Utils.getParameterByName("comment",document.URL);b=b||BoredPanda.Utils.getParameterByName("score",decodeURIComponent(document.URL)),c=c||BoredPanda.Utils.getParameterByName("comment",decodeURIComponent(document.URL)),BoredPanda.Comment.Votes.sendRequest(b,c).done(function(){BoredPanda.notice.setNotice("<p><i></i>Woohoo! Your comment vote has been saved! </p>"),window.history.pushState("object or string","Title",a+"?voteSaved"),location.reload()})},afterTextSubmission:function(){var a=new BoredPanda.OpenList.AppendForm;a.publishTextSubmissionMobile(1).done(function(){BoredPanda.notice.setNotice("<p><i></i>Woohoo! Your submission has been published! </p>"),location.reload()})},afterComment:function(a,b){var c=BoredPanda.Utils.getParameterByName("cid",a),d={action:"change_comment_author",comment_id:c},e=BoredPanda.Utils.wpAjax(d);e.always(function(){BoredPanda.notice.setNotice("<p><i></i>Woohoo! Your comment has been saved! </p>"),window.history.pushState("object or string","Title",b+"?commentUpdated"),location.reload()})}},BoredPanda.Login.Form=function(){var a=this;a.buffering=ko.observable(!1),a.closeable=ko.observable(!0),a.closeToHomepage=ko.observable(!1),a.fieldErrors=ko.observable(!1),a.invalidEmail=ko.observable(!1),a.prompNewsletter=ko.observable(!0),a.showSocialLogin=ko.observable(!0),a.loginForm={title:ko.observable(BoredPanda.Translate.Signup.title),visible:ko.observable(!0),remember:ko.observable(!0),error:ko.observable(""),email:ko.observable(""),password:ko.observable("")},a.signupForm={visible:ko.observable(!1),error:ko.observable(""),fieldErrors:ko.observable(!1),email:ko.observable(""),fullName:ko.observable(""),password:ko.observable("")},a.forgotForm={visible:ko.observable(!1),error:ko.observable(""),errorCssClass:ko.observable(""),fieldErrors:ko.observable(!1),email:ko.observable("")},a.registerEmail={visible:ko.observable(!1),error:ko.observable(""),errorCssClass:ko.observable(""),fieldErrors:ko.observable(!1),email:ko.observable(""),userId:ko.observable(0)},a.accountActivation={visible:ko.observable(!1),error:ko.observable(""),errorCssClass:ko.observable(""),userId:ko.observable(0),userActive:ko.observable(!0)},a.newsletterPrompt=new BoredPanda.Newsletter,a.showLogin=function(){a.loginForm.visible(!0),a.signupForm.visible(!1),a.forgotForm.visible(!1),a.registerEmail.visible(!1),a.accountActivation.visible(!1),a.showSocialLogin(!0),a.fieldErrors(!1)},a.showSignup=function(){a.loginForm.visible(!1),a.signupForm.visible(!0),a.forgotForm.visible(!1),a.registerEmail.visible(!1),a.accountActivation.visible(!1),a.showSocialLogin(!0),a.fieldErrors(!1)},a.showForgot=function(){a.loginForm.visible(!1),a.signupForm.visible(!1),a.forgotForm.visible(!0),a.registerEmail.visible(!1),a.accountActivation.visible(!1),a.showSocialLogin(!0),a.fieldErrors(!1)},a.showRegisterEmail=function(){a.loginForm.visible(!1),a.signupForm.visible(!1),a.forgotForm.visible(!1),a.registerEmail.visible(!0),a.accountActivation.visible(!1),a.showSocialLogin(!0),a.closeable(!1),a.closeToHomepage(!0),a.fieldErrors(!1)},a.showAccountActivation=function(){a.loginForm.visible(!1),a.signupForm.visible(!1),a.forgotForm.visible(!1),a.registerEmail.visible(!1),a.newsletterPrompt.visible(!1),a.accountActivation.visible(!0),a.showSocialLogin(!1),a.buffering(!1),a.closeable(!0),a.closeToHomepage(!1),a.fieldErrors(!1)},a.accountActivated=function(){a.buffering(!0);var b={action:"contribution_is_account_active",user_id:a.accountActivation.userId()},c=$.ajax({type:"POST",url:ajax_object.ajax_url,data:b,dataType:"json"});c.done(function(b){a.buffering(!1),"0"===b.success?(a.accountActivation.error(BoredPanda.Translate.Signup.account_not_active),a.accountActivation.errorCssClass("text-danger"),a.accountActivation.userActive(!1)):a.accountActivation.userActive(!0),BoredPanda.Login.afterNewsletter()})},a.resendActivationMail=function(){a.buffering(!0);var b={action:"contribution_resend_mail",user_id:a.accountActivation.userId(),redirect:document.URL},c=$.ajax({type:"POST",url:ajax_object.ajax_url,data:b,dataType:"json"});c.done(function(b){a.buffering(!1),"1"===b.success?(a.accountActivation.error(BoredPanda.Translate.Signup.message_resent),a.accountActivation.errorCssClass("text-success text-success-new")):(a.accountActivation.error(BoredPanda.Translate.Signup.error_occurred),a.accountActivation.errorCssClass("text-danger"))})},a.show=function(b,c,d,e){if(BoredPanda.Tracking.trackEvent("Login form","open","impression"),$(document).width()<768){var f="/"+location.hostname+"/auth";return f+=void 0!==b?"?returnurl="+encodeURIComponent(b):""!==BoredPanda.Config.returnUrl?"?returnurl="+encodeURIComponent(BoredPanda.Config.returnUrl):"?returnurl="+encodeURIComponent(document.URL),d&&(f+="&title="+encodeURIComponent(d)),void(window.location.href=f)}BoredPanda.Login.afterLoginCallback=c,d&&a.loginForm.title(d),e&&(BoredPanda.Login.afterLoginCallFunction=e),$("#auth-modal").modal()},$("#auth-modal").on("hide.bs.modal",function(){return a.closeable()}),a.isEmailValid=function(a){var b=/^([\w-]+(?:\.[\w-]+)*)@((?:[\w-]+\.)*\w[\w-]{0,66})\.([a-z]{2,6}(?:\.[a-z]{2})?)$/i;return b.test(a)},a.login=function(){if(a.loginForm.email().length<1||a.loginForm.password().length<1)return void a.fieldErrors(!0);a.fieldErrors(!1);var b={action:"contribution_login",user_login:a.loginForm.email(),user_password:a.loginForm.password(),remember_me:a.loginForm.remember()};a.buffering(!0);var c=$.ajax({type:"POST",url:ajax_object.ajax_url,data:b,dataType:"json"});c.done(function(b){a.buffering(!1),"0"===b.success?a.loginForm.error("Incorrect email or password"):"-1"===b.success?(BoredPanda.Login.form.accountActivation.userActive(!1),BoredPanda.Login.form.accountActivation.userId(b.user_id),BoredPanda.Login.afterLogin()):"-2"===b.success?a.loginForm.error("Your user is blocked because of too many invalid attempts to sign in."):BoredPanda.Login.afterLogin()})},a.fbLogin=function(){a.buffering(!0),FB.login(function(b){b.authResponse&&FB.api("/me","get",{fields:"email, first_name, last_name"},function(c){var d={action:"social_signup_callback",ID:c.id,AccessToken:b.authResponse.accessToken,Email:c.email,Username:c.username,FirstName:c.first_name,LastName:c.last_name,PictureURL:"http://graph.facebook.com/"+c.id+"/picture?type=large",ServiceName:"facebook"};if("undefined"==typeof c.id){var e={action:"log_social_login",loginResponse:b,response:c};$.ajax({type:"POST",url:ajax_object.ajax_url,data:e,dataType:"json"})}var f=$.ajax({type:"POST",url:ajax_object.ajax_url,data:d,dataType:"json"});f.done(function(b){a.buffering(!1);var c=b.enter_email||0;c?(a.registerEmail.userId(b.user_id),a.showRegisterEmail()):BoredPanda.Login.afterLogin()})})},{scope:"public_profile,email"})},a.googleLogin=function(){a.buffering(!0)},a.signup=function(){if(a.invalidEmail(!1),a.fieldErrors(!1),a.signupForm.error(""),!a.isEmailValid(a.signupForm.email())||a.signupForm.fullName().length<1||!BoredPanda.Utils.isPasswordSecure(a.signupForm.password()))return a.isEmailValid(a.signupForm.email())||a.invalidEmail(!0),BoredPanda.Utils.isPasswordSecure(a.signupForm.password())||a.signupForm.error(BoredPanda.Translate.Settings.password_strength_error),void a.fieldErrors(!0);var b={action:"contribution_signup",user_email:a.signupForm.email(),user_full_name:a.signupForm.fullName(),user_pass:a.signupForm.password(),redirect:document.URL};a.buffering(!0);var c=$.ajax({type:"POST",url:ajax_object.ajax_url,data:b,dataType:"json"});c.done(function(b){a.buffering(!1),"-2"===b.success?a.signupForm.error("Ooops! This email address has already been taken."):"0"===b.success?a.signupForm.error("Ooops! Something went wrong on our side. Please try again."):"1"===b.success?BoredPanda.Login.afterLogin():"-1"===b.success&&(BoredPanda.Login.form.accountActivation.userActive(!1),BoredPanda.Login.form.accountActivation.userId(b.user_id),BoredPanda.Login.afterLogin())})},a.forgot=function(){if(a.forgotForm.email().length<1)return void a.fieldErrors(!0);var b=/^([\w-]+(?:\.[\w-]+)*)@((?:[\w-]+\.)*\w[\w-]{0,66})\.([a-z]{2,6}(?:\.[a-z]{2})?)$/i;if(!b.test(a.forgotForm.email()))return a.invalidEmail(!0),void a.fieldErrors(!0);a.invalidEmail(!1),a.fieldErrors(!1);var c={action:"contribution_forgot_password",loginname:a.forgotForm.email()};a.buffering(!0);var d=$.ajax({type:"POST",url:ajax_object.ajax_url,data:c,dataType:"json"});d.done(function(b){a.buffering(!1),"1"===b.success?(a.forgotForm.error("A password recovery link has been sent to your inbox."),a.forgotForm.errorCssClass("text-success text-success-new")):"-1"===b.success?(a.forgotForm.error("Ooops! It looks like you entered an invalid email address."),a.forgotForm.errorCssClass("text-danger")):(a.forgotForm.error("Ooops! Something went wrong on our side. Please try again."),a.forgotForm.errorCssClass("text-danger"))})},a.registerEmailSubmit=function(){if(a.registerEmail.email().length<1)return void a.fieldErrors(!0);var b=/^([\w-]+(?:\.[\w-]+)*)@((?:[\w-]+\.)*\w[\w-]{0,66})\.([a-z]{2,6}(?:\.[a-z]{2})?)$/i;if(!b.test(a.registerEmail.email()))return a.invalidEmail(!0),void a.fieldErrors(!0);a.invalidEmail(!1),a.fieldErrors(!1);var c={action:"contribution_update_email",email:a.registerEmail.email(),user_id:a.registerEmail.userId()};a.buffering(!0);var d=$.ajax({type:"POST",url:ajax_object.ajax_url,data:c,dataType:"json"});d.done(function(){BoredPanda.Login.afterNewsletter()})},-1===document.URL.indexOf("add-new-post")||BoredPanda.Config.isLoggedIn||(a.closeable(!1),a.closeToHomepage(!1),a.prompNewsletter(!1))},window.googleInitCallback=function(){gapi.load("client:auth2",{callback:function(){gapi.client.init({clientId:BoredPanda.Config.googleClientId,scope:"https://www.googleapis.com/auth/plus.login"}).then(function(a){},function(a){BoredPanda.Login.form.buffering(!1)})},onerror:function(){BoredPanda.Login.form.buffering(!1)}}),$(".auth .google-login").click(function(){gapi.auth2.getAuthInstance().signIn().then(function(a){var b=gapi.auth2.getAuthInstance().currentUser.get().getBasicProfile();BoredPanda.Login.Google.loadProfileCallback(b)},function(a){console.log(a),BoredPanda.Login.form.buffering(!1)})})},window.checkGAPI=function(){"undefined"!=typeof gapi?window.googleInitCallback():setTimeout(function(){window.checkGAPI()},500)},BoredPanda.Login.Google={loadProfileCallback:function(a){var b=a.getImageUrl();b=b.replace("/s96-","/s200-");var c={action:"social_signup_callback",AccessToken:gapi.auth2.getAuthInstance().currentUser.get().getAuthResponse().access_token,ID:a.getId(),Email:a.getEmail(),DisplayName:a.getName(),PictureURL:b,ServiceName:"google"},d=$.ajax({type:"POST",url:ajax_object.ajax_url,data:c,dataType:"json"});d.done(function(){BoredPanda.Login.afterLogin()})}},$(document).ready(function(){BoredPanda.Config.isLoggedIn||(BoredPanda.Login.init(),window.checkGAPI())})}(),function(){"use strict";window.BoredPanda=window.BoredPanda||{},BoredPanda.Comment={uploader:[],init:function(){this.ui(),BoredPanda.Comment.Votes.init(),this.bindCommentRepliesShowing(),this.bindHiddenCommentsShowing(),this.bindCommentInputFocus(),this.bindMoreCommentsRemove(),this.initCommentImages(),BoredPanda.Config.isStaffMember&&this.bindCommentMarkSpam()},bindCommentMarkSpam:function(){BoredPanda.Config.isStaffMember&&$(document).on("click",".mark-comment-spam",function(){var a=confirm("Are you sure?");if(a===!0){var b=$(this),c=b.attr("data-id"),d={action:"mark_comment_spam",comment_id:c},e=BoredPanda.Utils.wpAjax(d);e.done(function(){b.parent().parent().parent().remove()})}})},bindCommentInputFocus:function(){$(".comment-text").focus(function(){$(this).parent().parent().find(".post-comment").addClass("active")}),$(".comment-text").focusout(function(){0===$(this).val().length&&$(this).parent().parent().find(".post-comment").removeClass("active")})},bindMoreCommentsRemove:function(){$(".load-more-replies").each(function(){$(this).parent().parent().parent().find(".comment").length<2&&$(this).remove()})},bindCommentRepliesShowing:function(){$(document).on("click",".load-more-replies",function(){var a=$(this).attr("data-comment-id");$(".comment[data-comment-id="+a+"] .comment").each(function(){$(this).show()}),$(this).remove()})},bindHiddenCommentsShowing:function(){$(document).on("click",".show-hidden-comment",function(){$(this).parent().parent().find("p").show(),$(this).parent().parent().find(".links").show(),$(this).parent().parent().find(".hidden-comment").remove()})},ui:function(){var a=this,b=$(".post");b.delegate(".comment-text","focus",function(){var a=$(this).closest(".comment-add-block");a.find(".comment-text-block").addClass("expanded"),a.find(".post-comment").show()}),b.delegate(".comment-reply","click",function(b){b.preventDefault(),$(this).parent().parent().find(".load-more-replies").click();var c=$(this).parents(".comment-feature");c.find(".comment-container .comment-add-block").remove();var d=$(this).parents(".comment").first(),e=$(".comment-add-block").first().clone(),f=d.find(".child-comments").first();e.find(".comment-text-block").addClass("expanded"),e.find(".comment-text-block").addClass("reply-comment-block"),e.find(".comment-text").val(""),f.length>0?e.insertBefore(f):e.appendTo(d),a.bindCommentInputFocus(),e.find(".comment-image").remove(),e.find(".comment-upload-pic").attr("id",""),BoredPanda.Config.isTabletWidth||e.find(".comment-upload-pic").show(),e.find(".upload-comment-image").hide(),a.initImageUploader(e.find(".comment-upload-pic").get(0))}),b.delegate(".post-comment","click",function(b){b.preventDefault();var c=$(this).parents(".comment-add-block").first(),d=$(this).closest(".comment-feature"),e=!1,f=c.find(".comment-image"),g="";f.length>0&&(g=f.find(".comment-background-image").attr("data-image"));var h=!1;if(0===c.find(".comment-text").val().length&&0===g.length?(h=!0,c.find(".comment-text").addClass("elementErrorMode")):c.find(".comment-text").removeClass("elementErrorMode"),h!==!0){var i={action:"add_comment",post_id:d.attr("data-post-id"),comment_text:c.find(".comment-text").val(),comment_image:g,depth:c.parent().hasClass("depth-1")?2:c.parent().hasClass("depth-2")?3:1},j=$(this).parents(".comment");j.length>0&&(i.parent_id=j.first().attr("data-comment-id"),e=!0),!e&&$(this).closest(".open-list-comments").length>0&&BoredPanda.Tracking.trackOpenListCommentSubmit(),c.find(".comment-text").val(""),c.find(".post-comment").css({background:"",color:""}),e?a.showLoadingBarAt(c):d.find(".posting-comment-spinner").show();var k=$.ajax({type:"POST",url:ajax_object.ajax_url,data:i,dataType:"json"});k.done(function(b){if(e?(d.removeClass("in-open-list"),a.hideLoadingBarAt(c.parent())):d.find(".posting-comment-spinner").hide(),!BoredPanda.Config.isLoggedIn){var f="";return 1===b.comment_in_cookie&&(f=window.location.pathname+"?cid="+b.comment_in_cookie,window.history.pushState("object or string","Title",f)),void BoredPanda.Login.form.show(f,void 0,"Please log in to comment")}if(e){var g,h=c.parent().find(".child-comments");h.length>0?(g=$(b.comment_html),g.prependTo(h)):(g=$('<section class="child-comments comments-list">'+b.comment_html+"</section>"),g.insertBefore(c)),c.hide()}else d.find(".comment-container").prepend(b.comment_html);$(".remove-comment-image").trigger("click")}),k.fail(function(a){"undefined"!=typeof a.responseText&&(c.append('<div class="comment-error">'+a.responseText+"</div>"),setTimeout(function(){$(".comment-error").remove()},5e3)),d.find(".posting-comment-spinner").hide()})}}),b.delegate(".expand-comments","click",function(b){var c=$(this);c.parent().find(".load-more-spinner").show(),c.hide(),b.preventDefault();var d=$(this).closest(".comment-feature"),e=parseInt(d.attr("data-start"),10),f=parseInt(d.attr("data-comments-to-load"),10);d.attr("data-start",e+f);var g="false";"true"===d.attr("data-open-list")&&(g="true");var h={action:"get_post_comments",post_id:d.attr("data-post-id"),start:e,limit:f,openList:g},i=$.ajax({type:"POST",url:ajax_object.ajax_url,data:h,dataType:"json"});i.done(function(b){d.removeClass("in-open-list"),c.hide();var g=parseInt(b.listed_count,10);f>g?c.hide():(c.find("span").html("View more comments"),c.show()),b.comment_html.length&&b.comment_html.length>0?(0===e&&d.find(".comment-container").html(""),d.find(".comment-container").append(b.comment_html)):c.hide(),$(".load-more-spinner").hide(),d.find(".view-more-replies").hide(),a.bindMoreCommentsRemove(),d.addClass("show-images")})}),b.delegate(".view-more-replies","click",function(b){var c=$(this);c.parent().find(".load-more-spinner").show(),c.hide(),b.preventDefault();var d=$(this).closest(".comment-feature"),e=parseInt(d.attr("data-start"),10),f=parseInt(d.attr("data-comments-to-load"),10);d.attr("data-start",e+f);var g={action:"get_post_comments",post_id:d.attr("data-post-id"),start:e,limit:f},h=$.ajax({type:"POST",url:ajax_object.ajax_url,data:g,dataType:"json"});h.done(function(b){d.removeClass("in-open-list"),c.hide(),b.comment_html.length&&b.comment_html.length>0&&(0===e&&d.find(".comment-container").html(""),d.find(".comment-container").append($(b.comment_html)[0]),d.find(".comment-container .depth-2").show()),$(".load-more-spinner").hide(),a.bindMoreCommentsRemove(),d.addClass("show-images")})}),b.delegate(".comment-text-block","keyup",function(a){var b=$(a.target),c=$(b).closest(".comment-submit-block").find(".post-comment");if(b.val()){var d=b.innerHeight(),e=Math.min(b.prop("scrollHeight"),68);d!==e&&(b.innerHeight(e+"px"),c.height(e+2+"px"),c.css("line-height",e+2+"px"))}else b.removeAttr("style"),c.removeAttr("style")})},showLoadingBarAt:function(a){var b=$(".comment-container-loading").first();b.clone().appendTo($(a)),$(a).find(".comment-container-loading").show()},hideLoadingBarAt:function(a){$(a).find(".comment-container-loading").hide()},initCommentImages:function(){var a=this;a.initCommentImagesPopup(),BoredPanda.Config.isTabletWidth||$(".comment-upload-pic").each(function(b,c){var d=c;a.initImageUploader(d)})},initCommentImagesPopup:function(){$(document).on("click",".comment-image-link, .view-comment-image-link",function(a){if($(window).width()>979){a.preventDefault();var b=$(this).attr("href");
BoredPanda.Comment.ImageModal.showImageModal(b)}}),$(document).on("click","#comment-image-modal .close-icon, #comment-image-modal",function(){BoredPanda.Comment.ImageModal.hideImageModal()}),$(document).on("click","#comment-image-modal img",function(a){a.stopPropagation()})},destroyCommentImages:function(){var a,b=this.uploader.length;for(a=0;b>a;a++)this.uploader[a].uploader.destroy()},initImageUploader:function(a){var b=this,c={selector:a};b.uploader.push(new BoredPanda.Comment.ImageUploader(c))}},BoredPanda.Comment.ImageUploader=function(a){var b=this;b.selector=$(a.selector),b.selector.attr("id",BoredPanda.Utils.generateRandomString(10)),b.commentBlock=b.selector.parent(),b.spinner=b.commentBlock.find(".spinner.upload-comment-image"),b.getImageHtml=function(a){var b=BoredPanda.Utils.annotatePath(a.image_url,"__605");return'<div class="comment-image"><div class="remove-comment-image"><i></i></div><div class="comment-background-image" style="background-image: url('+b+');" data-image="'+a.image_url+'"></div></div>'},b.showUploadError=function(){var a=b.selector.parents(".comment-add-block").first();a.append('<div class="comment-error">Something went wrong... Please try again!</div>'),setTimeout(function(){$(".comment-error").remove()},5e3)};var c=function(){b.uploader=new plupload.Uploader({runtimes:"html5,html4",browse_button:b.selector.attr("id"),url:ajax_object.ajax_url,max_file_size:"4mb",multipart_params:{action:"contribution_submit_upload",title:""},unique_names:!1,multi_selection:!1,init:{FilesAdded:function(a){b.selector.hide(),b.spinner.show(),a.start()}},filters:[{title:"Image files",extensions:"jpg,jpeg,gif,png"}]}),b.uploader.bind("FileUploaded",function(a,c,d){var e=$.parseJSON(d.response);b.spinner.hide(),void 0!==e.error?(b.showUploadError(),b.selector.show()):b.commentBlock.append(b.getImageHtml(e))}),b.uploader.bind("Error",function(){b.showUploadError(),b.selector.show(),b.spinner.hide()}),b.uploader.init(),$(document).on("click",".remove-comment-image",function(){$(this).parent().parent().find(".comment-image").remove(),b.selector.show()})};c()},BoredPanda.Comment.Votes={init:function(){this.registerVotes()},registerVotes:function(){var a=this;$(document).on("click",".vote-panel.vote-comment .btn",function(){var b=$(this),c=$(b.closest(".vote").siblings(".vote").find(".btn")),d=b.hasClass("btn-up")?1:-1,e=b.parents(".comment").first(),f=e.attr("data-comment-id"),g=d;if(!BoredPanda.Config.isLoggedIn){var h=window.location.pathname+"?afterlogin=savecommentvote&comment="+f+"&score="+d;return window.history.pushState("Vote","Vote",h),void BoredPanda.Login.form.show(h,void 0,"Please log in to vote")}BoredPanda.Config.isSuperVoter||(b.hasClass("active")?g=-d:c.hasClass("active")&&(g*=2,c.removeClass("active")),b.toggleClass("active")),a.updatePoints(b.closest(".vote").siblings(".points"),g),a.sendRequest(d,f)})},updatePoints:function(a,b){var c=$(a).data("points")+b;$(a).data("points",c),1===c||-1===c?$(a).html(c+" <span>point</span>"):$(a).html(c+" <span>points</span>")},sendRequest:function(a,b){var c={action:"vote_for_comment",score:a,comment_id:b,post_id:BoredPanda.Config.postId};return BoredPanda.Utils.wpAjax(c)}},BoredPanda.Comment.ImageModal={showImageModal:function(a){function b(){var a=$("#comment-image-modal img").width(),c=$("#comment-image-modal img").height();return 0===a||0===c?void setTimeout(b,100):($("#comment-image-modal .comment-image-full-size").css("width",a+"px"),$("#comment-image-modal .comment-image-full-size").css("margin-top",c/-2+"px"),$("#comment-image-modal .comment-image-full-size img").css("visibility","visible"),void $("#comment-image-modal .close-icon").show())}var c=$(window).height()-100;$("body").addClass("no-scroll"),$("#comment-image-modal img").attr("src",a),$("#comment-image-modal img").css("max-height",c+"px"),$("#comment-image-modal").show(),b()},hideImageModal:function(){$("body").removeClass("no-scroll"),$("#comment-image-modal").hide(),$("#comment-image-modal img").attr("src",""),$("#comment-image-modal img").attr("style",""),$("#comment-image-modal .comment-image-full-size").attr("style","")}},$(document).ready(function(){BoredPanda.Config.postId>0&&BoredPanda.Comment.init()})}(),function(){"use strict";window.BoredPanda=window.BoredPanda||{},BoredPanda.AddPost={},BoredPanda.AddPost.Utils={},BoredPanda.AddPost.Utils.closestImageSize=function(a){return a=parseInt(a,10),650>a?605:a>=650&&780>=a?700:880},BoredPanda.AddPost.Utils.editImageModalAutofit=function(){var a,b,c,d=$(window).height(),e=d-100;return $(".edit-image-content .image-heading textarea").change(),$(".edit-image-content .image-description textarea").change(),$(".edit-image-modal").attr("style",""),$(".edit-image-modal .image-content").attr("style",""),$(".edit-image-modal .description-content").attr("style",""),$(".edit-image-content .image-description").attr("style",""),$(".edit-image-modal .image-content img").attr("style",""),$(window).width()<980?void $(".edit-image-modal .image-content").height($(".edit-image-modal .image-content img").height()):($(".edit-image-modal").height(e),$(".edit-image-modal .image-content").height(e),$(".edit-image-modal .description-content").height(e),$(".edit-image-content .image-description").css("min-height",e-($(".edit-image-content .image-heading").height()+40)-($(".edit-image-content .image-source").height()+30)-114+"px"),a=$(".edit-image-modal .image-content img").height(),b=$(".edit-image-modal .image-content img").width(),a>e&&(c=e/a,$(".edit-image-modal .image-content img").width(b*c),$(".edit-image-modal .image-content img").height(e)),$(".edit-image-modal .image-content img").css("margin-top",(e-$(".edit-image-modal .image-content img").height())/2+"px"),void $(".edit-image-content .image-heading textarea, .edit-image-content .image-description textarea").on("input",function(){$(window).width()<980||$(".edit-image-content .image-description").css("min-height",e-($(".edit-image-content .image-heading").height()+40)-($(".edit-image-content .image-source").height()+30)-114+"px")}))},BoredPanda.AddPost.CategoriesDropdown=function(a){var b=this;b.visible=ko.observable(!1),b.termId=BoredPanda.Config.isStaffMember?ko.observableArray([]):ko.observable(""),b.category=ko.observable(""),b.categories=ko.observableArray(a),b.show=function(){b.visible(!0)},b.hide=function(){b.visible(!1)},b.choose=function(a){if(BoredPanda.Config.isStaffMember){b.initCategorySelection(a);var c=[];b.termId([]);for(var d=0;d<b.categories().length;d++)b.categories()[d].term_id===a.term_id&&b.categories()[d].selected(!b.categories()[d].selected()),b.categories()[d].selected()&&(b.termId().push(b.categories()[d].term_id),c.push(b.categories()[d].name));b.category(c.join())}else b.hide(),b.termId(a.term_id),b.category(a.name),BoredPanda.Tracking.trackAddPostCategories()},b.initCategorySelection=function(a){if($.isArray(a.term_id))for(var c=0;c<b.categories().length;c++)$.inArray(b.categories()[c].term_id,a.term_id)>-1&&b.categories()[c].selected(!0)},b.getSelectedCategory=function(){return{termId:b.termId(),name:b.category()}},$(document).on("click",function(){b.hide()})},BoredPanda.AddPost.ImageUploader=function(a){var b=this;b.loading=a.loader,b.errorMessage=a.error,b.runtime=ko.observable(""),b.dropEvent=ko.observable(""),b.photoCount=0,b.photosUploaded=0,b.errorShown=!0,b.gaLogging="Browse";var c=function(a){if(b.uploader=new plupload.Uploader({runtimes:"html5,html4",browse_button:a.browse_button,drop_element:a.drop_element,url:ajax_object.ajax_url,max_file_size:"20mb",multipart_params:{action:"contribution_submit_upload",title:"none"},unique_names:!1,init:{FilesAdded:function(c){b.errorShown?b.errorMessage(""):b.errorMessage(BoredPanda.Translate.AddPost.some_images_failed_to_upload),b.loading(!0),b.photoCount=c.files.length,b.photosUploaded=0,c.settings.multipart_params.title=a.title(),c.start(),BoredPanda.Config.isStaffMember||(ga("send","event","Add Post Form","Image Upload",b.gaLogging+(b.changeBrowseButton===!0?" First Step":" Second Step")),b.gaLogging="Browse")}},filters:[{title:"Image files",extensions:"jpg,jpeg,gif,png"}]}),b.uploader.bind("FileUploaded",function(c,d,e){var f=$.parseJSON(e.response);f.original_width<600&&-1===f.image_url.indexOf(".gif")?(1===b.photoCount||a.singleImageUploader?b.errorMessage(BoredPanda.Translate.AddPost.uploader_image_too_small):b.errorMessage(BoredPanda.Translate.AddPost.some_images_failed_to_upload_image_width),BoredPanda.Tracking.trackImageTooSmallError()):void 0!==f.error?(BoredPanda.Config.isStaffMember&&console.log("Upload error: "+f.error),b.errorMessage(BoredPanda.Translate.AddPost.uploader_strange_things_happened)):(a.fileUploaded(f),BoredPanda.AddPost.LeavePopup.change(),b.photosUploaded++)}),b.uploader.bind("UploadComplete",function(){b.loading(!1),BoredPanda.Config.isStaffMember||BoredPanda.Tracking.trackAddPostImage(),b.errorShown=!0}),b.uploader.bind("Error",function(a,c){b.loading(!1);var d="";"File size error."===c.message?d=BoredPanda.Translate.AddPost.uploader_image_too_large:"File extension error."===c.message&&(d=BoredPanda.Translate.AddPost.uploader_not_allowed_image_format),b.errorMessage(d),b.errorShown=!1}),b.uploader.init(),b.runtime(b.uploader.runtime),"html5"===b.runtime()){var c=0;$("#"+a.drop_element).bind({dragenter:function(){c++,b.dropEvent("dragenter"),b.gaLogging="Drag"},dragleave:function(){c--,0===c&&(b.dropEvent("dragleave"),b.gaLogging="Drag")},drop:function(){b.dropEvent("drop")}})}};c(a)},BoredPanda.AddPost.ImageViewModel=function(){var a=this;a.headline=ko.observable(""),a.description=ko.observable(""),a.source={type:ko.observable("nosource"),url:ko.observable(""),author:ko.observable("")},a.source_1={type:ko.observable("nosource"),url:ko.observable(""),author:ko.observable("")},a.image={mediaUrl:ko.observable(""),originalUrl:ko.observable(""),originalWidth:ko.observable(""),closestWidth:ko.observable(""),sized:ko.observable(""),scaled:ko.observable(!1)},a.slider={rightImageUrl:ko.observable(""),flip:ko.observable("")},a.externalPoints=ko.observable(""),a.isHtml=ko.observable(!1),a.html=ko.observable(""),a.videoUrl=ko.observable(""),a.videoType=ko.observable(""),a.imageErrors={headline:ko.observable(!1)},a.hover=ko.observable(!1),a.hoverError=ko.observable(!1),a.init=function(c,d,e){a.image.mediaUrl(c),a.image.originalUrl(d),a.image.sized(b(d)),a.image.originalWidth(e),a.image.closestWidth(BoredPanda.AddPost.Utils.closestImageSize(e))},a.setHtmlBlock=function(){a.isHtml(!0),a.html("")},a.setVideo=function(b,c){a.videoUrl(b),a.videoType(c)},a.initFromJson=function(c){a.headline(c.headline),a.description(c.description),a.source.type(c.source.type),a.source.url(c.source.url),a.source.author(c.source.author),"undefined"!=typeof c.source_1&&(a.source_1.type(c.source_1.type),a.source_1.url(c.source_1.url),a.source_1.author(c.source_1.author)),c.dimensions&&(a.dimensions=c.dimensions),"undefined"!=typeof c.isHtml&&a.isHtml(c.isHtml),"undefined"!=typeof c.externalPoints&&a.externalPoints(c.externalPoints),"undefined"!=typeof c.html&&a.html(c.html),"undefined"!=typeof c.videoUrl&&a.videoUrl(c.videoUrl),"undefined"!=typeof c.videoType&&a.videoType(c.videoType),"undefined"!=typeof c.slider&&(a.slider.rightImageUrl(c.slider.rightImageUrl),a.slider.flip(c.slider.flip));var d=a.image;d.mediaUrl(c.image.mediaUrl),d.originalUrl(c.image.originalUrl),d.sized(c.image.sized||b(c.image.originalUrl)),d.originalWidth(c.image.originalWidth),d.closestWidth(BoredPanda.AddPost.Utils.closestImageSize(c.image.originalWidth))},a.isCover=ko.computed({read:function(){return BoredPanda.AddPost.viewModel.post.coverImage()===a.image.originalUrl()},owner:!1});var b=function(a){return"undefined"!=typeof a&&(a=a.replace(".jpg","__700.jpg")),a}},BoredPanda.AddPost.viewModel=null,BoredPanda.AddPost.ViewModel=function(){var a=this;a.errors={title:ko.observable(!1),description:ko.observable(!1),categories:ko.observable(!1),tags:ko.observable(!1),noImages:ko.observable(!1),preview:ko.observable(!1),imageTitle:ko.observable(!1),videoUrl:ko.observable(!1),embedUrl:ko.observable(!1),slider:ko.observable(!1)},a.slider={left:ko.observable(""),right:ko.observable(""),flip:ko.observable(!1)},a.loadingSpinner=ko.observable(!1),a.uploaderError=ko.observable(""),a.savedDraft=ko.observable(!1),a.topSubmitTabVisible=ko.observable("photo"),a.bottomSubmitTabVisible=ko.observable("photo"),a.videoUrl=ko.observable(""),a.embedUrl=ko.observable(""),a.multipleEmbedsUrl=ko.observable(""),a.tweetConversation=ko.observable(!1),a.tweetInFeed=ko.observable(!1),a.tweetWatermark=ko.observable(!0),a.tweetSingleImage=ko.observable(!1),a.singleImage=ko.observable(!1),a.hideCaption=ko.observable(!1),a.imageUploaded=ko.observable(!1),a.challengeImageSrc=ko.observable(""),a.isPostLocked=ko.observable(!1),a.cropperImages=ko.observableArray([]),a.tooltips={title:{focused:ko.observable(!1),type:ko.observable("dafault"),showTooltip:ko.observable(!0)},description:{focused:ko.observable(!1),type:ko.observable("dafault"),showTooltip:ko.observable(!0)}},a.titleTooltipVisible=ko.computed({read:function(){return a.tooltips.title.showTooltip()&&a.tooltips.title.focused()},owner:!1}),a.descriptionTooltipVisible=ko.computed({read:function(){return a.tooltips.description.showTooltip()&&a.tooltips.description.focused()},owner:!1}),a.submitVideo=function(b){b=b||"bottom";var c=function(){a.loadingSpinner(!1),a.videoUrl(""),a.topSubmitTabVisible("photo"),a.bottomSubmitTabVisible("photo")};if(a.errors.videoUrl(!1),""===a.videoUrl())return void a.errors.videoUrl(!0);a.loadingSpinner(!0);var d={action:"parse_video_url",video_url:a.videoUrl()};BoredPanda.Utils.wpAjax(d).done(function(d){if(a.resetErrors(),!(!BoredPanda.Config.isStaffMember&&a.post.images().length>=BoredPanda.Config.imagesLimit-1&&(a.uploader.errorMessage(BoredPanda.Translate.AddPost.too_much_pictures_pt1+BoredPanda.Config.imagesLimit+BoredPanda.Translate.AddPost.too_much_pictures_pt2),a.post.images().length>=BoredPanda.Config.imagesLimit))){var e=BoredPanda.Utils.annotatePath(d.image_url,"__200"),f=new BoredPanda.AddPost.ImageViewModel;f.init(e,d.image_url,d.original_width),f.setVideo(d.video_url,d.video_type),f.dimensions=d.dimensions,BoredPanda.Config.isStaffMember&&a.post.admin.autoTitles()&&f.headline(a.post.title()),"top"===b?a.post.images.unshift(f):"bottom"===b&&a.post.images.push(f),a.cropperImages.push(f),a.post.coverImage().length<=0&&(a.post.coverImage(f.image.originalUrl()),a.post.setPostThumbnails(),a.post.setPostDefaultFbImage()),a.post.figureOutPostWidthMode(),"top"===b?$("html, body").animate({scrollTop:$(".post-images .post-image:first").offset().top-$("header.header").height()},600):"bottom"===b&&$("html, body").animate({scrollTop:$(".post-images .post-image:last").offset().top-$("header.header").height()},600),a.resizeInfoBlock(),c()}}).error(function(){a.errors.videoUrl(!0),c()})},a.submitEmbed=function(b,c){b=b||"bottom";var d=function(){a.loadingSpinner(!1),a.embedUrl(""),a.tweetConversation(!1),a.tweetInFeed(!1),a.tweetWatermark(!0),a.topSubmitTabVisible("photo"),a.bottomSubmitTabVisible("photo")};if(a.errors.embedUrl(!1),""===a.embedUrl())return void a.errors.embedUrl(!0);a.loadingSpinner(!0);var e={action:"parse_embed_url",embed_url:a.embedUrl(),single_image:a.singleImage(),hide_caption:a.hideCaption(),conversation:a.tweetConversation(),watermark:a.tweetWatermark(),tweet_single_image:a.tweetSingleImage(),not_embed:a.tweetInFeed()},f=BoredPanda.Utils.wpAjax(e).done(function(c){if(a.resetErrors(),!(!BoredPanda.Config.isStaffMember&&a.post.images().length>=BoredPanda.Config.imagesLimit-1&&(a.uploader.errorMessage(BoredPanda.Translate.AddPost.too_much_pictures_pt1+BoredPanda.Config.imagesLimit+BoredPanda.Translate.AddPost.too_much_pictures_pt2),a.post.images().length>=BoredPanda.Config.imagesLimit))){var e=BoredPanda.Utils.annotatePath(c.image_url,"__200"),f=new BoredPanda.AddPost.ImageViewModel;f.init(e,c.image_url,c.original_width),f.dimensions=c.dimensions,f.source.type("url"),f.source.url(a.embedUrl()),f.source.author(c.embed_author),f.headline(c.title),BoredPanda.Config.isStaffMember&&a.post.admin.autoTitles()&&f.headline(a.post.title()),"top"===b?a.post.images.unshift(f):"bottom"===b&&a.post.images.push(f),a.cropperImages.push(f),a.post.coverImage().length<=0&&(a.post.coverImage(f.image.originalUrl()),a.post.setPostThumbnails(),a.post.setPostDefaultFbImage()),a.post.figureOutPostWidthMode(),"top"===b?$("html, body").animate({scrollTop:$(".post-images .post-image:first").offset().top-$("header.header").height()},600):"bottom"===b&&$("html, body").animate({scrollTop:$(".post-images .post-image:last").offset().top-$("header.header").height()},600),a.resizeInfoBlock(),d()}}).error(function(){c||a.errors.embedUrl(!0),d()});return f},a.submitMultipleEmbeds=function(b){var c=a.multipleEmbedsUrl().split(/\s+/g),d=function(){if(c.length>0){a.embedUrl(c.pop());var e=a.submitEmbed(b);e.done(d)}else a.multipleEmbedsUrl("")};d()},a.parseExternalPhoto=function(b){if(b=b||"bottom",a.resetErrors(),a.post.externalPhoto()){a.loadingSpinner(!0);var c={action:"upload_external_photo",url:a.post.externalPhoto()};$.ajax({type:"POST",url:ajax_object.ajax_url,data:c,dataType:"json"}).done(function(c){if(c.success===!1)return void a.loadingSpinner(!1);var d=BoredPanda.Utils.annotatePath(c.data.image.image_url,"__200"),e=new BoredPanda.AddPost.ImageViewModel;e.init(d,c.data.image.image_url,c.data.image.original_width),e.dimensions=c.data.image.dimensions,e.headline(c.data.imageData.title),e.source.type("url"),e.source.url(a.post.externalPhoto()),e.source.author(c.data.imageData.author),e.image.scaled(c.data.image.scaled),BoredPanda.Config.isStaffMember&&a.post.admin.autoTitles()&&e.headline(a.post.title()),"undefined"!=typeof c.data.imageData.points&&e.externalPoints(c.data.imageData.points),"top"===b?a.post.images.unshift(e):"bottom"===b&&a.post.images.push(e),a.cropperImages.push(e),a.post.coverImage().length<=0&&(a.post.coverImage(e.image.originalUrl()),a.post.setPostThumbnails(),a.post.setPostDefaultFbImage()),a.ui.expandContributionArea(),a.post.figureOutPostWidthMode(),"top"===b?$("html, body").animate({scrollTop:$(".post-images .post-image:first").offset().top-$("header.header").height()},600):"bottom"===b&&$("html, body").animate({scrollTop:$(".post-images .post-image:last").offset().top-$("header.header").height()},600),a.resizeInfoBlock(),a.loadingSpinner(!1),a.post.externalPhoto("")}).error(function(){a.loadingSpinner(!1)})}},a.submitSlider=function(b){b=b||"bottom";var c=function(){a.loadingSpinner(!1),a.slider.flip(!1),a.slider.left(""),a.slider.right(""),a.topSubmitTabVisible("photo"),a.bottomSubmitTabVisible("photo")};if(a.errors.slider(!1),""===a.slider.left()||""===a.slider.right())return void a.errors.slider(!0);a.loadingSpinner(!0);var d=a.slider.left(),e=BoredPanda.Utils.annotatePath(d.image_url,"__200"),f=new BoredPanda.AddPost.ImageViewModel;f.init(e,d.image_url,d.original_width),f.dimensions=d.dimensions,f.slider.rightImageUrl(a.slider.right().image_url),f.slider.flip(a.slider.flip()),BoredPanda.Config.isStaffMember&&a.post.admin.autoTitles()&&f.headline(a.post.title()),"top"===b?a.post.images.unshift(f):"bottom"===b&&a.post.images.push(f),a.cropperImages.push(f);var g=new BoredPanda.AddPost.ImageViewModel;e=BoredPanda.Utils.annotatePath(a.slider.right().image_url,"__200"),g.init(e,a.slider.right().image_url,a.slider.right().original_width),a.post.sliderImages.push(g),a.cropperImages.push(g),a.post.coverImage().length<=0&&(a.post.coverImage(f.image.originalUrl()),a.post.setPostThumbnails(),a.post.setPostDefaultFbImage()),a.post.type("list"),a.post.figureOutPostWidthMode(),"top"===b?$("html, body").animate({scrollTop:$(".post-images .post-image:first").offset().top-$("header.header").height()},600):"bottom"===b&&$("html, body").animate({scrollTop:$(".post-images .post-image:last").offset().top-$("header.header").height()},600),a.resizeInfoBlock(),c()},a.hideTooltip=function(b){a.tooltips[b].showTooltip(!1)},a.resetErrors=function(){for(var b in a.errors)a.errors[b](!1)},a.validate=function(){a.resetErrors(),0===a.post.title().length&&a.errors.title(!0),0!==a.post.description().length||BoredPanda.Config.isStaffMember||a.errors.description(!0),!BoredPanda.Config.isMobileWidth&&BoredPanda.Config.isStaffMember&&0===a.post.category.name().length&&a.errors.categories(!0),0!==a.post.images().length||a.post.challenge.type()||a.errors.noImages(!0);for(var b=a.post.images().length,c=0;b>c;c++){var d=a.post.images()[c];"list"===a.post.type()&&0===d.headline().length?(a.errors.imageTitle(!0),d.imageErrors.headline(!0)):d.imageErrors.headline(!1)}return!a.anyErrors()},a.anyErrors=function(){for(var b=a.errors.title()||a.errors.description()||a.errors.categories()||a.errors.noImages()||a.errors.preview(),c=!1,d=a.post.images().length,e=0;d>e;e++)c=c||a.post.images()[e].imageErrors.headline();return b||c},a.mobileAddChallenge=function(){if(!BoredPanda.Config.isLoggedIn){var a=$(".mobile-create-challenge").attr("href");return BoredPanda.Login.form.show(a),!1}return!0},a.removeImage=function(){a.imageUploaded(!1),a.challengeImageSrc(""),a.post.coverImage("")},a.checkPermalink=function(b,c){if("url"===$(c.target).prop("name")||a.post.name().length<=0){var d={action:"bp_get_sample_permalink",id:a.post.postId(),title:a.post.title(),name:a.post.name()};BoredPanda.Utils.wpAjax(d).then(function(b){a.post.name(b[1])}).done()}},a.post={postId:ko.observable(0),permalink:ko.observable(""),name:ko.observable(""),status:ko.observable("draft"),type:ko.observable("blog"),postWidthMode:ko.observable(605),title:ko.observable(""),description:ko.observable(""),descriptionChallengeImage:ko.observable(""),externalPhoto:ko.observable(""),challenge:{type:ko.observable(""),descriptionPlaceholder:ko.observable("Description"),imagePlaceholder:ko.observable("Upload Original Image (optional)"),showSource:ko.observable(!1),source:ko.observable(""),removeAdTop:ko.observable(!1),hideSubmissionTitles:ko.observable(!1)},source:ko.observableArray([{url:ko.observable("")}]),contactAuthor:ko.observable($(".contact-author-input").data("checked")===!0),tags:ko.observable(""),admin:BoredPanda.Config.isStaffMember?{removeAdTop:ko.observable(!1),h3Headings:ko.observable(!1),hideSubmissionForm:ko.observable(!1),hideSubmissionTitles:ko.observable(!1),addWatermark:ko.observable(!1),regenerateExcerpt:ko.observable(!1),openListPageSize:ko.observable(0),imagesSource:ko.observable(""),imagesSourceAuthor:ko.observable(""),autoTitles:ko.observable(!1)}:ko.observable(""),category:{termId:BoredPanda.Config.isStaffMember?ko.observableArray([]):ko.observable(""),name:ko.observable("")},images:ko.observableArray([]),sliderImages:ko.observableArray([]),thumbnails:{square:{original:ko.observable(""),cropped:ko.observable(""),hover:ko.observable(!1),separator:ko.observable(50),imageLayout:ko.observable(1),api:{cropOneColumn:{originalImg:ko.observable(""),offset:{x:ko.observable(0),y:ko.observable(0)},zoom:0},cropTwoColumnLeft:{originalImg:ko.observable(""),offset:{x:ko.observable(0),y:ko.observable(0)},zoom:0},cropTwoColumnRight:{originalImg:ko.observable(""),offset:{x:ko.observable(0),y:ko.observable(0)},zoom:0}}},landscape:{original:ko.observable(""),cropped:ko.observable(""),hover:ko.observable(!1),separator:ko.observable(50),imageLayout:ko.observable(1),api:{cropOneColumn:{originalImg:ko.observable(""),offset:{x:ko.observable(0),y:ko.observable(0)},zoom:0},cropTwoColumnLeft:{originalImg:ko.observable(""),offset:{x:ko.observable(0),y:ko.observable(0)},zoom:0},cropTwoColumnRight:{originalImg:ko.observable(""),offset:{x:ko.observable(0),y:ko.observable(0)},zoom:0}}}},thumbsSaved:ko.observable(!1),coverSeparator:ko.observable(50),coverHeight:ko.observable(700),coverImage:ko.observable(""),coverHover:ko.observable(!1),coverImageLayout:ko.observable(1),coverImg:{cropOneColumn:{originalImg:ko.observable(""),offset:{x:ko.observable(0),y:ko.observable(0)},zoom:0},cropTwoColumnLeft:{originalImg:ko.observable(""),offset:{x:ko.observable(0),y:ko.observable(0)},zoom:0},cropTwoColumnRight:{originalImg:ko.observable(""),offset:{x:ko.observable(0),y:ko.observable(0)},zoom:0}},fbSaved:ko.observable(!1),fbSeparator:ko.observable(50),fbHeight:ko.observable(367),fbImage:ko.observable(""),fbImageSmall:"",fbImageLayout:ko.observable(1),fbHover:ko.observable(!1),cropOneColumn:{originalImg:ko.observable(""),offset:{x:ko.observable(0),y:ko.observable(0)},zoom:0},cropTwoColumnLeft:{originalImg:ko.observable(""),offset:{x:ko.observable(0),y:ko.observable(0)},zoom:0},cropTwoColumnRight:{originalImg:ko.observable(""),offset:{x:ko.observable(0),y:ko.observable(0)},zoom:0},fbThumbs:{fbThumb2:{fbSaved:ko.observable(!1),fbSeparator:ko.observable(50),fbHeight:ko.observable(367),fbImage:ko.observable(""),fbImageSmall:"",fbImageLayout:ko.observable(1),fbHover:ko.observable(!1),cropOneColumn:{originalImg:ko.observable(""),offset:{x:ko.observable(0),y:ko.observable(0)},zoom:0},cropTwoColumnLeft:{originalImg:ko.observable(""),offset:{x:ko.observable(0),y:ko.observable(0)},zoom:0},cropTwoColumnRight:{originalImg:ko.observable(""),offset:{x:ko.observable(0),y:ko.observable(0)},zoom:0}},fbThumb3:{fbSaved:ko.observable(!1),fbSeparator:ko.observable(50),fbHeight:ko.observable(367),fbImage:ko.observable(""),fbImageSmall:"",fbImageLayout:ko.observable(1),fbHover:ko.observable(!1),cropOneColumn:{originalImg:ko.observable(""),offset:{x:ko.observable(0),y:ko.observable(0)},zoom:0},cropTwoColumnLeft:{originalImg:ko.observable(""),offset:{x:ko.observable(0),y:ko.observable(0)},zoom:0},cropTwoColumnRight:{originalImg:ko.observable(""),offset:{x:ko.observable(0),y:ko.observable(0)},zoom:0}},fbThumb4:{fbSaved:ko.observable(!1),fbSeparator:ko.observable(50),fbHeight:ko.observable(367),fbImage:ko.observable(""),fbImageSmall:"",fbImageLayout:ko.observable(1),fbHover:ko.observable(!1),cropOneColumn:{originalImg:ko.observable(""),offset:{x:ko.observable(0),y:ko.observable(0)},zoom:0},cropTwoColumnLeft:{originalImg:ko.observable(""),offset:{x:ko.observable(0),y:ko.observable(0)},zoom:0},cropTwoColumnRight:{originalImg:ko.observable(""),offset:{x:ko.observable(0),y:ko.observable(0)},zoom:0}},fbThumb5:{fbSaved:ko.observable(!1),fbSeparator:ko.observable(50),fbHeight:ko.observable(367),fbImage:ko.observable(""),fbImageSmall:"",fbImageLayout:ko.observable(1),fbHover:ko.observable(!1),cropOneColumn:{originalImg:ko.observable(""),offset:{x:ko.observable(0),y:ko.observable(0)},zoom:0},cropTwoColumnLeft:{originalImg:ko.observable(""),offset:{x:ko.observable(0),y:ko.observable(0)},zoom:0},cropTwoColumnRight:{originalImg:ko.observable(""),offset:{x:ko.observable(0),y:ko.observable(0)},zoom:0}},fbThumb6:{fbSaved:ko.observable(!1),fbSeparator:ko.observable(50),fbHeight:ko.observable(367),fbImage:ko.observable(""),fbImageSmall:"",fbImageLayout:ko.observable(1),fbHover:ko.observable(!1),cropOneColumn:{originalImg:ko.observable(""),offset:{x:ko.observable(0),y:ko.observable(0)},zoom:0},cropTwoColumnLeft:{originalImg:ko.observable(""),offset:{x:ko.observable(0),y:ko.observable(0)},zoom:0},cropTwoColumnRight:{originalImg:ko.observable(""),offset:{x:ko.observable(0),y:ko.observable(0)},zoom:0}},fbThumb7:{fbSaved:ko.observable(!1),fbSeparator:ko.observable(50),fbHeight:ko.observable(367),fbImage:ko.observable(""),fbImageSmall:"",fbImageLayout:ko.observable(1),fbHover:ko.observable(!1),cropOneColumn:{originalImg:ko.observable(""),offset:{x:ko.observable(0),y:ko.observable(0)},zoom:0},cropTwoColumnLeft:{originalImg:ko.observable(""),offset:{x:ko.observable(0),y:ko.observable(0)},zoom:0},cropTwoColumnRight:{originalImg:ko.observable(""),offset:{x:ko.observable(0),y:ko.observable(0)},zoom:0}},fbThumb8:{fbSaved:ko.observable(!1),fbSeparator:ko.observable(50),fbHeight:ko.observable(367),fbImage:ko.observable(""),fbImageSmall:"",fbImageLayout:ko.observable(1),fbHover:ko.observable(!1),cropOneColumn:{originalImg:ko.observable(""),offset:{x:ko.observable(0),y:ko.observable(0)},zoom:0},cropTwoColumnLeft:{originalImg:ko.observable(""),offset:{x:ko.observable(0),y:ko.observable(0)},zoom:0},cropTwoColumnRight:{originalImg:ko.observable(""),offset:{x:ko.observable(0),y:ko.observable(0)},zoom:0}},fbThumb9:{fbSaved:ko.observable(!1),fbSeparator:ko.observable(50),fbHeight:ko.observable(367),fbImage:ko.observable(""),fbImageSmall:"",fbImageLayout:ko.observable(1),fbHover:ko.observable(!1),cropOneColumn:{originalImg:ko.observable(""),offset:{x:ko.observable(0),y:ko.observable(0)},zoom:0},cropTwoColumnLeft:{originalImg:ko.observable(""),offset:{x:ko.observable(0),y:ko.observable(0)},zoom:0},cropTwoColumnRight:{originalImg:ko.observable(""),offset:{x:ko.observable(0),y:ko.observable(0)},zoom:0}},fbThumb10:{fbSaved:ko.observable(!1),fbSeparator:ko.observable(50),fbHeight:ko.observable(367),fbImage:ko.observable(""),fbImageSmall:"",fbImageLayout:ko.observable(1),fbHover:ko.observable(!1),cropOneColumn:{originalImg:ko.observable(""),offset:{x:ko.observable(0),y:ko.observable(0)},zoom:0},cropTwoColumnLeft:{originalImg:ko.observable(""),offset:{x:ko.observable(0),y:ko.observable(0)},zoom:0},cropTwoColumnRight:{originalImg:ko.observable(""),offset:{x:ko.observable(0),y:ko.observable(0)},zoom:0}}},editImage:{showModal:ko.observable(!1),index:ko.observable(0),headline:ko.observable(""),description:ko.observable(""),source:{type:ko.observable("nosource"),url:ko.observable(""),author:ko.observable(""),showInput:ko.observable(!1)},image:{mediaUrl:ko.observable(""),originalUrl:ko.observable(""),originalWidth:ko.observable(""),sized:ko.observable(""),closestWidth:ko.observable("")},imageHover:ko.observable(!1),videoUrl:ko.observable(""),videoType:ko.observable("")},copyHandler:ko.observable(-1),copyImage:function(b){a.post.copyHandler(b)},pasteImageAbove:function(b){var c=a.post.images()[a.post.copyHandler()],d=b<=a.post.copyHandler()?a.post.copyHandler()+1:a.post.copyHandler();a.post.images.splice(b,0,c),a.post.images.splice(d,1),a.post.copyHandler(-1)},pasteImageBelow:function(b){b++;var c=a.post.images()[a.post.copyHandler()],d=b<=a.post.copyHandler()?a.post.copyHandler()+1:a.post.copyHandler();a.post.images.splice(b,0,c),a.post.images.splice(d,1),a.post.copyHandler(-1)},editImageInfo:function(b){$(window).width()<1020||BoredPanda.Config.isiPad()||($("body").css("overflow","hidden"),a.post.editImage.index(b),a.post.editImage.headline(a.post.images()[b].headline()),a.post.editImage.description(a.post.images()[b].description()),a.post.editImage.source.type(a.post.images()[b].source.type()),a.post.editImage.source.url(a.post.images()[b].source.url()),a.post.editImage.source.author(a.post.images()[b].source.author()),a.post.editImage.source.showInput(!1),a.post.editImage.image.mediaUrl(a.post.images()[b].image.mediaUrl()),a.post.editImage.image.originalUrl(a.post.images()[b].image.originalUrl()),a.post.editImage.image.sized(a.post.images()[b].image.sized()),a.post.editImage.image.originalWidth(a.post.images()[b].image.originalWidth()),a.post.editImage.image.closestWidth(a.post.images()[b].image.closestWidth()),a.post.editImage.videoUrl(a.post.images()[b].videoUrl()),a.post.editImage.videoType(a.post.images()[b].videoType()),a.post.editImage.showModal(!0),BoredPanda.AddPost.Utils.editImageModalAutofit())},closeEditImg:function(){$("body").css("overflow",""),a.post.saveEditImage(),a.post.editImage.showModal(!1)},previousImage:function(){a.post.saveEditImage();var b=a.post.editImage.index();b--,0>b&&(b=a.post.images().length-1),a.post.editImageInfo(b)},nextImage:function(){a.post.saveEditImage();var b=a.post.editImage.index();b++,b>a.post.images().length-1&&(b=0),a.post.editImageInfo(b)},saveEditImage:function(){var b=a.post.editImage.index();a.post.images()[b].headline(a.post.editImage.headline().replace(/\n/g," ")),a.post.images()[b].description(a.post.editImage.description()),a.post.images()[b].source.type(a.post.editImage.source.url().length>0?"url":"nosource"),a.post.images()[b].source.url(a.post.editImage.source.url()),a.post.images()[b].source.author(a.post.editImage.source.author()),
a.post.images()[b].image.mediaUrl(a.post.editImage.image.mediaUrl()),a.post.images()[b].image.originalUrl(a.post.editImage.image.originalUrl()),a.post.images()[b].image.originalWidth(a.post.editImage.image.originalWidth()),a.post.images()[b].image.closestWidth(a.post.editImage.image.closestWidth()),a.post.images()[b].videoUrl(a.post.editImage.videoUrl()),a.post.images()[b].videoType(a.post.editImage.videoType()),$(".image-description .image-description-input").change()},deleteEditImage:function(){var b=confirm("Are you sure?");if(b===!0){var c=a.post.images()[a.post.editImage.index()];"undefined"!=typeof a.post.coverImage()&&c.image.originalUrl()===a.post.coverImage()&&(a.post.images().length<=1?a.post.coverImage(""):a.post.coverImage(a.post.images()[0].image.originalUrl())),a.post.images.remove(c),a.cropperImages.remove(c),0===a.post.images().length&&($("#step-upload").hide(),$("#step-description").show()),$("body").css("overflow",""),a.post.editImage.showModal(!1)}},deleteImageTablet:function(b){var c=confirm("Are you sure?");if(c===!0){var d=a.post.images()[b];"undefined"!=typeof a.post.coverImage()&&d.image.originalUrl()===a.post.coverImage()&&(a.post.images().length<=1?a.post.coverImage(""):a.post.coverImage(a.post.images()[0].image.originalUrl())),a.post.images.remove(d),a.cropperImages.remove(d),0===a.post.images().length&&($("#step-upload").hide(),$("#step-description").show())}},removeImage:function(){a.post.images.remove(this),a.cropperImages.remove(this),!BoredPanda.Config.isStaffMember&&a.post.images().length>=BoredPanda.Config.imagesLimit?a.uploader.errorMessage(BoredPanda.Translate.AddPost.too_much_pictures_pt1+BoredPanda.Config.imagesLimit+BoredPanda.Translate.AddPost.too_much_pictures_pt2):a.uploader.errorMessage("")},setAllImagesSourceToMine:function(){for(var b=0;b<a.post.images().length;b++)"nosource"===a.post.images()[b].source.type()&&a.post.images()[b].source.type("mine")},imageUp:function(b){var c=a.post.images.indexOf(b);if(c>=1){var d=a.post.images();a.post.images.splice(c-1,2,d[c],d[c-1]);var e=$(".post-images .post-image:nth-child("+c+")").offset().top-$("header.header").height();$("html, body").animate({scrollTop:e},"slow")}},imageDown:function(b){var c=a.post.images.indexOf(b),d=a.post.images();if(c<d.length-1){a.post.images.splice(c,2,d[c+1],d[c]);var e=$(".post-images .post-image:nth-child("+(c+2)+")").offset().top-$("header.header").height();$("html, body").animate({scrollTop:e},"slow")}},setType:function(b){a.post.type(b)},setImageAsCover:function(){var b=a.post.editImage.index(),c=a.post.images()[b];return c.image.originalUrl()===a.post.coverImage()&&(c=a.post.images()[0]),a.post.coverImage(c.image.originalUrl()),a.post.thumbsSaved()||a.post.setPostThumbnails(),a.post.setPostDefaultFbImage(),!0},setPostThumbnails:function(){var b=a.post.coverImage(),c=BoredPanda.Utils.annotatePath(b,"__300"),d=BoredPanda.Utils.annotatePath(b,"__300_185");a.post.thumbnails.square.original(b),a.post.thumbnails.square.cropped(c),a.post.thumbnails.landscape.original(b),a.post.thumbnails.landscape.cropped(d),a.post.thumbnails.square.api.cropOneColumn.originalImg(b),a.post.thumbnails.landscape.api.cropOneColumn.originalImg(b)},setPostDefaultFbImage:function(){a.post.fbSaved()||a.post.fbImage(a.post.coverImage())},figureOutPostWidthMode:function(){for(var b=a.post.images().length,c={605:0,700:0,880:0},d=0;b>d;d++){var e=a.post.images()[d],f=parseInt(e.image.originalWidth(),10);c[BoredPanda.AddPost.Utils.closestImageSize(f)]++}var g=605;for(var h in c)c[h]>=c[g]&&(g=h);a.post.postWidthMode(parseInt(g,10))},setPostTags:function(){var b=[];$("ul.tagit li .tagit-label").each(function(a,c){(BoredPanda.Config.isStaffMember||"700-page"!==$(c).text()&&"full-page"!==$(c).text())&&b.push($(c).text())}),$.inArray("full-page",b)>-1?a.post.postWidthMode(880):$.inArray("700-page",b)>-1&&a.post.postWidthMode(700),a.post.tags(""),-1===$.inArray("full-page",b)&&-1===$.inArray("700-page",b)&&(880===a.post.postWidthMode()?a.post.tags("full-page"):700===a.post.postWidthMode()&&a.post.tags("700-page")),a.post.tags(a.post.tags()+","+b.join(","))},saveChallenge:function(){if(a.resetErrors(),a.post.challenge.removeAdTop(a.post.description().length<370),("meme"===a.post.challenge.type()||"text"===a.post.challenge.type())&&a.post.challenge.hideSubmissionTitles(!0),0===a.post.title().length)return a.errors.title(!0),!1;if(0===a.post.description().length&&"meme"!==a.post.challenge.type()&&"text"!==a.post.challenge.type())return a.errors.description(!0),!1;if(!a.imageUploaded()&&"meme"===a.post.challenge.type())return a.uploader.errorMessage("Please upload image"),!1;a.loadingSpinner(!0),a.post.status("publish"),a.post.type("list"),a.challengeImageSrc()?(a.post.descriptionChallengeImage(a.challengeImageSrc()),880===a.post.postWidthMode()&&a.post.postWidthMode(700)):a.post.postWidthMode(700),"text"===a.post.challenge.type()?(a.post.category.name("Ask Pandas"),a.post.category.termId=BoredPanda.Config.isStaffMember?ko.observableArray([130420]):ko.observable("130420")):(a.post.category.name("Challenge"),a.post.category.termId=BoredPanda.Config.isStaffMember?ko.observableArray([63294]):ko.observable("63294")),a.post.setPostTags();var b={action:"contribution_submit_form",ko:a.toJSON(a.post)};$.ajax({type:"POST",url:ajax_object.ajax_url,data:b,dataType:"json"}).done(function(b){"undefined"!=typeof b.postId&&(a.post.postId(b.postId),a.post.permalink(b.permalink),a.post.name(b.name),a.post.permalink().length>0&&(BoredPanda.AddPost.LeavePopup.publish(),window.location.href=a.post.permalink()))})},updateChallenge:function(){if(a.resetErrors(),0===a.post.title().length)return a.errors.title(!0),!1;if(0===a.post.description().length&&"meme"!==a.post.challenge.type()&&"text"!==a.post.challenge.type())return a.errors.description(!0),!1;if(!a.imageUploaded()&&"meme"===a.post.challenge.type())return a.uploader.errorMessage("Please upload image"),!1;a.loadingSpinner(!0),a.post.descriptionChallengeImage(a.challengeImageSrc());var b={action:"contribution_update_challenge",ko:a.toJSON(a.post)};$.ajax({type:"POST",url:ajax_object.ajax_url,data:b,dataType:"json"}).done(function(b){b.success?(BoredPanda.AddPost.LeavePopup.publish(),window.location.href=a.post.permalink()):(a.loadingSpinner(!1),alert("You can't edit this post anymore!"))})},generateDescription:function(){var b="";return a.challengeImageSrc()&&(b+='<img class="alignnone image-size-full" src="'+a.challengeImageSrc()+'" />'),b},submit:function(b){if(a.ui.savingPost()!==!0){var c=a.post.status();a.uploaderError(""),a.ui.errorMessage(""),a.ui.successMessage(""),a.savedDraft(!1),a.ui.expandContributionArea(),$("html, body").animate({scrollTop:0},"slow");var d=a.post.category,e=a.categoriesDropdown.getSelectedCategory();if(d.termId(e.termId),d.name(e.name),!a.validate())return BoredPanda.Tracking.trackAddPostPublishError(),!1;a.post.figureOutPostWidthMode(),a.post.setPostTags(),a.ui.savingPost(!0),"publish"===b?(BoredPanda.Tracking.trackAddPostPublish(),a.ui.updateButtonText(BoredPanda.Translate.AddPost.updating),a.ui.publishButtonText(BoredPanda.Translate.AddPost.saving),a.post.status("publish")):"draft"===b?(a.ui.draftButtonText(BoredPanda.Translate.AddPost.saving),a.post.status("draft")):"update"===b&&a.ui.updateButtonText(BoredPanda.Translate.AddPost.saving);var f={action:"contribution_submit_form",surname:$("#post-surname").val(),ko:a.toJSON()};$.ajax({type:"POST",url:ajax_object.ajax_url,data:f,dataType:"json"}).done(function(d){if(a.ui.savingPost(!1),1===d.cannot_edit)return j=BoredPanda.Translate.AddPost.cannot_edit,void a.ui.errorMessage(j);if(d.postId>0){var e,f=[],g=[],h="/add-new-post/?pid="+d.postId;if(window.history.pushState("object or string","Title",h),"list"===a.post.type()&&a.isPostLocked(!0),"draft"===b&&(a.savedDraft(!0),setTimeout(function(){a.savedDraft(!1)},15e3)),$.cookie("invitation")&&BoredPanda.Tracking.trackInviteeAddPost(d.postId),BoredPanda.Config.trackAddPost=!1,a.updateFromJson(d),a.ui.successMessage(BoredPanda.Translate.AddPost.success_message_pt1+' <a target="_blank" href="'+a.post.permalink()+'">'+BoredPanda.Translate.AddPost.success_message_pt2+"</a>"),BoredPanda.AddPost.LeavePopup.publish(),"publish"===a.post.status()&&"draft"===c){"blog"===a.post.type()?(f=[BoredPanda.Translate.AddPost.blog_head_title],g=[BoredPanda.Translate.AddPost.blog_head_description],e="add_blog_post",a.ui.modal.viewPostText("View Post")):"list"===a.post.type()&&(f=[BoredPanda.Translate.AddPost.list_head_title],g=[BoredPanda.Translate.AddPost.list_head_description],e="create_open_list",a.ui.modal.viewPostText("View Open List")),a.ui.modal.headTitle(f[Math.floor(Math.random()*f.length)]),a.ui.modal.popupDescription(g[Math.floor(Math.random()*g.length)]);var i=encodeURIComponent(a.post.permalink()+"?utm_source=author&utm_medium=link&utm_campaign=AuthorShare");$("#share-modal a#facebook-share").attr("onclick","window.open('https://www.facebook.com/dialog/share?app_id="+BoredPanda.Config.fbAppId+"&display=popup&href="+i+"&redirect_uri="+encodeURIComponent(BoredPanda.Config.pandaBaseUrl+"/close.html")+"','facebook-share-dialog','width=626,height=436');$('#share-modal').modal('hide');"),$("#share-modal a#twitter-share").attr("onclick","window.open('http://twitter.com/share?url="+i+"&via=boredpanda&text="+encodeURIComponent(a.post.title())+"','twitter-share-dialog','width=626,height=436');$('#share-modal').modal('hide');"),$.ajax({type:"POST",url:"https://graph.facebook.com/?ids="+a.post.permalink()+"&scrape=true",data:null,dataType:"json"}),$(".got-it-button").attr("href",a.post.permalink()),$("#share-modal").modal(),$(".share-buttons a").unbind("click"),BoredPanda.Config.isStaffMember||(BoredPanda.Tracking.trackClick(".share-buttons a","Share Popup",e),BoredPanda.Tracking.trackImpression("#share-modal","Share Popup",e))}}else{var j=BoredPanda.Translate.AddPost.unknown_error;1===d.post_limit_exceeded?j=BoredPanda.Translate.AddPost.post_limit_exceeded:1===d.user_is_blocked&&(j=BoredPanda.Translate.AddPost.account_suspended),a.ui.errorMessage(j)}a.ui.resetButtons()})}},preview:function(){a.post.permalink().length>0?window.open(a.post.permalink(),"_blank").focus():a.errors.preview(!0)},addHtmlBlock:function(){var b=new BoredPanda.AddPost.ImageViewModel;b.setHtmlBlock(),a.post.images.push(b)},addAnotherUrl:function(){BoredPanda.Config.isStaffMember&&a.post.source.push({url:ko.observable("")})},generateImageTitles:function(){var b=confirm("Are you sure?");if(b===!0){var c=a.post.title();if(a.isPostLocked()){var d={action:"update_submissions_title",post_id:a.post.postId()};BoredPanda.Utils.wpAjax(d).success(function(){BoredPanda.Config.isStaffMember&&a.post.admin.autoTitles(!0),alert("Image titles successfully generated!")})}else{var e=a.post.images().length;if(""===c)return;BoredPanda.Config.isStaffMember&&a.post.admin.autoTitles(!0);for(var f=0;e>f;f++)a.post.images()[f].headline(c)}}},generateImageSources:function(){var b=confirm("Are you sure?");if(b===!0)for(var c=a.post.admin.imagesSource(),d=a.post.images().length,e=0;d>e;e++)a.post.images()[e].source.url(c),a.post.images()[e].source.type("url")},generateImageSourcesAuthors:function(){var b=confirm("Are you sure?");if(b===!0)for(var c=a.post.admin.imagesSourceAuthor(),d=a.post.images().length,e=0;d>e;e++)a.post.images()[e].source.author(c),a.post.images()[e].source.type("url")}},a.resizeInfoBlock=function(){if($("body").hasClass("page-template-add-post-template-php")){var a=function(){$(document).width()<1020?$("#step-description .info-block-container").height($("#step-description .info-block-container .info-block.additional-info").height()):$("#step-description .info-block-container").height($(document).height())};setTimeout(a,1e3),$(window).resize(a)}},a.uploader=new BoredPanda.AddPost.ImageUploader({drop_element:"add-post-template",browse_button:"browse-files-step1",title:a.post.title,loader:a.loadingSpinner,error:a.uploaderError,fileUploaded:function(b){if(a.resetErrors(),!(!BoredPanda.Config.isStaffMember&&a.post.images().length>=BoredPanda.Config.imagesLimit-1&&(a.uploader.errorMessage(BoredPanda.Translate.AddPost.too_much_pictures_pt1+BoredPanda.Config.imagesLimit+BoredPanda.Translate.AddPost.too_much_pictures_pt2),a.post.images().length>=BoredPanda.Config.imagesLimit))){var c=BoredPanda.Utils.annotatePath(b.image_url,"__200"),d=new BoredPanda.AddPost.ImageViewModel;d.init(c,b.image_url,b.original_width),d.dimensions=b.dimensions,a.post.images.push(d),a.cropperImages.push(d),BoredPanda.Config.isStaffMember&&a.post.admin.autoTitles()&&d.headline(a.post.title()),a.post.coverImage().length<=0&&(a.post.coverImage(d.image.originalUrl()),a.post.setPostThumbnails(),a.post.setPostDefaultFbImage()),a.ui.expandContributionArea(),a.post.figureOutPostWidthMode(),a.resizeInfoBlock()}}}),a.uploaderTop=new BoredPanda.AddPost.ImageUploader({browse_button:"browse-files-step2",title:a.post.title,loader:a.loadingSpinner,error:a.uploaderError,fileUploaded:function(b){if(a.resetErrors(),!(!BoredPanda.Config.isStaffMember&&a.post.images().length>=BoredPanda.Config.imagesLimit-1&&(a.uploader.errorMessage(BoredPanda.Translate.AddPost.too_much_pictures_pt1+BoredPanda.Config.imagesLimit+BoredPanda.Translate.AddPost.too_much_pictures_pt2),a.post.images().length>=BoredPanda.Config.imagesLimit))){var c=BoredPanda.Utils.annotatePath(b.image_url,"__200"),d=new BoredPanda.AddPost.ImageViewModel;d.init(c,b.image_url,b.original_width),d.dimensions=b.dimensions,a.post.images.unshift(d),a.cropperImages.unshift(d),BoredPanda.Config.isStaffMember&&a.post.admin.autoTitles()&&d.headline(a.post.title()),a.post.coverImage().length<=0&&(a.post.coverImage(d.image.originalUrl()),a.post.setPostThumbnails(),a.post.setPostDefaultFbImage()),a.ui.expandContributionArea(),a.post.figureOutPostWidthMode(),$("html, body").animate({scrollTop:$(".post-images .post-image:first").offset().top-$("header.header").height()},600),a.resizeInfoBlock()}}}),a.uploaderBottom=new BoredPanda.AddPost.ImageUploader({browse_button:"browse-files-bottom",title:a.post.title,loader:a.loadingSpinner,error:a.uploaderError,fileUploaded:function(b){if(a.resetErrors(),!(!BoredPanda.Config.isStaffMember&&a.post.images().length>=BoredPanda.Config.imagesLimit-1&&(a.uploader.errorMessage(BoredPanda.Translate.AddPost.too_much_pictures_pt1+BoredPanda.Config.imagesLimit+BoredPanda.Translate.AddPost.too_much_pictures_pt2),a.post.images().length>=BoredPanda.Config.imagesLimit))){var c=BoredPanda.Utils.annotatePath(b.image_url,"__200"),d=new BoredPanda.AddPost.ImageViewModel;d.init(c,b.image_url,b.original_width),d.dimensions=b.dimensions,a.post.images.push(d),a.cropperImages.push(d),BoredPanda.Config.isStaffMember&&a.post.admin.autoTitles()&&d.headline(a.post.title()),a.post.coverImage().length<=0&&(a.post.coverImage(d.image.originalUrl()),a.post.setPostThumbnails(),a.post.setPostDefaultFbImage()),a.ui.expandContributionArea(),a.post.figureOutPostWidthMode(),$("html, body").animate({scrollTop:$(".post-images .post-image:last").offset().top-$("header.header").height()},600)}}}),a.uploaderChallenge=new BoredPanda.AddPost.ImageUploader({drop_element:"add-post-template",browse_button:"image-upload-btn-id-modal-challenge",title:a.post.title,loader:a.loadingSpinner,error:a.uploaderError,singleImageUploader:!0,fileUploaded:function(b){a.resetErrors();var c=BoredPanda.Utils.annotatePath(b.image_url,"__200"),d=new BoredPanda.AddPost.ImageViewModel;d.init(c,b.image_url,b.original_width),d.dimensions=b.dimensions,a.post.coverImage().length<=0&&"text"!==a.post.challenge.type()&&(a.post.coverImage(d.image.originalUrl()),a.post.setPostThumbnails(),a.post.setPostDefaultFbImage()),a.imageUploaded(!0),a.post.postWidthMode(BoredPanda.AddPost.Utils.closestImageSize(b.original_width)),a.challengeImageSrc(BoredPanda.Utils.annotatePath(b.image_url,"__"+a.post.postWidthMode()))}}),$(".slider-upload-button.left").each(function(){var b=$(this);new BoredPanda.AddPost.ImageUploader({browse_button:b.attr("id"),title:a.post.title,loader:a.loadingSpinner,error:a.uploaderError,fileUploaded:function(b){a.resetErrors(),BoredPanda.Config.isStaffMember&&a.slider.left(b)}})}),$(".slider-upload-button.right").each(function(){var b=$(this);new BoredPanda.AddPost.ImageUploader({browse_button:b.attr("id"),title:a.post.title,loader:a.loadingSpinner,error:a.uploaderError,fileUploaded:function(b){a.resetErrors(),BoredPanda.Config.isStaffMember&&a.slider.right(b)}})});var b=function(b,c){return{action:"contribution_save_double_image_editor",filename:"fb_image",selector:b,height:c.fbHeight,separator:c.fbSeparator,images:a.cropperImages,thumb:c.fbImage,imgs:{cropOneColumn:c.cropOneColumn,cropTwoColumnLeft:c.cropTwoColumnLeft,cropTwoColumnRight:c.cropTwoColumnRight},callback:function(a,b){c.fbImage(a.fb_thumb_url),c.fbSaved(!0),c.fbSeparator=b.separator,c.fbImageSmall=a.fb_thumb_small_url;var d=function(a){c[a].originalImg(b[a].originalImg()),b.setApi(a),c[a].zoom=b[a].api.cropit("zoom"),c[a].offset.x(b[a].offset.x()),c[a].offset.y(b[a].offset.y())};d("cropOneColumn"),d("cropTwoColumnLeft"),d("cropTwoColumnRight"),c.fbImageLayout(b.columns())}}};a.fbImageModal=new BoredPanda.Cropper(b("#fb-image-modal",a.post)),a.fbImageModal2=new BoredPanda.Cropper(b("#fb-image-modal2",a.post.fbThumbs.fbThumb2)),a.fbImageModal3=new BoredPanda.Cropper(b("#fb-image-modal3",a.post.fbThumbs.fbThumb3)),a.fbImageModal4=new BoredPanda.Cropper(b("#fb-image-modal4",a.post.fbThumbs.fbThumb4)),a.fbImageModal5=new BoredPanda.Cropper(b("#fb-image-modal5",a.post.fbThumbs.fbThumb5)),a.fbImageModal6=new BoredPanda.Cropper(b("#fb-image-modal6",a.post.fbThumbs.fbThumb6)),a.fbImageModal7=new BoredPanda.Cropper(b("#fb-image-modal7",a.post.fbThumbs.fbThumb7)),a.fbImageModal8=new BoredPanda.Cropper(b("#fb-image-modal8",a.post.fbThumbs.fbThumb8)),a.fbImageModal9=new BoredPanda.Cropper(b("#fb-image-modal9",a.post.fbThumbs.fbThumb9)),a.fbImageModal10=new BoredPanda.Cropper(b("#fb-image-modal10",a.post.fbThumbs.fbThumb10)),a.coverImageModal=new BoredPanda.Cropper({action:"contribution_save_cover_image_editor",filename:"cover_image",selector:"#cover-image-modal",height:a.post.coverHeight,separator:a.post.coverSeparator,images:a.cropperImages,thumb:a.post.coverImage,imgs:{cropOneColumn:a.post.coverImg.cropOneColumn,cropTwoColumnLeft:a.post.coverImg.cropTwoColumnLeft,cropTwoColumnRight:a.post.coverImg.cropTwoColumnRight},callback:function(b,c){a.post.coverImage(b.cover_image_url),a.post.coverSeparator=c.separator;var d=function(b){a.post.coverImg[b].originalImg(c[b].originalImg()),c.setApi(b),a.post.coverImg[b].zoom=c[b].api.cropit("zoom"),a.post.coverImg[b].offset.x(c[b].offset.x()),a.post.coverImg[b].offset.y(c[b].offset.y())};d("cropOneColumn"),d("cropTwoColumnLeft"),d("cropTwoColumnRight"),a.post.coverImageLayout(c.columns())}}),a.wideThumbModal=new BoredPanda.Cropper({action:"contribution_save_wide_thumbnail_editor",filename:"thumb_latest",selector:"#wide-thumbnail",height:ko.observable(185),width:300,ratio:1,separator:a.post.thumbnails.landscape.separator,images:a.cropperImages,thumb:a.post.thumbnails.landscape.cropped,imgs:{cropOneColumn:a.post.thumbnails.landscape.api.cropOneColumn,cropTwoColumnLeft:a.post.thumbnails.landscape.api.cropTwoColumnLeft,cropTwoColumnRight:a.post.thumbnails.landscape.api.cropTwoColumnRight},callback:function(b,c){a.post.thumbnails.landscape.cropped(b.image_url),a.post.thumbnails.landscape.separator=c.separator;var d=function(b){a.post.thumbnails.landscape.api[b].originalImg(c[b].originalImg()),c.setApi(b),a.post.thumbnails.landscape.api[b].zoom=c[b].api.cropit("zoom"),a.post.thumbnails.landscape.api[b].offset.x(c[b].offset.x()),a.post.thumbnails.landscape.api[b].offset.y(c[b].offset.y())};d("cropOneColumn"),d("cropTwoColumnLeft"),d("cropTwoColumnRight"),a.post.thumbnails.landscape.imageLayout(c.columns()),a.post.thumbsSaved(!0)}}),a.squareThumbModal=new BoredPanda.Cropper({action:"contribution_save_square_thumbnail_editor",filename:"thumb_square",selector:"#square-thumbnail",height:ko.observable(300),width:300,ratio:1,separator:a.post.thumbnails.square.separator,images:a.cropperImages,thumb:a.post.thumbnails.square.cropped,imgs:{cropOneColumn:a.post.thumbnails.square.api.cropOneColumn,cropTwoColumnLeft:a.post.thumbnails.square.api.cropTwoColumnLeft,cropTwoColumnRight:a.post.thumbnails.square.api.cropTwoColumnRight},callback:function(b,c){a.post.thumbnails.square.cropped(b.image_url),a.post.thumbnails.square.separator=c.separator;var d=function(b){a.post.thumbnails.square.api[b].originalImg(c[b].originalImg()),c.setApi(b),a.post.thumbnails.square.api[b].zoom=c[b].api.cropit("zoom"),a.post.thumbnails.square.api[b].offset.x(c[b].offset.x()),a.post.thumbnails.square.api[b].offset.y(c[b].offset.y())};d("cropOneColumn"),a.post.thumbnails.square.imageLayout(c.columns()),a.post.thumbsSaved(!0)}});var c=function(a){for(var b=0;b<a.length;b++)a[b].selected=ko.observable(a[b].selected);return a};a.categoriesDropdown=new BoredPanda.AddPost.CategoriesDropdown(c(BoredPanda.Config.AddPostCategories)),a.ui={successMessage:ko.observable(""),errorMessage:ko.observable(""),draftButtonText:ko.observable(BoredPanda.Translate.AddPost.save_draft),publishButtonText:ko.observable(BoredPanda.Translate.AddPost.publish),updateButtonText:ko.observable(BoredPanda.Translate.AddPost.update),savingPost:ko.observable(!1),resetButtons:function(){a.ui.draftButtonText(BoredPanda.Translate.AddPost.save_draft),a.ui.publishButtonText(BoredPanda.Translate.AddPost.publish),a.ui.updateButtonText(BoredPanda.Translate.AddPost.update)},expanded:ko.observable(!1),expandContributionArea:function(){a.ui.expanded(!0),a.ui.tips.show("title"),$(".contribution-expandable-area").slideDown("medium")},tips:{image:ko.observable(!0),title:ko.observable(!1),description:ko.observable(!1),show:function(b){a.ui.tips.image(!1),a.ui.tips.title(!1),a.ui.tips.description(!1),a.ui.tips[b](!0)}},modal:{headTitle:ko.observable(""),popupDescription:ko.observable(""),viewPostText:ko.observable("")}};var d=function(b){b.length&&b.length>0&&setTimeout(function(){a.ui.successMessage(""),a.ui.errorMessage("")},1e4)};a.ui.successMessage.subscribe(d),a.ui.errorMessage.subscribe(d)},BoredPanda.AddPost.ViewModel.prototype={toJSON:function(){var a=$.extend({},this.post);return delete a.removeImage,delete a.setAllImagesSourceToMine,delete a.imageUp,delete a.imageDown,delete a.setType,delete a.setPostThumbnails,delete a.setPostDefaultFbImage,delete a.figureOutPostWidthMode,delete a.setPostTags,delete a.submit,delete a.saveChallenge,delete a.updateChallenge,delete a.generateDescription,delete a.preview,ko.toJSON(a)},updateFromJson:function(a){this.ui.expandContributionArea();var b,c=this,d=this.post;if(d.postId(a.postId),d.permalink(a.permalink),d.name(a.name),d.status(a.status),d.type(a.type),d.postWidthMode(a.postWidthMode),d.title(a.title),d.description(a.description),d.tags(a.tags),"string"==typeof a.source)d.source([{url:ko.observable(a.source)}]);else{var e=a.source.length;if(0===e)d.source({url:ko.observable("")});else{for(d.source([]),b=0;e>b;b++)a.source[b].url.length>0&&d.source.push({url:ko.observable(a.source[b].url)});0===d.source().length&&d.source.push({url:ko.observable("")})}}"undefined"!=typeof a.challenge&&(d.challenge.type(a.challenge.type),d.challenge.descriptionPlaceholder(a.challenge.descriptionPlaceholder),d.challenge.imagePlaceholder(a.challenge.imagePlaceholder),d.challenge.showSource(a.challenge.showSource),d.challenge.source(a.challenge.source),d.challenge.removeAdTop(a.challenge.removeAdTop),d.challenge.hideSubmissionTitles(a.challenge.hideSubmissionTitles)),BoredPanda.Config.isStaffMember&&(a.admin=a.admin||{},a.admin.removeAdTop=a.admin.removeAdTop||!1,d.admin.removeAdTop(a.admin.removeAdTop),a.admin.h3Headings=a.admin.h3Headings||!1,d.admin.h3Headings(a.admin.h3Headings),a.admin.hideSubmissionForm=a.admin.hideSubmissionForm||!1,d.admin.hideSubmissionForm(a.admin.hideSubmissionForm),a.admin.hideSubmissionTitles=a.admin.hideSubmissionTitles||!1,d.admin.hideSubmissionTitles(a.admin.hideSubmissionTitles),a.admin.addWatermark=a.admin.addWatermark||!1,d.admin.addWatermark(a.admin.addWatermark),a.admin.regenerateExcerpt=a.admin.regenerateExcerpt||!1,d.admin.regenerateExcerpt(a.admin.regenerateExcerpt),a.admin.imagesSource=a.admin.imagesSource||"",d.admin.imagesSource(a.admin.imagesSource),a.admin.imagesSourceAuthor=a.admin.imagesSourceAuthor||"",d.admin.imagesSourceAuthor(a.admin.imagesSourceAuthor),a.admin.openListPageSize=a.admin.openListPageSize||0,d.admin.openListPageSize(a.admin.openListPageSize),a.admin.autoTitles=a.admin.autoTitles||!1,d.admin.autoTitles(a.admin.autoTitles));var f,g=a.tags.split(",");for(b=0;b<g.length;b++){var h=g[b];(BoredPanda.Config.isStaffMember||-1===$.inArray(h,BoredPanda.Config.deniedTags))&&$("#post-tags").tagit("createTag",h)}d.category.termId(a.category.termId),d.category.name(a.category.name),this.categoriesDropdown.choose({term_id:a.category.termId,name:a.category.name}),c.cropperImages.removeAll();var i=[];d.images.removeAll();for(var j=0;j<a.images.length;j++)f=new BoredPanda.AddPost.ImageViewModel,f.initFromJson(a.images[j]),d.images.push(f),i[BoredPanda.Utils.annotatePath(f.image.originalUrl(),"__700")]=f;if(d.sliderImages.removeAll(),"undefined"!=typeof a.sliderImages)for(var j=0;j<a.sliderImages.length;j++)f=new BoredPanda.AddPost.ImageViewModel,f.initFromJson(a.sliderImages[j]),d.sliderImages.push(f),i[f.image.originalUrl()]=f;if("list"===d.type()){var k={action:"get_open_list_images_sorted",postId:d.postId()};BoredPanda.Utils.wpAjax(k).done(function(a){for(var b in a.images){if(a.images[b].cover){var d=i[a.images[b].cover];if("undefined"!=typeof d&&(c.cropperImages.push(d),"undefined"!=typeof d.slider&&d.slider.rightImageUrl())){var e=d.slider.rightImageUrl();c.cropperImages.push(i[e]),delete i[e]}}delete i[a.images[b].cover]}for(var b in i)c.cropperImages.push(i[b])})}else for(var l in i)c.cropperImages.push(i[l]);d.thumbnails.square.original(a.thumbnails.square.original),d.thumbnails.square.cropped(a.thumbnails.square.cropped),d.thumbnails.landscape.original(a.thumbnails.landscape.original),d.thumbnails.landscape.cropped(a.thumbnails.landscape.cropped),a.thumbnails.landscape.separator&&d.thumbnails.landscape.separator(a.thumbnails.landscape.separator),a.thumbnails.landscape.imageLayout&&d.thumbnails.landscape.imageLayout(a.thumbnails.landscape.imageLayout),a.thumbnails.square.separator&&d.thumbnails.square.separator(a.thumbnails.square.separator),a.thumbnails.square.imageLayout&&d.thumbnails.square.imageLayout(a.thumbnails.square.imageLayout);var m=function(b){var c=function(b,c,e){a.thumbnails[c].api&&a.thumbnails[c].api[b]&&(d.thumbnails[c].api[b].originalImg(a.thumbnails[c].api[b].originalImg),d.thumbnails[c].api[b].zoom=a.thumbnails[c].api[b].zoom,d.thumbnails[c].api[b].offset.x(a.thumbnails[c].api[b].offset.x),d.thumbnails[c].api[b].offset.y(a.thumbnails[c].api[b].offset.y))};"undefined"!=typeof a.thumbsApi&&"undefined"!=typeof a.thumbsApi[b]?(d.thumbnails[b].api.cropOneColumn.originalImg(a.thumbsApi[b].originalImg),d.thumbnails[b].api.cropOneColumn.offset.x(a.thumbsApi[b].offset.x),d.thumbnails[b].api.cropOneColumn.offset.y(a.thumbsApi[b].offset.y),d.thumbnails[b].api.cropOneColumn.zoom=a.thumbsApi[b].zoom):"undefined"!=typeof a.thumbnails[b]&&"undefined"!=typeof a.thumbnails[b].api&&(c("cropOneColumn",b,1),c("cropTwoColumnLeft",b,2),c("cropTwoColumnRight",b,2))};m("landscape"),m("square");var n=function(a,b,c,d){a.fbImageLayout&&b.fbImageLayout(a.fbImageLayout),a.fbImage&&(b.fbImage(a.fbImage),b.fbImageSmall=a.fbImageSmall),a.fbSaved&&b.fbSaved(a.fbSaved),a.fbSeparator&&b.fbSeparator(a.fbSeparator),c&&""===b.fbImage()&&b.setPostDefaultFbImage();var e=function(c,e){a[c]&&(b[c].originalImg(a[c].originalImg),b[c].zoom=a[c].zoom,b[c].offset.x(a[c].offset.x),b[c].offset.y(a[c].offset.y),""!==a[c].originalImg&&d.columns(e))};e("cropOneColumn",1),e("cropTwoColumnLeft",2),e("cropTwoColumnRight",2)};n(a,d,!0,c.fbImageModal),a.fbThumbs&&(a.fbThumbs.fbThumb2&&n(a.fbThumbs.fbThumb2,d.fbThumbs.fbThumb2,!1,c.fbImageModal2),a.fbThumbs.fbThumb3&&n(a.fbThumbs.fbThumb3,d.fbThumbs.fbThumb3,!1,c.fbImageModal3),a.fbThumbs.fbThumb4&&n(a.fbThumbs.fbThumb4,d.fbThumbs.fbThumb4,!1,c.fbImageModal4),a.fbThumbs.fbThumb5&&n(a.fbThumbs.fbThumb5,d.fbThumbs.fbThumb5,!1,c.fbImageModal5),a.fbThumbs.fbThumb6&&n(a.fbThumbs.fbThumb6,d.fbThumbs.fbThumb6,!1,c.fbImageModal5),a.fbThumbs.fbThumb7&&n(a.fbThumbs.fbThumb7,d.fbThumbs.fbThumb7,!1,c.fbImageModal5),a.fbThumbs.fbThumb8&&n(a.fbThumbs.fbThumb8,d.fbThumbs.fbThumb8,!1,c.fbImageModal5),a.fbThumbs.fbThumb9&&n(a.fbThumbs.fbThumb9,d.fbThumbs.fbThumb9,!1,c.fbImageModal5),a.fbThumbs.fbThumb10&&n(a.fbThumbs.fbThumb10,d.fbThumbs.fbThumb10,!1,c.fbImageModal5)),a.coverImage&&a.coverImage.image?d.coverImage(a.coverImage.image.originalUrl):a.coverImage&&d.coverImage(a.coverImage),a.coverSeparator&&d.coverSeparator(a.coverSeparator),a.coverHeight&&d.coverHeight(a.coverHeight),a.coverImageLayout&&d.coverImageLayout(a.coverImageLayout);var o=function(b,e){a.coverImg&&a.coverImg[b]&&(d.coverImg[b].originalImg(a.coverImg[b].originalImg),d.coverImg[b].zoom=a.coverImg[b].zoom,d.coverImg[b].offset.x(a.coverImg[b].offset.x),d.coverImg[b].offset.y(a.coverImg[b].offset.y),""!==a[b].originalImg&&c.coverImageModal.columns(e))};o("cropOneColumn",1),o("cropTwoColumnLeft",2),o("cropTwoColumnRight",2)}},BoredPanda.AddPost.LeavePopup={changed:!1,publish:function(){BoredPanda.AddPost.LeavePopup.changed=!1,window.onbeforeunload=function(){}},change:function(){BoredPanda.AddPost.LeavePopup.changed===!1&&(BoredPanda.AddPost.LeavePopup.changed=!0,window.onbeforeunload=function(){return BoredPanda.Translate.AddPost.leave_unsaved_changes})}},BoredPanda.AddPost.EditImageNavigation=function(a){$(document).keyup(function(b){a.post.editImage.showModal()&&(27===b.keyCode?($("textarea, input").blur(),a.post.closeEditImg()):37===b.keyCode?($("textarea, input").blur(),a.post.previousImage()):39===b.keyCode&&($("textarea, input").blur(),a.post.nextImage())),a.titleTooltipVisible()&&27===b.keyCode&&a.hideTooltip("title"),a.descriptionTooltipVisible()&&27===b.keyCode&&a.hideTooltip("description")}),$(document).on("click",function(b){"edit-post-image"===b.target.id&&a.post.editImage.showModal()&&($("textarea, input").blur(),a.post.closeEditImg())})},BoredPanda.AddPost.VideoKeyboardNavigation=function(a){$(document).keyup(function(b){"video"===a.topSubmitTabVisible()&&13===b.keyCode&&a.submitVideo("top"),"video"===a.bottomSubmitTabVisible()&&13===b.keyCode&&a.submitVideo("bottom")})},$(document).ready(function(a){if(a("#post-tags").tagit({tagLimit:BoredPanda.Config.isStaffMember?20:10,allowSpaces:!0,placeholderText:BoredPanda.Translate.AddPost.add_post_tags_placeholder,autocomplete:{delay:300,minLength:2,source:function(b,c){a.getJSON(ajax_object.ajax_url,{action:"bp_tags_search",tax:"post_tag",q:b.term},c)}},onTagLimitExceeded:function(){BoredPanda.AddPost.viewModel.errors.tags(!0),a(".ui-autocomplete-input").hide()},afterTagRemoved:function(){BoredPanda.AddPost.viewModel.errors.tags(!1),a(".ui-autocomplete-input").show()}}),a(window).resize(function(){BoredPanda.AddPost.Utils.editImageModalAutofit()}),a(".add-post-login").length>0&&initAddPost(),a("#add-post-area").length>0){if(initAddPost(),BoredPanda.AddPost.viewModel=new BoredPanda.AddPost.ViewModel,"undefined"!=typeof BoredPanda.Config.isPostLocked&&BoredPanda.AddPost.viewModel.isPostLocked(BoredPanda.Config.isPostLocked),BoredPanda.AddPost.EditImageNavigation(BoredPanda.AddPost.viewModel),BoredPanda.AddPost.VideoKeyboardNavigation(BoredPanda.AddPost.viewModel),BoredPanda.Config.postJson&&BoredPanda.AddPost.viewModel.updateFromJson(BoredPanda.Config.postJson),"undefined"!=typeof tweetsArray&&BoredPanda.Config.isStaffMember){BoredPanda.AddPost.viewModel.loadingSpinner(!0),BoredPanda.AddPost.viewModel.post.type("list"),BoredPanda.AddPost.LeavePopup.change();var b=function(){var a=[],b=[];for(var c in tweetsArray)a.push("https://twitter.com/"+tweetsArray[c]+"/status/"+c);
var d=function(){if(a.length>0){var c=a.pop();BoredPanda.AddPost.viewModel.embedUrl(c);var e=BoredPanda.AddPost.viewModel.submitEmbed("top",!0);e.done(d),e.error(function(){b.push(c),d()})}else{if("undefined"!=typeof tweetName)for(var f=0;f<BoredPanda.AddPost.viewModel.post.images().length;f++)BoredPanda.AddPost.viewModel.post.images()[f].headline(tweetName);if(b.length>0){var g="List of failed tweets: \r\n"+b.join("\r\n");alert(g),console.log(g)}}};d()};b()}BoredPanda.Tracking.trackInviteeAction("add_post_form_visit"),BoredPanda.Tracking.trackInviteeClicks(),BoredPanda.Config.isStaffMember||a.getJSON("//freegeoip.net/json/?callback=?",function(b){var c={action:"save_user_ip",ip:b.ip};a.ajax({type:"POST",url:ajax_object.ajax_url,data:c,dataType:"json"})}),ko.applyBindings(BoredPanda.AddPost.viewModel,a("#add-post-area").get(0)),ko.applyBindings(BoredPanda.AddPost.viewModel,a(".add-post-submit-area").get(0)),a(".contribution-modal-wrapper").each(function(){ko.applyBindings(BoredPanda.AddPost.viewModel,this)}),a(document).on("change","#add-post-area input, #add-post-area textarea",function(){BoredPanda.AddPost.LeavePopup.change()}),a(".post-description textarea").autoGrowTextArea(),a(".post-title textarea").autoGrowTextArea(),a(".edit-image-content .image-heading textarea").autoGrowTextArea(),a(".edit-image-content .image-description textarea").autoGrowTextArea(),a(".image-description .image-description-input").autoGrowTextArea(),setInterval(function(){a("body").hasClass("page-template-add-post-template-php")&&(a(document).width()<1020?a("#step-description .info-block-container").height(a("#step-description .info-block-container .info-block.additional-info").height()):a("#step-description .info-block-container").height()<a(".post-content-wrapper").height()&&a("#step-description .info-block-container").height(a(".post-content-wrapper").height()))},500)}})}(),function(){"use strict";window.BoredPanda=window.BoredPanda||{};var a=BoredPanda.OpenList=BoredPanda.OpenList||{};a.AppendForm=function(){var a=this;a.errors={upload:ko.observable(!1),title:ko.observable(!1),description:ko.observable(!1),image:ko.observable(!1),embed:ko.observable(!1)},a.errorMessages={upload:ko.observable("Ooops! Your image is too large, maximum file size is 8 MB.")},a.title=ko.observable(""),a.description=ko.observable(""),a.source=ko.observable(""),a.author=ko.observable(""),a.source1=ko.observable(""),a.author1=ko.observable(""),a.showSource=ko.observable(!1),a.imageUploaded=ko.observable(!1),a.imageSrc=ko.observable(null),a.imageFormat=BoredPanda.Config.openListImageFormat,a.progress=ko.observable(0),a.showWidgetForm=ko.observable(!1),a.uploadStarted=ko.observable(!1),a.dropEvent=ko.observable(""),a.showWaterMark=ko.observable(BoredPanda.Config.showWaterMark),a.showTextOpenListTopMobileForm=ko.observable(!1),a.activeMobileTextButton=ko.observable(!1),a.showExternalUpload=ko.observable(!1),a.externalPhoto=ko.observable(""),a.externalPoints=ko.observable(""),a.autoTitle=ko.observable(!1),a.publishButton=ko.observable(BoredPanda.Translate.AddPost.publish),a.ui={modal:{headTitle:ko.observable("Your submission is live now!"),popupDescription:ko.observable("Share your submission via social networks to gather votes."),viewPostText:ko.observable("View Submission")}},a.slider={left:ko.observable([]),right:ko.observable([]),flip:ko.observable(!1),loading:ko.observable(!1)},a.embed={embedUrl:ko.observable(""),tweetConversation:ko.observable(!1),tweetInFeed:ko.observable(!1),tweetSingleImage:ko.observable(!1),tweetWatermark:ko.observable(!0),singleImage:ko.observable(!0),hideCaption:ko.observable(!1),generateError:ko.observable(!1),loading:ko.observable(!1),imageUploaded:ko.observable(!1),imageSrc:ko.observable(""),showSource:ko.observable(!1),image:null},a.image=null,a.newItems=ko.observableArray([]),a.newItems.subscribe(function(){setTimeout(function(){var a;$(".reader-submissions ul").length>0?(a=$(".reader-submissions ul").offset().top-100,$(document).scrollTop(a)):$(".open-list-item-newly-appended").length>0&&(a=$(".open-list-item-newly-appended").last().offset().top-100,$(document).scrollTop(a))},100)});var b=function(){for(var b in a.errors)a.errors[b](!1)},c=function(){b(),a.title(""),a.description(""),a.imageUploaded(!1),a.progress(0),a.source(""),a.author(""),a.showSource(!1),a.source1(""),a.author1(""),a.uploadStarted(!1)};a.uploader=function(){$(".image-upload-btn:not(#image-upload-btn-id-modal-challenge), .mobile-image-upload-btn").each(function(){var c=$(this),d=c.closest(".image-file-area").attr("id"),e=new plupload.Uploader({runtimes:"html5,html4",browse_button:c.attr("id"),drop_element:d,url:ajax_object.ajax_url,max_file_size:"20mb",max_file_count:1,multipart_params:{action:"contribution_submit_upload",title:""},unique_names:!1,init:{FilesAdded:function(c){b(),c.start(),a.uploadStarted(!0)}},filters:[{title:"Image files",extensions:"jpg,jpeg,gif,png"}]});if(e.bind("FileUploaded",function(b,d,e){var f=$.parseJSON(e.response);if(f.original_width<a.imageFormat&&-1===f.image_url.indexOf(".gif"))return a.errorMessages.upload("Ooops! Image width has to be at least "+a.imageFormat+"px"),a.errors.upload(!0),void a.uploadStarted(!1);var g=BoredPanda.Utils.annotatePath(f.image_url,"__"+a.imageFormat)+"?preview";"embed-image-upload-btn"===c.attr("id")?(a.embed.image=f,a.embed.imageSrc(g),a.embed.imageUploaded(!0),a.uploadStarted(!1)):(a.image=f,a.imageSrc(g),a.errors.image(!1),a.imageUploaded(!0),a.uploadStarted(!1))}),e.bind("UploadProgress",function(b,c){a.progress(c.percent)}),e.bind("Error",function(b,c){"File size error."===c.message?a.errorMessages.upload("Ooops! Your image is too large, maximum file size is 20 MB."):"File extension error."===c.message&&a.errors.upload(!0)}),e.init(),"html5"===e.runtime){var f=0;$("#"+d).bind({dragenter:function(){f++,a.dropEvent("dragenter")},dragleave:function(){f--,0===f&&a.dropEvent("dragleave")},drop:function(){a.dropEvent("drop")}})}a.pluploader=e})};new BoredPanda.AddPost.ImageUploader({browse_button:"browse-files-slider-left",title:a.title,loader:a.slider.loading,error:a.errors.upload,fileUploaded:function(b){BoredPanda.Config.isStaffMember&&a.slider.left(b)}}),new BoredPanda.AddPost.ImageUploader({browse_button:"browse-files-slider-right",title:a.title,loader:a.slider.loading,error:a.errors.upload,fileUploaded:function(b){BoredPanda.Config.isStaffMember&&a.slider.right(b)}});a.removeImage=function(){a.imageUploaded(!1),a.uploadStarted(!1),a.imageSrc(""),a.image=null},a.publish=function(){if(!a.imageUploaded())return void a.errors.image(!0);if(a.autoTitle()||a.errors.title(""===a.title()),!a.errors.title()&&!a.errors.image()){if(!BoredPanda.Config.isLoggedIn)return $("#add-post-modal").modal("hide"),BoredPanda.Login.form.closeable(!0),void BoredPanda.Login.form.show(void 0,a.publish,BoredPanda.Translate.Signup.please_login_add_image);var b=BoredPanda.Config.openListId;0===b&&(b=$.cookie("openListId"),$.removeCookie("openListId"));var d={ko:ko.toJSON({headline:a.title(),description:"",source:{type:"url",url:a.source(),author:a.author()},source_1:{type:"url",url:a.source1(),author:a.author1()},image:{mediaUrl:BoredPanda.Utils.annotatePath(a.image.image_url,"__200"),originalUrl:a.image.image_url,originalWidth:a.image.original_width,originalHeight:a.image.original_height,dimensions:a.image.dimensions,scaled:a.image.scaled||!1},externalPoints:a.externalPoints()}),action:"contribution_append",surname:$("#post-surname").val(),open_list_id:b};a.publishButton(BoredPanda.Translate.AddPost.publishing);var e=$.ajax({type:"POST",url:ajax_object.ajax_url,dataType:"json",data:d});return e.done(function(b){var d="";if("1"===b.post_limit_exceeded)d='<p><i class="error-icon"></i>Ooops! Your post limit for this hour has exceeded.</p>';else if(1===b.unknown_error)d='<p><i class="error-icon"></i>Ooops! There was an error. Please add your image again.</p>';else if(b.postId>0){if(BoredPanda.Config.isTabletWidth)return""!==d&&BoredPanda.notice.setNotice(d),void window.location.replace(b.permalink);if(BoredPanda.Config.showSubmissionPopup===!0){var e=["Your submission has been launched!"],f=["Share and help it reach the moon."];a.ui.modal.headTitle(e[Math.floor(Math.random()*e.length)]),a.ui.modal.popupDescription(f[Math.floor(Math.random()*f.length)]);var g=encodeURIComponent(b.permalink+"?utm_source=author&utm_medium=link&utm_campaign=SubmissionAuthorShare");$("#share-modal a#facebook-share").attr("onclick","window.open('https://www.facebook.com/dialog/share?app_id="+BoredPanda.Config.fbAppId+"&display=popup&href="+g+"&redirect_uri="+encodeURIComponent(BoredPanda.Config.pandaBaseUrl+"/close.html")+"','facebook-share-dialog','width=626,height=436');$('#share-modal').modal('hide');"),$("#share-modal a#twitter-share").attr("onclick","window.open('http://twitter.com/share?url="+g+"&via=boredpanda&text="+encodeURIComponent(a.title())+"','twitter-share-dialog','width=626,height=436');$('#share-modal').modal('hide');"),$.ajax({type:"POST",url:"https://graph.facebook.com/?ids="+b.permalink+"&scrape=true",data:null,dataType:"json"}),$(".got-it-button").attr("href",b.permalink),$("#add-post-modal").modal("hide"),$("#share-modal").modal(),$(".share-buttons a").unbind("click"),BoredPanda.Config.isStaffMember||(BoredPanda.Tracking.trackClick(".share-buttons a","Share Popup","add_to_open_list"),BoredPanda.Tracking.trackImpression("#share-modal","Share Popup","add_to_open_list"))}BoredPanda.Config.isStaffMember&&b.error!==!1&&alert(b.error),a.newItems.push({postId:b.postId,title:b.title,permalink:b.permalink,displayName:b.displayName,authorLink:b.authorLink,userThumb:b.userThumb,source:b.source,sourceName:b.sourceName,source1:b.source1,sourceName1:b.sourceName1,position:b.position,coverSrc:BoredPanda.Utils.annotatePath(a.image.image_url,"__880")+"?upd=1",thumbSrc:BoredPanda.Utils.annotatePath(a.image.image_url,"__300"),textOpenList:!1,description:""})}a.publishButton(BoredPanda.Translate.AddPost.publish),BoredPanda.Config.returnUrl=b.permalink,""!==d&&BoredPanda.notice.showNotice(d),c()}),e}},a.publishSlider=function(){if(!a.slider.left()||!a.slider.right())return void a.errors.image(!0);if(BoredPanda.Config.isStaffMember&&(a.autoTitle()||a.errors.title(""===a.title()),!a.errors.title()&&!a.errors.image())){var b=BoredPanda.Config.openListId;0===b&&(b=$.cookie("openListId"),$.removeCookie("openListId"));var d={ko:ko.toJSON({headline:a.title(),description:"",source:{type:"url",url:a.source(),author:a.author()},source_1:{type:"url",url:a.source1(),author:a.author1()},image:{mediaUrl:BoredPanda.Utils.annotatePath(a.slider.left().image_url,"__200"),originalUrl:a.slider.left().image_url,originalWidth:a.slider.left().original_width,originalHeight:a.slider.left().original_height,dimensions:a.slider.left().dimensions},slider:{rightImageUrl:a.slider.right().image_url,flip:a.slider.flip()},imageSlider:{headline:a.title(),description:"",source:{type:"url",url:"",author:""},source_1:{type:"url",url:"",author:""},image:{mediaUrl:BoredPanda.Utils.annotatePath(a.slider.right().image_url,"__200"),originalUrl:a.slider.right().image_url,originalWidth:a.slider.right().original_width,originalHeight:a.slider.right().original_height,dimensions:a.slider.right().dimensions}}}),action:"contribution_append",surname:$("#post-surname").val(),open_list_id:b};a.publishButton(BoredPanda.Translate.AddPost.publishing);var e=$.ajax({type:"POST",url:ajax_object.ajax_url,dataType:"json",data:d});return e.done(function(b){var d="";"1"===b.post_limit_exceeded?d='<p><i class="error-icon"></i>Ooops! Your post limit for this hour has exceeded.</p>':1===b.unknown_error?d='<p><i class="error-icon"></i>Ooops! There was an error. Please add your image again.</p>':b.postId>0&&(BoredPanda.AddPost.LeavePopup.publish(),window.location.reload()),a.publishButton(BoredPanda.Translate.AddPost.publish),""!==d&&BoredPanda.notice.showNotice(d),c()}),e}},a.renderEmbed=function(){if(a.errors.title(!1),a.errors.embed(!1),a.embed.generateError(!1),!a.embed.embedUrl())return void a.errors.embed(!0);if(BoredPanda.Config.isStaffMember){var b={action:"parse_embed_url",embed_url:a.embed.embedUrl(),single_image:a.embed.singleImage(),hide_caption:a.embed.hideCaption(),conversation:a.embed.tweetConversation(),watermark:a.embed.tweetWatermark()&&-1!==a.embed.embedUrl().indexOf("twitter.com"),not_embed:a.embed.tweetInFeed(),tweet_single_image:a.embed.tweetSingleImage()};a.embed.loading(!0),BoredPanda.Utils.wpAjax(b).done(function(b){a.source()||(a.source(a.embed.embedUrl()),a.author(b.embed_author)),a.title(b.title),a.embed.image=b,a.embed.imageSrc(b.image_url),a.embed.imageUploaded(!0),a.embed.loading(!1),a.source&&a.embed.showSource(!0)}).error(function(){a.embed.generateError(!0),a.embed.loading(!1)})}},a.publishEmbed=function(){if(a.errors.title(!1),a.errors.embed(!1),a.embed.generateError(!1),!a.title()&&!a.autoTitle())return void a.errors.title(!0);if(!a.embed.embedUrl())return void a.errors.embed(!0);if(BoredPanda.Config.isStaffMember){var b=BoredPanda.Config.openListId;0===b&&(b=$.cookie("openListId"),$.removeCookie("openListId")),a.embed.loading(!0),a.publishButton(BoredPanda.Translate.AddPost.publishing);var d={ko:ko.toJSON({headline:a.title(),description:"",source:{type:"url",url:a.source(),author:a.author()},image:{mediaUrl:BoredPanda.Utils.annotatePath(a.embed.image.image_url,"__200"),originalUrl:a.embed.image.image_url,originalWidth:a.embed.image.original_width,originalHeight:a.embed.image.original_height,dimensions:a.embed.image.dimensions}}),action:"contribution_append",surname:$("#post-surname").val(),open_list_id:b},e=$.ajax({type:"POST",url:ajax_object.ajax_url,dataType:"json",data:d});return e.done(function(b){var d="";"1"===b.post_limit_exceeded?d='<p><i class="error-icon"></i>Ooops! Your post limit for this hour has exceeded.</p>':1===b.unknown_error?d='<p><i class="error-icon"></i>Ooops! There was an error. Please add your image again.</p>':b.postId>0&&(BoredPanda.AddPost.LeavePopup.publish(),window.location.reload()),a.publishButton(BoredPanda.Translate.AddPost.publish),""!==d&&BoredPanda.notice.showNotice(d),c()}),e}},a.publishTextSubmission=function(){if(!BoredPanda.Config.isLoggedIn)return $("#add-post-modal").modal("hide"),BoredPanda.Login.form.closeable(!0),void BoredPanda.Login.form.show(void 0,a.publishTextSubmission,BoredPanda.Translate.Signup.please_login_add_submission);if(a.errors.description(""===a.description()),!a.errors.description()){var b=BoredPanda.Config.openListId;0===b&&(b=$.cookie("openListId"),$.removeCookie("openListId"));var d={headline:a.title(),description:a.description(),source:{type:"url",url:a.source(),author:a.author()}};a.image&&(d.image={mediaUrl:BoredPanda.Utils.annotatePath(a.image.image_url,"__200"),originalUrl:a.image.image_url,originalWidth:a.image.original_width,originalHeight:a.image.original_height,dimensions:a.image.dimensions,scaled:a.image.scaled||!1});var e={ko:ko.toJSON(d),action:"contribution_append",surname:$("#post-surname").val(),open_list_id:b,open_list_type:"text"};a.publishButton(BoredPanda.Translate.AddPost.publishing);var f=$.ajax({type:"POST",url:ajax_object.ajax_url,dataType:"json",data:e});return f.done(function(b){var d="";if("1"===b.post_limit_exceeded)d='<p><i class="error-icon"></i>Ooops! Your post limit for this hour has exceeded.</p>';else if(1===b.unknown_error)d='<p><i class="error-icon"></i>Ooops! There was an error. Please add your submission again.</p>';else if(b.postId>0){if(BoredPanda.Config.isTabletWidth)return""!==d&&BoredPanda.notice.setNotice(d),void window.location.replace(BoredPanda.Utils.getParameterByName("returnurl"));a.newItems.push({postId:b.postId,title:a.title(),description:a.description(),permalink:b.permalink,displayName:b.displayName,authorLink:b.authorLink,userThumb:b.userThumb,source:b.source,sourceName:b.sourceName,source1:b.source1,sourceName1:b.sourceName1,position:b.position,coverSrc:a.image?a.image.image_url:"",textOpenList:!0,thumbSrc:""})}$("#add-post-modal").modal("hide"),a.publishButton(BoredPanda.Translate.AddPost.publish),BoredPanda.Config.returnUrl=b.permalink,""!==d&&BoredPanda.notice.showNotice(d),c()}),f}},a.publishTextSubmissionMobile=function(b){if(""===a.description()?1===b?(a.description($.cookie("openListTextSubmission")),$.removeCookie("openListTextSubmission"),a.errors.description(""===a.description())):a.errors.description(!0):a.errors.description(!1),!a.errors.description()){var d=BoredPanda.Config.openListId;if(!BoredPanda.Config.isLoggedIn)return $.cookie("openListTextSubmission",a.description(),{expires:1,path:"/"}),$.cookie("openListId",d,{expires:1,path:"/"}),void BoredPanda.Login.form.show(window.location.pathname+"?textsub=1",void 0,BoredPanda.Translate.Signup.please_login_add_submission);0===d&&(d=$.cookie("openListId"),$.removeCookie("openListId"));var e={ko:ko.toJSON({headline:a.title(),description:a.description(),source:{type:"url",url:a.source(),author:a.author()}}),action:"contribution_append",surname:$("#post-surname").val(),open_list_id:d,open_list_type:"text"};a.publishButton(BoredPanda.Translate.AddPost.publishing);var f=$.ajax({type:"POST",url:ajax_object.ajax_url,dataType:"json",data:e});return f.done(function(b){var d="";if("1"===b.post_limit_exceeded)d='<p><i class="error-icon"></i>Ooops! Your post limit for this hour has exceeded.</p>';else if(1===b.unknown_error)d='<p><i class="error-icon"></i>Ooops! There was an error. Please add your submission again.</p>';else if(b.postId>0)return""!==d&&BoredPanda.notice.setNotice(d),void window.location.replace(b.permalink);a.publishButton(BoredPanda.Translate.AddPost.publish),BoredPanda.Config.returnUrl=b.permalink,""!==d&&BoredPanda.notice.showNotice(d),c()}),f}},a.uploadExternal=function(){if(a.externalPhoto()){a.uploadStarted(!0);var b={action:"upload_external_photo",url:a.externalPhoto()};$.ajax({type:"POST",url:ajax_object.ajax_url,data:b,dataType:"json"}).done(function(b){if(b.status===!1)return void a.uploadStarted(!1);var c=BoredPanda.Utils.annotatePath(b.data.image.image_url,"__"+a.imageFormat);a.image=b.data.image,a.imageSrc(c),a.title(b.data.imageData.title),a.author(b.data.imageData.author),a.source(a.externalPhoto()),a.showSource(!0),"undefined"!=typeof b.data.imageData.points&&a.externalPoints(b.data.imageData.points),a.errors.image(!1),a.imageUploaded(!0),a.uploadStarted(!1)})}},a.mobileAddImage=function(){if(!BoredPanda.Config.isLoggedIn){var a=$(".mobile-add-image-block a").attr("href");return BoredPanda.Login.form.show(a),$.cookie("openListId",BoredPanda.Config.openListId,{expires:1,path:"/"}),!1}return!0},a.canvas={canvas:ko.observable(""),topFontSize:ko.observable(40),bottomFontSize:ko.observable(40),topText:ko.observable(""),bottomText:ko.observable(""),loading:ko.observable(!0),error:ko.observable(!1),errorText:ko.observable("")},a.topTextFontInc=function(){a.canvas.topFontSize(a.canvas.topFontSize()+2)},a.topTextFontDec=function(){a.canvas.topFontSize(a.canvas.topFontSize()-2)},a.bottomTextFontInc=function(){a.canvas.bottomFontSize(a.canvas.bottomFontSize()+2)},a.bottomTextFontDec=function(){a.canvas.bottomFontSize(a.canvas.bottomFontSize()-2)},a.memeGenerator=function(b){function c(){a.imageUploaded(!1);var c=a.canvas.topFontSize(),g=a.canvas.bottomFontSize();f.clearRect(0,0,e.width,e.height),f.drawImage(h,0,0,h.width,h.height),f.lineWidth=4,f.font=c+"pt Anton",f.strokeStyle="black",f.fillStyle="white",f.textAlign="center",f.textBaseline="top";var i=b.find(".meme-texts .top-text textarea").val(),j=b.find(".meme-texts .bottom-text textarea").val();i||j?(a.canvas.topText(i),a.canvas.bottomText(j)):(i="Top text (optional)",j="Bottom text (optional)"),i=i.toUpperCase();var k=e.width/2,l=10;d(f,i,k,l,e.width-50,c+10,!1),f.textBaseline="bottom",f.font=g+"pt Anton",j=j.toUpperCase(),l=e.height-10,d(f,j,k,l,e.width-50,g+10,!0)}function d(a,b,c,d,e,f,g){var h=g?"unshift":"push";f=g?-f:f;for(var i=[],j=b.split("\n"),k=0;k<j.length;k++){for(var l="",m=j[k].split(" "),n=0;n<m.length;n++){var o=l+" "+m[n],p=a.measureText(o),q=p.width;q>e?(l&&i[h](l),l=m[n]+" "):l=o}i[h](l)}for(var r in i)a.strokeText(i[r],c,d+f*r,e),a.fillText(i[r],c,d+f*r,e)}var e=b.find(".meme-canvas").get(0),f=e.getContext("2d"),g=function(a,b){e.width=a,e.height=b},h=new Image;h.setAttribute("crossOrigin","anonymous"),h.src=memeImage,h.onload=function(){a.canvas.loading(!1),g(this.width,this.height),c()};var i=b.find(".meme-texts .top-text textarea").get(0),j=b.find(".meme-texts .bottom-text textarea").get(0);i.addEventListener("keydown",c),i.addEventListener("keyup",c),i.addEventListener("change",c),j.addEventListener("keydown",c),j.addEventListener("keyup",c),j.addEventListener("change",c),b.find(".text-font-size span").bind("click",c),b.find(".publish-button").click(function(b){return a.canvas.canvas(e),BoredPanda.Config.isLoggedIn?(b.preventDefault(),void a.createMeme()):($("#add-post-modal").modal("hide"),BoredPanda.Login.form.closeable(!0),void BoredPanda.Login.form.show(void 0,a.createMeme,BoredPanda.Translate.Signup.please_login_add_image))})},a.createMeme=function(){if(a.canvas.error(!1),a.title(a.canvas.topText()?a.canvas.topText():a.canvas.bottomText()),!a.title()&&!a.autoTitle())return void a.errors.title(!0);if(a.publishButton(BoredPanda.Translate.AddPost.publishing),a.imageUploaded())return void a.publish();var b=BoredPanda.Config.openListId;0===b&&(b=$.cookie("openListId"));var c={image:a.canvas.canvas().toDataURL(),openListId:b,action:"save_meme_image"},d=$.ajax({type:"POST",url:ajax_object.ajax_url,dataType:"json",data:c});return d.done(function(b){if(b.success!==!0)a.canvas.errorText(b.error?b.error:"Error occurred. Please try again."),a.canvas.error(!0),a.publishButton(BoredPanda.Translate.AddPost.publish);else if(b.image.image_url){var c=BoredPanda.Utils.annotatePath(b.image.image_url,"__"+a.imageFormat);a.image=b.image,a.imageSrc(c),a.errors.image(!1),a.imageUploaded(!0),a.publish()}else a.errors.image(!0),a.publishButton(BoredPanda.Translate.AddPost.publish)}),d},a.uploader()},a.View={init:function(){this.orderDropDown(),BoredPanda.Config.openListId>0&&this.showMoreButton(),this.unhideSubmission(),this.readMoreSubmissionDescription(),BoredPanda.Config.isStaffMember&&this.submitAdminVotes()},pageNumb:2,showMoreButton:function(){$(".open-list-items").length>0&&($(".open-list-items").infinitescroll({navSelector:"div.open-list-pagination-block",nextSelector:"p.open-list-pagination a:first",itemSelector:".open-list-items div.open-list-item",loading:{finishedMsg:"",msgText:"",img:BoredPanda.Config.assetsBaseUrl+"/wp-content/themes/boredpanda/images/add-post-loading.gif"},path:function(){var b=[location.protocol,"//",location.host,location.pathname].join(""),c="",d=BoredPanda.Utils.getParameterByName("page_numb",$(".open-list-pagination a").attr("href"));return d&&(a.View.pageNumb=parseInt(d)),c=b.indexOf("?")>-1?b+"&page_numb="+a.View.pageNumb:b+"?page_numb="+a.View.pageNumb}},function(){var b=$(".post-info p").attr("data-sub-count"),c=$(".open-list-items  .open-list-item").length;b>c&&$(".open-list-pagination-block").show(),$(".open-list-pagination a").html("show "+(b-c)+" more"),a.View.pageNumb=a.View.pageNumb+1;var d=[location.protocol,"//",location.host,location.pathname].join(""),e="";e=d.indexOf("?")>-1?d+"&page_numb="+a.View.pageNumb:d+"?page_numb="+a.View.pageNumb,$(".open-list-pagination a").attr("href",e),BoredPanda.Comment.destroyCommentImages(),BoredPanda.Comment.initCommentImages(),BoredPanda.Slider.bindDrag(),BoredPanda.Flipper.bind(),BoredPanda.ShareBox.sharesCount()}),$(window).unbind(".infscr"),$(".open-list-pagination a").on("click",function(a){a.preventDefault(),$(".open-list-items").infinitescroll("retrieve")}))},orderDropDown:function(){$(".open-list-sort-dd").on("click",function(a){a.preventDefault(),a.stopPropagation(),$(".open-list-sort-options").is(":hidden")?$(".open-list-sort-options").fadeIn("medium",function(){}):$(".open-list-sort-options").fadeOut("medium",function(){})}),$(".open-list-sort-dd").on("click",function(a){a.stopPropagation()}),$(document).on("click",function(){$(".open-list-sort-options").fadeOut("medium",function(){})})},unhideSubmission:function(){$(document).on("click",".open-list-item.hidden-submission a",function(){var a=$(this).closest(".open-list-item.hidden-submission");a.hide(),$('.open-list-item[data-submission-id="'+a.data("hidden-submission-id")+'"]').show()})},readMoreSubmissionDescription:function(){$(document).on("click",".post-content-description.not-full .read-more",function(){$(this).closest(".post-content-description.not-full").hide(),$(this).closest(".post-content-description.not-full").parent().find(".post-content-description.full").show()})},submitAdminVotes:function(){$(document).on("change",".admin-submission-votes input",function(){window.voteStarted||(window.voteStarted=new Date)}),$(document).on("click",".admin-vote-for-post",function(){if($(".admin-submission-votes input:checked").length<$(".admin-submission-votes").length)return void alert("Please vote for all submissions!");var a=$.map($(".admin-submission-votes input:checked"),function(a){return{post_id:a.name,votes:a.value}}),b={action:"admin_save_voting_mode",data:a,open_list_id:BoredPanda.Config.openListId,votes_consumed:Math.floor((new Date-window.voteStarted)/1e3)},c=$.ajax({type:"POST",url:ajax_object.ajax_url,dataType:"json",data:b});c.success(function(a){alert(a.message)}),c.error(function(){alert("Error! Please try again.")})})}},$(document).ready(function(b){BoredPanda.Config.inOpenList&&(a.View.init(),BoredPanda.OpenList.appendForm=new BoredPanda.OpenList.AppendForm,ko.applyBindings(BoredPanda.OpenList.appendForm,b(".left-content-column")[0]),b(".append-open-list.meme-generator").each(function(){BoredPanda.OpenList.appendForm.memeGenerator(b(this))}),BoredPanda.OpenList.appendForm.autoTitle("true"===autoTitles)),b(".desktop-add-image.add-image-button:not(.text-open-list) a").click(function(a){return a.preventDefault(),b("#add-post-modal").modal(),!1}),b(".desktop-add-image.add-image-button.text-open-list a").click(function(a){return a.preventDefault(),b(".text-open-list-append-form").show(),b(this).css("background","#cfcfcf"),!1}),b("#add-post-modal .add-post-dialog").click(function(a){a.target===this&&b("#add-post-modal").modal("hide")})})}(),function(){"use strict";window.BoredPanda=window.BoredPanda||{},BoredPanda.Settings={ui:function(){BoredPanda.Settings.ui={settingsBio:ko.observable(""),settingsDisplay:ko.observable(""),settingsWebsite:ko.observable(""),settingsFacebook:ko.observable(""),settingsTwitter:ko.observable(""),settingsFlickr:ko.observable(""),settingsAdminBox:ko.observable(BoredPanda.Config.adminBox),currentPassword:ko.observable(""),newPassword:ko.observable(""),repeatNewPassword:ko.observable(""),resetEmail:ko.observable(""),resetHash:ko.observable(""),message:ko.observable(""),button:ko.observable(BoredPanda.Translate.Settings.save),removeAccountButton:ko.observable(BoredPanda.Translate.Settings.remove_my_account),showErrors:ko.observable(!1),passwordChanged:ko.observable(!1)}},init:function(){$("#profile-settings").length>0&&(this.profileImage(),BoredPanda.Settings.ui(),$("#profile-settings").each(function(){ko.applyBindings(BoredPanda.Settings,this)}))},saveSettings:function(){if(this.ui.showErrors(!1),0===this.ui.settingsDisplay().length&&this.ui.showErrors(!0),this.ui.showErrors()===!0)return void $("html, body").animate({scrollTop:0},"slow");this.ui.button(BoredPanda.Translate.Settings.saving);var a={action:"save_settings_form",settingsDisplay:this.ui.settingsDisplay(),settingsWebsite:this.ui.settingsWebsite(),settingsFacebook:this.ui.settingsFacebook(),settingsTwitter:this.ui.settingsTwitter(),settingsFlickr:this.ui.settingsFlickr(),settingsBio:this.ui.settingsBio(),settingsAdminBox:this.ui.settingsAdminBox()},b=$.ajax({type:"POST",url:ajax_object.ajax_url,data:a,dataType:"json"}),c=this.ui.button,d=this.ui.message;b.done(function(){c(BoredPanda.Translate.Settings.save),d(BoredPanda.Translate.Settings.changes_saved),$("html, body").animate({scrollTop:0},"slow"),setTimeout(function(){d("")},5e3)})},savePassword:function(){if(this.ui.showErrors(!1),this.ui.message(""),0===this.ui.currentPassword().length&&this.ui.showErrors(!0),0===this.ui.newPassword().length&&this.ui.showErrors(!0),(0===this.ui.repeatNewPassword().length||this.ui.newPassword()!==this.ui.repeatNewPassword())&&this.ui.showErrors(!0),BoredPanda.Utils.isPasswordSecure(this.ui.newPassword())||(this.ui.message(BoredPanda.Translate.Settings.password_strength_error),this.ui.showErrors(!0)),this.ui.showErrors()===!0)return void $("html, body").animate({scrollTop:0},"slow");this.ui.button(BoredPanda.Translate.Settings.saving);var a={action:"save_change_password_form",currentPassword:this.ui.currentPassword(),newPassword:this.ui.newPassword(),repeatNewPassword:this.ui.repeatNewPassword()},b=$.ajax({type:"POST",url:ajax_object.ajax_url,data:a,dataType:"json"}),c=this.ui.button,d=this.ui.message;b.done(function(a){switch(c(BoredPanda.Translate.Settings.save),a.success){case"1":d(BoredPanda.Translate.Settings.changes_saved);break;case"-1":d(BoredPanda.Translate.Settings.passwords_not_match);break;case"-2":d(BoredPanda.Translate.Settings.invalid_password);break;default:d(BoredPanda.Translate.Settings.unknown_error)}$("html, body").animate({scrollTop:0},"slow"),setTimeout(function(){d("")},5e3)})},resetPassword:function(){if(this.ui.showErrors(!1),this.ui.message(""),0===this.ui.newPassword().length&&this.ui.showErrors(!0),(0===this.ui.repeatNewPassword().length||this.ui.newPassword()!==this.ui.repeatNewPassword())&&this.ui.showErrors(!0),BoredPanda.Utils.isPasswordSecure(this.ui.newPassword())||(this.ui.message(BoredPanda.Translate.Settings.password_strength_error),this.ui.showErrors(!0)),this.ui.showErrors()===!0)return void $("html, body").animate({scrollTop:0},"slow");this.ui.button(BoredPanda.Translate.Settings.saving);var a={action:"save_reset_password_form",email:this.ui.resetEmail(),hash:this.ui.resetHash(),newPassword:this.ui.newPassword(),repeatNewPassword:this.ui.repeatNewPassword()},b=$.ajax({type:"POST",url:ajax_object.ajax_url,data:a,dataType:"json"}),c=this.ui.button,d=this.ui.message,e=this;b.done(function(a){switch(c("Save"),a.success){case"1":d(BoredPanda.Translate.Settings.password_changed),e.ui.passwordChanged(!0);break;case"-1":d(BoredPanda.Translate.Settings.passwords_not_match);break;default:d(BoredPanda.Translate.Settings.unknown_error)}$("html, body").animate({scrollTop:0},"slow"),setTimeout(function(){d("")},5e3)})},profileImage:function(){var a=new plupload.Uploader({runtimes:"html5,html4",multi_selection:!1,browse_button:"edit-profile-img-btn",url:ajax_object.ajax_url,max_file_size:"4mb",multipart_params:{action:"upload_profile_picture"},unique_names:!1,init:{FilesAdded:function(a){a.start()}},filters:[{title:"Image files",extensions:"jpg,jpeg,png"}]});a.init(),a.bind("FileUploaded",function(a,b,c){var d=$.parseJSON(c.response);$(".profile-image").attr("src",d.image_url)})},removeAccountModal:function(){$("#delete-modal").modal()},removeAccount:function(){var a={action:"delete_account"},b=$.ajax({type:"POST",url:ajax_object.ajax_url,data:a,dataType:"json"});b.done(function(){window.location=BoredPanda.Config.pandaBaseUrl})}},$(document).ready(function(){BoredPanda.Settings.init()})}(),function(){"use strict";window.BoredPanda=window.BoredPanda||{},BoredPanda.Recs={init:function(){return this.enableDebug=!1,this.options={similar_post_algo:"simple_post_similarity",similar_post_var:"default"},this.baseUrl=BoredPanda.Config.recommendationServiceUrl,this.postsLoadedInSession=[],this.recommendedPosts=[],this.useRecFromOtherReq=!0,this.debug("Initialized"),!0},debug:function(a){this.enableDebug&&console.log(a)},addLoadedPost:function(a){a=this.normalizeSlug(a),this.postsLoadedInSession.push(a)},removeLoadedPost:function(a){a=this.normalizeSlug(a);var b=this.getCurrentPostName(),c=!1;for(var d in this.postsLoadedInSession)this.postsLoadedInSession[d]===b&&(this.postsLoadedInSession.splice(d,1),
c=!0);c&&(void 0===this.recommendedPosts[a]&&(this.recommendedPosts[a]=[]),this.recommendedPosts[a].unshift({post:b}))},hasBeenLoaded:function(a){return a=this.normalizeSlug(a),this.postsLoadedInSession.indexOf(a)>-1},recommendSimilarToCurrent:function(a){var b=this.getCurrentPostName();if(this.debug("Getting recs for "+b),this.debug("Recs history: "+this.postsLoadedInSession),this.debug("Recs queue: "),this.debug(this.recommendedPosts),void 0!==this.recommendedPosts[b]&&this.recommendedPosts[b].length>0)return void this.recommend(a,[]);var c=this.baseUrl+"/post/similar/"+this.options.similar_post_algo+"/"+this.options.similar_post_var+"/u/"+b+"/10";this.debug("Getting recs from "+c);var d=this;$.getJSON(c,function(b){d.debug("Response data: "),d.debug(b),d.recommend(a,b)})},getCurrentPostName:function(){var a=window.location.pathname;return this.normalizeSlug(a)},recommend:function(a,b){var c=b.recommendations||[],d=this.getCurrentPostName();void 0===this.recommendedPosts[d]&&c.length>0&&(this.recommendedPosts[d]=c);for(var e,f,g=this.recommendedPosts[d].length,h=0;g>h;h++)if(e=this.recommendedPosts[d].shift(),f="/"+e.post+"/",!this.hasBeenLoaded(e.post)&&window.location.pathname!==f)return void a(e.post);if(this.useRecFromOtherReq)for(var i in this.recommendedPosts){g=this.recommendedPosts[i].length;for(var j=0;g>j;j++)if(e=this.recommendedPosts[i].shift(),f="/"+e.post+"/",!this.hasBeenLoaded(e.post)&&window.location.pathname!==f)return void a(e.post)}},normalizeSlug:function(a){return"/"===a.slice(-1)&&(a=a.slice(0,-1)),"/"===a.slice(0,1)&&(a=a.slice(1)),a},getRecommendationsBasedOnHistory:function(a){if(void 0===BoredPanda.Analytics)return null;var b=BoredPanda.Analytics.getUniquePostIds(),c=BoredPanda.Analytics.getSeenRecommendations(),d=BoredPanda.Analytics.getUserId();if(b.length<10)return null;var e={popularRecs:3,personalRecs:3,format:"mid_column"};a=$.extend({},e,a);var f=this.getCurrentPostName(),g={action:"get_personal_recommendations",personal_recs:a.personalRecs,popular_recs:a.popularRecs,browsing_history:JSON.stringify(b),exclude:JSON.stringify(c),post_name:f,uid:d};$.ajax({type:"POST",url:ajax_object.ajax_url,data:g,dataType:"json",success:function(b){b.success&&b.data&&BoredPanda.Recs.renderPersonalAndPopularRecommendations(b.data.popular,b.data.personal,a.format)}})},renderPersonalAndPopularRecommendations:function(a,b,c){(null===a||void 0===a)&&(a=[]),(null===b||void 0===b)&&(b=[]);var d=null,e=[],f=null,g=null;if(void 0!==c&&"rows"===c&&a.length>=3&&b.length>=3)for(var h=0;6>h;h++)if(3>h){var i=b[h];i.recommendation_type="personal",d=".post-bottom-list.recommended-posts article:eq("+h+")",BoredPanda.Recs.renderSingleRecommendation(d,i)}else{var j=a[h-3];j.recommendation_type="popular",d=".post-bottom-list.recommended-posts article:eq("+h+")",BoredPanda.Recs.renderSingleRecommendation(d,j)}if("all_popular"===c&&a.length>=4){e=[0,1,3,4];for(var k in e)f=e[k],d=".post-bottom-list.recommended-posts article:eq("+f+")",g=a[k],g.recommendation_type="popular",BoredPanda.Recs.renderSingleRecommendation(d,g)}if((void 0===c||"mid_column"===c)&&a.length>=2&&b.length>=2){e=[0,1,3,4];for(var l in e){switch(f=e[l],d=".post-bottom-list.recommended-posts article:eq("+f+")",g=null,f){case 0:g=b[0],g.recommendation_type="personal";break;case 1:g=a[0],g.recommendation_type="popular";break;case 3:g=b[1],g.recommendation_type="personal";break;case 4:g=a[1],g.recommendation_type="popular"}BoredPanda.Recs.renderSingleRecommendation(d,g)}}var m=a.concat(b),n=[];for(var o in m)g=m[o],n.push(parseInt(g.post_id));BoredPanda.Analytics.setRecommendationsAsSeen(n)},renderSingleRecommendation:function(a,b){$(a+" a").attr("href",BoredPanda.Config.pandaBaseUrl+"/"+b.permalink+"/"),$(a+" a").attr("title",b.post_title),$(a+" img").attr("alt",b.post_title).attr("title",b.post_title),$(a+" a.box-title").html(b.post_title),$(a+" img.landscape").attr("src",b.thumb),$(a+" img.portrait").attr("src",b.square_thumb),void 0!==b.recommendation_type&&$(a).attr("data-rec-type",b.recommendation_type)}},$(document).ready(function(){})}(),function(){"use strict";window.BoredPanda=window.BoredPanda||{},BoredPanda.PostScrollQueue={init:function(a){return 1!==$("section.clearfix > article.post").length||1===$(".single-image-template").length?!1:$(window).width()>979?!1:(this.initialPost=window.location.pathname,this.initialPost=this.initialPost.substr(1,this.initialPost.length-2),this.initialTitle=document.title,this.isLoading=!1,this.enableDebug=!1,this.eventsSubmitted={},this.options={},this.options.bottomElement=".post-tags",this.options.startLoadingThreshold=200,this.options.loadingImage=BoredPanda.Config.assetsBaseUrl+"/wp-content/themes/boredpanda/images/add-post-loading.gif",$.extend(this.options,a),this.queue=[],this.debug("Initial post "+this.initialPost),BoredPanda.Recs.postsLoadedInSession.push(this.initialPost),"popular"===this.options.source&&(this.debug("Source: popular"),this.completeInit()),"recs"===this.options.source&&(void 0!==this.options.waitForRecs&&this.options.waitForRecs?this.waitForRecs():this.completeInit()),!0)},waitForRecs:function(){if(this.debug("Waiting for Recs"),void 0===BoredPanda.Recs){var a=this;setTimeout(function(){a.waitForRecs()},100)}else this.debug("Recs ready"),this.completeInit()},completeInit:function(){if("popular"===this.options.source){var a=this;$("section.related-posts a.box-title").each(function(){var b=$(this).attr("href");if(void 0!==b&&-1!==b.indexOf("boredpanda")){"/"===b.slice(-1)&&(b=b.slice(0,-1));var c=b.split("/"),d=c[c.length-1];-1===BoredPanda.Recs.postsLoadedInSession.indexOf(d)&&a.queue.push(d)}}),this.debug("Queue populated with popular posts"),this.debug(this.queue)}this.scroll(),this.debug("Init completed")},addRecommendationsToQueue:function(a){var b=this;b.debug("addRecommendationsToQueue()"),$(".left-content-column").eq(0).append('<section class="scroll-loaded-section"></section>'),$("section.scroll-loaded-section:last").html('<div class="text-centered"><img src="'+this.options.loadingImage+'" alt="Loading"/></div>'),BoredPanda.Recs.recommendSimilarToCurrent(function(c){return b.debug("Got Recommendations"),b.debug(c),void 0===c||null===c?(b.debug("No recommendations in response"),void a()):void a(c)})},loadNext:function(a){if(void 0===a)return void this.debug("Nothing to load. Empty queue");this.debug("Loading "+a);var b=this,c=$.ajax({url:"/"+a+"/",data:{only_post:1},type:"POST"});c.done(function(c){if($("section.scroll-loaded-section:last").html(c),BoredPanda.Experiments.init(),b.isLoading=!1,b.debug("Loaded "+a),$(".sharebar").hide(),$("section.scroll-loaded-section:last article.post").addClass("scroll-loaded"),$("section.scroll-loaded-section:last article.post").attr("data-post-name",a),$("section.scroll-loaded-section:last article.post .fixed-bottom-overlay").hide(),b.updateUrlBar(),BoredPanda.Recs.postsLoadedInSession.push(a),BoredPanda.FooterControl.update(),BoredPanda.Experiments.init(),void 0!==FB){var d;$(".post-comments:not(:last)").each(function(){d=$(this).height(),$(this).css("min-height",d+"px")}),FB.XFBML.parse()}BoredPanda.Comment.ui()})},updateUrlBar:function(){var a=this;$("article.post").unbind("inview"),$("article.post").bind("inview",function(b,c){var d=window.location.pathname,e=window.location.hostname;d=d.substr(1,d.length-2);var f=$(this).find("h1").text().trim();if(c)if($(this).hasClass("scroll-loaded")){var g=$(this).attr("data-post-name");if(a.debug("Visible "+g),g!==d){history.pushState({},g,"http://"+e+"/"+g+"/"),document.title=f+" | Bored Panda",BoredPanda.Recs.addLoadedPost(g);var h=function(){var b=$(document).scrollTop(),c=$("section.scroll-loaded-section:last").offset().top,d=$(window).height(),e=.1*d;if(c-e>b)setTimeout(h,250);else{var f,g=$("section.scroll-loaded-section:last .dfp-ad").length,i=$(".dfp-ad").length,j=0,k=i-g;$(".dfp-ad").each(function(){k>j&&(f=$(this).height(),$(this).wrap('<div style="display: block; height: '+f+'px; width: 100%"></div>'),$(this).remove()),j++}),googletag.pubads().refresh();var l=window.location.pathname;l=l.substr(1,l.length-2),a.submitEventPostTopInView(l);var m="";m=1===$('article[data-post-name="'+l+'"]').length?$('article[data-post-name="'+l+'"]').find("h1").text().trim():a.initialTitle,m+=" | Bored Panda",a.submitEventPageView(l,"/"+l+"/",m)}};return h(),!0}}else if(a.debug("Visible original post"),a.initialPost!==d)return history.pushState({},a.initialPost,"http://"+e+"/"+a.initialPost+"/"),document.title=f+" | Bored Panda",!0}),$("div.post-content").unbind("inview"),$(".post-comments").unbind("inview"),$(".post-comments").bind("inview",function(b,c){var d=window.location.pathname;d=d.substr(1,d.length-2),c&&$(this).closest("article").hasClass("scroll-loaded")&&a.submitEventPostBottomInView(d)})},addToQueue:function(a){this.queue.push(a)},debug:function(a){this.enableDebug&&console.log(a)},scroll:function(){var a=this;BoredPanda.Scroll.scrollCallback.add(function(){if($(window).width()>979)return!1;var b=$(a.options.bottomElement).length;if(b>0){var c=$(a.options.bottomElement).eq(b-1).offset().top-($(window).scrollTop()+$(window).height());c<a.options.startLoadingThreshold&&!a.isLoading&&(a.isLoading=!0,"recs"===a.options.source?a.addRecommendationsToQueue(function(b){a.loadNext(b)}):a.loadNext())}})},submitEventPostTopInView:function(a){return void 0!==this.eventsSubmitted[a]&&this.eventsSubmitted[a].topView===!0?void this.debug(a+": eventPostTop is already submitted"):(ga("send","event","Pageviews","Inf Scroll","Scroll Top"),this.debug(a+" submitted Pageviews -> Inf Scroll -> Scroll Top"),void 0===this.eventsSubmitted[a]&&(this.eventsSubmitted[a]={}),void(this.eventsSubmitted[a].topView=!0))},submitEventPostBottomInView:function(a){return void 0!==this.eventsSubmitted[a]&&this.eventsSubmitted[a].bottomView===!0?void this.debug(a+": eventPostBottom is already submitted"):(ga("send","event","Pageviews","Inf Scroll","Scroll Bottom"),ga("send","event","Navigation","Post","Bottom Reached"),this.debug(a+" submitted Pageviews -> Inf Scroll -> Scroll Bottom"),void 0===this.eventsSubmitted[a]&&(this.eventsSubmitted[a]={}),void(this.eventsSubmitted[a].bottomView=!0))},submitEventPageView:function(a,b,c){return void 0!==this.eventsSubmitted[a]&&this.eventsSubmitted[a].pageview===!0?void this.debug(a+": pageview is already submitted"):(ga("send",{hitType:"pageview",page:b,title:c}),this.debug(a+" submitted pageview, url "+b+", title "+c),void 0===this.eventsSubmitted[a]&&(this.eventsSubmitted[a]={}),void(this.eventsSubmitted[a].pageview=!0))}},$(document).ready(function(){})}(),function(){"use strict";window.BoredPanda=window.BoredPanda||{},BoredPanda.FBWidgets={mobile_cookie:"disablefbmobilewidget",twitter_mobile_cookie:"disabletwittermobilewidget",desktop_cookie:"disablefbdesktopwidget",isMobileWidgetVisible:function(){return void 0===$.cookie(this.mobile_cookie)&&BoredPanda.Config.isTabletWidth&&!$("body").hasClass("page-template-add-post-template-php")&&!$("body").hasClass("page")},isTwitterMobileWidgetVisible:function(){return void 0===$.cookie(this.twitter_mobile_cookie)&&BoredPanda.Config.isTabletWidth&&!$("body").hasClass("page-template-add-post-template-php")&&!$("body").hasClass("page")},isDesktopWidgetVisible:function(){return void 0===$.cookie(this.desktop_cookie)&&!BoredPanda.Config.isTabletWidth&&!$("body").hasClass("page-template-add-post-template-php")&&!$("body").hasClass("page")},initMobile:function(){if("twitter"===BoredPanda.Utils.getParameterByName("utm_source")){if(!this.isTwitterMobileWidgetVisible())return void BoredPanda.AppPromotion.initUpdated()}else if(!this.isMobileWidgetVisible())return void BoredPanda.AppPromotion.initUpdated();$(".app-promotion .updated .mobile-page-like-widget").show(),$(".app-promotion .updated-like-widget").show(),$(".header").addClass("promotion-updated"),$(".main.bp-container").addClass("promotion-updated"),$(".page-template").hasClass("page-template-add-post-template-php")&&($(".header.promotion-updated").attr("style","top: 49px;"),$(".main.promotion-updated").attr("style","margin-top: 6.5em !important;"))},initDesktop:function(){this.isDesktopWidgetVisible()&&BoredPanda.Scroll.scrollCallback.add(function(){if($("#post-comments-area").length>0){var a=$("#post-comments-area").offset().top+$("#post-comments-area").height();$(document).scrollTop()>a&&$(".fixed-bottom-facebook-widget").is(":hidden")?$(".fixed-bottom-facebook-widget").show():$(document).scrollTop()+window.innerHeight<a&&$(".fixed-bottom-facebook-widget").is(":visible")&&$(".fixed-bottom-facebook-widget").hide()}})},initLinks:function(){$(".app-promotion .mobile-page-like-widget .close-block a.close-icon").on("click",function(){$(".page-template").hasClass("page-template-add-post-template-php")&&($(".header.promotion-updated").removeAttr("style"),$(".main.promotion-updated").removeAttr("style")),$(".header").hasClass("promotion-updated")&&($(".header").removeClass("promotion-updated"),$(window).scroll()),$(".main.bp-container").hasClass("promotion-updated")&&$(".main.bp-container").removeClass("promotion-updated"),$.cookie(BoredPanda.FBWidgets.mobile_cookie,"1",{expires:60,path:"/"}),$(".app-promotion").remove()}),$(".fixed-bottom-facebook-widget .modal-close").on("click",function(){$.cookie(BoredPanda.FBWidgets.desktop_cookie,"1",{expires:60,path:"/"}),$(".fixed-bottom-facebook-widget").remove()}),$(".fixed-bottom-facebook-widget .close-text").on("click",function(){$.cookie(BoredPanda.FBWidgets.desktop_cookie,"1",{expires:60,path:"/"}),$(".fixed-bottom-facebook-widget").remove()})}},$(document).ready(function(){BoredPanda.FBWidgets.initLinks(),BoredPanda.FBWidgets.initMobile(),BoredPanda.FBWidgets.initDesktop()})}(),function(){"use strict";window.BoredPanda=window.BoredPanda||{},BoredPanda.Experiments={init:function(){this.debugging=!1,this.recommendations();var a=BoredPanda.Config.experimentsOptions,b=a.length>1;if(void 0===a||0===a.length)return void this.debug("No experiments found");var c=null;for(var d in a)if(1===a[d].enabled){if("all"===a[d].screen_size){c=a[d];break}if("big"===a[d].screen_size&&!BoredPanda.Config.isMobileWidth){c=a[d];break}if("small"===a[d].screen_size&&BoredPanda.Config.isMobileWidth){c=a[d];break}}if(null===c)return void this.debug("No suitable experiment for the device has been found");if("undefined"==typeof cxApi)return void this.debug("Experiments API is not loaded");this.debug("Found an experiment"),this.debug(c);var e=0,f=BoredPanda.Config.experimentsToInit;if(Array.isArray(f)&&f.length>0&&f[0].id===c.id_number&&parseInt(f[0].variation)>=0){var g=BoredPanda.Config.experimentsToInit[0];cxApi.setChosenVariation(g.variation,g.id),e=g.variation,this.debug("Initializing "+e+" "+g.id)}else if(b){var h=cxApi.getChosenVariation(c.id_number);h===cxApi.NO_CHOSEN_VARIATION&&h!==cxApi.NOT_PARTICIPATING?(cxApi.setChosenVariation(c.default_variation,c.id_number),e=c.default_variation,this.debug("Default variation set: "+e)):(e=h,this.debug("GA returned "+e))}else e=cxApi.chooseVariation(c.id_number),this.debug("GA chose "+e);this.storeVariationInClient(c.id_number,e),this.applyBehaviour(e)},debug:function(a){if(this.debugging){var b=typeof a;"string"!==b&&"number"!==b&&"boolean"!==b?console.log(a):console.log("[exp] "+a)}},storeVariationInClient:function(a,b){var c="experiment_"+a;$.cookie(c,b,{expires:90,path:"/"})},applyBehaviour:function(a){this.debug("Chosen variation "+a)},nativesAd:function(a){a="#variation1"===window.location.hash?1:a,a="#variation0"===window.location.hash?0:a,BoredPanda.Config.isMobileWidth?(0===a&&$(".outbrain-widget").append('<div id="div-gpt-ad-1442371043694-16" class="dfp-ad"><script type="text/javascript">if (BoredPanda.Config.isMobileWidth) { googletag.cmd.push(function() { googletag.display(\'div-gpt-ad-1442371043694-16\'); }) }</script></div>'),1===a&&$(".outbrain-widget").append('<div id="div-gpt-ad-1510764992728-0" class="dfp-ad"><script type="text/javascript">if (BoredPanda.Config.isMobileWidth) { googletag.cmd.push(function() { googletag.display(\'div-gpt-ad-1510764992728-0\'); }) }</script></div>')):(0===a&&$(".outbrain-widget").append('<div id="div-gpt-ad-1442371043694-15" class="dfp-ad"><script type="text/javascript">if (!BoredPanda.Config.isMobileWidth) { googletag.cmd.push(function() { googletag.display(\'div-gpt-ad-1442371043694-15\'); }) }</script></div>'),1===a&&$(".outbrain-widget").append('<div id="div-gpt-ad-1510764992728-0" class="dfp-ad"><script type="text/javascript">if (!BoredPanda.Config.isMobileWidth) { googletag.cmd.push(function() { googletag.display(\'div-gpt-ad-1510764992728-0\'); }) }</script></div>'))},recommendations:function(){var a=this;if(!BoredPanda.Config.isMobileWidth&&BoredPanda.Config.postId&&BoredPanda.Config.recommendationExperimentsInit){var b={action:"pick_recommendation_experiment",post_id:BoredPanda.Config.postId},c=BoredPanda.Utils.wpAjax(b);c.success(function(b){if(b.success===!0){var c=$('.post-recommendations .recommended-posts article.popular-post-rec[data-post-id="'+b.data.post_id+'"]'),d=$(".post-recommendations .recommended-posts article.popular-post-rec");a.debug("Recommendation found"),a.debug("Popular recs: "+d.length),c.length>0?(c.hide(),a.debug("Existing recommendation hidden")):d.length>1&&($(d[1]).hide(),a.debug("Second rec found")),$(b.data.html).insertAfter(d[0]),a.debug("Experiment rec inserted"),BoredPanda.ContentTracking.recommendationExperimentInit()}})}}},$(document).ready(function(){BoredPanda.Experiments.init()})}(),function(){"use strict";window.BoredPanda=window.BoredPanda||{};var a=BoredPanda.ContactAuthor=function(){var a=this,b=$(".contact-author-form"),c=b.children(".modal"),d=function(){return a.model.loading(!0),e(),BoredPanda.Utils.wpAjax({action:"load_contact_author_form"},"html").then(function(b){c.modal("hide"),c.html(b),$(".contact-author-form").each(function(){ko.cleanNode(this),ko.applyBindings(BoredPanda.contactAuthor.model,this)}),c.modal("show"),a.model.formLoaded=!0,a.model.loading(!1)})},e=function(){var b=a.$button;a.model.authorName(b.data("author-name")),a.model.authorSlug(b.data("author-slug")),a.model.senderName(b.data("sender-name")),a.model.senderEmail(b.data("sender-email")),a.model.title("Send Email to "+a.model.authorName()),a.model.text("Dear "+a.model.authorName()+",\n\n\n\nBest wishes,\n"+a.model.senderName())},f=function(b){var c='<a href="/contact-us/">contact us</a>',d={1:"Whoops! Our automated checker thinks your message is spam. If not "+c,2:"It seems that this panda does not want to be contacted. Sorry!",3:"It looks that you've reached your daily message limit. If you want to send more "+c,4:"We have already delivered a message from you to this author today. You can send another in 24 hours or "+c,5:"Whoops! Something went wrong on our end. Try again or "+c+" for help",6:"Whoops! Something went wrong on our end. Try again or "+c+" for help"},e=b.data.status;a.model.errorMessage(d[e]),console.log("Contact Author error: "+b.data.message)};a.openForm=function(b,e){return BoredPanda.Config.isLoggedIn?(a.$button=a.$button||$(e.currentTarget),c.modal("show"),a.model.formLoaded?void 0:d()):void BoredPanda.Login.form.show()},a.sendEmail=function(){a.model.loading(!0),BoredPanda.Tracking.trackEvent("Contact Author","Send","click"),BoredPanda.Utils.wpAjax({action:"contact_author",text:a.model.text(),author_slug:a.model.authorSlug(),sender_name:a.model.senderName(),sender_email:a.model.senderEmail()}).then(function(b){b.success?(a.model.success(!0),BoredPanda.Tracking.trackEvent("Contact Author","Send","success")):f(b),a.model.loading(!1)}).fail(function(){f({data:{status:6,message:"Most likely a 503 error."}}),a.model.loading(!1)}).done(function(){})},a.model={loading:ko.observable(!1),formLoaded:!1,openForm:a.openForm,sendEmail:a.sendEmail,success:ko.observable(!1),errorMessage:ko.observable(""),title:ko.observable(""),authorName:ko.observable(""),authorSlug:ko.observable(""),senderName:ko.observable(""),senderEmail:ko.observable(""),text:ko.observable("")}},b=BoredPanda.EnableContactAuthor=function(){var a=this,b=a.model={allow:ko.observable($(".allow-contact-author input").data("checked")),loading:ko.observable(!1)},c=a.save=function(){b.loading(!0),BoredPanda.Utils.wpAjax({action:"save_notification_settings",settings:{allow_contact_author:b.allow()}}).done(function(){b.loading(!1)})};b.allow.subscribe(c)};$(".allow-contact-author").length>0&&(BoredPanda.enableContactAuthor=new b,$(".allow-contact-author").each(function(){ko.applyBindings(BoredPanda.enableContactAuthor.model,this)})),$(".contact-author").length>0&&(BoredPanda.contactAuthor=new a,$(".contact-author").each(function(){ko.applyBindings(BoredPanda.contactAuthor.model,this)}))}(),function(){"use strict";window.BoredPanda=window.BoredPanda||{},BoredPanda.Admin={init:function(){this.initChangeSource(),this.initChangeAuthor(),this.initChangePageSize(),this.initChangeTitle(),this.initShowPostInFeed(),this.initHidePostFromFeed(),this.initHidePostFromTracker(),this.initChangePostDate(),this.initChangePostCategory(),this.initAddRepostUrl(),this.initUpdateFacebookImage(),this.initShowActiveVotesOnSubmissions(),this.initStaffTop(),this.initShowCtr(),this.initMarkSpam(),this.initHideUserPosts(),this.initAddBonus(),this.initSendToPartners(),this.initChangeOpenListMaker(),this.initLockOpenList(),this.initMarkNSFWPost(),this.initExcludeFBAd(),this.initMarkViralPost(),this.initLoadAdminBox(),this.initSetInstantArticle(),this.initDeleteInstantArticle(),this.editSubmissionImage(),this.initFeedPostPositionChange(),this.initSubmissionWatermark(),this.initFilterSubmissions(),this.initSubmissionPointsChange(),this.initExportVotes(),this.initImportVotes(),this.initOrderOfflineVotes(),this.initMarkReshared(),this.initChangeFacebookPage(),this.initVideoStaffBonuses()},initFilterSubmissions:function(){$(".filter-author-submissions").on("click",function(){var a=function(){var a={};window.location.href.replace(/[?&]+([^=&]+)=([^&]*)/gi,function(b,c,d){a[c]=d});return a},b=$(this).attr("data-id"),c=$(".filter-author-submissions-select[data-id="+b+"]").val(),d=window.location.href;if(-1!==d.indexOf("?")){var e=a();d=window.location.pathname+"?";for(var f in e)"filter_author_id"!==f&&(d+="&"+f+"="+e[f]);window.location=d+"&filter_author_id="+c}else window.location=d+"?filter_author_id="+c})},initVideoStaffBonuses:function(){$(".save-author-id").on("click",function(){var a=$(this),b=$(this).attr("data-object-id"),c=$(".author-id[data-object-id="+b+"]").val();a.html("Saving...");var d={action:"admin_video_staff_id",object_id:b,user_id:c},e=BoredPanda.Utils.wpAjax(d);e.done(function(){a.html("Save")})})},editSubmissionImage:function(){var a={action:"admin_change_submission_picture",submissionId:null,picture:null};$(document).on("click",".change-submission-image",function(){a.submissionId=$(this).attr("data-id"),$(".edit-submission-image").show()}),$(document).on("click",".close-change-image",function(){a.submissionId=null,a.picture=null,$("#edit-submission-image img").attr("src",null),$(".edit-submission-image").hide(),$("#edit-submission-image .uploaded-image-container").hide(),$("#edit-submission-image .overlay").hide(),$("#edit-submission-image .image-file-area").show()}),$(document).on("click",".update-submission-image",function(){if(null!==a.submissionId&&null!==a.picture){var b=$(this);b.html("Updating...");var c=BoredPanda.Utils.wpAjax(a);c.done(function(){$("#edit-submission-image img").attr("src",null),$(".edit-submission-image").hide(),$("#edit-submission-image .uploaded-image-container").hide(),$("#edit-submission-image .overlay").hide(),$("#edit-submission-image .image-file-area").show(),$(".open-list-item[data-submission-id="+a.submissionId+"] .open-list-media-container img").attr("src",a.picture.image_url),$(".open-list-item[data-submission-id="+a.submissionId+"] .open-list-media-container").closest(".open-list-item").find(".post-admin-menu .scaled-image-notice").hide(),a.submissionId=null,a.picture=null,b.html("Update"),$(".remove-image").click()})}}),function(){var b=new plupload.Uploader({runtimes:"html5,html4",browse_button:"change-image-upload-btn-id",drop_element:"change-image-file-area-id",url:ajax_object.ajax_url,max_file_size:"20mb",max_file_count:1,multipart_params:{action:"contribution_submit_upload",title:""},unique_names:!1,init:{FilesAdded:function(a){a.start(),$("#edit-submission-image .overlay").show()}},filters:[{title:"Image files",extensions:"jpg,jpeg,gif,png"}]});if(b.bind("FileUploaded",function(b,c,d){var e=$.parseJSON(d.response);a.picture=e,$("#edit-submission-image img").attr("src",e.image_url),$("#edit-submission-image .image-file-area").hide(),$("#edit-submission-image .uploaded-image-container").show()}),b.bind("Error",function(a,b){"File size error."===b.message||"File extension error."===b.message}),b.init(),"html5"===b.runtime){var c=0;$("#change-image-file-area-id").bind({dragenter:function(){c++,self.dropEvent("dragenter")},dragleave:function(){c--,0===c&&self.dropEvent("dragleave")},drop:function(){self.dropEvent("drop")}})}}()},initLoadAdminBox:function(){$(document).on("click",".load-admin-box",function(){var a=$(this);a.parent().find(".post-admin-menu").toggle(),a.removeClass("visible-request")}),$(document).on("click",".hide-admin-box",function(){var a=$(this);a.parent().parent().parent().find(".post-admin-menu").toggle(),a.parent().parent().parent().find(".load-admin-box").addClass("visible-request")})},initChangeAuthor:function(){$(".change-post-author-field").autocomplete({source:function(a,b){$.getJSON(ajax_object.ajax_url,{action:"admin_suggest_author",query:a.term},function(a){b(a.suggestions)})},dataType:"json",minLength:3,select:function(a,b){var c=$(a.target).attr("data-id");$(".change-post-author-id[data-id="+c+"]").val(b.item.data)}}),$(document).on("click",".change-post-author",function(){var a=$(this),b=a.attr("data-id"),c=$(".change-post-author-id[data-id="+b+"]").val(),d={action:"admin_change_author",post_id:b,author_id:c};a.html("Updating...");var e=BoredPanda.Utils.wpAjax(d);e.done(function(){a.html("Update")})})},initChangeSource:function(){$(document).on("click",".change-source",function(){var a=$(this),b=a.attr("data-id"),c=a.attr("data-type"),d=a.parent().find(".change-source-field[data-id="+b+"]").val(),e=a.parent().find(".change-source-author-field[data-id="+b+"]").val(),f={action:"admin_change_source",post_id:b,type:c,source:d,source_author:e};a.html("Updating...");var g=BoredPanda.Utils.wpAjax(f);g.done(function(){a.html("Update")})})},initChangePageSize:function(){$(document).on("click",".change-page-size",function(){var a=$(this),b=a.attr("data-id"),c=a.parent().find(".change-page-size-field[data-id="+b+"]").val(),d={action:"admin_change_page_size",post_id:b,page_size:c};a.html("Updating...");var e=BoredPanda.Utils.wpAjax(d);e.done(function(){a.html("Update")})})},initSendToPartners:function(){$(document).on("click",".send-to-partners",function(){var a=$(this),b=a.attr("data-id"),c=a.attr("data-type"),d=confirm("Are you sure you want to send this post?");if(d===!0){var e={action:"admin_send_partners",post_id:b,is_animals:"animals"===c};a.html("Sending...");var f=BoredPanda.Utils.wpAjax(e);f.done(function(b){alert(b.data),a.parent().html("This post has already been sent to partners")})}})},initSetInstantArticle:function(){$(document).on("click",".set-instant-article",function(){var a=$(this),b=a.parent(),c=a.attr("data-id"),d=b.find(".instant-article-length[data-id="+c+"]").val(),e={action:"admin_set_instant_article",post_id:c,size:d};b.find("input").remove(),b.find("a:last-child").remove(),b.append('<span style="float: right;">Please wait...</span>');var f=BoredPanda.Utils.wpAjax(e);f.success(function(){b.find("span").html('<span style="float: right;">Instant Article</span>')}),f.error(function(){b.find("span").html('<span style="float: right; color: red;">Failed</span>')})})},initDeleteInstantArticle:function(){$(document).on("click",".delete-instant-article",function(){if(confirm("Are you sure?")){var a=$(this),b=a.parent(),c=a.attr("data-id"),d={action:"admin_delete_instant_article",post_id:c};b.find("input").remove(),b.find("a:last-child").remove(),b.append('<span style="float: right;">Please wait...</span>');var e=BoredPanda.Utils.wpAjax(d);e.success(function(){b.find("span").html('<span style="float: right;">Success</span>')}),e.error(function(){b.find("span").html('<span style="float: right; color: red;">Failed</span>')})}})},initChangeTitle:function(){$(document).on("click",".change-post-title",function(){var a=$(this),b=a.attr("data-id"),c=a.attr("data-redirect"),d=$(".change-post-title-field[data-id="+b+"]").val(),e=$(".change-post-title-option[data-id="+b+"]").is(":checked"),f={action:"admin_change_title",post_id:b,title:d,capitalize:e};a.html("Updating...");var g=BoredPanda.Utils.wpAjax(f);g.done(function(b){if(e&&(d=b.title),"true"===c)window.location.href=b.permalink;else{var f=a.parent().parent().parent().find("h2 > a").html().trim().split(" ");a.parent().parent().parent().find("h2 > a").html(("#"===f[0][0]?f[0]+" ":"")+d),a.parent().parent().parent().find("h2 > a").attr("href",b.permalink),a.html("Update")}})})},initAddRepostUrl:function(){$(document).on("click",".add-repost-url",function(){var a=$(this),b=a.attr("data-id"),c=$(".repost-url[data-id="+b+"]").val(),d={action:"admin_add_repost_url",post_id:b,url:c};a.html("Saving...");var e=BoredPanda.Utils.wpAjax(d);e.done(function(c){a.html("Add"),$(".repost-url[data-id="+b+"]").val(""),c.return_url.length>0&&$(".reposted-on[data-id="+b+"]").append(","+c.return_url)})})},initUpdateFacebookImage:function(){$(document).on("click",".change-facebook-image-url",function(){var a=$(this),b=a.attr("data-id"),c=$(".facebok-image-url[data-id="+b+"]").val(),d={action:"admin_change_facebook_cover",post_id:b,url:c};a.html("Saving...");var e=BoredPanda.Utils.wpAjax(d);e.done(function(b){a.html("Update")}).error(function(b){if(b.responseText){var c=JSON.parse(b.responseText);c.message&&alert(c.message),a.html("Update")}})})},initShowPostInFeed:function(){$(document).on("click",".show-post-admin",function(){var a=confirm("Are you sure?");if(a===!0){var b=$(this),c=b.attr("data-id"),d={action:"admin_show_post",post_id:c},e=BoredPanda.Utils.wpAjax(d);e.done(function(){location.reload()})}})},initHidePostFromFeed:function(){$(document).on("click",".hide-post-admin",function(){var a=confirm("Are you sure?");if(a===!0){var b=$(this),c=b.attr("data-id"),d={action:"admin_hide_post",score:-1,post_id:c},e=BoredPanda.Utils.wpAjax(d);e.done(function(){b.remove()})}})},initHidePostFromTracker:function(){$(document).on("click",".hide-post-tracker",function(){var a=confirm("Are you sure?");if(a===!0){var b=$(this),c=b.attr("data-id"),d={action:"admin_hide_post_tracker",post_id:c},e=BoredPanda.Utils.wpAjax(d);e.done(function(){b.parent().parent().remove()})}})},initChangePostDate:function(){function a(a){var b,c,d=!0,e=1902,f=(new Date).getFullYear(),g="";return b=/^(\d{4})-(\d{1,2})-(\d{1,2})$/,""!==a?(c=a.match(b),c!==!1?c[3]<1||c[3]>31?g="Invalid value for day: "+c[1]:c[2]<1||c[2]>12?g="Invalid value for month: "+c[2]:(c[1]<e||c[1]>f)&&(g="Invalid value for year: "+c[3]+" - must be between "+e+" and "+f):g="Invalid date format: "+a):d||(g="Empty date not allowed!"),""!==g?(alert(g),!1):!0}function b(a){var b,c,d="";return b=/^(\d{1,2}):(\d{2}):(\d{2})?([ap]m)?$/,""!==a&&(c=a.match(b),c!==!1?(c[4]?(c[1]<1||c[1]>12)&&(d="Invalid value for hours: "+c[1]):c[1]>23&&(d="Invalid value for hours: "+c[1]),!d&&c[2]>59&&(d="Invalid value for minutes: "+c[2])):d="Invalid time format: "+a),""!==d?(alert(d),!1):!0}$(document).on("click",".change-post-date",function(){var c=$(this),d=c.attr("data-id"),e=c.parent().find(".edit-post-date").val(),f=e.split(" ");if(a(f[0])&&b(f[1])){var g={action:"admin_change_post_date",date:e,post_id:d};c.html("Updating...");var h=BoredPanda.Utils.wpAjax(g);h.done(function(){c.html("Update")})}})},initChangePostCategory:function(){$(document).on("click",".change-post-category",function(){
var a=$(this),b=a.attr("data-id"),c=a.parent().find(".edit-post-category").val(),d={action:"admin_change_post_category",category:c,post_id:b};a.html("Updating...");var e=BoredPanda.Utils.wpAjax(d);e.done(function(){a.html("Update")})})},initShowActiveVotesOnSubmissions:function(){$(document).on("click",".show-active-votes",function(){var a=$(this),b=a.attr("data-id"),c={action:"get_post_active_votes",postId:b};a.attr("disabled",!0),a.html("Loading...");var d=BoredPanda.Utils.wpAjax(c);d.done(function(b){var c=a.parent().find(".submission-active-votes"),d="Active votes: "+(b.votes&&b.votes.upvotes?b.votes.upvotes:0)+" upvotes, "+(b.votes&&b.votes.downvotes?b.votes.downvotes:0)+" downvotes";c.html(d),c.show(),a.hide()})})},initStaffTop:function(){$(document).on("click",".staff-stats-box tbody tr td.show-more span",function(){$(this).closest("tr").hide(),$(".staff-stats-box tbody tr.hidden").removeClass("hidden")})},initShowCtr:function(){$(document).on("click",".admin-button.show-ctr-btn",function(){var a=$(this).attr("data-id"),b=$(".ctr-stats-box[data-id="+a+"]").eq(0),c=!b.is(":visible");c&&b.show(),b.html("Loading...");var d={action:"get_post_ctr",post_id:a},e=BoredPanda.Utils.wpAjax(d);e.success(function(a){if(void 0===a.data||0==Object.keys(a.data).length)b.html("There is no data available yet. Wait a few more minutes, please.");else{var c="<table><thead><tr><td>Feed</td><td>Impressions</td><td>Clicks</td><td><b>CTR</b></td></tr></thead><tbody>";for(var d in a.data){var e=a.data[d],f="<tr><td>"+d+"</td><td>"+e.impressions+"</td><td>"+e.clicks+"</td><td><b>"+(100*e.ctr).toFixed(1)+"%</b></td></tr>";c+=f}c+="</tbody></table>",b.html(c)}}),e.error(function(){b.html("Error occured :(")})})},initMarkSpam:function(){$(document).on("click",".mark-post-spam-admin",function(){var a=confirm("Are you sure?");if(a===!0){var b=$(this),c=b.attr("data-id"),d=b.attr("data-value"),e={action:"admin_mark_spam",post_id:c,value:d},f=BoredPanda.Utils.wpAjax(e);f.done(function(){b.remove()})}})},initHideUserPosts:function(){$(document).on("click",".hide-user-from-feed",function(){var a=confirm("Are you sure?");if(a===!0){var b=$(this),c=b.attr("data-id"),d={action:"admin_hide_user_posts",user_id:c},e=BoredPanda.Utils.wpAjax(d);e.done(function(){b.remove()})}})},initMarkReshared:function(){$(document).on("click",".admin-mark-reshared-post",function(){var a=confirm("Are you sure?");if(a===!0){var b=$(this),c=b.attr("data-id"),d={action:"admin_mark_reshared_post",post_id:c},e=BoredPanda.Utils.wpAjax(d);e.done(function(a){a.success?(alert("Success!"),b.css("color","black")):alert("Failed, please try again")})}})},initAddBonus:function(){$(document).on("click",".change-post-bonus",function(){var a=$(this),b=a.attr("data-id"),c=$(".change-post-bonus-type[data-id="+b+"]").val(),d="custom"===c?$(".custom-bonus[data-id="+b+"]").val():$(".fixed-bonus[data-id="+b+"]").val(),e={action:"admin_add_bonus",post_id:b,bonus_type:c,fixed_bonus:d};a.html("Updating...");var f=BoredPanda.Utils.wpAjax(e);f.done(function(){a.html("Update")})}),$(document).on("click",".change-interview-bonus",function(){var a=$(this),b=a.attr("data-id"),c=$(".change-inverview-bonus-type[data-id="+b+"]").val(),d={action:"admin_add_interview_bonus",post_id:b,bonus_type:"interview",fixed_bonus:c};a.html("Updating...");var e=BoredPanda.Utils.wpAjax(d);e.done(function(){a.html("Update")})}),$(document).on("click",".add-admin-bonus",function(){var a=$(this),b=a.attr("data-id"),c={action:"admin_add_admin_bonus",post_id:b,bonus_type:"admin-bonus",checked:$(".admin-bonus-checkbox[data-id="+b+"]").is(":checked")};a.html("Updating...");var d=BoredPanda.Utils.wpAjax(c);d.done(function(){a.html("Update")})}),$(document).on("change",".change-post-bonus-type",function(){var a=$(this),b=a.attr("data-id");"fixed"===a.val()?$(".fixed-bonus[data-id="+b+"]").show():$(".fixed-bonus[data-id="+b+"]").hide(),"custom"===a.val()?$(".custom-bonus[data-id="+b+"]").show():$(".custom-bonus[data-id="+b+"]").hide()})},initChangeOpenListMaker:function(){$(document).on("click",".change-open-list-maker",function(){var a=$(this),b=a.attr("data-id"),c=a.attr("data-key"),d=$(".open-list-maker-"+c+"[data-id="+b+"]").val(),e={action:"admin_change_open_list_maker",meta_key:"open-list-maker-author-"+c,post_id:b,user_id:d};a.html("Updating...");var f=BoredPanda.Utils.wpAjax(e);f.done(function(){a.html("Update")})})},initLockOpenList:function(){$(document).on("click",".lock-open-list",function(){var a=$(this),b=a.attr("data-id"),c=a.attr("data-value"),d={action:"admin_change_open_list_state",post_id:b,value:c},e=BoredPanda.Utils.wpAjax(d);e.done(function(){a.remove()})})},initMarkNSFWPost:function(){$(document).on("click",".mark-nsfw-post",function(){var a=$(this),b=a.attr("data-id"),c=a.attr("data-value"),d={action:"admin_mark_nsfw_post",post_id:b,value:c},e=BoredPanda.Utils.wpAjax(d);e.done(function(){a.remove()})})},initExcludeFBAd:function(){$(document).on("click",".mark-fb-ignored",function(){var a=$(this),b=a.attr("data-id"),c=a.attr("data-value"),d={action:"admin_mark_fb_ignored",post_id:b,value:c},e=BoredPanda.Utils.wpAjax(d);e.done(function(){a.text("")})})},initMarkViralPost:function(){$(document).on("click",".mark-viral-post",function(){var a=$(this),b=a.attr("data-id"),c=a.attr("data-value"),d={action:"admin_mark_viral_post",post_id:b,value:c},e=BoredPanda.Utils.wpAjax(d);e.done(function(){a.remove()})})},initFeedPostPositionChange:function(){$(document).on("click",".post-feed-position a",function(){var a=$(this),b=a.attr("data-post-id"),c=a.attr("data-value"),d={action:"admin_feed_change_position",post_id:b,value:c},e=BoredPanda.Utils.wpAjax(d);e.success(function(){var b=a.closest("article.post");"up"===c?b.prevAll("article.post").first().before(b):b.nextAll("article.post").first().after(b)})})},initSubmissionWatermark:function(){$(document).on("click",".post-submission-add-watermark",function(){if(confirm("Are you sure?")){var a=$(this),b=a.attr("data-id"),c=a.attr("data-value"),d={action:"admin_submission_change_watermark",post_id:b,value:c},e=BoredPanda.Utils.wpAjax(d);e.done(function(b){if(b.success===!0){var c=a.closest(".open-list-item").find(".open-list-media-container img");c.attr("src",c.attr("src")+"?"+(new Date).getTime())}else alert(b.error)})}})},initSubmissionPointsChange:function(){$(document).on("click",".set-submission-points",function(){var a=$(this),b=a.attr("data-id"),c=a.parent().find(".set-submission-points-field").val(),d={action:"admin_submission_change_points",post_id:b,value:c},e=BoredPanda.Utils.wpAjax(d);e.done(function(b){if(b.success===!0){var d=a.closest(".open-list-item").find(".open-list-footer .vote-panel .points").data("points");d+=parseInt(c),a.closest(".open-list-item").find(".open-list-footer .vote-panel .points").text(d+" points")}else alert(b.error)})})},initExportVotes:function(){$(document).on("click",".admin-export-votes",function(){if(BoredPanda.Config.isStaffMember){var a="";if($(".open-list-item .open-list-footer .vote-panel .points").each(function(b,c){var d=parseInt($(c).data("points")),e=$(c).closest(".open-list-item").data("submission-id");void 0!==d&&(a+=e+","+d+"\n")}),a){var b=document.createElement("a"),c="text/csv",d="BoredPanda_Posts_Votes.csv";if(navigator.msSaveBlob)return navigator.msSaveBlob(new Blob([content],{type:c}),d);if("download"in b)return b.href="data:"+c+","+encodeURIComponent(a),b.setAttribute("download",d),document.body.appendChild(b),b.click(),document.body.removeChild(b),!0;var e=document.createElement("iframe");return document.body.appendChild(e),e.src="data:"+c+","+encodeURIComponent(a),setTimeout(function(){document.body.removeChild(e)},333),!0}alert("No data to export")}})},initImportVotes:function(){$(document).on("click",".admin-import-offline-votes",function(){if(BoredPanda.Config.isStaffMember){var a=confirm("Are you sure want to import votes?");if(a!==!1){var b=$(this).parent().find(".offline-voting-import")[0].files,c=b[0],d=new FileReader;d.onload=function(a){return function(a){var b={action:"admin_import_offline_votes",data:a.target.result},c=BoredPanda.Utils.wpAjax(b);c.done(function(a){a.success===!0?window.location.reload():alert(a.error)})}}(c),d.readAsText(c)}}})},initOrderOfflineVotes:function(){$(document).on("click",".admin-order-offline-votes",function(){if(BoredPanda.Config.isStaffMember){var a=$(".open-list-item"),b=function(a,b){var c=$(a).find(".open-list-footer .vote-panel .points").data("points"),d=$(b).find(".open-list-footer .vote-panel .points").data("points");return c>d?-1:d>c?1:0};a.sort(b);for(var c=0;c<a.length;c++){var d=$(a[c]).find(".open-list-header a").text().match(/#(\d+) /);$(a[c]).find(".open-list-header a").text($(a[c]).find(".open-list-header a").text().replace(d[1],c+1)),a[c].parentNode.appendChild(a[c])}}})},initChangeFacebookPage:function(){$(document).on("change",".facebook-url-page-select",function(){if(BoredPanda.Config.isStaffMember){var a=$(this),b=a.parent().find(".facebook-shareable-url-for-staff"),c=b.data("post-url"),d="";a.val()&&(d=c+"?utm_source="+a.val()+"&utm_medium=link&utm_campaign=BPFacebook"),b.val(d),b.click()}})}},$(document).ready(function(){BoredPanda.Config.isStaffMember&&BoredPanda.Admin.init()})}(),function(){"use strict";window.BoredPanda=window.BoredPanda||{},BoredPanda.Slider={bindDrag:function(){$(".cd-boredpanda-image-container").each(function(){var a=$(this);BoredPanda.Slider.drag(a.find(".cd-boredpanda-handle"),a.find(".cd-boredpanda-resize-img"),a)})},drag:function(a,b,c){c.on("mouseover touchstart",function(d){a.hide(),b.addClass("boredpanda-resizable");var e=a.outerWidth(),f=c.offset().left,g=c.outerWidth(),h=f-e/2,i=f+g-e/2;c.on("mousemove mousedown touchmove touchstart",function(a){"mousedown"===a.type&&a.preventDefault();var d=0;d="touchstart"===a.type||"touchmove"===a.type?a.originalEvent.touches[0].pageX-e/2:a.pageX-e/2,h>d?d=h:d>i&&(d=i);var j=100*(d+e/2-f)/g+"%";$(".draggable").css("left",j).on("mouseleave",function(){b.removeClass("boredpanda-resizable")}),c.find(".boredpanda-resizable").css("width",j)}).on("mouseleave touchend",function(){b.removeClass("boredpanda-resizable")}),d.stopPropagation()}).on("mouseleave touchend",function(){b.removeClass("boredpanda-resizable")})}},$(document).ready(function(){BoredPanda.Slider.bindDrag()})}(),function(){"use strict";window.BoredPanda=window.BoredPanda||{},BoredPanda.Flipper={bind:function(){$(".cd-boredpanda-image-container-flip").flip({trigger:"click",front:".boredpanda-image-front",back:".boredpanda-image-back"})}},$(document).ready(function(){BoredPanda.Flipper.bind()})}(),function(){"use strict";window.BoredPanda=window.BoredPanda||{},BoredPanda.SuccessStory={iteration:-1,changeDelayMs:3e3,points:{mobile:[{x:183.9,y:360,text:"Featured on",textBold:"Home Page"},{x:613.9,y:320.4,text:"Shared on BP",textBold:"Facebook page"},{x:1096.5,y:267.7,text:"Worldwide",textBold:"sensation"}],desktop:[{x:157,y:368.3,text:"Submitted to",textBold:"Bored Panda"},{x:404.6,y:346.1,text:"Approved by",textBold:"Moderators"},{x:722.6,y:289.8,text:"Featured on",textBold:"Home Page"},{x:914.4,y:198,text:"Shared on BP",textBold:"Facebook page"},{x:1169,y:102.3,text:"Worldwide",textBold:"sensation"}]},init:function(){var a=this,b=document.getElementById("canvas-bottom"),c=b.getContext("2d");c.scale(2,2),a.drawBottom(c),$(window).resize(function(){a.drawBottom(c)}),this.initRedirects(),this.initTracking(),this.resizeImages(),$(".tell-your-story").click(function(b){return b.preventDefault(),a.tellStory(),!1})},initTracking:function(){this.trackClick(".page-template-success-stories .top-promote a.tell-your-story","Success Story Page","Add Post Top"),this.trackClick(".page-template-success-stories .bottom-promote a.tell-your-story","Success Story Page","Add Post Bottom"),this.trackClick(".page-template-success-stories .story-item .description-block .author a, .page-template-success-stories .story-item .description-block .author-interview-link, .page-template-success-stories .story-item .image-block a","Success Story Page","Author post"),this.trackClick(".page-template-success-stories .story-item .description-block .article-reposts a","Success Story Page","External site")},trackClick:function(a,b,c){$(a).on("click",function(){BoredPanda.Tracking.trackEvent(b,c,"click")})},initRedirects:function(){BoredPanda.Config.isiPad()&&$(".app-store-ipad").attr("href","https://itunes.apple.com/app/apple-store/id1001593357?pt=117833574&ct=Success%20Story&mt=8"),BoredPanda.Config.isiPhone()&&$(".app-store-iphone").attr("href","https://itunes.apple.com/app/apple-store/id1001593357?pt=117833574&ct=Success%20Story&mt=8")},drawMobile:function(a,b){b=b||!1;var c=this,d=$(window).width(),e=1,f=0;1256>d&&(e=d/1256,f=1256-d),a.clearRect(0,0,1260,384),a.save(),a.beginPath(),a.moveTo(1256,384),a.lineTo(f,384),a.lineTo(f+68.2*e,365.7),a.lineTo(f+183.9*e,360),a.lineTo(f+400.2*e,319),a.lineTo(f+496.5*e,323.4),a.lineTo(f+565.5*e,315.7),a.lineTo(f+613.9*e,320.4),a.lineTo(f+766.2*e,268.4),a.lineTo(f+916.5*e,275.4),a.lineTo(f+1021.5*e,264),a.lineTo(f+1096.5*e,267.7),a.lineTo(f+1211.2*e,232),a.lineTo(f+1260*e,225),a.fillStyle="rgb(86, 184, 99)",a.fill(),a.beginPath(),a.moveTo(f,384),a.lineTo(f+68.2*e,365.7),a.lineTo(f+183.9*e,360),a.lineTo(f+400.2*e,319),a.lineTo(f+496.5*e,323.4),a.lineTo(f+565.5*e,315.7),a.lineTo(f+613.9*e,320.4),a.lineTo(f+766.2*e,268.4),a.lineTo(f+916.5*e,275.4),a.lineTo(f+1021.5*e,264),a.lineTo(f+1096.5*e,267.7),a.lineTo(f+1211.2*e,232),a.lineTo(f+1260*e,225),a.lineWidth=4,a.strokeStyle="rgb(253, 206, 49)",a.stroke(),this.drawPoints(a,f,e,!0),a.restore(),b||setTimeout(function(){c.draw(a),c.iteration++},this.changeDelayMs)},drawBottom:function(a){var b=1,c=0;a.clearRect(0,0,840,384),a.save(),a.beginPath(),a.moveTo(840,384),a.lineTo(c,384),a.lineTo(c+137*b,354),a.lineTo(c+206.3*b,300.7),a.lineTo(c+265.9*b,311.6),a.lineTo(c+357.1*b,287.8),a.lineTo(c+404.6*b,295.1),a.lineTo(c+465.4*b,270.7),a.lineTo(c+511*b,287.4),a.lineTo(c+548.3*b,271.5),a.lineTo(c+623.7*b,280.5),a.lineTo(c+679.5*b,243),a.lineTo(c+722.6*b,249.8),a.lineTo(c+799.2*b,181),a.lineTo(c+840*b,170),a.fillStyle="rgb(49, 52, 64)",a.fill(),a.beginPath(),a.moveTo(c,384),a.lineTo(c+137*b,354),a.lineTo(c+206.3*b,300.7),a.lineTo(c+265.9*b,311.6),a.lineTo(c+357.1*b,287.8),a.lineTo(c+404.6*b,295.1),a.lineTo(c+465.4*b,270.7),a.lineTo(c+511*b,287.4),a.lineTo(c+548.3*b,271.5),a.lineTo(c+623.7*b,280.5),a.lineTo(c+679.5*b,243),a.lineTo(c+722.6*b,249.8),a.lineTo(c+799.2*b,181),a.lineTo(c+840*b,170),a.lineWidth=4,a.strokeStyle="rgb(76, 79, 93)",a.stroke(),a.restore()},drawPoints:function(a,b,c,d){d=d||!1;var e,f;d?(this.iteration=this.iteration>2?0:this.iteration,f=this.points.mobile.length):(this.iteration=this.iteration>4?0:this.iteration,f=this.points.desktop.length);for(var g=0;f>g;g++)e=d?this.points.mobile[g]:this.points.desktop[g],a.beginPath(),a.arc(b+e.x*c,e.y,8,0,2*Math.PI),a.fillStyle="rgb(253, 206, 49)",a.fill(),a.lineWidth=2,a.strokeStyle="rgb(255, 255, 255)",a.stroke()},resizeImages:function(){var a=function(){var a=$(".success-story-image");a.height(a.width())};BoredPanda.Config.windowWidth<=980&&($(window).on("resize",a),a())},tellStory:function(){var a=$(".tell-your-story").attr("href");return BoredPanda.Config.isLoggedIn?void(window.location.href=a):(BoredPanda.Login.form.closeable(!0),void BoredPanda.Login.form.show(a,void 0,"Please log in to tell your story",this.tellStoryAfterLogin))},tellStoryAfterLogin:function(){BoredPanda.Tracking.trackAddPostFormLoggedIn(),window.location.href=$(".tell-your-story").attr("href")}},$(document).ready(function(){BoredPanda.Config.isSuccessStoriesPage&&BoredPanda.SuccessStory.init()})}(),function(){"use strict";window.BoredPanda=window.BoredPanda||{},BoredPanda.Campaigns={isEnabled:!0,queryString:null,campaignCookieName:"bpCampaigns",init:function(){this.isEnabled&&!BoredPanda.Config.isStaffMember&&(this.queryString=this.getQueryString(),this.initCampaignTracking(),BoredPanda.Config.isLoggedIn&&this.saveCampaignsData())},saveCampaignsData:function(){var a=this.getCampaigns();if(a.data.length>0){var b={action:"save_campaigns_data",data:a.data};BoredPanda.Utils.wpAjax(b),a.data=[],this.setCampaigns(a)}},initCampaignTracking:function(){if(void 0!==this.queryString.utm_source&&"bp_"===this.queryString.utm_source.substring(0,3)){var a={utm_source:this.queryString.utm_source,utm_medium:this.queryString.utm_medium,utm_campaign:this.queryString.utm_campaign,utm_content:this.queryString.utm_content,utm_term:this.queryString.utm_term,timestamp:new Date},b=this.getCampaigns();b.data.push(a),this.setCampaigns(b)}},getCampaigns:function(){var a=$.cookie(this.campaignCookieName);return void 0===a?{data:[]}:JSON.parse(a)},setCampaigns:function(a){$.cookie(this.campaignCookieName,JSON.stringify(a),{expires:60,path:"/"})},getQueryString:function(){for(var a,b={},c=window.location.search.substring(1),d=c.split("&"),e=0;e<d.length;e++){var f=d[e].split("=");"undefined"==typeof b[f[0]]?b[f[0]]=decodeURIComponent(f[1]):"string"==typeof b[f[0]]?(a=[b[f[0]],decodeURIComponent(f[1])],b[f[0]]=a):b[f[0]].push(decodeURIComponent(f[1]))}return b}},BoredPanda.UtmCampaigns={init:function(){BoredPanda.UtmCampaigns.toggleOutbrains(),BoredPanda.UtmCampaigns.toggleMobileFixedFooter(),BoredPanda.UtmCampaigns.toggleAds()},isCampaign:function(){return!1},toggleOutbrains:function(){var a=$(".outbrain-widget");if(a.length>0)if(this.isCampaign())a.append('<div id="div-gpt-ad-1474396493730-0"><script>googletag.cmd.push(function() { googletag.display("div-gpt-ad-1474396493730-0"); });</script></div>');else{var b=Math.floor(10*Math.random())+1;console.log("Random variation: "+b),1===b?a.append('<div id="div-gpt-ad-1476712313729-0"><script>googletag.cmd.push(function() { googletag.display("div-gpt-ad-1476712313729-0"); });</script></div>'):$.ajax({url:"https://widgets.outbrain.com/outbrain.js",dataType:"script",async:!0})}},toggleMobileFixedFooter:function(){this.isCampaign()&&($(".fixed-bottom-overlay.socialbar").attr("style","display:none!important"),$(".fixed-bottom-overlay.newsletterbar").attr("style","display:none!important"))},toggleAds:function(){this.isCampaign()&&BoredPanda.Config.isMobileWidth&&$(".post-mobile-ad-within-content.utm-campaign-ad").show()}},$(document).ready(function(){BoredPanda.Campaigns.init()})}(),function(){"use strict";window.BoredPanda=window.BoredPanda||{};var a=BoredPanda.Challenges=BoredPanda.Challenges||{};a.View={init:function(){var a=this;$(document).on("click",".create-challenge-modal",function(b){var c=$(this).data("challenge-type");if(!BoredPanda.Config.isLoggedIn)return BoredPanda.Login.form.closeable(!0),$.cookie("challenge-create-type",c,{expires:60,path:"/"}),void BoredPanda.Login.form.show(void 0,void 0,"Please log in to create challenge",a.handleLogin);b.preventDefault();var d=$("#add-challenge-modal");return a.customizeForm(c),d.modal(),!1}),$("#add-challenge-modal .add-challenge-dialog").click(function(a){a.target===this&&$("#add-challenge-modal").modal("hide")}),$(".top-menu-mobile").change(function(){window.location.href=$(this).val()}),a.handleLogin=function(){$("#auth-modal").modal("hide");var b=$.cookie("challenge-create-type")?$.cookie("challenge-create-type"):"default";a.customizeForm(b),$.removeCookie("challenge-create-type"),$("#add-challenge-modal").modal()};var b=function(){var a=$(".image-block .challenge-image");$(window).width()<=980?a.height(a.width()):a.height(420)};$(window).on("resize",b),b()},customizeForm:function(a){"text"===a?(BoredPanda.AddPost.viewModel.post.challenge.type("text"),BoredPanda.AddPost.viewModel.post.challenge.descriptionPlaceholder("Description (optional)"),BoredPanda.AddPost.viewModel.post.challenge.imagePlaceholder("Upload Original Image (optional)"),BoredPanda.AddPost.viewModel.tooltips.title.type("text"),BoredPanda.AddPost.viewModel.tooltips.description.showTooltip(!1)):"meme"===a?(BoredPanda.AddPost.viewModel.post.challenge.type("meme"),BoredPanda.AddPost.viewModel.post.challenge.descriptionPlaceholder("Description (optional)"),BoredPanda.AddPost.viewModel.post.challenge.imagePlaceholder("Upload Original Image"),BoredPanda.AddPost.viewModel.tooltips.title.type("meme"),BoredPanda.AddPost.viewModel.tooltips.description.showTooltip(!1)):"photoshop"===a?(BoredPanda.AddPost.viewModel.post.challenge.type("photoshop"),BoredPanda.AddPost.viewModel.post.challenge.descriptionPlaceholder("Description"),BoredPanda.AddPost.viewModel.post.challenge.imagePlaceholder("Upload Original Image (optional)"),BoredPanda.AddPost.viewModel.tooltips.title.type("photoshop"),BoredPanda.AddPost.viewModel.tooltips.description.type("photoshop"),BoredPanda.AddPost.viewModel.tooltips.description.showTooltip(!0)):"photography"===a?(BoredPanda.AddPost.viewModel.post.challenge.type("photography"),BoredPanda.AddPost.viewModel.post.challenge.descriptionPlaceholder("Description"),BoredPanda.AddPost.viewModel.post.challenge.imagePlaceholder("Upload Original Image (optional)"),BoredPanda.AddPost.viewModel.tooltips.title.type("photography"),BoredPanda.AddPost.viewModel.tooltips.description.type("photography"),BoredPanda.AddPost.viewModel.tooltips.description.showTooltip(!0)):(BoredPanda.AddPost.viewModel.post.challenge.type("default"),BoredPanda.AddPost.viewModel.post.challenge.descriptionPlaceholder("Description"),BoredPanda.AddPost.viewModel.post.challenge.imagePlaceholder("Upload Original Image (optional)"),BoredPanda.AddPost.viewModel.tooltips.title.type("default"),BoredPanda.AddPost.viewModel.tooltips.description.type("default"),BoredPanda.AddPost.viewModel.tooltips.description.showTooltip(!0))},initEditForm:function(){"undefined"!=typeof BoredPanda.Config.postJson&&(BoredPanda.AddPost.viewModel.post.postId(BoredPanda.Config.postJson.postId),BoredPanda.AddPost.viewModel.post.challenge.type(BoredPanda.Config.postJson.challenge.type),BoredPanda.AddPost.viewModel.post.title(BoredPanda.Config.postJson.title),BoredPanda.AddPost.viewModel.post.description(BoredPanda.Config.postJson.description),BoredPanda.AddPost.viewModel.post.permalink(BoredPanda.Config.postJson.permalink),BoredPanda.Config.postJson.descriptionChallengeImage&&(BoredPanda.AddPost.viewModel.challengeImageSrc(BoredPanda.Config.postJson.descriptionChallengeImage),BoredPanda.AddPost.viewModel.imageUploaded(!0)),BoredPanda.Config.postJson.challenge.source&&(BoredPanda.AddPost.viewModel.post.challenge.source(BoredPanda.Config.postJson.challenge.source),BoredPanda.AddPost.viewModel.post.challenge.showSource(!0)),this.customizeForm(BoredPanda.Config.postJson.challenge.type),$("#add-challenge-modal").find(".create").hide(),$("#add-challenge-modal").find(".edit").show(),$(".create-challenge-modal").data("challenge-type",BoredPanda.Config.postJson.challenge.type))}},$(document).ready(function(){a.View.init(),$("body.page-template-challenge-landing").length>0?(BoredPanda.AddPost.viewModel=new BoredPanda.AddPost.ViewModel,ko.applyBindings(BoredPanda.AddPost.viewModel,$("body.page-template-challenge-landing main")[0])):$("body.single-open-list-post #add-challenge-modal").length>0?(BoredPanda.AddPost.viewModel=new BoredPanda.AddPost.ViewModel,ko.applyBindings(BoredPanda.AddPost.viewModel,$("body.single-open-list-post #add-challenge-modal")[0]),a.View.initEditForm()):$(".challenge-ko").length>0&&(BoredPanda.AddPost.viewModel=new BoredPanda.AddPost.ViewModel,ko.applyBindings(BoredPanda.AddPost.viewModel,$(".challenge-ko")[0]),a.View.customizeForm(BoredPanda.Utils.getParameterByName("type")),"undefined"!=typeof BoredPanda.Config.postJson&&($(".challenge-ko").find(".create").hide(),$(".challenge-ko").find(".edit").show(),a.View.initEditForm()))})}(),function(){"use strict";window.BoredPanda=window.BoredPanda||{},BoredPanda.Video={init:function(){BoredPanda.Config.isTabletWidth||this.scrollAutoplay(),this.videoClick(),this.unmuteClick(),this.videoPlayClick(),this.loadSubtitles(),this.prerollAd(),this.trackVideo()},scrollAutoplay:function(){var a,b=this,c=$(window).height(),d=$(".video-scrollable.autoplay-muted").height();$(window).scroll(function(){a&&window.clearTimeout(a),a=window.setTimeout(function(){$(".video-scrollable.autoplay-muted").each(function(){this.addEventListener("timeupdate",function(){this.currentTime>=5&&$(this).hasClass("not-tracked")&&(b.trackVideo($(this)),$(this).removeClass("not-tracked"))}),$(window).scrollTop()<$(this).offset().top&&$(window).scrollTop()>$(this).offset().top-c+d?this.paused&&($(this).parent().find(".video-play-icon").hide(),this.play()):this.pause()})},100)}),$(window).scroll()},videoClick:function(){$("body").on("click",".video-scrollable",function(a){a.preventDefault(),$(this).hasClass("autoplay-muted")?($(this).removeClass("autoplay-muted"),$(this).parent().find(".unmute-video").hide(),$(this).parent().find(".video-play-icon").hide(),$(this).prop("muted",!1),$(this).prop("controls",!0),this.paused===!0&&this.play()):this.paused===!1?this.pause():this.play()})},unmuteClick:function(){$("body").on("click",".unmute-video",function(){var a=$(this).parent().find("video");a.click()})},videoPlayClick:function(){$("body").on("click",".video-play-icon",function(){var a=$(this).parent().find("video");a.click(),$(this).hide()})},trackVideo:function(){var a=this;!function(a,b,c,d,e,f,g){a.fbq||(e=a.fbq=function(){e.callMethod?e.callMethod.apply(e,arguments):e.queue.push(arguments)},a._fbq||(a._fbq=e),e.push=e,e.loaded=!0,e.version="2.0",e.queue=[],f=b.createElement(c),f.async=!0,f.src=d,g=b.getElementsByTagName(c)[0],g.parentNode.insertBefore(f,g))}(window,document,"script","https://connect.facebook.net/en_US/fbevents.js"),fbq("init","586850071481240"),$(".bp-video-container .video-block video.track-video:visible").each(function(){var b=this,c=$(b).find("source:first").attr("src"),d=window.location.href!==window.parent.location.href?window.parent.location.href:window.location.href,e=BoredPanda.Utils.getParameterByName("utm_campaign",d);a.sendBatch("video_impression",BoredPanda.Config.postId,c,e),$(b).click(function(){$(b).hasClass("not-tracked")&&(BoredPanda.Tracking.trackEvent("Video Clicks",BoredPanda.Config.postId,c),fbq("track","ClickVideo",{post_id:BoredPanda.Config.postId,video_src:c,utm_campaign:e}),a.sendBatch("video_click",BoredPanda.Config.postId,c,e),$(b).removeClass("not-tracked"))}),b.addEventListener("timeupdate",function(){!this.duration||this.currentTime<=this.duration/2||!$(this).hasClass("mid-not-tracked")||(BoredPanda.Tracking.trackEvent("Video Mid Reached",BoredPanda.Config.postId,c),fbq("track","VideoMidWatched",{post_id:BoredPanda.Config.postId,video_src:c,utm_campaign:e}),a.sendBatch("video_mid_watched",BoredPanda.Config.postId,c,e),$(b).removeClass("mid-not-tracked"))}),b.addEventListener("timeupdate",function(){!this.duration||this.currentTime<=5||!$(this).hasClass("view-not-tracked")||(BoredPanda.Tracking.trackEvent("Video Views",BoredPanda.Config.postId,c),fbq("track","VideoView",{post_id:BoredPanda.Config.postId,video_src:c,utm_campaign:e}),a.sendBatch("video_view",BoredPanda.Config.postId,c,e),$(b).removeClass("view-not-tracked"))}),b.addEventListener("ended",function(){$(this).hasClass("end-not-tracked")&&(BoredPanda.Tracking.trackEvent("Video Ended",BoredPanda.Config.postId,c),fbq("track","VideoEnded",{post_id:BoredPanda.Config.postId,video_src:c,utm_campaign:e}),a.sendBatch("video_ended",BoredPanda.Config.postId,c,e),$(b).removeClass("end-not-tracked"))})})},sendBatch:function(a,b,c,d){var e=[{name:"post_id",value:b},{name:"video_source",value:c},{name:"utm_campaign",value:d}],f=[{type:"bp_user",value:BoredPanda.Config.userId},{type:"bp_web_cookie",value:this.generateGuestUserId()}],g={topic:a,identifiers:f,properties:e};$.ajax({contentType:"application/json",data:JSON.stringify([g]),dataType:"json",type:"POST",url:BoredPanda.Config.gatewayUrl+"/event/submit_batch"})},generateGuestUserId:function(){var a=Math.ceil(Math.random()*(void 0!==Number.MAX_SAFE_INTEGER?Number.MAX_SAFE_INTEGER:99999999)),b=new Date;b=b.getTime();var c=a.toString()+b.toString();return c},parseTimestamp:function(a){var b=a.match(/^(?:([0-9]+):)?([0-5][0-9]):([0-5][0-9](?:[.,][0-9]{0,3})?)/);if(null==b)throw"Invalid timestamp format: "+a;var c=parseInt(b[1]||"0",10),d=parseInt(b[2],10),e=parseFloat(b[3].replace(",","."));return e+60*d+3600*c},parseSubtitles:function(a){for(var b=a.trim().split(/[\n]/).map(function(a){return a.trim()}),c=[],d=null,e=null,f=null,g=0;g<b.length;g++)if(b[g].indexOf("-->")>=0){var h=b[g].split(/[ \t]+-->[ \t]+/);if(2!=h.length)throw'Error when splitting "-->": '+b[g];d=this.parseTimestamp(h[0]),e=this.parseTimestamp(h[1])}else if(""==b[g]){if(d&&e){var i=new VTTCue(d,e,f);c.push(i),d=null,e=null,f=null}}else d&&e&&(null==f?f=b[g]:f+="\n"+b[g]);if(d&&e){var i=new VTTCue(d,e,f);c.push(i)}return c},loadSubtitles:function(){var a=this,b=BoredPanda.Utils.getParameterByName("subtitles");b&&$.get(b,function(b){var c=$(".bp-video-container .video-block video").get(0),d=c.addTextTrack("subtitles","English","en");d.mode="showing",a.parseSubtitles(b).map(function(a){d.addCue(a)})})},prerollAd:function(){$(".bp-video-container .video-block video.preroll-ad:visible").each(function(){function a(a){console.log(a.getError()),"undefined"!=typeof i&&i.destroy()}function b(b){var f=new google.ima.AdsRenderingSettings;f.restoreCustomPlaybackStateOnAdBreakComplete=!0,i=b.getAdsManager(g,f),i.addEventListener(google.ima.AdErrorEvent.Type.AD_ERROR,a),i.addEventListener(google.ima.AdEvent.Type.CONTENT_PAUSE_REQUESTED,c),i.addEventListener(google.ima.AdEvent.Type.CONTENT_RESUME_REQUESTED,d),i.addEventListener(google.ima.AdEvent.Type.LOADED,e)}function c(){$(g).parent().find(".adContainer").show(),g.pause(),$(g).parent().find(".overlay").hide()}function d(){$(g).parent().find(".overlay").show(),g.play(),$(g).parent().find(".adContainer").hide(),$(g).parent().find(".overlay").hide(),$(g).prop("controls",!0)}function e(a){var b=a.getAd();b.isLinear()||($(g).parent().find(".adContainer").css("bottom","30px"),$(g).parent().find(".overlay").hide(),$(g).prop("controls",!0),g.play())}function f(){if($(g).hasClass("preroll-ad")){var a=$(g).width(),b=$(g).height();$(g).removeClass("preroll-ad"),$(g).parent().find(".overlay").show(),$(g).parent().find(".video-play-icon").hide(),g.load();try{h.initialize(),i.init(a,b,google.ima.ViewMode.NORMAL),i.start()}catch(c){console.log(c),g.play(),$(g).parent().find(".adContainer").hide(),$(g).parent().find(".overlay").hide(),$(g).prop("controls",!0)}}}var g=this;$(g).on("click",f),$(g).parent().append('<span class="adContainer"></span>');var h=new google.ima.AdDisplayContainer($(g).parent().find(".adContainer").get(0),g);h.initialize();var i,j=new google.ima.AdsLoader(h);j.addEventListener(google.ima.AdsManagerLoadedEvent.Type.ADS_MANAGER_LOADED,b,!1),j.addEventListener(google.ima.AdErrorEvent.Type.AD_ERROR,a,!1);var k=!1;g.addEventListener("loadedmetadata",function(){if(!k){var a=new google.ima.AdsRequest;"1"===BoredPanda.Utils.getParameterByName("midroll_tag")?BoredPanda.Config.isMobileWidth?a.adTagUrl="https://pubads.g.doubleclick.net/gampad/live/ads?sz=400x300%7C640x480&iu=/46481815/BP.com_mobile_Long_video_Pre-roll&impl=s&gdfp_req=1&env=vp&output=vast&unviewed_position_start=1&url="+window.location.href+"&description_url=http%3A%2F%2Fwww.boredpanda.com&correlator="+Math.floor(Date.now()/1e3):a.adTagUrl="https://pubads.g.doubleclick.net/gampad/live/ads?sz=400x300%7C640x480&iu=/46481815/BP.com__desktop_Long_video_Pre-roll&impl=s&gdfp_req=1&env=vp&output=vast&unviewed_position_start=1&url="+window.location.href+"&description_url=http%3A%2F%2Fwww.boredpanda.com&correlator="+Math.floor(Date.now()/1e3):"1"===BoredPanda.Utils.getParameterByName("adsense_test_tag")||$(g).hasClass("adsense_test_tag")?a.adTagUrl="https://googleads.g.doubleclick.net/pagead/ads?ad_type=video&client=ca-video-pub-4968145218643279&videoad_start_delay=0&description_url=http%3A%2F%2Fwww.google.com&max_ad_duration=40000&adtest=on":"1"===BoredPanda.Utils.getParameterByName("test_tag")?a.adTagUrl="https://pubads.g.doubleclick.net/gampad/live/ads?sz=400x300%7C640x480&iu=/46481815/Video_test_unit&impl=s&gdfp_req=1&env=vp&output=vast&unviewed_position_start=1&url="+window.location.href+"&description_url=http%3A%2F%2Fwww.boredpanda.com&correlator="+Math.floor(Date.now()/1e3):"1"===BoredPanda.Utils.getParameterByName("ia_tag")?a.adTagUrl="https://pubads.g.doubleclick.net/gampad/live/ads?sz=400x300%7C640x480&iu=/46481815/Bp.com_IA_in-stream_Video&impl=s&gdfp_req=1&env=vp&output=vast&unviewed_position_start=1&url="+window.location.href+"&description_url=http%3A%2F%2Fwww.boredpanda.com&correlator="+Math.floor(Date.now()/1e3):"2"===BoredPanda.Utils.getParameterByName("ia_tag")?a.adTagUrl="https://an.facebook.com/v1/instream/vast.xml?placementid=676478139214125_696732913855314&pageurl="+window.location.href:"3"===BoredPanda.Utils.getParameterByName("ia_tag")?a.adTagUrl="https://an.facebook.com/v1/instream/vast.xml?placementid=676478139214125_704699736391965&pageurl="+window.location.href:"4"===BoredPanda.Utils.getParameterByName("ia_tag")?a.adTagUrl="https://an.facebook.com/v1/instream/vast.xml?placementid=676478139214125_720071904854748&pageurl="+window.location.href:"es"===BoredPanda.Config.bpVersion?BoredPanda.Config.isMobileWidth?a.adTagUrl="https://pubads.g.doubleclick.net/gampad/live/ads?sz=400x300%7C640x480&iu=/46481815/Bp.es_mobile_in-stream_Video&impl=s&gdfp_req=1&env=vp&output=vast&unviewed_position_start=1&url="+window.location.href+"&description_url=http%3A%2F%2Fwww.boredpanda.com&correlator="+Math.floor(Date.now()/1e3):a.adTagUrl="https://pubads.g.doubleclick.net/gampad/live/ads?sz=400x300%7C640x480&iu=/46481815/Bp.es_desktop_in-stream_Video&impl=s&gdfp_req=1&env=vp&output=vast&unviewed_position_start=1&url="+window.location.href+"&description_url=http%3A%2F%2Fwww.boredpanda.com&correlator="+Math.floor(Date.now()/1e3):BoredPanda.Config.bpPartner&&"es"!==BoredPanda.Config.bpVersion?BoredPanda.Config.isMobileWidth?a.adTagUrl="https://pubads.g.doubleclick.net/gampad/live/ads?sz=400x300%7C640x480&iu=/46481815/SetB_Bp.com_mobile_in-stream_Video&impl=s&gdfp_req=1&env=vp&output=vast&unviewed_position_start=1&url="+window.location.href+"&description_url=http%3A%2F%2Fwww.boredpanda.com&correlator="+Math.floor(Date.now()/1e3):a.adTagUrl="https://pubads.g.doubleclick.net/gampad/live/ads?sz=400x300%7C640x480&iu=/46481815/SetB_Bp.com_desktop_in-stream_Video&impl=s&gdfp_req=1&env=vp&output=vast&unviewed_position_start=1&url="+window.location.href+"&description_url=http%3A%2F%2Fwww.boredpanda.com&correlator="+Math.floor(Date.now()/1e3):BoredPanda.Config.isMobileWidth?a.adTagUrl="https://pubads.g.doubleclick.net/gampad/live/ads?sz=400x300%7C640x480&iu=/46481815/Bp.com_mobile_in-stream_Video&impl=s&gdfp_req=1&env=vp&output=vast&unviewed_position_start=1&url="+window.location.href+"&description_url=http%3A%2F%2Fwww.boredpanda.com&correlator="+Math.floor(Date.now()/1e3):a.adTagUrl="https://pubads.g.doubleclick.net/gampad/live/ads?sz=400x300%7C640x480&iu=/46481815/Bp.com_desktop_in-stream_Video&impl=s&gdfp_req=1&env=vp&output=vast&unviewed_position_start=1&url="+window.location.href+"&description_url=http%3A%2F%2Fwww.boredpanda.com&correlator="+Math.floor(Date.now()/1e3),
a.linearAdSlotWidth=$(g).width(),a.linearAdSlotHeight=$(g).height(),a.nonLinearAdSlotWidth=$(g).width(),a.nonLinearAdSlotHeight=$(g).height(),j.requestAds(a),k=!0}})})},midrollAd:function(){$(".bp-video-container .video-block video.midroll-ad:visible").each(function(){function a(a){console.log(a.getError()),"undefined"!=typeof i&&i.destroy()}function b(b){var f=new google.ima.AdsRenderingSettings;f.restoreCustomPlaybackStateOnAdBreakComplete=!0,i=b.getAdsManager(g,f),i.addEventListener(google.ima.AdErrorEvent.Type.AD_ERROR,a),i.addEventListener(google.ima.AdEvent.Type.CONTENT_PAUSE_REQUESTED,c),i.addEventListener(google.ima.AdEvent.Type.CONTENT_RESUME_REQUESTED,d),i.addEventListener(google.ima.AdEvent.Type.LOADED,e)}function c(){$(g).parent().find(".adContainer").show(),g.pause(),$(g).parent().find(".overlay").hide()}function d(){$(g).parent().find(".overlay").show(),g.play(),$(g).parent().find(".adContainer").hide(),$(g).parent().find(".adContainer").css("bottom","0"),$(g).parent().find(".overlay").hide(),$(g).prop("controls",!0)}function e(a){var b=a.getAd();b.isLinear()||($(g).parent().find(".adContainer").css("bottom","30px"),$(g).parent().find(".overlay").hide(),$(g).prop("controls",!0),g.play())}function f(){if($(g).hasClass("midroll-ad")){var a=$(g).width(),b=$(g).height();$(g).removeClass("midroll-ad"),$(g).parent().find(".overlay").show(),$(g).parent().find(".video-play-icon").hide();try{d(),h.initialize(),$(g).parent().find(".adContainer > div").each(function(a,b){"0px"!==$(b).css("width")&&$(b).remove()}),i.init(a,b,google.ima.ViewMode.NORMAL),i.start()}catch(c){console.log(c),g.play(),$(g).parent().find(".adContainer").hide(),$(g).parent().find(".overlay").hide(),$(g).prop("controls",!0)}}}var g=this;0===$(g).parent().find(".adContainer").length&&$(g).parent().append('<span class="adContainer"></span>');var h=new google.ima.AdDisplayContainer($(g).parent().find(".adContainer").get(0),g);h.initialize();var i,j=new google.ima.AdsLoader(h);j.addEventListener(google.ima.AdsManagerLoadedEvent.Type.ADS_MANAGER_LOADED,b,!1),j.addEventListener(google.ima.AdErrorEvent.Type.AD_ERROR,a,!1);var k=!1,l=BoredPanda.Utils.getParameterByName("midroll_time");l||(l=g.duration/2),g.addEventListener("timeupdate",function(){if(!(!this.duration||this.currentTime<=l||!$(this).hasClass("midroll-ad")||$(this).closest(".adContainer").length>0||k)){var a=new google.ima.AdsRequest;BoredPanda.Config.isMobileWidth?a.adTagUrl="https://pubads.g.doubleclick.net/gampad/live/ads?sz=400x300%7C640x480&iu=/46481815/Bp.com_mobile_Long_video_Midroll&impl=s&gdfp_req=1&env=vp&output=vast&unviewed_position_start=1&url="+window.location.href+"&description_url=http%3A%2F%2Fwww.boredpanda.com&correlator="+Math.floor(Date.now()/1e3):a.adTagUrl="https://pubads.g.doubleclick.net/gampad/live/ads?sz=400x300%7C640x480&iu=/46481815/BP.com__desktop_Long_video_Mid-roll&impl=s&gdfp_req=1&env=vp&output=vast&unviewed_position_start=1&url="+window.location.href+"&description_url=http%3A%2F%2Fwww.boredpanda.com&correlator="+Math.floor(Date.now()/1e3),a.linearAdSlotWidth=$(g).width(),a.linearAdSlotHeight=$(g).height(),a.nonLinearAdSlotWidth=$(g).width(),a.nonLinearAdSlotHeight=$(g).height(),j.requestAds(a),k=!0,setTimeout(function(){f()},1e3)}})})}},$(document).ready(function(){BoredPanda.Video.init()})}(),function(){"use strict";window.BoredPanda=window.BoredPanda||{};var a=BoredPanda.UsersTop=BoredPanda.UsersTop||{};a.View=function(){var a=this;a.loading=ko.observable(!1),a.page=ko.observable(1),a.totalPages=ko.observable(1),a.limit=ko.observable(50),a.users=ko.observableArray(),a.filter=ko.observable("month"),a.filtername=ko.observable("monthly");var b=function(a){return a?a.toString().replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1,"):0},c=function(c){a.loading(!0);var d=$.ajax({type:"POST",url:ajax_object.ajax_url,dataType:"json",data:{action:"get_users_top",type:a.filter(),limit:a.limit(),offset:a.limit()*(a.page()-1),findUser:c}}),e=c;d.done(function(d){a.users.removeAll(),$.each(d.data.stats,function(c,d){d.range_points=b(d.range_points),d.total_points=b(d.total_points),d.current=parseInt(e)===parseInt(d.user_id),null===d.rank_change&&(d.rank_change="-"),a.users.push(d)}),a.totalPages(Math.ceil(d.data.total/a.limit())),"all-time"!==a.filter()?a.filtername(a.filter()+"ly"):a.filtername("all time"),a.loading(!1),d.data.page&&a.page(d.data.page),$("tbody:visible .current-user").length>0&&c?$("tbody:visible .current-user")[0].scrollIntoView():$(window).scrollTop(0)})};a.changeFilter=function(b){a.filter(b),a.page(1),c()},a.nextPage=function(){a.page(a.page()+1),c()},a.previousPage=function(){a.page(a.page()-1),c()},a.firstPage=function(){a.page(1),c()},a.lastPage=function(){a.page(a.totalPages()),c()},a.hasPrevious=ko.computed(function(){return 1!==a.page()}),a.hasNext=ko.computed(function(){return a.page()!==a.totalPages()});var d=BoredPanda.Utils.getParameterByName("filter");d&&(a.filter(d),a.filtername(d),"all-time"!==a.filter()?a.filtername(a.filter()+"ly"):a.filtername("all time")),c(BoredPanda.Utils.getParameterByName("user"))},$(document).ready(function(a){window.location.href.indexOf("users-top")>-1&&(BoredPanda.UsersTop.view=BoredPanda.UsersTop.view=new BoredPanda.UsersTop.View,ko.applyBindings(BoredPanda.UsersTop.view,a(".users-top")[0]))})}(),function(){"use strict";window.BoredPanda=window.BoredPanda||{},BoredPanda.SellContent={init:function(){if($(".page-template-sell-your-content").length>0){if($(".page-template-sell-your-content .sell-content-block").length>0){var a=new BoredPanda.SellContentController;ko.applyBindings(a,$(".page-template-sell-your-content .sell-content-block").get(0))}BoredPanda.Config.isLoggedIn?this.trackUser("new",!0):(BoredPanda.Login.form.closeable(!1),BoredPanda.Login.form.show(void 0,this.trackUser("new",!0)))}},trackUser:function(a,b){var c=BoredPanda.Utils.getParameterByName("cnt"),d={action:"user_sell_content_track",postId:c?c:0,status:a,unique:b};$.ajax({type:"POST",url:ajax_object.ajax_url,data:d,dataType:"json"})}},BoredPanda.SellContentController=function(){var a=this;a.acceptedTOS=ko.observable(!1),a.signedMessage=ko.observable(!1),a.terminatedMessage=ko.observable(!1),a.error=ko.observable(!1),a.errorMessage=ko.observable(""),a.terminateButtonText=ko.observable("Terminate my contract"),a.signupButtonText=ko.observable("Sell my content"),a.sellContent=function(){if(a.signedMessage(!1),a.error(!1),!a.acceptedTOS())return a.terminatedMessage(!1),a.error(!0),void a.errorMessage("Please confirm you agree with the Terms of Service by ticking the checkbox.");var b={action:"user_sell_content_track",status:"Signed",email:"true"};a.signupButtonText("Processing...");var c=$.ajax({type:"POST",url:ajax_object.ajax_url,data:b,dataType:"json"});c.done(function(b){a.signupButtonText("Sell my content"),b.success===!0?(BoredPanda.SellContent.trackUser("signed"),a.signedMessage(!0),$(".sell-content-block .signup").hide(),$(".sell-content-block .terminate").show()):(a.error(!0),a.errorMessage("Error processing your request. Please try again."))})},a.terminate=function(){a.terminatedMessage(!1),a.acceptedTOS(!1),a.error(!1);var b={action:"user_sell_content_track",status:"Terminated",email:"true"};a.terminateButtonText("Terminating...");var c=$.ajax({type:"POST",url:ajax_object.ajax_url,data:b,dataType:"json"});c.done(function(b){a.terminateButtonText("Terminate my contract"),b.success===!0?(BoredPanda.SellContent.trackUser("terminated"),a.terminatedMessage(!0),$(".sell-content-block .signup").show(),$(".sell-content-block .terminate").hide()):(a.error(!0),a.errorMessage("Error processing your request. Please try again."))})}},$(document).ready(function(){BoredPanda.SellContent.init()})}(),function(){"use strict";window.BoredPanda=window.BoredPanda||{},BoredPanda.Partners={},BoredPanda.Partners.ViewModel=function(){var a=this;a.email=ko.observable(""),a.accountingEmail=ko.observable(""),a.remark=ko.observable(""),a.profiles=ko.observable(""),a.category=ko.observable(""),a.name=ko.observable(""),a.share=ko.observable(""),a.campaignQuery=ko.observable("?utm_source=twitter&utm_medium=link&utm_campaign=XXX"),a.errorMessage=ko.observable(""),a.successMessage=ko.observable(""),a.createButtonText=ko.observable("Create"),a.info=ko.observable(""),a.emailHtml=ko.observable(""),a.titleLike=ko.observable(""),a.utmCampaign=ko.observable(""),a.weeks=ko.observable(2),a.filterButtonText=ko.observable("Filter"),a.filteredPosts=ko.observable([]),a.createPartner=function(){if(a.errorMessage(""),a.successMessage(""),a.info(""),a.emailHtml(""),!a.email())return void a.errorMessage("Please enter email.");if(!a.name())return void a.errorMessage("Please enter campaign name.");if(!a.share())return void a.errorMessage("Please enter share.");if(!a.campaignQuery())return void a.errorMessage("Please enter campaign query.");var b={action:"partner_create",email:a.email(),accountingEmail:a.accountingEmail(),name:a.name(),share:a.share(),remark:a.remark(),profiles:a.profiles(),campaignQuery:a.campaignQuery()};a.createButtonText("Creating...");var c=$.ajax({type:"POST",url:ajax_object.ajax_url,data:b,dataType:"json"});c.done(function(b){a.createButtonText("Create"),b.success===!0?(a.successMessage("Partner successfully created!"),a.info(b.result.output.replace(/(\r\n|\n|\r)/gm,"<br>")),a.emailHtml(b.result.html),a.email(""),a.accountingEmail(""),a.name(""),a.remark(""),a.profiles(""),a.share(""),a.campaignQuery("?utm_source=twitter&utm_medium=link&utm_campaign=XXX")):(a.errorMessage("Error creating partner!"),a.info(b.data.result.output.replace(/(\r\n|\n|\r)/gm,"<br>")))})},a.addShareBracket=function(a,b){var c=$(b.target);$('<div class="share-bracket"><input type="number" class="share" placeholder="Share %" value=""><input type="number" class="clicks" placeholder="Clicks" value=""> </div>').insertAfter(c.closest("tr").find(".share-bracket:last"))},a.openModal=function(a,b){var c=$(b.target),d=c.data("target");$("#"+d).modal()},a.closeModal=function(a,b){var c=$(b.target);c.closest(".modal").modal("hide")},a.updatePartner=function(a,b){for(var c=$(b.target),d=c.closest("tr").attr("data-id"),e=c.closest("tr").find(".name").val(),f=c.closest("tr").find(".accounting-email").val(),g=c.closest("tr").find(".share").val(),h=c.closest("tr").find(".remark").val(),i=c.closest("tr").find(".profiles").val(),j=c.closest("tr").find(".share-bracket"),k=c.closest("tr").find(".status").val(),l=[],m=!1,n=0;n<j.length;n++){var o=$(j[n]).find("input");o[0].value&&void 0!==o[0].value&&("0"===o[1].value&&(m=!0),l.push({share:o[0].value,clicks:o[1].value}))}if(!m&&l.length>0)return alert("Please enter 0 clicks bracket."),!1;if(m&&1===l.length)return alert("Can't be just 0 clicks bracket "),!1;c.html("Updating...");var p={action:"partner_update",partner_id:d,name:e,accountingEmail:f,remark:h,profiles:i,share:g,brackets:l,status:k},q=BoredPanda.Utils.wpAjax(p);q.done(function(a){a.success?(c.html("Updated"),window.location.reload()):(c.html("Failed"),c.addClass("failed"),void 0!==a.error&&alert(a.error))})},a.getTopLists=function(){var b={action:"partner_open_lists_filter",title:a.titleLike(),category:a.category(),utmCampaign:a.utmCampaign(),weeks:a.weeks()};a.filterButtonText("Fetching...");var c=$.ajax({type:"POST",url:ajax_object.ajax_url,data:b,dataType:"json"});c.done(function(b){b.success&&(a.filteredPosts(b.posts),a.filterButtonText("Fetch"))})}},BoredPanda.Partners.LinkGenerator=function(){var a=this;a.link=ko.observable(""),a.source=ko.observable(""),a.generatedLink=ko.observable(""),a.utmCampaign=ko.observable(""),a.error=ko.observable(!1),a.generateLink=function(){a.error(!1),a.utmCampaign()||a.error(!0);var b=a.link().split("?")[0],c=a.source()||"twitter";a.generatedLink(b+"?utm_source="+c+"&utm_medium=link&utm_campaign="+a.utmCampaign())}},BoredPanda.Partners.Dashboard=function(){var a=this;a.partner=ko.observable(""),a.source=ko.observable(),a.sources=ko.observable([]),a.hideEstablishedPartner=function(a,b){var c=confirm("Are you sure?");if(c===!0){var d=$(b.target).data("id"),e={action:"hide_established_partner",partner_id:d},f=$.ajax({type:"POST",url:ajax_object.ajax_url,data:e,dataType:"json"});f.success(function(){$(b.target).closest("tr").hide()})}},a.initSources=function(){var b=JSON.parse(partnersSources);"undefined"!=typeof b[a.partner()]?a.sources(JSON.parse(partnersSources)[a.partner()]):a.sources([])}},BoredPanda.Partners.PartnershipForm=function(){var a=this;a.captcha=ko.observable(""),a.name=ko.observable(""),a.email=ko.observable(""),a.utm=ko.observable(""),a.source=ko.observable(""),a.comment=ko.observable(""),a.billingCountry=ko.observable(""),a.pages=ko.observableArray([{page:"",type:"main"},{page:"",type:"sub"},{page:"",type:"sub"}]),a.countries=ko.observable([{name:"Afghanistan",code:"AF"},{name:"Åland Islands",code:"AX"},{name:"Albania",code:"AL"},{name:"Algeria",code:"DZ"},{name:"American Samoa",code:"AS"},{name:"Andorra",code:"AD"},{name:"Angola",code:"AO"},{name:"Anguilla",code:"AI"},{name:"Antarctica",code:"AQ"},{name:"Antigua and Barbuda",code:"AG"},{name:"Argentina",code:"AR"},{name:"Armenia",code:"AM"},{name:"Aruba",code:"AW"},{name:"Australia",code:"AU"},{name:"Austria",code:"AT"},{name:"Azerbaijan",code:"AZ"},{name:"Bahamas",code:"BS"},{name:"Bahrain",code:"BH"},{name:"Bangladesh",code:"BD"},{name:"Barbados",code:"BB"},{name:"Belarus",code:"BY"},{name:"Belgium",code:"BE"},{name:"Belize",code:"BZ"},{name:"Benin",code:"BJ"},{name:"Bermuda",code:"BM"},{name:"Bhutan",code:"BT"},{name:"Bolivia",code:"BO"},{name:"Bosnia and Herzegovina",code:"BA"},{name:"Botswana",code:"BW"},{name:"Bouvet Island",code:"BV"},{name:"Brazil",code:"BR"},{name:"British Indian Ocean Territory",code:"IO"},{name:"Brunei Darussalam",code:"BN"},{name:"Bulgaria",code:"BG"},{name:"Burkina Faso",code:"BF"},{name:"Burundi",code:"BI"},{name:"Cambodia",code:"KH"},{name:"Cameroon",code:"CM"},{name:"Canada",code:"CA"},{name:"Cape Verde",code:"CV"},{name:"Cayman Islands",code:"KY"},{name:"Central African Republic",code:"CF"},{name:"Chad",code:"TD"},{name:"Chile",code:"CL"},{name:"China",code:"CN"},{name:"Christmas Island",code:"CX"},{name:"Cocos (Keeling) Islands",code:"CC"},{name:"Colombia",code:"CO"},{name:"Comoros",code:"KM"},{name:"Congo",code:"CG"},{name:"Congo, The Democratic Republic of the Congo",code:"CD"},{name:"Cook Islands",code:"CK"},{name:"Costa Rica",code:"CR"},{name:"Cote D'Ivoire",code:"CI"},{name:"Croatia",code:"HR"},{name:"Cuba",code:"CU"},{name:"Cyprus",code:"CY"},{name:"Czech Republic",code:"CZ"},{name:"Denmark",code:"DK"},{name:"Djibouti",code:"DJ"},{name:"Dominica",code:"DM"},{name:"Dominican Republic",code:"DO"},{name:"Ecuador",code:"EC"},{name:"Egypt",code:"EG"},{name:"El Salvador",code:"SV"},{name:"Equatorial Guinea",code:"GQ"},{name:"Eritrea",code:"ER"},{name:"Estonia",code:"EE"},{name:"Ethiopia",code:"ET"},{name:"Falkland Islands (Malvinas)",code:"FK"},{name:"Faroe Islands",code:"FO"},{name:"Fiji",code:"FJ"},{name:"Finland",code:"FI"},{name:"France",code:"FR"},{name:"French Guiana",code:"GF"},{name:"French Polynesia",code:"PF"},{name:"French Southern Territories",code:"TF"},{name:"Gabon",code:"GA"},{name:"Gambia",code:"GM"},{name:"Georgia",code:"GE"},{name:"Germany",code:"DE"},{name:"Ghana",code:"GH"},{name:"Gibraltar",code:"GI"},{name:"Greece",code:"GR"},{name:"Greenland",code:"GL"},{name:"Grenada",code:"GD"},{name:"Guadeloupe",code:"GP"},{name:"Guam",code:"GU"},{name:"Guatemala",code:"GT"},{name:"Guernsey",code:"GG"},{name:"Guinea",code:"GN"},{name:"Guinea-Bissau",code:"GW"},{name:"Guyana",code:"GY"},{name:"Haiti",code:"HT"},{name:"Heard Island and Mcdonald Islands",code:"HM"},{name:"Holy See (Vatican City State)",code:"VA"},{name:"Honduras",code:"HN"},{name:"Hong Kong",code:"HK"},{name:"Hungary",code:"HU"},{name:"Iceland",code:"IS"},{name:"India",code:"IN"},{name:"Indonesia",code:"ID"},{name:"Iran, Islamic Republic Of",code:"IR"},{name:"Iraq",code:"IQ"},{name:"Ireland",code:"IE"},{name:"Isle of Man",code:"IM"},{name:"Israel",code:"IL"},{name:"Italy",code:"IT"},{name:"Jamaica",code:"JM"},{name:"Japan",code:"JP"},{name:"Jersey",code:"JE"},{name:"Jordan",code:"JO"},{name:"Kazakhstan",code:"KZ"},{name:"Kenya",code:"KE"},{name:"Kiribati",code:"KI"},{name:"Korea, Democratic People'S Republic of",code:"KP"},{name:"Korea, Republic of",code:"KR"},{name:"Kuwait",code:"KW"},{name:"Kyrgyzstan",code:"KG"},{name:"Lao People'S Democratic Republic",code:"LA"},{name:"Latvia",code:"LV"},{name:"Lebanon",code:"LB"},{name:"Lesotho",code:"LS"},{name:"Liberia",code:"LR"},{name:"Libyan Arab Jamahiriya",code:"LY"},{name:"Liechtenstein",code:"LI"},{name:"Lithuania",code:"LT"},{name:"Luxembourg",code:"LU"},{name:"Macao",code:"MO"},{name:"Macedonia, The Former Yugoslav Republic of",code:"MK"},{name:"Madagascar",code:"MG"},{name:"Malawi",code:"MW"},{name:"Malaysia",code:"MY"},{name:"Maldives",code:"MV"},{name:"Mali",code:"ML"},{name:"Malta",code:"MT"},{name:"Marshall Islands",code:"MH"},{name:"Martinique",code:"MQ"},{name:"Mauritania",code:"MR"},{name:"Mauritius",code:"MU"},{name:"Mayotte",code:"YT"},{name:"Mexico",code:"MX"},{name:"Micronesia, Federated States of",code:"FM"},{name:"Moldova, Republic of",code:"MD"},{name:"Monaco",code:"MC"},{name:"Mongolia",code:"MN"},{name:"Montenegro",code:"ME"},{name:"Montserrat",code:"MS"},{name:"Morocco",code:"MA"},{name:"Mozambique",code:"MZ"},{name:"Myanmar",code:"MM"},{name:"Namibia",code:"NA"},{name:"Nauru",code:"NR"},{name:"Nepal",code:"NP"},{name:"Netherlands",code:"NL"},{name:"Netherlands Antilles",code:"AN"},{name:"New Caledonia",code:"NC"},{name:"New Zealand",code:"NZ"},{name:"Nicaragua",code:"NI"},{name:"Niger",code:"NE"},{name:"Nigeria",code:"NG"},{name:"Niue",code:"NU"},{name:"Norfolk Island",code:"NF"},{name:"Northern Mariana Islands",code:"MP"},{name:"Norway",code:"NO"},{name:"Oman",code:"OM"},{name:"Pakistan",code:"PK"},{name:"Palau",code:"PW"},{name:"Palestinian Territory, Occupied",code:"PS"},{name:"Panama",code:"PA"},{name:"Papua New Guinea",code:"PG"},{name:"Paraguay",code:"PY"},{name:"Peru",code:"PE"},{name:"Philippines",code:"PH"},{name:"Pitcairn",code:"PN"},{name:"Poland",code:"PL"},{name:"Portugal",code:"PT"},{name:"Puerto Rico",code:"PR"},{name:"Qatar",code:"QA"},{name:"Reunion",code:"RE"},{name:"Romania",code:"RO"},{name:"Russian Federation",code:"RU"},{name:"RWANDA",code:"RW"},{name:"Saint Helena",code:"SH"},{name:"Saint Kitts and Nevis",code:"KN"},{name:"Saint Lucia",code:"LC"},{name:"Saint Pierre and Miquelon",code:"PM"},{name:"Saint Vincent and the Grenadines",code:"VC"},{name:"Samoa",code:"WS"},{name:"San Marino",code:"SM"},{name:"Sao Tome and Principe",code:"ST"},{name:"Saudi Arabia",code:"SA"},{name:"Senegal",code:"SN"},{name:"Serbia",code:"RS"},{name:"Seychelles",code:"SC"},{name:"Sierra Leone",code:"SL"},{name:"Singapore",code:"SG"},{name:"Slovakia",code:"SK"},{name:"Slovenia",code:"SI"},{name:"Solomon Islands",code:"SB"},{name:"Somalia",code:"SO"},{name:"South Africa",code:"ZA"},{name:"South Georgia and the South Sandwich Islands",code:"GS"},{name:"Spain",code:"ES"},{name:"Sri Lanka",code:"LK"},{name:"Sudan",code:"SD"},{name:"Suriname",code:"SR"},{name:"Svalbard and Jan Mayen",code:"SJ"},{name:"Swaziland",code:"SZ"},{name:"Sweden",code:"SE"},{name:"Switzerland",code:"CH"},{name:"Syrian Arab Republic",code:"SY"},{name:"Taiwan, Province of China",code:"TW"},{name:"Tajikistan",code:"TJ"},{name:"Tanzania, United Republic of",code:"TZ"},{name:"Thailand",code:"TH"},{name:"Timor-Leste",code:"TL"},{name:"Togo",code:"TG"},{name:"Tokelau",code:"TK"},{name:"Tonga",code:"TO"},{name:"Trinidad and Tobago",code:"TT"},{name:"Tunisia",code:"TN"},{name:"Turkey",code:"TR"},{name:"Turkmenistan",code:"TM"},{name:"Turks and Caicos Islands",code:"TC"},{name:"Tuvalu",code:"TV"},{name:"Uganda",code:"UG"},{name:"Ukraine",code:"UA"},{name:"United Arab Emirates",code:"AE"},{name:"United Kingdom",code:"GB"},{name:"United States",code:"US"},{name:"United States Minor Outlying Islands",code:"UM"},{name:"Uruguay",code:"UY"},{name:"Uzbekistan",code:"UZ"},{name:"Vanuatu",code:"VU"},{name:"Venezuela",code:"VE"},{name:"Viet Nam",code:"VN"},{name:"Virgin Islands, British",code:"VG"},{name:"Virgin Islands, U.S.",code:"VI"},{name:"Wallis and Futuna",code:"WF"},{name:"Western Sahara",code:"EH"},{name:"Yemen",code:"YE"},{name:"Zambia",code:"ZM"},{name:"Zimbabwe",code:"ZW"}]),a.successMessage=ko.observable(!1),a.errorMessage=ko.observable(!1),a.loading=ko.observable(!1),a.submit=function(){if(!a.loading()){if(a.successMessage(""),a.errorMessage(""),!a.name())return void a.errorMessage(BoredPanda.Translate.Partners.name_error);if(!a.email())return void a.errorMessage(BoredPanda.Translate.Partners.email_error);if(!a.validateEmail(a.email()))return void a.errorMessage(BoredPanda.Translate.Partners.valid_email_error);if(!a.billingCountry())return void a.errorMessage(BoredPanda.Translate.Partners.country_error);var b=a.pages()[0].page;if(!b)return void a.errorMessage(BoredPanda.Translate.Partners.page_error);for(var c in a.pages())if(a.pages()[c].page&&-1===a.pages()[c].page.indexOf("twitter.com/"))return void a.errorMessage(BoredPanda.Translate.Partners.page_format_error);if(a.utm()||(a.utm(b.split("twitter.com/")[1].split("/")[0].replace(/[^0-9a-z]/gi,"")),a.source("twitter")),!a.utm())return void a.errorMessage(BoredPanda.Translate.Partners.utm_error);if(!a.validateUTM(a.utm()))return void a.errorMessage(BoredPanda.Translate.Partners.valid_utm_error);if(10!==parseInt(a.captcha()))return void a.errorMessage(BoredPanda.Translate.Partners.captcha_error);var d=$.extend({},this);delete d.loading,delete d.successMessage,delete d.errorSend,delete d.errorMessage,delete d.countries;var e={action:"partnership_register",data:ko.toJSON(d)};a.loading(!0);var f=$.ajax({type:"POST",url:ajax_object.ajax_url,data:e,dataType:"json"});f.done(function(b){a.loading(!1),b.success===!0?a.successMessage(BoredPanda.Translate.Partners.success):void 0!==b.data&&b.data.message?a.errorMessage(b.data.message):a.errorMessage(BoredPanda.Translate.Partners.error)})}},a.validateEmail=function(a){var b=/\S+@\S+\.\S+/;return b.test(a)},a.validateUTM=function(a){var b=/^[a-zA-Z0-9_]+$/;return b.test(a)},a.addPage=function(){a.pages().length<15&&a.pages.push({page:"",type:"sub"})},a.parsePage=function(b,c){var d=c.target.value;-1!==d.indexOf("facebook.com/")?(a.utm()||a.utm(d.split("facebook.com/")[1].split("/")[0].replace(/[^0-9a-z]/gi,"")),a.source("facebook")):-1!==d.indexOf("twitter.com/")&&(a.utm()||a.utm(d.split("twitter.com/")[1].split("/")[0].replace(/[^0-9a-z]/gi,"")),a.source("twitter"))}},$(document).ready(function(){$(".page-template-partners-management").length>0&&(BoredPanda.Config.isStaffMember?(BoredPanda.Partners.viewModel=new BoredPanda.Partners.ViewModel,ko.applyBindings(BoredPanda.Partners.viewModel,$(".page-template-partners-management .left-content-column").get(0)),$("body").on("click",function(a){$(a.target).closest(".partner-modal").length<1&&!$(a.target).hasClass("partner-edit")&&$(".partner-modal").modal("hide")})):BoredPanda.Config.isLoggedIn||(BoredPanda.Login.form.closeable(!1),BoredPanda.Login.form.show(window.location.href,void 0,BoredPanda.Translate.Signup.please_login))),$(".page-template-partners-dashboard").length>0&&BoredPanda.Config.isStaffMember?(BoredPanda.Partners.dashboard=new BoredPanda.Partners.Dashboard,ko.applyBindings(BoredPanda.Partners.dashboard,$(".page-template-partners-dashboard .left-content-column").get(0)),BoredPanda.Partners.dashboard.initSources(),BoredPanda.Partners.dashboard.source(BoredPanda.Utils.getParameterByName("source"))):!BoredPanda.Config.isLoggedIn&&$(".page-template-partners-dashboard").length>0&&(BoredPanda.Login.form.closeable(!1),BoredPanda.Login.form.show(window.location.href,void 0,BoredPanda.Translate.Signup.please_login)),$(".page-template-utm-generator .utm-generator").length>0&&(BoredPanda.Partners.linkGenerator=new BoredPanda.Partners.LinkGenerator,BoredPanda.Partners.linkGenerator.utmCampaign(partnerName),ko.applyBindings(BoredPanda.Partners.linkGenerator,$(".page-template-utm-generator .utm-generator").get(0))),$(".page-template-partnership .contact").length>0&&(BoredPanda.Partners.partnershipForm=new BoredPanda.Partners.PartnershipForm,ko.applyBindings(BoredPanda.Partners.partnershipForm,$(".page-template-partnership .contact").get(0)))})}(),function(){"use strict";window.BoredPanda=window.BoredPanda||{},BoredPanda.PostsFilter={},BoredPanda.PostsFilter.ViewModel=function(){var a=this;a.dateType=ko.observable(""),a.dateRange=ko.observable(""),a.dateFrom=ko.observable(""),a.dateTo=ko.observable(""),a.keyword=ko.observable(""),a.category=ko.observable(""),a.posts=ko.observable([]),a.order=ko.observable("trending"),a.showPositions=ko.observable(!1),a.showFacebookClicks=ko.observable(BoredPanda.Config.isStaffMember),a.filterButtonText=ko.observable("Filter"),a.emptyPostsError=ko.observable(!1),a.loadingSpinner=ko.observable(!1),a.exportLimit=ko.observable(""),a.utmLink=ko.observable(""),a.postType=ko.observable(""),a.cpcQuery=ko.observable(!1),a.limit=ko.observable(0),a.initPicker=function(){var b;b=a.cpcQuery()?moment().subtract(2,"years"):moment().subtract(6,"days");var c=moment();$(".rangepicker").daterangepicker({startDate:b,endDate:c,ranges:{Yesterday:[moment().subtract(1,"days"),moment().subtract(1,"days")],"Last 7 Days":[moment().subtract(6,"days"),moment()],"Last 30 Days":[moment().subtract(29,"days"),moment()],"This Month":[moment().startOf("month"),moment().endOf("month")],"Last Month":[moment().subtract(1,"month").startOf("month"),moment().subtract(1,"month").endOf("month")],"Last Year":[moment().subtract(1,"year"),moment()]}},a.changeDate),a.changeDate(b,c),a.filter(!0)},a.changeDate=function(b,c){a.dateFrom(b.format("MM/DD/YYYY")),a.dateTo(c.format("MM/DD/YYYY")),a.dateRange(a.dateFrom()+" - "+a.dateTo())},a.resetFilter=function(){a.order("trending"),a.keyword(""),a.category(""),a.postType(""),a.filter(!0)},a.filter=function(b){a.loadingSpinner(!0),a.emptyPostsError(!1),a.posts([]),"recent"!==a.order()&&a.showPositions(!0),b!==!0&&"trending"===a.order()&&a.order("views");var c={action:"filter_posts_for_users",dateFrom:a.dateFrom(),dateTo:a.dateTo(),keyword:a.keyword(),category:a.category(),order:a.order(),limit:a.limit(),cpcQuery:a.cpcQuery(),postType:a.postType()},d=$.ajax({type:"POST",url:ajax_object.ajax_url,data:c,dataType:"json"});a.filterButtonText("Filtering..."),d.done(function(b){b.data.length>0?(a.posts(b.data),a.utmLink(b.utm)):a.emptyPostsError(!0),a.filterButtonText("Filter"),a.loadingSpinner(!1)})},a.openModal=function(){$("#exportOptions").modal()},a.closeModal=function(){$("#exportOptions").modal("hide")},a.exportCsv=function(){var b="Post Link;Post Name;Post Views;Post date;Instant Article\n";a.utmLink()&&"?"!==a.utmLink()[0]&&a.utmLink("?"+a.utmLink());var c=a.exportLimit();(c>a.posts().length||!c)&&(c=a.posts().length);for(var d=0;c>d;d++)b+=a.posts()[d].post_url+a.utmLink()+";",b+=a.posts()[d].post_title+";",b+=a.posts()[d].pageviews+";",b+=a.posts()[d].post_date+";",b+="true"===a.posts()[d].instant_article?"Yes\n":"No\n";a.closeModal();var e=document.createElement("a"),f="text/csv",g="BoredPanda_Top_posts.csv";if(navigator.msSaveBlob)return navigator.msSaveBlob(new Blob([b],{type:f}),g);if("download"in e)return e.href="data:"+f+","+encodeURIComponent(b),e.setAttribute("download",g),document.body.appendChild(e),e.click(),document.body.removeChild(e),!0;var h=document.createElement("iframe");return document.body.appendChild(h),h.src="data:"+f+","+encodeURIComponent(b),setTimeout(function(){document.body.removeChild(h)},333),!0}},$(document).ready(function(){$(".page-template-top-posts").length>0?BoredPanda.Config.isLoggedIn?(BoredPanda.PostsFilter.viewModel=new BoredPanda.PostsFilter.ViewModel,ko.applyBindings(BoredPanda.PostsFilter.viewModel,$(".page-template-top-posts .left-content-column").get(0)),BoredPanda.PostsFilter.viewModel.initPicker()):(BoredPanda.Login.form.closeable(!1),BoredPanda.Login.form.show(void 0,void 0,"Please log in to continue")):$(".page-template-recent-top-posts").length>0&&(BoredPanda.PostsFilter.viewModel=new BoredPanda.PostsFilter.ViewModel,ko.applyBindings(BoredPanda.PostsFilter.viewModel,$(".page-template-recent-top-posts .left-content-column").get(0)),BoredPanda.PostsFilter.viewModel.limit(50),BoredPanda.PostsFilter.viewModel.cpcQuery("true"),BoredPanda.PostsFilter.viewModel.initPicker())})}();